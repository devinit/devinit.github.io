"use strict";(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[295],{2295:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ne});var a=r(7294),n=r(3324),o=r(4925),i=r(9996),s=r.n(i),c=r(4942),l=r(2982);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p,f,m,y=["January","February","March","April","May","June","July","August","September","October","November","December"],g=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"quarter",r=(0,l.Z)(new Set(e.map((function(e){return e.metric}))));return(0,l.Z)(new Set(e.map((function(e){return e.date})))).sort().reduce((function(a,o){var i="quarter"===t?function(e){try{var t=new Date(e);return[Math.floor((t.getMonth()+3)/3),t.getFullYear()]}catch(e){return[0,0]}}(o):function(e){try{var t=new Date(e);return[g[t.getMonth()],t.getFullYear()]}catch(e){return["",0]}}(o),s=(0,n.Z)(i,2),c=s[0],l=s[1],u="quarter"===t?"".concat(l," Q").concat(c):c,d=a.find((function(e){return e.quarter===u})),p=d||{quarter:u,year:l};return r.forEach((function(t){var r=e.find((function(e){return e.date===o&&t===e.metric}));if(r){if(d?p[t]+=r.value:p[t]=r.value,r.target)p.Target=r.target;else{var a=function(e,t,r){var a=new Date(r).getFullYear(),n=e.find((function(e){return t===e.metric&&e.year===a&&"Annual"===e.quarter}));return n&&n.target||null}(e,t,o);a&&(p.Target=a)}r.narrative&&(p["".concat(t," - narrative")]=r.narrative)}})),d||a.push(p),a}),[])},h=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"GBP"}).format(e)},b=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"average",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"quarter",n=e.filter((function(e){var r=e.metric;return t.includes(r)})),o=n.reduce((function(e,t){if(!e.find((function(e){return e.metric===t.metric&&e.year===t.year}))){var a=n.filter((function(e){var r=e.metric,a=e.year,n=e.value;return r===t.metric&&a===t.year&&"number"==typeof n})),o=a.reduce((function(e,t){return e+t.value}),0);if("average"===r){var i=o/a.length;e.push(d(d({},t),{},{value:i,quarter:"",narrative:""}))}else e.push(d(d({},t),{},{value:o,quarter:"",narrative:""}))}return e}),[]);return v(o,a)},x=r(168),w=r(4184),A=r.n(w),O=r(1893),j=r(5861),N=r(7757),S=r.n(N),P=function(e){var t=e.parentElement;if(t){var r=t.getElementsByClassName("media-caption chart-event-caption");Array.prototype.filter.call(r,(function(e){return e.remove()}))}},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"quarter";return{onClick:function(a){var n=a.data,o=a.chart,i=a.params;if(i.data){var c=i.data.year,l=v(n.filter((function(t){var r=t.metric,a=t.year;return e.includes(r)&&c===a})),r);D(o),o.setOption(s()(t,{dataset:{source:l,dimensions:["quarter"].concat(e)}}))}},onHover:function(e){var t=e.chart,r=e.params;if(r.data){var a=r.seriesName,n=r.data["".concat(a," - narrative")];n&&function(e,t){var r=e.parentElement;if(r){P(e);var a=document.createElement("figcaption");a.classList.add("media-caption","chart-event-caption"),t.split("\n").forEach((function(e){var t=document.createElement("p");t.innerHTML=e,a.appendChild(t)})),r.appendChild(a)}}(t.getDom(),n)}},onBlur:function(e){var t=e.chart;return P(t.getDom())}}},E=["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],I={left:"3%",right:"4%",bottom:"3%",containLabel:!0},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getOption(),a=e.getDom().getElementsByTagName("canvas")[0];a&&a.addEventListener("click",(function n(){e.setOption(r,!t),a.removeEventListener("click",n)}))},L=function(e){var t=e.prefix,r=void 0===t?"":t,a=e.suffix,n=void 0===a?"":a,o=e.currency;return function(e){var t=e.value,a=e.seriesName;if(t&&a&&t[a]){var i=t[a];"number"==typeof i&&(i=Math.round(100*i)/100);var s=o?h(i):i;return"".concat(r).concat(s).concat(n)}return"No Data"}},C=function(e){return{show:!0,position:e.position||"top",formatter:function(t){var r=t.value[t.dimensionNames[t.encode.y[0]]];if("number"==typeof r){var a=Math.round(100*r)/100,n=e.currency?h(a):a;return"".concat(e.prefix||"").concat(n).concat(e.suffix||"")}var o=e.currency?h(r):r;return"".concat(e.prefix||"").concat(o).concat(e.suffix||"")}}},T={legend:{top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{trigger:"axis",textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},toolbox:{showTitle:!1,feature:{saveAsImage:{title:"Save as image",pixelRatio:2}},right:20,tooltip:{show:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif",formatter:function(e){return"<div>".concat(e.title,"</div>")}}}},xAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}}},Z=function(){var e=(0,j.Z)(S().mark((function e(){var t,a,n,o,i,s,c,l,u,d,p,f,m;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(963),r.e(367),r.e(814),r.e(103)]).then(r.bind(r,4103));case 2:return t=e.sent,e.next=5,Promise.all([r.e(963),r.e(367),r.e(969),r.e(814),r.e(844)]).then(r.bind(r,5844));case 5:return a=e.sent,n=a.BarChart,o=a.LineChart,i=a.PieChart,e.next=11,Promise.all([r.e(963),r.e(367),r.e(969),r.e(780)]).then(r.bind(r,9780));case 11:return s=e.sent,c=s.TitleComponent,l=s.TooltipComponent,u=s.GridComponent,d=s.LegendComponent,p=s.DatasetComponent,e.next=19,Promise.all([r.e(963),r.e(465)]).then(r.bind(r,3465));case 19:return f=e.sent,m=f.CanvasRenderer,t.use([c,l,u,d,p,n,o,i,m]),e.abrupt("return",t);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,j.Z)(S().mark((function e(t,r){var a,n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:return a=e.sent,n=a.init,(o=n(t)).setOption(s()(T,r)),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),G=function(){var e=(0,j.Z)(S().mark((function e(t){var r,a,n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:r=e.sent,a=r.init,n=a(t),o={color:E,tooltip:{trigger:"axis"},legend:{data:["Step Start","Step Middle","Step End"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"Step Start",type:"line",step:"start",data:[120,132,101,134,90,230,210]},{name:"Step Middle",type:"line",step:"middle",data:[220,282,201,234,290,430,410]},{name:"Step End",type:"line",step:"end",data:[450,432,401,454,590,530,510]}]},n.setOption(s()(T,o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,j.Z)(S().mark((function e(t){var r,a,n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:r=e.sent,a=r.init,n=a(t),o={color:E,legend:{},tooltip:{},dataset:{dimensions:["product","2015","2016","2017"],source:[{product:"Matcha Latte",2015:43.3,2016:85.8,2017:93.7},{product:"Milk Tea",2015:83.1,2016:73.4,2017:55.1},{product:"Cheese Cocoa",2015:86.4,2016:65.2,2017:82.5},{product:"Walnut Brownie",2015:72.4,2016:53.9,2017:39.1}]},xAxis:{type:"category"},yAxis:{},series:[{type:"bar"},{type:"bar"},{type:"bar"}]},n.setOption(s()(T,o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,j.Z)(S().mark((function e(t){var r,a,n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:r=e.sent,a=r.init,n=a(t),o={color:E,legend:{top:"bottom"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:{show:!1},yAxis:{show:!1},series:[{name:"Rose",type:"pie",radius:"65%",center:["50%","50%"],label:{show:!0},data:[{value:40,name:"rose 1"},{value:38,name:"rose 2"},{value:32,name:"rose 3"},{value:30,name:"rose 4"}]}]},n.setOption(s()(T,o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=O.ZP.div(p||(p=(0,x.Z)(["\n  min-height: 100% !important;\n"]))),_=function(e){var t=(0,a.useRef)(null),r=(0,a.useState)(!0),o=(0,n.Z)(r,2),i=o[0],s=o[1];return(0,a.useEffect)((function(){if(t.current)if(e.demo)switch(e.type){case"line":G(t.current);break;case"bar":M(t.current);break;case"pie":R(t.current)}else q(t.current,e.options).then((function(t){s(!1),e.onClick&&t.on("click",(function(r){e.onClick({data:e.data,chart:t,params:r})})),e.onHover&&t.on("mouseover",(function(r){e.onHover({data:e.data,chart:t,params:r})})),e.onBlur&&t.on("mouseout",(function(r){e.onBlur({data:e.data,chart:t,params:r})}))}))}),[]),a.createElement("div",{className:A()("chart-container chart-container--full",{"chart-container--loading":i})},a.createElement(F,{className:"charts__chart"},a.createElement("div",{ref:t,style:{height:e.height}}),i?a.createElement("div",{className:"chart-loading"},a.createElement("div",{className:"chart-loading__block"},a.createElement("div",null),a.createElement("div",null),a.createElement("div",null),a.createElement("div",null))):null))};_.defaultProps={height:"300px",type:"line"};var H=function(e){return a.createElement("div",{className:"card card--offset"},a.createElement("div",{className:"card__body"},e.meta?a.createElement("span",{className:"card__meta"},e.meta):null,e.title?a.createElement("h3",{className:"card__title"},e.title):null,e.children))},B=O.ZP.span.attrs((function(){return{className:"card__meta"}}))(f||(f=(0,x.Z)(["\n  font-size: 1.3rem;\n"]))),W=O.ZP.h3.attrs((function(){return{className:"card__title"}}))(m||(m=(0,x.Z)(["\n  font-size: 3rem;\n  margin-bottom: 0;\n"]))),J=function(e){var t=e.columns,r=e.children,n=e.className;return a.createElement("div",{className:A()("l-".concat(t,"up"),n)},r)};J.defaultProps={columns:3};var z,Q=function(e){var t=e.children;return a.createElement("figcaption",{className:"media-caption"},t)},U=O.ZP.button(z||(z=(0,x.Z)(["\n  padding: 0.8rem;\n"]))),Y=function(e){var t=(0,a.useState)(!1),r=(0,n.Z)(t,2),o=r[0],i=r[1];return a.createElement("div",{className:"media-caption__hidden"},a.createElement(U,{className:"button",onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)}},e.buttonCaption),o?a.createElement(Q,null,e.children):null)},K=r(6357),V=function(e){var t=e.year,r=e.quarter,i=e.department,c=(0,o.Z)(e,["year","quarter","department"]),l=(0,a.useState)(c.data),u=(0,n.Z)(l,2),d=u[0],p=u[1];(0,a.useEffect)((function(){p(function(e,t){var r=t.year,a=t.quarter,n=t.department;return e.filter((function(e){return!n||e.department===n})).filter((function(e){return r&&!a?e.year===r:a&&!r?e.quarter==="Q".concat(a):!r||!a||e.year===r&&e.quarter==="Q".concat(a)}))}(c.data,{year:t,quarter:r,department:i}))}),[c.data.length]);var f=function(e){if(e.data&&e.options){var t=e.data(d),r=s()(e.options,{dataset:{source:t}});return a.createElement(_,{options:r,height:e.height||"250px",data:d,onClick:e.onClick,onHover:e.onHover,onBlur:e.onBlur})}return a.createElement(_,{demo:!0,options:{title:{text:"THIS IS A DEMO CHART"}},height:"250px",data:d,onClick:e.onClick,onHover:e.onHover,onBlur:e.onBlur})},m=function(e){var t=e.meta,r=e.chart,n=(0,o.Z)(e,["meta","chart"]),i=n.title&&"function"==typeof n.title?n.title(d):n.title;if(t&&!i&&!r)return a.createElement("div",{key:n.id,className:"m-stat__title"},t);var s=n.info&&"function"==typeof n.info?n.info(d):n.info;return n.styled?a.createElement(H,{key:n.id},t?a.createElement(B,null,t):null,i?a.createElement(W,null,i):null,r?f(r):null,s?a.createElement(Y,{buttonCaption:"Narrative"},s.split("\n").map((function(e,t){return a.createElement("p",{key:"".concat(t)},e)}))):null):a.createElement(H,{key:n.id,meta:t,title:i},r?f(r):null)};return a.createElement(K.$,{title:c.title,id:c.id},d.length?c.grids.map((function(e){var t=e.id,r=e.columns,n=e.content,o=e.className;return a.createElement(J,{key:t,columns:r||1,className:o},n.map(m))})):a.createElement("div",null,"Loading..."))},$=r(9483),X=[{id:"1",columns:2,content:[{id:"project-time",meta:"Proportion of staff time spent on projects",styled:!0,chart:{data:function(e){return b(e,["Non-Overhead staff","All staff"])},options:{color:E,tooltip:{show:!1},legend:{data:["Non-Overhead staff","All staff"]},dataset:{dimensions:["year","Non-Overhead staff","All staff"]},grid:I,xAxis:{type:"category",boundaryGap:!0,axisTick:{alignWithLabel:!0}},yAxis:{type:"value",show:!1},series:Array.from({length:2},(function(){return{type:"bar",label:C({suffix:"%"})}}))},onClick:function(e){var t=e.data,r=e.chart,a=e.params;if(a.data){var n=a.data.year,o=v(t.filter((function(e){var t=e.metric,r=e.year;return("Non-Overhead staff"===t||"All staff"===t)&&n===r})));D(r);var i={legend:{data:["Non-Overhead staff","All staff","Target"]},dataset:{source:o,dimensions:["quarter","Non-Overhead staff","All staff","Target"]},yAxis:{type:"value",show:!0,scale:!0,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"line"},{type:"line"},{type:"line",symbol:"none",lineStyle:{type:"dashed",color:"#333"},itemStyle:{color:"#333"}}]};r.setOption(i)}}}},{id:"overhead-time",meta:"Proportion of time spent on direct and indirect overheads",styled:!0,chart:{data:function(e){return b(e,["Direct overheads","Indirect overheads"])},options:{color:E,tooltip:{show:!1},legend:{data:["Direct overheads","Indirect overheads"]},dataset:{dimensions:["year","Direct overheads","Indirect overheads"]},grid:I,xAxis:{type:"category"},yAxis:{type:"value",show:!1},series:Array.from({length:2},(function(){return{type:"bar",label:C({suffix:"%"})}}))},onClick:function(e){var t=e.data,r=e.chart,a=e.params;if(a.data){var n=a.data.year,o=v(t.filter((function(e){var t=e.metric,r=e.year;return("Direct overheads"===t||"Indirect overheads"===t)&&n===r})));D(r);var i={tooltip:{show:!0,trigger:"axis"},legend:{data:["Direct overheads","Indirect overheads","Target"]},dataset:{source:o,dimensions:["quarter","Direct overheads","Indirect overheads","Target"]},yAxis:{show:!0,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:{show:!1,formatter:function(){return""}}},{type:"bar",label:{show:!1,formatter:function(){return""}}},{type:"line",symbol:"none",lineStyle:{type:"dashed",color:"#333"},itemStyle:{color:"#333"}}]};r.setOption(i)}}}},{id:"personnel-costs",meta:"Personnel costs as a proporation of income (% of target)",styled:!0,chart:{data:function(e){return b(e,["Consultants as proportion of income","Salary as proportion of income"])},options:{color:E,tooltip:{show:!1},legend:{top:"10%"},dataset:{dimensions:["year","Consultants as proportion of income","Salary as proportion of income"]},grid:I,xAxis:{type:"category"},yAxis:{type:"value",show:!1},series:Array.from({length:2},(function(){return{type:"bar",label:C({suffix:"%"})}}))},onClick:function(e){var t=e.data,r=e.chart,a=e.params;if(a.data){var n=a.data.year,o=v(t.filter((function(e){var t=e.metric,r=e.year;return["Consultants as proportion of income","Salary as proportion of income"].includes(t)&&n===r})));D(r);var i={tooltip:{show:!1},dataset:{source:o,dimensions:["quarter","Consultants as proportion of income","Salary as proportion of income"]},grid:I,xAxis:{type:"category"},yAxis:{type:"value",splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar"},{type:"bar"}]};r.setOption(i)}}}},{id:"consultant-costs",meta:"Average consultant % for year to date (excl GNR)",styled:!0,chart:{data:function(e){return b(e,["Average consultant % for year to date (excl GNR)"])},options:{color:E,tooltip:{show:!1},legend:{show:!1},dataset:{dimensions:["year","Average consultant % for year to date (excl GNR)"]},grid:I,xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]},onClick:function(e){var t=e.data,r=e.chart,a=e.params;if(a.data){var n=a.data.year,o=v(t.filter((function(e){var t=e.metric,r=e.year;return["Average consultant % for year to date (excl GNR)"].includes(t)&&n===r})));D(r),r.setOption({tooltip:{show:!1},dataset:{source:o,dimensions:["quarter","Average consultant % for year to date (excl GNR)"]}})}}}}]}];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=["#0c457b","#0071b1","#4397d3","#00538e","#88bae5","#0089cc"],ae=[["Total Staff","Total leavers in the period (Voluntary)","Total leavers in the period (Planned)"],"Staffing against budget","Staffing budget as a %age of org budget (65% ceiling)","Stability Index"],ne=[{id:"1",columns:2,content:[{id:"staff",meta:"Ratio of Staff to Leavers",styled:!0,chart:te({data:function(e){var t=e.filter((function(e){var t=e.metric;return ae[0].includes(t)})),r=t.reduce((function(e,r){if(!e.find((function(e){return e.metric===r.metric&&e.year===r.year}))){var a=t.filter((function(e){var t=e.metric,a=e.year;return t===r.metric&&a===r.year}));if("Total Staff"===r.metric){var n=Math.max.apply(Math,(0,l.Z)(a.map((function(e){return e.value}))));e.push(te(te({},r),{},{value:n}))}else{var o=a.reduce((function(e,t){return e+t.value}),0);e.push(te(te({},r),{},{value:o}))}}return e}),[]);return v(r)},options:{color:re,tooltip:{trigger:"axis"},dataset:{dimensions:["year"].concat(ae[0])},grid:I,toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},xAxis:{type:"category"},yAxis:{type:"value",splitNumber:3},series:[{type:"bar",stack:"hr"},{type:"bar",stack:"hr"},{type:"bar",stack:"hr"}]}},k(ae[0]))},{id:"stability",meta:"Stability Index",styled:!0,chart:te({data:function(e){return b(e,[ae[3]])},options:{color:re,tooltip:{show:!1,trigger:"axis"},legend:{show:!1},dataset:{dimensions:["year"].concat(ae[3])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3},series:[{type:"bar",label:C({})}]}},k(ae[3]))}].concat((0,l.Z)([{id:"gender-pay-mean",meta:"Gender Pay Gap (Mean) UK"},{id:"gender-pay-median",meta:"Gender Pay Gap (Median) UK"}].map((function(e){var t=e.id,r=e.meta;return{id:t,meta:r,styled:!0,chart:te({data:function(e){return b(e,[r])},options:{color:re,tooltip:{trigger:"item"},legend:{show:!1},dataset:{dimensions:["year",r]},toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},xAxis:{type:"category",position:"top"},yAxis:{type:"value",scale:!0,splitNumber:1},series:[{type:"bar",label:C({position:"bottom"})}]}},k(r))}}))),[{id:"staffing-budget",meta:"Staffing against budget",styled:!0,chart:te({data:function(e){return b(e,[ae[1]])},options:{color:re,tooltip:{show:!0,trigger:"axis"},legend:{show:!0},dataset:{dimensions:["year"].concat(ae[1],"Target")},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3},series:[{type:"bar",label:C({currency:!0,suffix:"m"}),barGap:"-100%"},{type:"bar"}]}},k([ae[1],"Target"],{series:[{},{type:"line",symbol:"none",lineStyle:{type:"dashed",color:"#333"},itemStyle:{color:"#333"},silent:!0}]}))},{id:"staffing-budget-vs-org-budget",meta:"Staffing budget as a %age of org budget (65% ceiling)",styled:!0,chart:te({data:function(e){return b(e,[ae[2]])},options:{color:re,tooltip:{show:!1,trigger:"axis"},legend:{show:!1},dataset:{dimensions:["year"].concat(ae[2])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3},series:[{type:"bar",label:C({suffix:"%"})}]}},k(ae[2]))},{id:"sick-days",meta:"Total Sick Days",styled:!0,chart:te({data:function(e){var t=e.filter((function(e){var t=e.metric,r=e.quarter;return"Total Sick Days"===t&&y.includes(r)}));return b(t,["Total Sick Days"],"sum","month")},options:{color:re,tooltip:{trigger:"item"},legend:{show:!1},dataset:{dimensions:["year","Total Sick Days"]},grid:I,toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},xAxis:{type:"category",axisTick:{alignWithLabel:!0,interval:1}},yAxis:{type:"value",splitNumber:3},series:[{type:"bar",label:C({})}]}},k("Total Sick Days",{yAxis:{show:!1}},"month"))},{id:"sick-days-staff",meta:"Number of Staff Who logged Sick days per period of sickness",styled:!0,chart:te({data:function(e){var t=e.filter((function(e){var t=e.metric,r=e.quarter;return"No. Staff Logged Sick days/ periods of sickness"===t&&y.includes(r)}));return b(t,["No. Staff Logged Sick days/ periods of sickness"],"sum","month")},options:{color:re,tooltip:{trigger:"item"},legend:{show:!1},dataset:{dimensions:["year","No. Staff Logged Sick days/ periods of sickness"]},grid:I,toolbox:{show:!0,feature:{saveAsImage:{show:!0}}},xAxis:{type:"category",axisTick:{alignWithLabel:!0,interval:1}},yAxis:{type:"value",splitNumber:3},series:[{type:"bar",label:C({})}]}},k("No. Staff Logged Sick days/ periods of sickness",{yAxis:{show:!1}},"month"))}])}];function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=["#07482e","#1e8259","#005b3e","#5ab88a","#c5e1cb"],ce=["Ranking on IATI dashboard (suggest move from top 10% to top 5%)",["# active projects DIPR","# active projects DII"],["Number of projects with On track status","Number of projects with Warning status","Number of projects with High risk status"],["% projects overspending","% projects underspending","% projects on track"]],le=[{id:"1",columns:2,content:[{id:"iati-ranking",meta:ce[0],styled:!0,chart:ie({data:function(e){return b(e,[ce[0]])},options:{color:se,tooltip:{show:!1,trigger:"axis"},legend:{show:!1},dataset:{dimensions:["year",ce[0]]},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3},series:[{type:"bar",label:{show:!0,position:"top",formatter:function(e){return"".concat(e.value[e.dimensionNames[e.encode.y[0]]],"%")}}}]}},k(ce[0]))},{id:"active-projects",meta:"Active Projects DIPR vs DII",styled:!0,chart:ie({data:function(e){return b(e,ce[1])},options:{color:se,tooltip:{show:!0,trigger:"axis"},legend:{show:!0},dataset:{dimensions:["year"].concat((0,l.Z)(ce[1]))},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3},series:[{type:"bar"},{type:"bar"}]}},k(ce[1]))},{id:"project-status",meta:"Project Status",styled:!0,chart:ie({data:function(e){return b(e,ce[2])},options:{color:se,tooltip:{show:!0,trigger:"axis"},legend:{show:!0},dataset:{dimensions:["year"].concat((0,l.Z)(ce[2]))},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3},series:[{type:"bar"},{type:"bar"}]}},k(ce[2]))},{id:"project-spending",meta:"Project Spending",styled:!0,chart:ie({data:function(e){return b(e,ce[3])},options:{color:se,tooltip:{show:!0,trigger:"axis"},legend:{show:!0},dataset:{dimensions:["year"].concat((0,l.Z)(ce[3]))},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar"},{type:"bar"}]}},k(ce[3]))}]}];function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe=["#65093d","#7e1850","#9f1459","#d12568","#f3a5b6"],fe=["Bounce rate on the website (%)","Dwell time on the website (minutes)","Overall site SEO score","Twitter engagement rate","Linkedin engagement rate","Proportion of new linkedin followers from target stakeholder groups"],me=[{id:"1",columns:3,content:[{id:"bounce-rate",meta:fe[0],styled:!0,chart:de({data:function(e){return b(e,Array().concat(fe[0]))},options:{color:pe,tooltip:{show:!0,trigger:"item",formatter:L({suffix:"%"})},legend:{show:!1},dataset:{dimensions:["year"].concat(fe[0])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]}},k(fe[0]))},{id:"dwell-time",meta:fe[1],styled:!0,chart:de({data:function(e){return b(e,Array().concat(fe[1]))},options:{color:pe,tooltip:{show:!0,trigger:"item",formatter:L({})},legend:{show:!1},dataset:{dimensions:["year"].concat(fe[1])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}"}},series:[{type:"bar",label:C({})}]}},k(fe[1]))},{id:"seo-score",meta:fe[2],styled:!0,chart:de({data:function(e){return b(e,Array().concat(fe[2]))},options:{color:pe,tooltip:{show:!0,trigger:"item",formatter:L({})},legend:{show:!1},dataset:{dimensions:["year"].concat(fe[2])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}"}},series:[{type:"bar",label:C({})}]}},k(fe[2]))},{id:"twitter-engagement",meta:fe[3],styled:!0,chart:de({data:function(e){return b(e,Array().concat(fe[3]))},options:{color:pe,tooltip:{show:!0,trigger:"item",formatter:L({suffix:"%"})},legend:{show:!1},dataset:{dimensions:["year"].concat(fe[3])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]}},k(fe[3]))},{id:"linkedin-engagement",meta:fe[4],styled:!0,chart:de({data:function(e){return b(e,Array().concat(fe[4]))},options:{color:pe,tooltip:{show:!0,trigger:"item",formatter:L({suffix:"%"})},legend:{show:!1},dataset:{dimensions:["year"].concat(fe[4])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]}},k(fe[4]))}]},{id:"2",columns:1,className:"m-pills",content:[{id:"linkedin-followers",meta:fe[5],styled:!0,chart:de({data:function(e){return b(e,Array().concat(fe[5]))},options:{color:pe,tooltip:{show:!0,trigger:"item",formatter:L({suffix:"%"})},legend:{show:!1},dataset:{dimensions:["year"].concat(fe[5])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]}},k(fe[5]))}]}];function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve=["#42184c","#632572","#994d98","#cb98c4","#ebcfe5"],he=["Income secured this quarter","Weighted value 50/80% probable pipeline at end of quarter","Income at 90% at end of quarter (waiting for agreement to be signed for 2021-2023)","Weighted value of 50% & 80% probable pipeline at end of quarter (income 2021-2023)","Speculative pipeline value, not weighted (>50% probable)"],be=[{id:"1",columns:1,className:"m-pills",content:[{id:"contract-income",meta:"Total Income Secured (Contracts + Grants)",styled:!0,chart:ge(ge({height:"300px",data:function(e){var t=e.filter((function(e){var t=e.metric;return he[0].includes(t)})),r=t.reduce((function(e,r){var a="".concat(he[0]," - ").concat(r.category.trim());if(!e.find((function(e){return e.metric===a&&e.year===r.year}))){var n=t.filter((function(e){var t=e.metric,a=e.year,n=e.category;return t===r.metric&&a===r.year&&n===r.category})).reduce((function(e,t){return e+t.value}),0);e.push(ge(ge({},r),{},{metric:a,value:n}))}return e}),[]);return v(r)},options:{color:ve,tooltip:{show:!0,trigger:"axis"},legend:{show:!0},dataset:{dimensions:["year","".concat(he[0]," - Contracts"),"".concat(he[0]," - Grants")]},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,axisLine:{show:!0},axisTick:{show:!0},axisLabel:{formatter:"£{value}"}},series:[{type:"bar",barWidth:"30%",stack:"fundraising"},{type:"bar",barWidth:"30%",stack:"fundraising"}]}},k(he[0])),{},{onClick:function(e){var t=e.data,r=e.chart,a=e.params;if(a.data){var n=a.data.year,o=t.filter((function(e){var t=e.metric,r=e.year;return he[0].includes(t)&&n===r})),i=o.reduce((function(e,t){var r="".concat(he[0]," - ").concat(t.category.trim());if(e.find((function(e){return e.metric===r})))e.push(ge(ge({},t),{},{metric:r}));else{var a=o.filter((function(e){var r=e.metric,a=e.quarter,n=e.category;return r===t.metric&&a===t.quarter&&n===t.category})).reduce((function(e,t){return e+t.value}),0);e.push(ge(ge({},t),{},{metric:r,value:a}))}return e}),[]),s=v(i);D(r),r.setOption({dataset:{source:s,dimensions:["quarter","".concat(he[0]," - Contracts"),"".concat(he[0]," - Grants")]}})}}})}]},{id:"0",columns:1,className:"pt-20",content:[{id:"contracts",meta:"Contracts"}]},{id:"2",columns:2,content:[{id:"contract-weighted",meta:he[1],styled:!0,chart:ge({data:function(e){return b(e,Array().concat(he[1]))},options:{color:ve,tooltip:{show:!0,trigger:"item",formatter:L({currency:!0})},legend:{show:!1},dataset:{dimensions:["year"].concat(he[1])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3,axisLabel:{formatter:"£{value}"}},series:[{type:"bar"}]}},k(he[1]))},{id:"income-secured",meta:"Income Secured From Contracts (Target £1.2M)",styled:!0,chart:ge({data:function(e){var t=e.filter((function(e){var t=e.metric,r=e.category;return he[0].includes(t)&&"Contracts"===r}));return b(t,Array().concat(he[0]))},options:{color:ve,tooltip:{show:!0,trigger:"item",formatter:L({currency:!0})},legend:{show:!1},dataset:{dimensions:["year"].concat(he[0])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3,axisLabel:{formatter:"£{value}"}},series:[{type:"bar"}]}},k(he[0]))}]},{id:"3",columns:1,content:[{id:"grants",meta:"Grants"}]},{id:"4",columns:2,content:[{id:"income-secured",meta:"Income Secured From Grants (Target £2.5m)",styled:!0,chart:ge({data:function(e){var t=e.filter((function(e){var t=e.metric,r=e.category;return he[0].includes(t)&&"Grants"===r}));return b(t,Array().concat(he[0]))},options:{color:ve,tooltip:{show:!0,trigger:"item",formatter:L({currency:!0})},legend:{show:!1},dataset:{dimensions:["year"].concat(he[0])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3,axisLabel:{formatter:"£{value}"}},series:[{type:"bar"}]}},k(he[0]))},{id:"grant-income",meta:"Income at 90% at end of quarter",styled:!0,chart:ge({data:function(e){return b(e,Array().concat(he[2]))},options:{color:ve,tooltip:{show:!0,trigger:"item",formatter:L({currency:!0})},legend:{show:!1},dataset:{dimensions:["year"].concat(he[2])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3,axisLabel:{formatter:"£{value}"}},series:[{type:"bar"}]}},k(he[2]))},{id:"weighted-value",meta:he[3],styled:!0,chart:ge({data:function(e){return b(e,Array().concat(he[3]))},options:{color:ve,tooltip:{show:!0,trigger:"item",formatter:L({currency:!0})},legend:{show:!1},dataset:{dimensions:["year"].concat(he[3])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3,axisLabel:{formatter:"£{value}"}},series:[{type:"bar"}]}},k(he[3]))},{id:"speculative-pileline-value",meta:he[4],styled:!0,chart:ge({data:function(e){return b(e,Array().concat(he[4]))},options:{color:ve,tooltip:{show:!0,trigger:"item",formatter:L({currency:!0})},legend:{show:!1},dataset:{dimensions:["year"].concat(he[4])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!0,splitNumber:3,axisLabel:{formatter:"£{value}"}},series:[{type:"bar"}]}},k(he[4]))}]}];function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ae=["#302b2e","#555053","#736e73","#a9a6aa","#d9d4da"],Oe=["Roadmap in place for global Infrastructure with capacity for growth (Progress Indicator)","Fully hosted systems with reduced internal reliance (Progress Indicator)","Standardised global support (Progress Indicator)"],je=[{id:"1",columns:2,content:[{id:"global-infrastructure",meta:Oe[0],styled:!0,chart:we({data:function(e){return b(e,Array().concat(Oe[0]))},options:{color:Ae,tooltip:{show:!0,trigger:"item",formatter:L({suffix:"%"})},legend:{show:!1},dataset:{dimensions:["year"].concat(Oe[0])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]}},k(Oe[0]))},{id:"hosted-systems",meta:Oe[1],styled:!0,chart:we({data:function(e){return b(e,Array().concat(Oe[1]))},options:{color:Ae,tooltip:{show:!0,trigger:"item",formatter:L({suffix:"%"})},legend:{show:!1},dataset:{dimensions:["year"].concat(Oe[1])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]}},k(Oe[1]))},{id:"global-support",meta:Oe[2],styled:!0,chart:we({data:function(e){return b(e,Array().concat(Oe[2]))},options:{color:Ae,tooltip:{show:!0,trigger:"item",formatter:L({suffix:"%"})},legend:{show:!1},dataset:{dimensions:["year"].concat(Oe[2])},grid:I,toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category"},yAxis:{type:"value",show:!1,splitNumber:3,axisLabel:{formatter:"{value}%"}},series:[{type:"bar",label:C({suffix:"%"})}]}},k(Oe[2]))}]}];const Ne=function(){var e=function(){var e=(0,a.useState)([]),t=(0,n.Z)(e,2),r=t[0],o=t[1];return(0,a.useEffect)((function(){$.getItem("dashboard.updatedAt").then((function(e){var t=e&&new Date(e);if(t&&t.setHours(t.getHours()+1),t&&Date.now()-t.getTime()>3600||!t){var r="".concat(window.location.origin,"/api/dashboard/data/");window.fetch(r).then((function(e){return e.json()})).then((function(e){var t=e.data,r=e.error;r?console.log("Failed to fetch data:",r):t&&(o(t),$.setItem("dashboard.data",t),$.setItem("dashboard.updatedAt",new Date))}))}else $.getItem("dashboard.data").then((function(e){o(e)}))}))}),[]),r}();return a.createElement(a.Fragment,null,a.createElement(V,{id:"finance",title:"Finance",department:"Finance",data:e,grids:X}),a.createElement(V,{id:"hr",title:"Human Resources",department:"HR",data:e,grids:ne}),a.createElement(V,{id:"project-management",title:"Project Management",department:"Project management",data:e,grids:le}),a.createElement(V,{id:"communications",title:"Communications",department:"Comms and engagement",data:e,grids:me}),a.createElement(V,{id:"development",title:"Development & Fundraising",department:"Development and fundraising",data:e,grids:be}),a.createElement(V,{id:"data-systems",title:"IT",department:"IT systems and data systems",data:e,grids:je}))}}}]);