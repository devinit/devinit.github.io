"use strict";(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[844],{5844:(e,t,n)=>{n.r(t),n.d(t,{BarChart:()=>Ce,BoxplotChart:()=>Zr,CandlestickChart:()=>ro,CustomChart:()=>su,EffectScatterChart:()=>co,FunnelChart:()=>Ri,GaugeChart:()=>Ti,GraphChart:()=>_i,HeatmapChart:()=>Vo,LineChart:()=>ie,LinesChart:()=>No,MapChart:()=>Nt,ParallelChart:()=>ji,PictorialBarChart:()=>ss,PieChart:()=>et,RadarChart:()=>bt,SankeyChart:()=>fr,ScatterChart:()=>dt,SunburstChart:()=>Ts,ThemeRiverChart:()=>ps,TreeChart:()=>Sn,TreemapChart:()=>wa});var a=n(8299),i=n(3814),r=n(3321);const o=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.legendSymbol="line",n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e){return(0,i.Z)(this.getSource(),this,{useEncodeDefaulter:!0})},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0},t}(r.Z);var s=n(3051),l=n(8162),u=n(6351),d=n(9936);function h(e,t,n){var a=e.getBaseAxis(),i=e.getOtherAxis(a),r=function(e,t){var n=0,a=e.scale.getExtent();return"start"===t?n=a[0]:"end"===t?n=a[1]:a[0]>0?n=a[0]:a[1]<0&&(n=a[1]),n}(i,n),o=a.dim,l=i.dim,u=t.mapDimension(l),h=t.mapDimension(o),c="x"===l||"radius"===l?1:0,p=(0,s.map)(e.dimensions,(function(e){return t.mapDimension(e)})),g=!1,f=t.getCalculationInfo("stackResultDimension");return(0,d.M)(t,p[0])&&(g=!0,p[0]=f),(0,d.M)(t,p[1])&&(g=!0,p[1]=f),{dataDimsForPoint:p,valueStart:r,valueAxisDim:l,baseAxisDim:o,stacked:!!g,valueDim:u,baseDim:h,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function c(e,t,n,a){var i=NaN;e.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),a)),isNaN(i)&&(i=e.valueStart);var r=e.baseDataOffset,o=[];return o[r]=n.get(e.baseDim,a),o[1-r]=i,t.dataToPoint(o)}var p="undefined"!=typeof Float32Array,g=p?Float32Array:Array;function f(e){return(0,s.isArray)(e)?p?new Float32Array(e):e:new g(e)}var y=n(4438),m=n(8154),v=n(6498),x=n(1177),_=n(2234),b=n(327),S=n(4014),w=n(8554),I=Math.min,M=Math.max;function D(e,t){return isNaN(e)||isNaN(t)}function L(e,t,n,a,i,r,o,s,l){for(var u,d,h,c,p,g,f=n,y=0;y<a;y++){var m=t[2*f],v=t[2*f+1];if(f>=i||f<0)break;if(D(m,v)){if(l){f+=r;continue}break}if(f===n)e[r>0?"moveTo":"lineTo"](m,v),h=m,c=v;else{var x=m-u,_=v-d;if(x*x+_*_<.5){f+=r;continue}if(o>0){var b=f+r,S=t[2*b],w=t[2*b+1],L=y+1;if(l)for(;D(S,w)&&L<a;)L++,S=t[2*(b+=r)],w=t[2*b+1];var A=.5,T=0,C=0,P=void 0,N=void 0;if(L>=a||D(S,w))p=m,g=v;else{T=S-u,C=w-d;var Z=m-u,E=S-m,O=v-d,R=w-v,k=void 0,V=void 0;"x"===s?(k=Math.abs(Z),V=Math.abs(E),p=m-k*o,g=v,P=m+k*o,N=v):"y"===s?(k=Math.abs(O),V=Math.abs(R),p=m,g=v-k*o,P=m,N=v+k*o):(k=Math.sqrt(Z*Z+O*O),p=m-T*o*(1-(A=(V=Math.sqrt(E*E+R*R))/(V+k))),g=v-C*o*(1-A),N=v+C*o*A,P=I(P=m+T*o*A,M(S,m)),N=I(N,M(w,v)),P=M(P,I(S,m)),g=v-(C=(N=M(N,I(w,v)))-v)*k/V,p=I(p=m-(T=P-m)*k/V,M(u,m)),g=I(g,M(d,v)),P=m+(T=m-(p=M(p,I(u,m))))*V/k,N=v+(C=v-(g=M(g,I(d,v))))*V/k)}e.bezierCurveTo(h,c,p,g,m,v),h=P,c=N}else e.lineTo(m,v)}u=m,d=v,f+=r}return y}var A=function(){this.smooth=0,this.smoothConstraint=!0},T=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polyline",n}return(0,a.ZT)(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new A},t.prototype.buildPath=function(e,t){var n=t.points,a=0,i=n.length/2;if(t.connectNulls){for(;i>0&&D(n[2*i-2],n[2*i-1]);i--);for(;a<i&&D(n[2*a],n[2*a+1]);a++);}for(;a<i;)a+=L(e,n,a,i,i,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},t.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,a,i=this.path.data,r=S.Z.CMD,o="x"===t,s=[],l=0;l<i.length;){var u=void 0,d=void 0,h=void 0,c=void 0,p=void 0,g=void 0,f=void 0;switch(i[l++]){case r.M:n=i[l++],a=i[l++];break;case r.L:if(u=i[l++],d=i[l++],(f=o?(e-n)/(u-n):(e-a)/(d-a))<=1&&f>=0){var y=o?(d-a)*f+a:(u-n)*f+n;return o?[e,y]:[y,e]}n=u,a=d;break;case r.C:u=i[l++],d=i[l++],h=i[l++],c=i[l++],p=i[l++],g=i[l++];var m=o?(0,w.kD)(n,u,h,p,e,s):(0,w.kD)(a,d,c,g,e,s);if(m>0)for(var v=0;v<m;v++){var x=s[v];if(x<=1&&x>=0)return y=o?(0,w.af)(a,d,c,g,x):(0,w.af)(n,u,h,p,x),o?[e,y]:[y,e]}n=p,a=g}}},t}(b.ZP),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t}(A),P=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polygon",n}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new C},t.prototype.buildPath=function(e,t){var n=t.points,a=t.stackedOnPoints,i=0,r=n.length/2,o=t.smoothMonotone;if(t.connectNulls){for(;r>0&&D(n[2*r-2],n[2*r-1]);r--);for(;i<r&&D(n[2*i],n[2*i+1]);i++);}for(;i<r;){var s=L(e,n,i,r,r,1,t.smooth,o,t.connectNulls);L(e,a,i+s-1,s,r,-1,t.stackedOnSmooth,o,t.connectNulls),i+=s+1,e.closePath()}},t}(b.ZP),N=n(5797),Z=n(5151),E=n(7214),O=n(5669);function R(e,t,n,a,i){var r=e.getArea(),o=r.x,s=r.y,l=r.width,u=r.height,d=n.get(["lineStyle","width"])||2;o-=d/2,s-=d/2,l+=d,u+=d,o=Math.floor(o),l=Math.round(l);var h=new Z.Z({shape:{x:o,y:s,width:l,height:u}});if(t){var c=e.getBaseAxis(),p=c.isHorizontal(),g=c.inverse;p?(g&&(h.shape.x+=l),h.shape.width=0):(g||(h.shape.y+=u),h.shape.height=0);var f="function"==typeof i?function(e){i(e,h)}:null;x.initProps(h,{shape:{width:l,height:u,x:o,y:s}},n,null,a,f)}return h}function k(e,t,n){var a=e.getArea(),i=(0,O.NM)(a.r0,1),r=(0,O.NM)(a.r,1),o=new E.Z({shape:{cx:(0,O.NM)(e.cx,1),cy:(0,O.NM)(e.cy,1),r0:i,r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});return t&&("angle"===e.getBaseAxis().dim?o.shape.endAngle=a.startAngle:o.shape.r=i,x.initProps(o,{shape:{endAngle:a.endAngle,r}},n)),o}function V(e,t,n,a,i){return e?"polar"===e.type?k(e,t,n):"cartesian2d"===e.type?R(e,t,n,a,i):null:null}var z=n(1073),G=n(4514),B=n(6006),F=n(3140),W=n(106),H=n(8988);function X(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return!0}}function Y(e){for(var t=1/0,n=1/0,a=-1/0,i=-1/0,r=0;r<e.length;){var o=e[r++],s=e[r++];isNaN(o)||(t=Math.min(o,t),a=Math.max(o,a)),isNaN(s)||(n=Math.min(s,n),i=Math.max(s,i))}return[[t,n],[a,i]]}function U(e,t){var n=Y(e),a=n[0],i=n[1],r=Y(t),o=r[0],s=r[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function q(e){return"number"==typeof e?e:e?.5:0}function j(e,t,n){for(var a=t.getBaseAxis(),i="x"===a.dim||"radius"===a.dim?0:1,r=[],o=0,s=[],l=[],u=[];o<e.length-2;o+=2)switch(u[0]=e[o+2],u[1]=e[o+3],l[0]=e[o],l[1]=e[o+1],r.push(l[0],l[1]),n){case"end":s[i]=u[i],s[1-i]=l[1-i],r.push(s[0],s[1]);break;case"middle":var d=(l[i]+u[i])/2,h=[];s[i]=h[i]=d,s[1-i]=l[1-i],h[1-i]=u[1-i],r.push(s[0],s[1]),r.push(h[0],h[1]);break;default:s[i]=l[i],s[1-i]=u[1-i],r.push(s[0],s[1])}return r.push(e[o++],e[o++]),r}function Q(e,t){return[e[2*t],e[2*t+1]]}function K(e,t,n,a){if((0,z.H)(t,"cartesian2d")){var i=a.getModel("endLabel"),r=i.get("show"),o=i.get("valueAnimation"),s=a.getData(),l={lastFrameIndex:0},u=r?function(n,a){e._endLabelOnDuring(n,a,s,l,o,i,t)}:null,d=t.getBaseAxis().isHorizontal(),h=R(t,n,a,(function(){var t=e._endLabel;t&&n&&null!=l.originalX&&t.attr({x:l.originalX,y:l.originalY})}),u);if(!a.get("clip",!0)){var c=h.shape,p=Math.max(c.width,c.height);d?(c.y-=p,c.height+=2*p):(c.x-=p,c.width+=2*p)}return u&&u(1,h),h}return k(t,n,a)}const J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t.prototype.init=function(){var e=new m.Z,t=new l.Z;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},t.prototype.render=function(e,t,n){var a=this,i=e.coordinateSystem,r=this.group,o=e.getData(),l=e.getModel("lineStyle"),d=e.getModel("areaStyle"),p=o.getLayout("points")||[],g="polar"===i.type,m=this._coordSys,v=this._symbolDraw,x=this._polyline,_=this._polygon,b=this._lineGroup,S=e.get("animation"),w=!d.isEmpty(),I=d.get("origin"),M=h(i,o,I),D=w&&function(e,t,n){if(!n.valueDim)return[];for(var a=t.count(),i=f(2*a),r=0;r<a;r++){var o=c(n,e,t,r);i[2*r]=o[0],i[2*r+1]=o[1]}return i}(i,o,M),L=e.get("showSymbol"),A=L&&!g&&function(e,t,n){var a=e.get("showAllSymbol"),i="auto"===a;if(!a||i){var r=n.getAxesByScale("ordinal")[0];if(r&&(!i||!function(e,t){var n=e.getExtent(),a=Math.abs(n[1]-n[0])/e.scale.count();isNaN(a)&&(a=0);for(var i=t.count(),r=Math.max(1,Math.round(i/5)),o=0;o<i;o+=r)if(1.5*u.Z.getSymbolSize(t,o)[e.isHorizontal()?1:0]>a)return!1;return!0}(r,t))){var o=t.mapDimension(r.dim),l={};return s.each(r.getViewLabels(),(function(e){var t=r.scale.getRawOrdinalNumber(e.tickValue);l[t]=1})),function(e){return!l.hasOwnProperty(t.get(o,e))}}}}(e,o,i),T=this._data;T&&T.eachItemGraphicEl((function(e,t){e.__temp&&(r.remove(e),T.setItemGraphicEl(t,null))})),L||v.remove(),r.add(b);var C,P=!g&&e.get("step");i&&i.getArea&&e.get("clip",!0)&&(null!=(C=i.getArea()).width?(C.x-=.1,C.y-=.1,C.width+=.2,C.height+=.2):C.r0&&(C.r0-=.5,C.r+=.5)),this._clipShapeForSymbol=C;var N=function(e,t){var n=e.getVisual("visualMeta");if(n&&n.length&&e.count()&&"cartesian2d"===t.type){for(var a,i,r=n.length-1;r>=0;r--){var o=n[r].dimension,l=e.dimensions[o],u=e.getDimensionInfo(l);if("x"===(a=u&&u.coordDim)||"y"===a){i=n[r];break}}if(i){var d=t.getAxis(a),h=s.map(i.stops,(function(e){return{offset:0,coord:d.toGlobalCoord(d.dataToCoord(e.value)),color:e.color}})),c=h.length,p=i.outerColors.slice();c&&h[0].coord>h[c-1].coord&&(h.reverse(),p.reverse());var g=h[0].coord-10,f=h[c-1].coord+10,m=f-g;if(m<.001)return"transparent";s.each(h,(function(e){e.offset=(e.coord-g)/m})),h.push({offset:c?h[c-1].offset:.5,color:p[1]||"transparent"}),h.unshift({offset:c?h[0].offset:.5,color:p[0]||"transparent"});var v=new y.Z(0,0,0,0,h,!0);return v[a]=g,v[a+"2"]=f,v}}}(o,i)||o.getVisual("style")[o.getVisual("drawType")];x&&m.type===i.type&&P===this._step?(w&&!_?_=this._newPolygon(p,D):_&&!w&&(b.remove(_),_=this._polygon=null),g||this._initOrUpdateEndLabel(e,i,(0,H.Lz)(N)),b.setClipPath(K(this,i,!1,e)),L&&v.updateData(o,{isIgnore:A,clipShape:C,disableAnimation:!0,getSymbolPoint:function(e){return[p[2*e],p[2*e+1]]}}),X(this._stackedOnPoints,D)&&X(this._points,p)||(S?this._doUpdateAnimation(o,D,i,n,P,I):(P&&(p=j(p,i,P),D&&(D=j(D,i,P))),x.setShape({points:p}),_&&_.setShape({points:p,stackedOnPoints:D})))):(L&&v.updateData(o,{isIgnore:A,clipShape:C,disableAnimation:!0,getSymbolPoint:function(e){return[p[2*e],p[2*e+1]]}}),S&&this._initSymbolLabelAnimation(o,i,C),P&&(p=j(p,i,P),D&&(D=j(D,i,P))),x=this._newPolyline(p),w&&(_=this._newPolygon(p,D)),g||this._initOrUpdateEndLabel(e,i,(0,H.Lz)(N)),b.setClipPath(K(this,i,!0,e)));var Z=e.get(["emphasis","focus"]),E=e.get(["emphasis","blurScope"]);x.useStyle(s.defaults(l.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"})),(0,G.WO)(x,e,"lineStyle"),x.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"])&&(x.getState("emphasis").style.lineWidth=x.style.lineWidth+1),(0,W.A)(x).seriesIndex=e.seriesIndex,(0,G.vF)(x,Z,E);var O=q(e.get("smooth")),R=e.get("smoothMonotone"),k=e.get("connectNulls");if(x.setShape({smooth:O,smoothMonotone:R,connectNulls:k}),_){var V=o.getCalculationInfo("stackedOnSeries"),z=0;_.useStyle(s.defaults(d.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),V&&(z=q(V.get("smooth"))),_.setShape({smooth:O,stackedOnSmooth:z,smoothMonotone:R,connectNulls:k}),(0,G.WO)(_,e,"areaStyle"),(0,W.A)(_).seriesIndex=e.seriesIndex,(0,G.vF)(_,Z,E)}var B=function(e){a._changePolyState(e)};o.eachItemGraphicEl((function(e){e&&(e.onHoverStateChange=B)})),this._polyline.onHoverStateChange=B,this._data=o,this._coordSys=i,this._stackedOnPoints=D,this._points=p,this._step=P,this._valueOrigin=I},t.prototype.dispose=function(){},t.prototype.highlight=function(e,t,n,a){var i=e.getData(),r=_.gO(i,a);if(this._changePolyState("emphasis"),!(r instanceof Array)&&null!=r&&r>=0){var o=i.getLayout("points"),s=i.getItemGraphicEl(r);if(!s){var l=o[2*r],d=o[2*r+1];if(isNaN(l)||isNaN(d))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,d))return;(s=new u.Z(i,r)).x=l,s.y=d,s.setZ(e.get("zlevel"),e.get("z")),s.__temp=!0,i.setItemGraphicEl(r,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else N.Z.prototype.highlight.call(this,e,t,n,a)},t.prototype.downplay=function(e,t,n,a){var i=e.getData(),r=_.gO(i,a);if(this._changePolyState("normal"),null!=r&&r>=0){var o=i.getItemGraphicEl(r);o&&(o.__temp?(i.setItemGraphicEl(r,null),this.group.remove(o)):o.downplay())}else N.Z.prototype.downplay.call(this,e,t,n,a)},t.prototype._changePolyState=function(e){var t=this._polygon;(0,G.Gl)(this._polyline,e),t&&(0,G.Gl)(t,e)},t.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new T({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},t.prototype._newPolygon=function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new P({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,t,n){var a,i,r=t.getBaseAxis(),o=r.inverse;"cartesian2d"===t.type?(a=r.isHorizontal(),i=!1):"polar"===t.type&&(a="angle"===r.dim,i=!0);var s=e.hostModel,l=s.get("animationDuration");"function"==typeof l&&(l=l(null));var u=s.get("animationDelay")||0,d="function"==typeof u?u(null):u;e.eachItemGraphicEl((function(e,r){var s=e;if(s){var h=[e.x,e.y],c=void 0,p=void 0,g=void 0;if(i){var f=n,y=t.pointToCoord(h);a?(c=f.startAngle,p=f.endAngle,g=-y[1]/180*Math.PI):(c=f.r0,p=f.r,g=y[0])}else{var m=n;a?(c=m.x,p=m.x+m.width,g=e.x):(c=m.y+m.height,p=m.y,g=e.y)}var v=p===c?0:(g-c)/(p-c);o&&(v=1-v);var x="function"==typeof u?u(r):l*v+d,_=s.getSymbolPath(),b=_.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,delay:x}),b&&b.animateFrom({style:{opacity:0}},{duration:300,delay:x}),_.disableLabelAnimation=!0}}))},t.prototype._initOrUpdateEndLabel=function(e,t,n){var a=e.getModel("endLabel");if(a.get("show")){var i=e.getData(),r=this._polyline,o=this._endLabel;o||((o=this._endLabel=new v.ZP({z2:200})).ignoreClip=!0,r.setTextContent(this._endLabel),r.disableLabelAnimation=!0);var s=function(e){for(var t,n,a=e.length/2;a>0&&(t=e[2*a-2],n=e[2*a-1],isNaN(t)||isNaN(n));a--);return a-1}(i.getLayout("points"));s>=0&&((0,B.ni)(r,(0,B.k3)(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:s,defaultText:function(e,t,n){return null!=n?(0,F.O)(i,n):(0,F.H)(i,e)},enableTextSetter:!0},function(e,t){var n=t.getBaseAxis(),a=n.isHorizontal(),i=n.inverse,r=a?i?"right":"left":"center",o=a?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||r,verticalAlign:e.get("verticalAlign")||o}}}(a,t)),r.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,t,n,a,i,r,o){var s=this._endLabel,l=this._polyline;if(s){e<1&&null==a.originalX&&(a.originalX=s.x,a.originalY=s.y);var u=n.getLayout("points"),d=n.hostModel,h=d.get("connectNulls"),c=r.get("precision"),p=r.get("distance")||0,g=o.getBaseAxis(),f=g.isHorizontal(),y=g.inverse,m=t.shape,v=y?f?m.x:m.y+m.height:f?m.x+m.width:m.y,x=(f?p:0)*(y?-1:1),b=(f?0:-p)*(y?-1:1),S=f?"x":"y",w=function(e,t,n){for(var a,i,r=e.length/2,o="x"===n?0:1,s=0,l=-1,u=0;u<r;u++)if(i=e[2*u+o],!isNaN(i)&&!isNaN(e[2*u+1-o]))if(0!==u){if(a<=t&&i>=t||a>=t&&i<=t){l=u;break}s=u,a=i}else a=i;return{range:[s,l],t:(t-a)/(i-a)}}(u,v,S),I=w.range,M=I[1]-I[0],D=void 0;if(M>=1){if(M>1&&!h){var L=Q(u,I[0]);s.attr({x:L[0]+x,y:L[1]+b}),i&&(D=d.getRawValue(I[0]))}else{(L=l.getPointOn(v,S))&&s.attr({x:L[0]+x,y:L[1]+b});var A=d.getRawValue(I[0]),T=d.getRawValue(I[1]);i&&(D=_.pk(n,c,A,T,w.t))}a.lastFrameIndex=I[0]}else{var C=1===e||a.lastFrameIndex>0?I[0]:0;L=Q(u,C),i&&(D=d.getRawValue(C)),s.attr({x:L[0]+x,y:L[1]+b})}i&&(0,B.qA)(s).setLabelText(D)}},t.prototype._doUpdateAnimation=function(e,t,n,a,i,r){var o=this._polyline,s=this._polygon,l=e.hostModel,u=function(e,t,n,a,i,r,o,s){for(var l=function(e,t){var n=[];return t.diff(e).add((function(e){n.push({cmd:"+",idx:e})})).update((function(e,t){n.push({cmd:"=",idx:t,idx1:e})})).remove((function(e){n.push({cmd:"-",idx:e})})).execute(),n}(e,t),u=[],d=[],p=[],g=[],y=[],m=[],v=[],x=h(i,t,o),_=h(r,e,s),b=e.getLayout("points")||[],S=t.getLayout("points")||[],w=0;w<l.length;w++){var I=l[w],M=!0,D=void 0,L=void 0;switch(I.cmd){case"=":D=2*I.idx,L=2*I.idx1;var A=b[D],T=b[D+1],C=S[L],P=S[L+1];(isNaN(A)||isNaN(T))&&(A=C,T=P),u.push(A,T),d.push(C,P),p.push(n[D],n[D+1]),g.push(a[L],a[L+1]),v.push(t.getRawIndex(I.idx1));break;case"+":var N=I.idx,Z=x.dataDimsForPoint,E=i.dataToPoint([t.get(Z[0],N),t.get(Z[1],N)]);L=2*N,u.push(E[0],E[1]),d.push(S[L],S[L+1]);var O=c(x,i,t,N);p.push(O[0],O[1]),g.push(a[L],a[L+1]),v.push(t.getRawIndex(N));break;case"-":var R=I.idx,k=e.getRawIndex(R),V=_.dataDimsForPoint;if(D=2*R,k!==R){var z=r.dataToPoint([e.get(V[0],R),e.get(V[1],R)]),G=c(_,r,e,R);u.push(b[D],b[D+1]),d.push(z[0],z[1]),p.push(n[D],n[D+1]),g.push(G[0],G[1]),v.push(k)}else M=!1}M&&(y.push(I),m.push(m.length))}m.sort((function(e,t){return v[e]-v[t]}));var B=u.length,F=f(B),W=f(B),H=f(B),X=f(B),Y=[];for(w=0;w<m.length;w++){var U=m[w],q=2*w,j=2*U;F[q]=u[j],F[q+1]=u[j+1],W[q]=d[j],W[q+1]=d[j+1],H[q]=p[j],H[q+1]=p[j+1],X[q]=g[j],X[q+1]=g[j+1],Y[w]=y[U]}return{current:F,next:W,stackedOnCurrent:H,stackedOnNext:X,status:Y}}(this._data,e,this._stackedOnPoints,t,this._coordSys,n,this._valueOrigin,r),d=u.current,p=u.stackedOnCurrent,g=u.next,y=u.stackedOnNext;if(i&&(d=j(u.current,n,i),p=j(u.stackedOnCurrent,n,i),g=j(u.next,n,i),y=j(u.stackedOnNext,n,i)),U(d,g)>3e3||s&&U(p,y)>3e3)return o.setShape({points:g}),void(s&&s.setShape({points:g,stackedOnPoints:y}));o.shape.__points=u.current,o.shape.points=d;var m={shape:{points:g}};u.current!==d&&(m.shape.__points=u.next),o.stopAnimation(),x.updateProps(o,m,l),s&&(s.setShape({points:d,stackedOnPoints:p}),s.stopAnimation(),x.updateProps(s,{shape:{stackedOnPoints:y}},l),o.shape.points!==s.shape.points&&(s.shape.points=o.shape.points));for(var v=[],_=u.status,b=0;b<_.length;b++)if("="===_[b].cmd){var S=e.getItemGraphicEl(_[b].idx1);S&&v.push({el:S,ptIdx:b})}o.animators&&o.animators.length&&o.animators[0].during((function(){s&&s.dirtyShape();for(var e=o.shape.__points,t=0;t<v.length;t++){var n=v[t].el,a=2*v[t].ptIdx;n.x=e[a],n.y=e[a+1],n.markRedraw()}}))},t.prototype.remove=function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(e,a){e.__temp&&(t.remove(e),n.setItemGraphicEl(a,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(N.Z);var $=n(5682);function ee(e,t){return{seriesType:e,plan:(0,$.Z)(),reset:function(e){var n=e.getData(),a=e.coordinateSystem,i=e.pipelineContext,r=t||i.large;if(a){var o=(0,s.map)(a.dimensions,(function(e){return n.mapDimension(e)})).slice(0,2),l=o.length,u=n.getCalculationInfo("stackResultDimension");(0,d.M)(n,o[0])&&(o[0]=u),(0,d.M)(n,o[1])&&(o[1]=u);var h=n.getDimensionInfo(o[0]),c=n.getDimensionInfo(o[1]),p=h&&h.index,g=c&&c.index;return l&&{progress:function(e,t){for(var n=e.end-e.start,i=r&&f(n*l),o=[],s=[],u=e.start,d=0;u<e.end;u++){var h=void 0;if(1===l){var c=t.getByDimIdx(p,u);h=a.dataToPoint(c,null,s)}else o[0]=t.getByDimIdx(p,u),o[1]=t.getByDimIdx(g,u),h=a.dataToPoint(o,null,s);r?(i[d++]=h[0],i[d++]=h[1]):t.setItemLayout(u,h.slice())}r&&t.setLayout("points",i)}}}}}}var te={average:function(e){for(var t=0,n=0,a=0;a<e.length;a++)isNaN(e[a])||(t+=e[a],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},ne=function(e){return Math.round(e.length/2)};function ae(e){return{seriesType:e,reset:function(e,t,n){var a=e.getData(),i=e.get("sampling"),r=e.coordinateSystem,o=a.count();if(o>10&&"cartesian2d"===r.type&&i){var s=r.getBaseAxis(),l=r.getOtherAxis(s),u=s.getExtent(),d=n.getDevicePixelRatio(),h=Math.abs(u[1]-u[0])*(d||1),c=Math.round(o/h);if(c>1){"lttb"===i&&e.setData(a.lttbDownSample(a.mapDimension(l.dim),1/c));var p=void 0;"string"==typeof i?p=te[i]:"function"==typeof i&&(p=i),p&&e.setData(a.downSample(a.mapDimension(l.dim),1/c,p,ne))}}}}}function ie(e){e.registerChartView(J),e.registerSeriesModel(o),e.registerLayout(ee("line",!0)),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,ae("line"))}var re=n(9093),oe=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,i.Z)(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e){var t=this.coordinateSystem;if(t){var n=t.dataToPoint(t.clampData(e)),a=this.getData(),i=a.getLayout("offset"),r=a.getLayout("size");return n[t.getBaseAxis().isHorizontal()?0:1]+=i+r/2,n}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(r.Z);r.Z.registerClass(oe);const se=oe;var le=n(2151);const ue=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(){return(0,i.Z)(this.getSource(),this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,n){return n.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=(0,le.ZL)(se.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(se);var de=n(270),he=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0};const ce=function(e){function t(t){var n=e.call(this,t)||this;return n.type="sausage",n}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new he},t.prototype.buildPath=function(e,t){var n=t.cx,a=t.cy,i=Math.max(t.r0||0,0),r=Math.max(t.r,0),o=.5*(r-i),s=i+o,l=t.startAngle,u=t.endAngle,d=t.clockwise,h=Math.cos(l),c=Math.sin(l),p=Math.cos(u),g=Math.sin(u);(d?u-l<2*Math.PI:l-u<2*Math.PI)&&(e.moveTo(h*i+n,c*i+a),e.arc(h*s+n,c*s+a,o,-Math.PI+l,l,!d)),e.arc(n,a,r,l,u,!d),e.moveTo(p*r+n,g*r+a),e.arc(p*s+n,g*s+a,o,u-2*Math.PI,u-Math.PI,!d),0!==i&&(e.arc(n,a,i,u,l,d),e.moveTo(h*i+n,g*i+a)),e.closePath()},t}(b.ZP);var pe=["itemStyle","borderWidth"],ge=["itemStyle","borderRadius"],fe=[0,0],ye=Math.max,me=Math.min,ve=function(e){function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n,a){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var i=e.get("coordinateSystem");("cartesian2d"===i||"polar"===i)&&(this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n,a))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._incrementalRenderLarge(e,t)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,n,a){var i,r=this.group,o=e.getData(),s=this._data,l=e.coordinateSystem,u=l.getBaseAxis();"cartesian2d"===l.type?i=u.isHorizontal():"polar"===l.type&&(i="angle"===u.dim);var d=e.isAnimationEnabled()?e:null,h=function(e,t){var n=e.get("realtimeSort",!0),a=t.getBaseAxis();if(n&&"category"===a.type&&"cartesian2d"===t.type)return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}(e,l);h&&this._enableRealtimeSort(h,o,n);var c=e.get("clip",!0)||h,p=function(e,t){var n=e.getArea&&e.getArea();if((0,z.H)(e,"cartesian2d")){var a=e.getBaseAxis();if("category"!==a.type||!a.onBand){var i=t.getLayout("bandWidth");a.isHorizontal()?(n.x-=i,n.width+=2*i):(n.y-=i,n.height+=2*i)}}return n}(l,o);r.removeClipPath();var g=e.get("roundCap",!0),f=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),v=y.get("borderRadius")||0,_=[],b=this._backgroundEls,S=a&&a.isInitSort,w=a&&"changeAxisOrder"===a.type;function I(e){var t=Se[l.type](o,e),n=function(e,t,n){return new("polar"===e.type?E.Z:Z.Z)({shape:Ae(t,n,e),silent:!0,z2:0})}(l,i,t);return n.useStyle(y.getItemStyle()),"cartesian2d"===l.type&&n.setShape("r",v),_[e]=n,n}o.diff(s).add((function(t){var n=o.getItemModel(t),a=Se[l.type](o,t,n);if(f&&I(t),o.hasValue(t)){var s=!1;c&&(s=xe[l.type](p,a));var y=_e[l.type](e,o,t,a,i,d,u.model,!1,g);we(y,o,t,n,a,e,i,"polar"===l.type),S?y.attr({shape:a}):h?be(h,d,y,a,t,i,!1,!1):(0,x.initProps)(y,{shape:a},e,t),o.setItemGraphicEl(t,y),r.add(y),y.ignore=s}})).update((function(t,n){var a=o.getItemModel(t),m=Se[l.type](o,t,a);if(f){var M=void 0;0===b.length?M=I(n):((M=b[n]).useStyle(y.getItemStyle()),"cartesian2d"===l.type&&M.setShape("r",v),_[t]=M);var D=Se[l.type](o,t),L=Ae(i,D,l);(0,x.updateProps)(M,{shape:L},d,t)}var A=s.getItemGraphicEl(n);if(!o.hasValue(t))return r.remove(A),void(A=null);var T=!1;c&&(T=xe[l.type](p,m))&&r.remove(A),A||(A=_e[l.type](e,o,t,m,i,d,u.model,!!A,g)),w||we(A,o,t,a,m,e,i,"polar"===l.type),S?A.attr({shape:m}):h?be(h,d,A,m,t,i,!0,w):(0,x.updateProps)(A,{shape:m},e,t,null),o.setItemGraphicEl(t,A),A.ignore=T,r.add(A)})).remove((function(t){var n=s.getItemGraphicEl(t);n&&(0,x.removeElementWithFadeOut)(n,e,t)})).execute();var M=this._backgroundGroup||(this._backgroundGroup=new m.Z);M.removeAll();for(var D=0;D<_.length;++D)M.add(_[D]);r.add(M),this._backgroundEls=_,this._data=o},t.prototype._renderLarge=function(e,t,n){this._clear(),De(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),De(t,this.group,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)?V(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,n){var a=this;if(t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,n),this._isFirstFrame=!1;else{var r=function(e){var n=t.getItemGraphicEl(e);if(n){var a=n.shape;return(i.isHorizontal()?Math.abs(a.height):Math.abs(a.width))||0}return 0};this._onRendered=function(){a._updateSortWithinSameData(t,r,i,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,n){var a=[];return e.each(e.mapDimension(t.dim),(function(e,t){var i=n(t);i=null==i?NaN:i,a.push({dataIndex:t,mappedValue:i,ordinalNumber:e})})),a.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:(0,s.map)(a,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,n){for(var a=n.scale,i=e.mapDimension(n.dim),r=Number.MAX_VALUE,o=0,s=a.getOrdinalMeta().categories.length;o<s;++o){var l=e.rawIndexOf(i,a.getRawOrdinalNumber(o)),u=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(u>r)return!0;r=u}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var n=t.scale,a=n.getExtent(),i=Math.max(0,a[0]),r=Math.min(a[1],n.getOrdinalMeta().categories.length-1);i<=r;++i)if(e.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(e,t,n,a){if(this._isOrderChangedWithinSameData(e,t,n)){var i=this._dataSort(e,n,t);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(e,t,n){var a=t.baseAxis,i=this._dataSort(e,a,(function(n){return e.get(e.mapDimension(t.otherAxis.dim),n)}));n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:i,animation:{duration:0}})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(t){(0,x.removeElementWithFadeOut)(t,e,(0,W.A)(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(N.Z),xe={cartesian2d:function(e,t){var n=t.width<0?-1:1,a=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,r=e.y+e.height,o=ye(t.x,e.x),s=me(t.x+t.width,i),l=ye(t.y,e.y),u=me(t.y+t.height,r),d=s<o,h=u<l;return t.x=d&&o>i?s:o,t.y=h&&l>r?u:l,t.width=d?0:s-o,t.height=h?0:u-l,n<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),d||h},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var a=t.r;t.r=t.r0,t.r0=a}var i=me(t.r,e.r),r=ye(t.r0,e.r0);t.r=i,t.r0=r;var o=i-r<0;return n<0&&(a=t.r,t.r=t.r0,t.r0=a),o}},_e={cartesian2d:function(e,t,n,a,i,r,o,l,u){var d=new Z.Z({shape:(0,s.extend)({},a),z2:1});return d.__dataIndex=n,d.name="item",r&&(d.shape[i?"height":"width"]=0),d},polar:function(e,t,n,a,i,r,o,l,u){var d=a.startAngle<a.endAngle,h=new(!i&&u?ce:E.Z)({shape:(0,s.defaults)({clockwise:d},a),z2:1});if(h.name="item",r){var c=i?"r":"endAngle",p={};h.shape[c]=i?0:a.startAngle,p[c]=a[c],(l?x.updateProps:x.initProps)(h,{shape:p},r)}return h}};function be(e,t,n,a,i,r,o,s){var l,u;r?(u={x:a.x,width:a.width},l={y:a.y,height:a.height}):(u={y:a.y,height:a.height},l={x:a.x,width:a.width}),s||(o?x.updateProps:x.initProps)(n,{shape:l},t,i,null);var d=t?e.baseAxis.model:null;(o?x.updateProps:x.initProps)(n,{shape:u},d,i)}var Se={cartesian2d:function(e,t,n){var a=e.getItemLayout(t),i=n?function(e,t){var n=e.get(pe)||0,a=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),i=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,a,i)}(n,a):0,r=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+r*i/2,y:a.y+o*i/2,width:a.width-r*i,height:a.height-o*i}},polar:function(e,t,n){var a=e.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle}}};function we(e,t,n,a,i,r,o,l){var u=t.getItemVisual(n,"style");l||e.setShape("r",a.get(ge)||0),e.useStyle(u);var d=a.getShallow("cursor");if(d&&e.attr("cursor",d),!l){var h=o?i.height>0?"bottom":"top":i.width>0?"left":"right",c=(0,B.k3)(a);(0,B.ni)(e,c,{labelFetcher:r,labelDataIndex:n,defaultText:(0,F.H)(r.getData(),n),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:h});var p=e.getTextContent();(0,B.pe)(p,c,r.getRawValue(n),(function(e){return(0,F.O)(t,e)}))}var g=a.getModel(["emphasis"]);(0,G.vF)(e,g.get("focus"),g.get("blurScope")),(0,G.WO)(e,a),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(i)&&(e.style.fill="none",e.style.stroke="none",(0,s.each)(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}var Ie=function(){},Me=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeBar",n}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new Ie},t.prototype.buildPath=function(e,t){for(var n=t.points,a=this.__startPoint,i=this.__baseDimIdx,r=0;r<n.length;r+=2)a[i]=n[r+i],e.moveTo(a[0],a[1]),e.lineTo(n[r],n[r+1])},t}(b.ZP);function De(e,t,n){var a=e.getData(),i=[],r=a.getLayout("valueAxisHorizontal")?1:0;i[1-r]=a.getLayout("valueAxisStart");var o=a.getLayout("largeDataIndices"),l=a.getLayout("barWidth"),u=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var d=a.getLayout("largeBackgroundPoints"),h=[];h[1-r]=a.getLayout("backgroundStart");var c=new Me({shape:{points:d},incremental:!!n,silent:!0,z2:0});c.__startPoint=h,c.__baseDimIdx=r,c.__largeDataIndices=o,c.__barWidth=l,function(e,t,n){var a=t.get("borderColor")||t.get("color"),i=t.getItemStyle();e.useStyle(i),e.style.fill=null,e.style.stroke=a,e.style.lineWidth=n.getLayout("barWidth")}(c,u,a),t.add(c)}var p=new Me({shape:{points:a.getLayout("largePoints")},incremental:!!n});p.__startPoint=i,p.__baseDimIdx=r,p.__largeDataIndices=o,p.__barWidth=l,t.add(p),function(e,t,n){var a=n.getVisual("style");e.useStyle((0,s.extend)({},a)),e.style.fill=null,e.style.stroke=a.fill,e.style.lineWidth=n.getLayout("barWidth")}(p,0,a),(0,W.A)(p).seriesIndex=e.seriesIndex,e.get("silent")||(p.on("mousedown",Le),p.on("mousemove",Le))}var Le=(0,de.P2)((function(e){var t=function(e,t,n){var a=e.__baseDimIdx,i=1-a,r=e.shape.points,o=e.__largeDataIndices,s=Math.abs(e.__barWidth/2),l=e.__startPoint[i];fe[0]=t,fe[1]=n;for(var u=fe[a],d=fe[1-a],h=u-s,c=u+s,p=0,g=r.length/2;p<g;p++){var f=2*p,y=r[f+a],m=r[f+i];if(y>=h&&y<=c&&(l<=m?d>=l&&d<=m:d>=m&&d<=l))return o[p]}return-1}(this,e.offsetX,e.offsetY);(0,W.A)(this).dataIndex=t>=0?t:null}),30,!1);function Ae(e,t,n){if((0,z.H)(n,"cartesian2d")){var a=t,i=n.getArea();return{x:e?a.x:i.x,y:e?i.y:a.y,width:e?a.width:i.width,height:e?i.height:a.height}}var r=t;return{cx:(i=n.getArea()).cx,cy:i.cy,r0:e?i.r0:r.r0,r:e?i.r:r.r,startAngle:e?r.startAngle:0,endAngle:e?r.endAngle:2*Math.PI}}const Te=ve;function Ce(e){e.registerChartView(Te),e.registerSeriesModel(ue),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,s.curry(re.bK,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,re.kY),e.registerVisual({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,ae("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}var Pe=n(1891),Ne=n(6172),Ze=2*Math.PI,Ee=Math.PI/180;function Oe(e,t,n){t.eachSeriesByType(e,(function(e){var t=e.getData(),a=t.mapDimension("value"),i=function(e,t){return Ne.ME(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,n),r=e.get("center"),o=e.get("radius");s.isArray(o)||(o=[0,o]),s.isArray(r)||(r=[r,r]);var l=(0,O.GM)(i.width,n.getWidth()),u=(0,O.GM)(i.height,n.getHeight()),d=Math.min(l,u),h=(0,O.GM)(r[0],l)+i.x,c=(0,O.GM)(r[1],u)+i.y,p=(0,O.GM)(o[0],d/2),g=(0,O.GM)(o[1],d/2),f=-e.get("startAngle")*Ee,y=e.get("minAngle")*Ee,m=0;t.each(a,(function(e){!isNaN(e)&&m++}));var v=t.getSum(a),x=Math.PI/(v||m)*2,_=e.get("clockwise"),b=e.get("roseType"),S=e.get("stillShowZeroSum"),w=t.getDataExtent(a);w[0]=0;var I=Ze,M=0,D=f,L=_?1:-1;if(t.setLayout({viewRect:i,r:g}),t.each(a,(function(e,n){var a;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:_,cx:h,cy:c,r0:p,r:b?NaN:g});else{(a="area"!==b?0===v&&S?x:e*x:Ze/m)<y?(a=y,I-=y):M+=e;var i=D+L*a;t.setItemLayout(n,{angle:a,startAngle:D,endAngle:i,clockwise:_,cx:h,cy:c,r0:p,r:b?(0,O.NU)(e,w,[p,g]):g}),D=i}})),I<Ze&&m)if(I<=.001){var A=Ze/m;t.each(a,(function(e,n){if(!isNaN(e)){var a=t.getItemLayout(n);a.angle=A,a.startAngle=f+L*n*A,a.endAngle=f+L*(n+1)*A}}))}else x=I/M,D=f,t.each(a,(function(e,n){if(!isNaN(e)){var a=t.getItemLayout(n),i=a.angle===y?y:e*x;a.startAngle=D,a.endAngle=D+L*i,D+=L*i}}))}))}function Re(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var a=e.getData();a.filterSelf((function(e){for(var t=a.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0}))}}}}var ke=n(2514),Ve=n(1610),ze=n(7377),Ge=n(4162),Be=Math.PI/180;function Fe(e,t,n,a,i,r,o,s,l,u){if(!(e.length<2)){for(var d=e.length,h=0;h<d;h++)if("outer"===e[h].position&&"labelLine"===e[h].labelAlignTo){var c=e[h].label.x-u;e[h].linePoints[1][0]+=c,e[h].label.x=u}(0,Ge.GI)(e,l,l+o)&&function(e){for(var r={list:[],maxY:0},o={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var l=e[s],u=l.label.y>n?o:r,d=Math.abs(l.label.y-n);if(d>u.maxY){var h=l.label.x-t-l.len2*i,c=a+l.len,g=Math.abs(h)<c?Math.sqrt(d*d/(1-h*h/c/c)):c;u.rB=g,u.maxY=d}u.list.push(l)}p(r),p(o)}(e)}function p(e){for(var r=e.rB,o=r*r,s=0;s<e.list.length;s++){var l=e.list[s],u=Math.abs(l.label.y-n),d=a+l.len,h=d*d,c=Math.sqrt((1-Math.abs(u*u/o))*h);l.label.x=t+(c+l.len2)*i}}}function We(e){return"center"===e.position}var He=n(423);function Xe(e,t){var n=e.get("borderRadius");return null==n?null:((0,s.isArray)(n)||(n=[n,n]),{innerCornerRadius:(0,He.GM)(n[0],t.r0),cornerRadius:(0,He.GM)(n[1],t.r)})}var Ye=function(e){function t(t,n,a){var i=e.call(this)||this;i.z2=2;var r=new ke.Z,o=new v.ZP;return i.setTextGuideLine(r),i.setTextContent(o),i.updateData(t,n,a,!0),i}return(0,a.ZT)(t,e),t.prototype.updateData=function(e,t,n,i){var r=this,o=e.hostModel,l=e.getItemModel(t),u=l.getModel("emphasis"),d=e.getItemLayout(t),h=(0,s.extend)(Xe(l.getModel("itemStyle"),d)||{},d);i?(r.setShape(h),"scale"===o.getShallow("animationType")?(r.shape.r=d.r0,x.initProps(r,{shape:{r:d.r}},o,t)):null!=n?(r.setShape({startAngle:n,endAngle:n}),x.initProps(r,{shape:{startAngle:d.startAngle,endAngle:d.endAngle}},o,t)):(r.shape.endAngle=d.startAngle,x.updateProps(r,{shape:{endAngle:d.endAngle}},o,t))):x.updateProps(r,{shape:h},o,t),r.useStyle(e.getItemVisual(t,"style")),(0,G.WO)(r,l);var c=(d.startAngle+d.endAngle)/2,p=o.get("selectedOffset"),g=Math.cos(c)*p,f=Math.sin(c)*p,y=l.getShallow("cursor");y&&r.attr("cursor",y),this._updateLabel(o,e,t),r.ensureState("emphasis").shape=(0,a.pi)({r:d.r+(u.get("scale")&&u.get("scaleSize")||0)},Xe(u.getModel("itemStyle"),d)),(0,s.extend)(r.ensureState("select"),{x:g,y:f,shape:Xe(l.getModel(["select","itemStyle"]),d)}),(0,s.extend)(r.ensureState("blur"),{shape:Xe(l.getModel(["blur","itemStyle"]),d)});var m=r.getTextGuideLine(),v=r.getTextContent();m&&(0,s.extend)(m.ensureState("select"),{x:g,y:f}),(0,s.extend)(v.ensureState("select"),{x:g,y:f}),(0,G.vF)(this,u.get("focus"),u.get("blurScope"))},t.prototype._updateLabel=function(e,t,n){var a,i=this,r=t.getItemModel(n),o=r.getModel("labelLine"),l=t.getItemVisual(n,"style"),u=l&&l.fill,d=l&&l.opacity;(0,B.ni)(i,(0,B.k3)(r),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:d,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var h=i.getTextContent();i.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var c=e.get(["label","position"]);"outside"===c||"outer"===c?(0,ze.Iu)(this,(0,ze.$x)(r),{stroke:u,opacity:(0,s.retrieve3)(o.get(["lineStyle","opacity"]),d,1)}):null===(a=i.getTextGuideLine())||void 0===a||a.hide()},t}(E.Z);const Ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return(0,a.ZT)(t,e),t.prototype.init=function(){var e=new m.Z;this._sectorGroup=e},t.prototype.render=function(e,t,n,a){var i,r=e.getData(),o=this._data,l=this.group;if(!o&&r.count()>0){for(var u=r.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<r.count();++d)u=r.getItemLayout(d);u&&(i=u.startAngle)}r.diff(o).add((function(e){var t=new Ye(r,e,i);r.setItemGraphicEl(e,t),l.add(t)})).update((function(e,t){var n=o.getItemGraphicEl(t);n.updateData(r,e,i),n.off("click"),l.add(n),r.setItemGraphicEl(e,n)})).remove((function(t){var n=o.getItemGraphicEl(t);x.removeElementWithFadeOut(n,e,t)})).execute(),function(e){var t,n,a=e.getData(),i=[],r=!1,o=(e.get("minShowLabelAngle")||0)*Be,l=a.getLayout("viewRect"),u=a.getLayout("r"),d=l.width,h=l.x,c=l.y,p=l.height;function g(e){e.ignore=!0}a.each((function(e){var l=a.getItemGraphicEl(e),c=l.shape,p=l.getTextContent(),f=l.getTextGuideLine(),y=a.getItemModel(e),m=y.getModel("label"),v=m.get("position")||y.get(["emphasis","label","position"]),x=m.get("distanceToLabelLine"),_=m.get("alignTo"),b=(0,O.GM)(m.get("edgeDistance"),d),S=m.get("bleedMargin"),w=y.getModel("labelLine"),I=w.get("length");I=(0,O.GM)(I,d);var M=w.get("length2");if(M=(0,O.GM)(M,d),Math.abs(c.endAngle-c.startAngle)<o)return(0,s.each)(p.states,g),void(p.ignore=!0);if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(p)){var D,L,A,T,C=(c.startAngle+c.endAngle)/2,P=Math.cos(C),N=Math.sin(C);t=c.cx,n=c.cy;var Z,E="inside"===v||"inner"===v;if("center"===v)D=c.cx,L=c.cy,T="center";else{var R=(E?(c.r+c.r0)/2*P:c.r*P)+t,k=(E?(c.r+c.r0)/2*N:c.r*N)+n;if(D=R+3*P,L=k+3*N,!E){var V=R+P*(I+u-c.r),z=k+N*(I+u-c.r),G=V+(P<0?-1:1)*M;D="edge"===_?P<0?h+b:h+d-b:G+(P<0?-x:x),L=z,A=[[R,k],[V,z],[G,z]]}T=E?"center":"edge"===_?P>0?"right":"left":P>0?"left":"right"}var B=m.get("rotate");if(Z="number"==typeof B?B*(Math.PI/180):B?P<0?-C+Math.PI:-C:0,r=!!Z,p.x=D,p.y=L,p.rotation=Z,p.setStyle({verticalAlign:"middle"}),E){p.setStyle({align:T});var F=p.states.select;F&&(F.x+=p.x,F.y+=p.y)}else{var W=p.getBoundingRect().clone();W.applyTransform(p.getComputedTransform());var H=(p.style.margin||0)+2.1;W.y-=H/2,W.height+=H,i.push({label:p,labelLine:f,position:v,len:I,len2:M,minTurnAngle:w.get("minTurnAngle"),maxSurfaceAngle:w.get("maxSurfaceAngle"),surfaceNormal:new Ve.Z(P,N),linePoints:A,textAlign:T,labelDistance:x,labelAlignTo:_,edgeDistance:b,bleedMargin:S,rect:W})}l.setTextConfig({inside:E})}})),!r&&e.get("avoidLabelOverlap")&&function(e,t,n,a,i,r,o,s){for(var l=[],u=[],d=Number.MAX_VALUE,h=-Number.MAX_VALUE,c=0;c<e.length;c++){var p=e[c].label;We(e[c])||(p.x<t?(d=Math.min(d,p.x),l.push(e[c])):(h=Math.max(h,p.x),u.push(e[c])))}for(Fe(u,t,n,a,1,0,r,0,s,h),Fe(l,t,n,a,-1,0,r,0,s,d),c=0;c<e.length;c++){var g=e[c];if(p=g.label,!We(g)){var f=g.linePoints;if(f){var y,m="edge"===g.labelAlignTo,v=g.rect.width;(y=m?p.x<t?f[2][0]-g.labelDistance-o-g.edgeDistance:o+i-g.edgeDistance-f[2][0]-g.labelDistance:p.x<t?p.x-o-g.bleedMargin:o+i-p.x-g.bleedMargin)<g.rect.width&&(g.label.style.width=y,"edge"===g.labelAlignTo&&(v=y));var x=f[1][0]-f[2][0];m?p.x<t?f[2][0]=o+g.edgeDistance+v+g.labelDistance:f[2][0]=o+i-g.edgeDistance-v-g.labelDistance:(p.x<t?f[2][0]=p.x+g.labelDistance:f[2][0]=p.x-g.labelDistance,f[1][0]=f[2][0]+x),f[1][1]=f[2][1]=p.y}}}}(i,t,n,u,d,p,h,c);for(var f=0;f<i.length;f++){var y=i[f],m=y.label,v=y.labelLine,x=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:y.textAlign}),x&&((0,s.each)(m.states,g),m.ignore=!0);var _=m.states.select;_&&(_.x+=m.x,_.y+=m.y)}if(v){var b=y.linePoints;x||!b?((0,s.each)(v.states,g),v.ignore=!0):((0,ze.qK)(b,y.minTurnAngle),(0,ze._A)(b,y.surfaceNormal,y.maxSurfaceAngle),v.setShape({points:b}),m.__hostTarget.textGuideLineConfig={anchor:new Ve.Z(b[0][0],b[0][1])})}}}(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=r)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var a=e[0]-n.cx,i=e[1]-n.cy,r=Math.sqrt(a*a+i*i);return r<=n.r&&r>=n.r0}},t.type="pie",t}(N.Z);var qe=n(4963),je=n(7587);function Qe(e,t,n){t=(0,s.isArray)(t)&&{coordDimensions:t}||(0,s.extend)({},t);var a=e.getSource(),i=(0,qe.Z)(a,t),r=new je.Z(i,e);return r.initData(a,n),r}var Ke=n(1772);const Je=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useColorPaletteOnData=!0,t}return(0,a.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Je(s.bind(this.getData,this),s.bind(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return Qe(this,{coordDimensions:["value"],encodeDefaulter:s.curry(Ke.Ss,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),a=e.prototype.getDataParams.call(this,t),i=[];return n.each(n.mapDimension("value"),(function(e){i.push(e)})),a.percent=(0,O.eJ)(i,t,n.hostModel.get("percentPrecision")),a.$vars.push("percent"),a},t.prototype._defaultLabelLine=function(e){_.Cc(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(r.Z);function et(e){e.registerChartView(Ue),e.registerSeriesModel($e),(0,Pe.y)("pie",e.registerAction),e.registerLayout((0,s.curry)(Oe,"pie")),e.registerProcessor(Re("pie"))}var tt=n(8023);const nt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,i.Z)(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}}},t}(r.Z);var at=n(1525),it=n(1754),rt=function(){},ot=function(e){function t(t){return e.call(this,t)||this}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new rt},t.prototype.buildPath=function(e,t){var n=t.points,a=t.size,i=this.symbolProxy,r=i.shape,o=e.getContext?e.getContext():e;if(o&&a[0]<4)this._ctx=o;else{this._ctx=null;for(var s=0;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||this.softClipShape&&!this.softClipShape.contain(l,u)||(r.x=l-a[0]/2,r.y=u-a[1]/2,r.width=a[0],r.height=a[1],i.buildPath(e,r,!0))}}},t.prototype.afterBrush=function(){var e=this.shape,t=e.points,n=e.size,a=this._ctx;if(a)for(var i=0;i<t.length;){var r=t[i++],o=t[i++];isNaN(r)||isNaN(o)||this.softClipShape&&!this.softClipShape.contain(r,o)||a.fillRect(r-n[0]/2,o-n[1]/2,n[0],n[1])}},t.prototype.findDataIndex=function(e,t){for(var n=this.shape,a=n.points,i=n.size,r=Math.max(i[0],4),o=Math.max(i[1],4),s=a.length/2-1;s>=0;s--){var l=2*s,u=a[l]-r/2,d=a[l+1]-o/2;if(e>=u&&t>=d&&e<=u+r&&t<=d+o)return s}return-1},t}(b.ZP);const st=function(){function e(){this.group=new m.Z}return e.prototype.isPersistent=function(){return!this._incremental},e.prototype.updateData=function(e,t){this.group.removeAll();var n=new ot({rectHover:!0,cursor:"default"});n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,!1,t),this.group.add(n),this._incremental=null},e.prototype.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("points");this.group.eachChild((function(e){if(null!=e.startIndex){var n=2*(e.endIndex-e.startIndex),a=4*e.startIndex*2;t=new Float32Array(t.buffer,a,n)}e.setShape("points",t)}))}},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>2e6?(this._incremental||(this._incremental=new it.Z({silent:!0})),this.group.add(this._incremental)):this._incremental=null},e.prototype.incrementalUpdate=function(e,t,n){var a;this._incremental?(a=new ot,this._incremental.addDisplayable(a,!0)):((a=new ot({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(a)),a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,!!this._incremental,n)},e.prototype._setCommon=function(e,t,n,a){var i=t.hostModel;a=a||{};var r=t.getVisual("symbolSize");e.setShape("size",r instanceof Array?r:[r,r]),e.softClipShape=a.clipShape||null,e.symbolProxy=(0,at.t)(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<4;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;if(l&&e.setColor(l),!n){var u=(0,W.A)(e);u.seriesIndex=i.seriesIndex,e.on("mousemove",(function(t){u.dataIndex=null;var n=e.findDataIndex(t.offsetX,t.offsetY);n>=0&&(u.dataIndex=n+(e.startIndex||0))}))}},e.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},e.prototype._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},e}(),lt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=e.getData();this._updateSymbolDraw(a,e).updateData(a,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var a=e.getData();this._updateSymbolDraw(a,e).incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,n){var a=e.getData();if(this.group.dirty(),!this._finished||a.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var i=ee("").reset(e,t,n);i.progress&&i.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},t.prototype._updateSymbolDraw=function(e,t){var n=this._symbolDraw,a=t.pipelineContext.large;return n&&a===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=a?new st:new l.Z,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(N.Z);var ut=n(7049);function dt(e){(0,tt.D)(ut.N),e.registerSeriesModel(nt),e.registerChartView(lt),e.registerLayout(ee("scatter"))}function ht(e){e.eachSeriesByType("radar",(function(e){var t=e.getData(),n=[],a=e.coordinateSystem;if(a){var i=a.getIndicatorAxes();s.each(i,(function(e,r){t.each(t.mapDimension(i[r].dim),(function(e,t){n[t]=n[t]||[];var i=a.dataToPoint(e,r);n[t][r]=ct(i)?i:pt(a)}))})),t.each((function(e){var i=s.find(n[e],(function(e){return ct(e)}))||pt(a);n[e].push(i.slice()),t.setItemLayout(e,n[e])}))}}))}function ct(e){return!isNaN(e[0])&&!isNaN(e[1])}function pt(e){return[e.cx,e.cy]}function gt(e){var t=e.polar;if(t){s.isArray(t)||(t=[t]);var n=[];s.each(t,(function(t,a){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],s.isArray(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):n.push(t)})),e.polar=n}s.each(e.series,(function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)}))}var ft=n(5094),yt=n(4535);const mt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=e.coordinateSystem,i=this.group,r=e.getData(),o=this._data;function l(e,t){var n=e.getItemVisual(t,"symbol")||"circle";if("none"!==n){var a=function(e){return s.isArray(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),i=at.t(n,-1,-1,2,2),r=e.getItemVisual(t,"symbolRotate")||0;return i.attr({style:{strokeNoScale:!0},z2:100,scaleX:a[0]/2,scaleY:a[1]/2,rotation:r*Math.PI/180||0}),i}}function u(t,n,a,i,r,o){a.removeAll();for(var s=0;s<n.length-1;s++){var u=l(i,r);u&&(u.__dimIdx=s,t[s]?(u.setPosition(t[s]),x[o?"initProps":"updateProps"](u,{x:n[s][0],y:n[s][1]},e,r)):u.setPosition(n[s]),a.add(u))}}function d(e){return s.map(e,(function(e){return[a.cx,a.cy]}))}r.diff(o).add((function(t){var n=r.getItemLayout(t);if(n){var a=new ft.Z,i=new ke.Z,o={shape:{points:n}};a.shape.points=d(n),i.shape.points=d(n),x.initProps(a,o,e,t),x.initProps(i,o,e,t);var s=new m.Z,l=new m.Z;s.add(i),s.add(a),s.add(l),u(i.shape.points,n,l,r,t,!0),r.setItemGraphicEl(t,s)}})).update((function(t,n){var a=o.getItemGraphicEl(n),i=a.childAt(0),s=a.childAt(1),l=a.childAt(2),d={shape:{points:r.getItemLayout(t)}};d.shape.points&&(u(i.shape.points,d.shape.points,l,r,t,!1),x.updateProps(i,d,e),x.updateProps(s,d,e),r.setItemGraphicEl(t,a))})).remove((function(e){i.remove(o.getItemGraphicEl(e))})).execute(),r.eachItemGraphicEl((function(e,t){var n=r.getItemModel(t),a=e.childAt(0),o=e.childAt(1),l=e.childAt(2),u=r.getItemVisual(t,"style"),d=u.fill;i.add(e),a.useStyle(s.defaults(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:d})),(0,G.WO)(a,n,"lineStyle"),(0,G.WO)(o,n,"areaStyle");var h=n.getModel("areaStyle"),c=h.isEmpty()&&h.parentModel.isEmpty();o.ignore=c,s.each(["emphasis","select","blur"],(function(e){var t=n.getModel([e,"areaStyle"]),a=t.isEmpty()&&t.parentModel.isEmpty();o.ensureState(e).ignore=a&&c})),o.useStyle(s.defaults(h.getAreaStyle(),{fill:d,opacity:.7,decal:u.decal}));var p=n.getModel("emphasis"),g=p.getModel("itemStyle").getItemStyle();l.eachChild((function(e){if(e instanceof yt.ZP){var a=e.style;e.useStyle(s.extend({image:a.image,x:a.x,y:a.y,width:a.width,height:a.height},u))}else e.useStyle(u),e.setColor(d);e.ensureState("emphasis").style=s.clone(g);var i=r.get(r.dimensions[e.__dimIdx],t);(null==i||isNaN(i))&&(i=""),(0,B.ni)(e,(0,B.k3)(n),{labelFetcher:r.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:i,inheritColor:d,defaultOpacity:u.opacity})})),(0,G.vF)(e,p.get("focus"),p.get("blurScope"))})),this._data=r},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(N.Z);var vt=n(5685);const xt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.useColorPaletteOnData=!0,n.hasSymbolVisual=!0,n}return(0,a.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Je(s.bind(this.getData,this),s.bind(this.getRawData,this))},t.prototype.getInitialData=function(e,t){return Qe(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,t,n){var a=this.getData(),i=this.coordinateSystem.getIndicatorAxes(),r=this.getData().getName(e),o=""===r?this.name:r,l=(0,vt.jT)(this,e);return(0,vt.TX)("section",{header:o,sortBlocks:!0,blocks:s.map(i,(function(t){var n=a.get(a.mapDimension(t.dim),e);return(0,vt.TX)("nameValue",{markerType:"subItem",markerColor:l,name:t.name,value:n,sortParam:n})}))})},t.prototype.getTooltipPosition=function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,a=t.getValues(s.map(n.dimensions,(function(e){return t.mapDimension(e)})),e),i=0,r=a.length;i<r;i++)if(!isNaN(a[i])){var o=n.getIndicatorAxes();return n.coordToPoint(o[i].dataToCoord(a[i]),i)}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4},t}(r.Z);var _t=n(1391);function bt(e){(0,tt.D)(_t.N),e.registerChartView(mt),e.registerSeriesModel(xt),e.registerLayout(ht),e.registerProcessor(Re("radar")),e.registerPreprocessor(gt)}var St=n(9538),wt=n(4121),It=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n,a){if(!a||"mapToggleSelect"!==a.type||a.from!==this.uid){var i=this.group;if(i.removeAll(),!e.getHostGeoModel()){if(a&&"geoRoam"===a.type&&"series"===a.componentType&&a.seriesId===e.id)(r=this._mapDraw)&&i.add(r.group);else if(e.needsDrawMap){var r=this._mapDraw||new wt.Z(n);i.add(r.group),r.draw(e,t,n,this,a),this._mapDraw=r}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,t,n){var a=e.originalData,i=this.group;a.each(a.mapDimension("value"),(function(t,n){if(!isNaN(t)){var r=a.getItemLayout(n);if(r&&r.point){var o=r.point,s=r.offset,l=new St.Z({style:{fill:e.getData().getVisual("style").fill},shape:{cx:o[0]+9*s,cy:o[1],r:3},silent:!0,z2:8+(s?0:G.zr+1)});if(!s){var u=e.mainSeries.getData(),d=a.getName(n),h=u.indexOfName(d),c=a.getItemModel(n),p=c.getModel("label"),g=u.getItemGraphicEl(h);(0,B.ni)(l,(0,B.k3)(c),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(h,n)}}}),l.disableLabelAnimation=!0,p.get("position")||l.setTextConfig({position:"bottom"}),g.onHoverStateChange=function(e){l.useState(e)}}i.add(l)}}}))},t.type="map",t}(N.Z);const Mt=It;var Dt=n(2453),Lt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,a=n.getRegion(t);return a&&n.dataToPoint(a.center)}},n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e){for(var t=Qe(this,{coordDimensions:["value"],encodeDefaulter:s.curry(Ke.Ss,this)}),n=s.createHashMap(),a=[],i=0,r=t.count();i<r;i++){var o=t.getName(i);n.set(o,!0)}var l=Dt.Z.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return s.each(l.regions,(function(e){var t=e.name;n.get(t)||a.push(t)})),t.appendValues([],a),t},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},t.prototype.formatTooltip=function(e,t,n){for(var a=this.getData(),i=this.getRawValue(e),r=a.getName(e),o=this.seriesGroup,s=[],l=0;l<o.length;l++){var u=o[l].originalData.indexOfName(r),d=a.mapDimension("value");isNaN(o[l].originalData.get(d,u))||s.push(o[l].name)}return(0,vt.TX)("section",{header:s.join(", "),noHeader:!s.length,blocks:[(0,vt.TX)("nameValue",{name:r,value:i})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(r.Z);const At=Lt;function Tt(e){var t={};e.eachSeriesByType("map",(function(e){var n=e.getHostGeoModel(),a=n?"o"+n.id:"i"+e.getMapType();(t[a]=t[a]||[]).push(e)})),s.each(t,(function(e,t){for(var n,a,i,r=(n=s.map(e,(function(e){return e.getData()})),a=e[0].get("mapValueCalculation"),i={},s.each(n,(function(e){e.each(e.mapDimension("value"),(function(t,n){var a="ec-"+e.getName(n);i[a]=i[a]||[],isNaN(t)||i[a].push(t)}))})),n[0].map(n[0].mapDimension("value"),(function(e,t){for(var r="ec-"+n[0].getName(t),o=0,s=1/0,l=-1/0,u=i[r].length,d=0;d<u;d++)s=Math.min(s,i[r][d]),l=Math.max(l,i[r][d]),o+=i[r][d];return 0===u?NaN:"min"===a?s:"max"===a?l:"average"===a?o/u:o}))),o=0;o<e.length;o++)e[o].originalData=e[o].getData();for(o=0;o<e.length;o++)e[o].seriesGroup=e,e[o].needsDrawMap=0===o&&!e[o].getHostGeoModel(),e[o].setData(r.cloneShallow()),e[o].mainSeries=e[0]}))}function Ct(e){var t={};e.eachSeriesByType("map",(function(n){var a=n.getMapType();if(!n.getHostGeoModel()&&!t[a]){var i={};s.each(n.seriesGroup,(function(t){var n=t.coordinateSystem,a=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&a.each(a.mapDimension("value"),(function(e,t){var r=a.getName(t),o=n.getRegion(r);if(o&&!isNaN(e)){var s=i[r]||0,l=n.dataToPoint(o.center);i[r]=s+1,a.setItemLayout(t,{point:l,offset:s})}}))}));var r=n.getData();r.each((function(e){var t=r.getName(e),n=r.getItemLayout(e)||{};n.showLabel=!i[t],r.setItemLayout(e,n)})),t[a]=!0}}))}var Pt=n(7563);function Nt(e){(0,tt.D)(Pt.N),e.registerChartView(Mt),e.registerSeriesModel(At),e.registerLayout(Ct),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Tt),(0,Pe.y)("map",e.registerAction)}var Zt=n(4174);function Et(e,t){var n=e.isExpand?e.children:[],a=e.parentNode.children,i=e.hierNode.i?a[e.hierNode.i-1]:null;if(n.length){!function(e){for(var t=e.children,n=t.length,a=0,i=0;--n>=0;){var r=t[n];r.hierNode.prelim+=a,r.hierNode.modifier+=a,i+=r.hierNode.change,a+=r.hierNode.shift+i}}(e);var r=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-r):e.hierNode.prelim=r}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=function(e,t,n,a){if(t){for(var i=e,r=e,o=r.parentNode.children[0],s=t,l=i.hierNode.modifier,u=r.hierNode.modifier,d=o.hierNode.modifier,h=s.hierNode.modifier;s=zt(s),r=Gt(r),s&&r;){i=zt(i),o=Gt(o),i.hierNode.ancestor=e;var c=s.hierNode.prelim+h-r.hierNode.prelim-u+a(s,r);c>0&&(Ft(Bt(s,e,n),e,c),u+=c,l+=c),h+=s.hierNode.modifier,u+=r.hierNode.modifier,l+=i.hierNode.modifier,d+=o.hierNode.modifier}s&&!zt(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=h-l),r&&!Gt(o)&&(o.hierNode.thread=r,o.hierNode.modifier+=u-d,n=e)}return n}(e,i,e.parentNode.hierNode.defaultAncestor||a[0],t)}function Ot(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function Rt(e){return arguments.length?e:Wt}function kt(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Vt(e,t){return Ne.ME(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function zt(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Gt(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Bt(e,t,n){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:n}function Ft(e,t,n){var a=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=a,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=a}function Wt(e,t){return e.parentNode===t.parentNode?1:2}var Ht=n(3726),Xt=n(3845),Yt=n(1194),Ut=n(9176),qt=n(1485),jt=function(){this.parentPoint=[],this.childPoints=[]},Qt=function(e){function t(t){return e.call(this,t)||this}return(0,a.ZT)(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new jt},t.prototype.buildPath=function(e,t){var n=t.childPoints,a=n.length,i=t.parentPoint,r=n[0],o=n[a-1];if(1===a)return e.moveTo(i[0],i[1]),void e.lineTo(r[0],r[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,u=1-l,d=(0,O.GM)(t.forkPosition,1),h=[];h[l]=i[l],h[u]=i[u]+(o[u]-i[u])*d,e.moveTo(i[0],i[1]),e.lineTo(h[0],h[1]),e.moveTo(r[0],r[1]),h[l]=r[l],e.lineTo(h[0],h[1]),h[l]=o[l],e.lineTo(h[0],h[1]),e.lineTo(o[0],o[1]);for(var c=1;c<a-1;c++){var p=n[c];e.moveTo(p[0],p[1]),h[l]=p[l],e.lineTo(h[0],h[1])}},t}(b.ZP),Kt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._mainGroup=new m.Z,n}return(0,a.ZT)(t,e),t.prototype.init=function(e,t){this._controller=new Ut.Z(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,n){var a=e.getData(),i=e.layoutInfo,r=this._mainGroup;"radial"===e.get("layout")?(r.x=i.x+i.width/2,r.y=i.y+i.height/2):(r.x=i.x,r.y=i.y),this._updateViewCoordSys(e),this._updateController(e,t,n);var o=this._data;a.diff(o).add((function(t){Jt(a,t)&&$t(a,t,null,r,e)})).update((function(t,n){var i=o.getItemGraphicEl(n);Jt(a,t)?$t(a,t,i,r,e):i&&en(o,n,i,r,e)})).remove((function(t){var n=o.getItemGraphicEl(t);n&&en(o,t,n,r,e)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&a.eachItemGraphicEl((function(t,a){t.off("click").on("click",(function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:a})}))})),this._data=a},t.prototype._updateViewCoordSys=function(e){var t=e.getData(),n=[];t.each((function(e){var a=t.getItemLayout(e);!a||isNaN(a.x)||isNaN(a.y)||n.push([+a.x,+a.y])}));var a=[],i=[];Ht.zk(n,a,i);var r=this._min,o=this._max;i[0]-a[0]==0&&(a[0]=r?r[0]:a[0]-1,i[0]=o?o[0]:i[0]+1),i[1]-a[1]==0&&(a[1]=r?r[1]:a[1]-1,i[1]=o?o[1]:i[1]+1);var s=e.coordinateSystem=new Xt.Z;s.zoomLimit=e.get("scaleLimit"),s.setBoundingRect(a[0],a[1],i[0]-a[0],i[1]-a[1]),s.setCenter(e.get("center")),s.setZoom(e.get("zoom")),this.group.attr({x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY}),this._min=a,this._max=i},t.prototype._updateController=function(e,t,n){var a=this,i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker((function(t,a,i){var r=o.getBoundingRect();return r.applyTransform(o.transform),r.contain(a,i)&&!(0,qt.l)(t,n,e)})),i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){Yt.e(r,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){Yt.H(r,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),a._updateNodeAndLinkScale(e),n.updateLabelLayout()}))},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),n=this._getNodeGlobalScale(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(n)}))},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,a=t.scaleX||1;return((t.getZoom()-1)*n+1)/a},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(N.Z);function Jt(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)}function $t(e,t,n,a,i){var r=!n,o=e.tree.getNodeByDataIndex(t),l=o.getModel(),d=o.getVisual("style").fill,h=!1===o.isExpand&&0!==o.children.length?d:"#fff",c=e.tree.root,p=o.parentNode===c?o:o.parentNode||o,g=e.getItemGraphicEl(p.dataIndex),f=p.getLayout(),y=g?{x:g.__oldX,y:g.__oldY,rawX:g.__radialOldRawX,rawY:g.__radialOldRawY}:f,m=o.getLayout();r?((n=new u.Z(e,t,null,{symbolInnerColor:h,useNameLabel:!0})).x=y.x,n.y=y.y):n.updateData(e,t,null,{symbolInnerColor:h,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=m.rawX,n.__radialRawY=m.rawY,a.add(n),e.setItemGraphicEl(t,n),n.__oldX=n.x,n.__oldY=n.y,x.updateProps(n,{x:m.x,y:m.y},i);var v=n.getSymbolPath();if("radial"===i.get("layout")){var _=c.children[0],b=_.getLayout(),S=_.children.length,w=void 0,I=void 0;if(m.x===b.x&&!0===o.isExpand){var M={x:(_.children[0].getLayout().x+_.children[S-1].getLayout().x)/2,y:(_.children[0].getLayout().y+_.children[S-1].getLayout().y)/2};(w=Math.atan2(M.y-b.y,M.x-b.x))<0&&(w=2*Math.PI+w),(I=M.x<b.x)&&(w-=Math.PI)}else(w=Math.atan2(m.y-b.y,m.x-b.x))<0&&(w=2*Math.PI+w),0===o.children.length||0!==o.children.length&&!1===o.isExpand?(I=m.x<b.x)&&(w-=Math.PI):(I=m.x>b.x)||(w-=Math.PI);var D=I?"left":"right",L=l.getModel("label"),A=L.get("rotate"),T=A*(Math.PI/180),C=v.getTextContent();C&&(v.setTextConfig({position:L.get("position")||D,rotation:null==A?-w:T,origin:"center"}),C.setStyle("verticalAlign","middle"))}var P=l.get(["emphasis","focus"]),N="ancestor"===P?o.getAncestorsIndices():"descendant"===P?o.getDescendantIndices():null;N&&((0,W.A)(n).focus=N),function(e,t,n,a,i,r,o,l){var u=t.getModel(),d=e.get("edgeShape"),h=e.get("layout"),c=e.getOrient(),p=e.get(["lineStyle","curveness"]),g=e.get("edgeForkPosition"),f=u.getModel("lineStyle").getLineStyle(),y=a.__edge;if("curve"===d)t.parentNode&&t.parentNode!==n&&(y||(y=a.__edge=new Zt.Z({shape:tn(h,c,p,i,i)})),x.updateProps(y,{shape:tn(h,c,p,r,o)},e));else if("polyline"===d&&"orthogonal"===h&&t!==n&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var m=t.children,v=[],_=0;_<m.length;_++){var b=m[_].getLayout();v.push([b.x,b.y])}y||(y=a.__edge=new Qt({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:c,forkPosition:g}})),x.updateProps(y,{shape:{parentPoint:[o.x,o.y],childPoints:v}},e)}y&&(y.useStyle(s.defaults({strokeNoScale:!0,fill:null},f)),(0,G.WO)(y,u,"lineStyle"),(0,G.MA)(y),l.add(y))}(i,o,c,n,y,f,m,a),n.__edge&&(n.onHoverStateChange=function(t){if("blur"!==t){var a=o.parentNode&&e.getItemGraphicEl(o.parentNode.dataIndex);a&&a.hoverState===G.CX||(0,G.Gl)(n.__edge,t)}})}function en(e,t,n,a,i){for(var r,o=e.tree.getNodeByDataIndex(t),s=e.tree.root,l=o.parentNode===s?o:o.parentNode||o;null==(r=l.getLayout());)l=l.parentNode===s?l:l.parentNode||l;var u={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};x.removeElement(n,{x:r.x+1,y:r.y+1},i,{cb:function(){a.remove(n),e.setItemGraphicEl(t,null)},removeOpt:u}),n.fadeOut(null,{fadeLabel:!0,animation:u});var d=e.getItemGraphicEl(l.dataIndex).__edge,h=n.__edge||(!1===l.isExpand||1===l.children.length?d:void 0),c=i.get("edgeShape"),p=i.get("layout"),g=i.get("orient"),f=i.get(["lineStyle","curveness"]);h&&("curve"===c?x.removeElement(h,{shape:tn(p,g,f,r,r),style:{opacity:0}},i,{cb:function(){a.remove(h)},removeOpt:u}):"polyline"===c&&"orthogonal"===i.get("layout")&&x.removeElement(h,{shape:{parentPoint:[r.x,r.y],childPoints:[[r.x,r.y]]},style:{opacity:0}},i,{cb:function(){a.remove(h)},removeOpt:u}))}function tn(e,t,n,a,i){var r,o,s,l,u,d,h,c;if("radial"===e){u=a.rawX,h=a.rawY,d=i.rawX,c=i.rawY;var p=kt(u,h),g=kt(u,h+(c-h)*n),f=kt(d,c+(h-c)*n),y=kt(d,c);return{x1:p.x||0,y1:p.y||0,x2:y.x||0,y2:y.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:f.x||0,cpy2:f.y||0}}return u=a.x,h=a.y,d=i.x,c=i.y,"LR"!==t&&"RL"!==t||(r=u+(d-u)*n,o=h,s=d+(u-d)*n,l=c),"TB"!==t&&"BT"!==t||(r=u,o=h+(c-h)*n,s=d,l=c+(h-c)*n),{x1:u,y1:h,x2:d,y2:c,cpx1:r,cpy1:o,cpx2:s,cpy2:l}}const nn=Kt;var an=(0,_.Yf)();function rn(e,t){if(an(this).mainData===this){var n=(0,s.extend)({},an(this).datas);n[this.dataType]=t,dn(t,n,e)}else hn(t,this.dataType,an(this).mainData,e);return t}function on(e,t){return e.struct&&e.struct.update(),t}function sn(e,t){return(0,s.each)(an(t).datas,(function(n,a){n!==t&&hn(n.cloneShallow(),a,t,e)})),t}function ln(e){var t=an(this).mainData;return null==e||null==t?t:an(t).datas[e]}function un(){var e=an(this).mainData;return null==e?[{data:e}]:(0,s.map)((0,s.keys)(an(e).datas),(function(t){return{type:t,data:an(e).datas[t]}}))}function dn(e,t,n){an(e).datas={},(0,s.each)(t,(function(t,a){hn(t,a,e,n)}))}function hn(e,t,n,a){an(n).datas[t]=e,an(e).mainData=n,e.dataType=t,a.struct&&(e[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=e),e.getLinkedData=ln,e.getLinkedDataAll=un}const cn=function(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,dn(t,n,e),(0,s.each)(n,(function(n){(0,s.each)(t.TRANSFERABLE_METHODS,(function(t){n.wrapMethod(t,(0,s.curry)(rn,e))}))})),t.wrapMethod("cloneShallow",(0,s.curry)(sn,e)),(0,s.each)(t.CHANGABLE_METHODS,(function(n){t.wrapMethod(n,(0,s.curry)(on,e))})),(0,s.assert)(n[t.dataType]===t)};var pn=function(){function e(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),e=e||{},s.isString(e)&&(e={order:e});var a,i=e.order||"preorder",r=this[e.attr||"children"];"preorder"===i&&(a=t.call(n,this));for(var o=0;!a&&o<r.length;o++)r[o].eachNode(e,t,n);"postorder"===i&&t.call(n,this)},e.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var a=this.children[n];a.updateDepthAndHeight(e+1),a.height>t&&(t=a.height)}this.height=t+1},e.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].getNodeById(e);if(i)return i}},e.prototype.contains=function(e){if(e===this)return!0;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].contains(e);if(i)return i}},e.prototype.getAncestors=function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},e.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},e.prototype.getDescendantIndices=function(){var e=[];return this.eachNode((function(t){e.push(t.dataIndex)})),e},e.prototype.getValue=function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},e.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},e.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},e.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},e}();const gn=function(){function e(e){this.type="tree",this._nodes=[],this.hostModel=e}return e.prototype.eachNode=function(e,t,n){this.root.eachNode(e,t,n)},e.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},e.prototype.getNodeById=function(e){return this.root.getNodeById(e)},e.prototype.update=function(){for(var e=this.data,t=this._nodes,n=0,a=t.length;n<a;n++)t[n].dataIndex=-1;for(n=0,a=e.count();n<a;n++)t[e.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,n,a){var i=new e(n),r=[],o=1;!function e(t,n){var a=t.value;o=Math.max(o,s.isArray(a)?a.length:1),r.push(t);var l=new pn((0,_.U5)(t.name,""),i);n?function(e,t){var n=t.children;e.parentNode!==t&&(n.push(e),e.parentNode=t)}(l,n):i.root=l,i._nodes.push(l);var u=t.children;if(u)for(var d=0;d<u.length;d++)e(u[d],l)}(t),i.root.updateDepthAndHeight(0);var l=(0,qe.Z)(r,{coordDimensions:["value"],dimensionsCount:o}),u=new je.Z(l,n);return u.initData(r),a&&a(u),cn({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();var fn=n(1497),yn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},n=e.leaves||{},a=new fn.Z(n,this,this.ecModel),i=gn.createTree(t,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var n=i.getNodeByDataIndex(t);return n.children.length&&n.isExpand||(e.parentModel=a),e}))})),r=0;i.eachNode("preorder",(function(e){e.depth>r&&(r=e.depth)}));var o=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:r;return i.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=o})),i.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,n){for(var a=this.getData().tree,i=a.root.children[0],r=a.getNodeByDataIndex(e),o=r.getValue(),s=r.name;r&&r!==i;)s=r.parentNode.name+"."+s,r=r.parentNode;return(0,vt.TX)("nameValue",{name:s,value:o,noValue:isNaN(o)||null==o})},t.type="series.tree",t.layoutMode="box",t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(r.Z);const mn=yn;function vn(e,t){for(var n,a=[e];n=a.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var r=i.length-1;r>=0;r--)a.push(i[r])}}function xn(e,t){e.eachSeriesByType("tree",(function(e){!function(e,t){var n=Vt(e,t);e.layoutInfo=n;var a=e.get("layout"),i=0,r=0,o=null;"radial"===a?(i=2*Math.PI,r=Math.min(n.height,n.width)/2,o=Rt((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(i=n.width,r=n.height,o=Rt());var s=e.getData().tree.root,l=s.children[0];if(l){!function(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n,a,i=[t];n=i.pop();)if(a=n.children,n.isExpand&&a.length)for(var r=a.length-1;r>=0;r--){var o=a[r];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:r,thread:null},i.push(o)}}(s),function(e,t,n){for(var a,i=[e],r=[];a=i.pop();)if(r.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)i.push(o[s])}for(;a=r.pop();)t(a,n)}(l,Et,o),s.hierNode.modifier=-l.hierNode.prelim,vn(l,Ot);var u=l,d=l,h=l;vn(l,(function(e){var t=e.getLayout().x;t<u.getLayout().x&&(u=e),t>d.getLayout().x&&(d=e),e.depth>h.depth&&(h=e)}));var c=u===d?1:o(u,d)/2,p=c-u.getLayout().x,g=0,f=0,y=0,m=0;if("radial"===a)g=i/(d.getLayout().x+c+p),f=r/(h.depth-1||1),vn(l,(function(e){y=(e.getLayout().x+p)*g,m=(e.depth-1)*f;var t=kt(y,m);e.setLayout({x:t.x,y:t.y,rawX:y,rawY:m},!0)}));else{var v=e.getOrient();"RL"===v||"LR"===v?(f=r/(d.getLayout().x+c+p),g=i/(h.depth-1||1),vn(l,(function(e){m=(e.getLayout().x+p)*f,y="LR"===v?(e.depth-1)*g:i-(e.depth-1)*g,e.setLayout({x:y,y:m},!0)}))):"TB"!==v&&"BT"!==v||(g=i/(d.getLayout().x+c+p),f=r/(h.depth-1||1),vn(l,(function(e){y=(e.getLayout().x+p)*g,m="TB"===v?(e.depth-1)*f:r-(e.depth-1)*f,e.setLayout({x:y,y:m},!0)})))}}}(e,t)}))}function _n(e){e.eachSeriesByType("tree",(function(e){var t=e.getData();t.tree.eachNode((function(e){var n=e.getModel().getModel("itemStyle").getItemStyle(),a=t.ensureUniqueItemVisual(e.dataIndex,"style");(0,s.extend)(a,n)}))}))}var bn=n(553);function Sn(e){e.registerChartView(nn),e.registerSeriesModel(mn),e.registerLayout(xn),e.registerVisual(_n),function(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var n=e.dataIndex,a=t.getData().tree.getNodeByDataIndex(n);a.isExpand=!a.isExpand}))})),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var n=t.coordinateSystem,a=(0,bn.A)(n,e);t.setCenter&&t.setCenter(a.center),t.setZoom&&t.setZoom(a.zoom)}))}))}(e)}function wn(e,t,n){if(e&&s.indexOf(t,e.type)>=0){var a=n.getData().tree.root,i=e.targetNode;if("string"==typeof i&&(i=a.getNodeById(i)),i&&a.contains(i))return{node:i};var r=e.targetNodeId;if(null!=r&&(i=a.getNodeById(r)))return{node:i}}}function In(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function Mn(e,t){var n=In(e);return s.indexOf(n,t)>=0}function Dn(e,t){for(var n=[];e;){var a=e.dataIndex;n.push({name:e.name,dataIndex:a,value:t.getRawValue(a)}),e=e.parentNode}return n.reverse(),n}var Ln=function(){},An=["treemapZoomToNode","treemapRender","treemapMove"],Tn=n(5494);function Cn(e){var t=e.getData().tree,n={};t.eachNode((function(t){for(var a=t;a&&a.depth>1;)a=a.parentNode;var i=(0,Tn.i)(e.ecModel,a.name||a.dataIndex+"",n);t.setVisual("decal",i)}))}var Pn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.preventUsingHoverLayer=!0,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};Nn(n);var a=e.levels||[],i=this.designatedVisualItemStyle={},r=new fn.Z({itemStyle:i},this,t);a=e.levels=function(e,t){var n,a,i=(0,_.kF)(t.get("color")),r=(0,_.kF)(t.get(["aria","decal","decals"]));if(i){e=e||[],s.each(e,(function(e){var t=new fn.Z(e),i=t.get("color"),r=t.get("decal");(t.get(["itemStyle","color"])||i&&"none"!==i)&&(n=!0),(t.get(["itemStyle","decal"])||r&&"none"!==r)&&(a=!0)}));var o=e[0]||(e[0]={});return n||(o.color=i.slice()),!a&&r&&(o.decal=r.slice()),e}}(a,t);var o=s.map(a||[],(function(e){return new fn.Z(e,r,t)}),this),l=gn.createTree(n,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var n=l.getNodeByDataIndex(t),a=o[n.depth];return e.parentModel=a||r,e}))}));return l.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,n){var a=this.getData(),i=this.getRawValue(e),r=a.getName(e);return(0,vt.TX)("nameValue",{name:r,value:i})},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treePathInfo=Dn(a,this),n},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},s.extend(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=s.createHashMap(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Cn(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(r.Z);function Nn(e){var t=0;s.each(e.children,(function(e){Nn(e);var n=e.value;s.isArray(n)&&(n=n[0]),t+=n}));var n=e.value;s.isArray(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=t),n<0&&(n=0),s.isArray(e.value)?e.value[0]=n:e.value=n}const Zn=Pn;var En=n(4130),On=5,Rn=function(){function e(e){this.group=new m.Z,e.add(this.group)}return e.prototype.render=function(e,t,n,a){var i=e.getModel("breadcrumb"),r=this.group;if(r.removeAll(),i.get("show")&&n){var o=i.getModel("itemStyle"),s=o.getModel("textStyle"),l={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(e,l,o,s,a),Ne.p$(r,l.pos,l.box)}},e.prototype._prepare=function(e,t,n){for(var a=e;a;a=a.parentNode){var i=(0,_.U5)(a.getModel().get("name"),""),r=n.getTextRect(i),o=Math.max(r.width+16,t.emptyItemWidth);t.totalWidth+=o+8,t.renderList.push({node:a,text:i,width:o})}},e.prototype._renderContent=function(e,t,n,a,i){for(var r=0,o=t.emptyItemWidth,l=e.get(["breadcrumb","height"]),u=Ne.lq(t.pos,t.box),d=t.totalWidth,h=t.renderList,c=h.length-1;c>=0;c--){var p=h[c],g=p.node,f=p.width,y=p.text;d>u.width&&(d-=f-o,f=o,y=null);var m=new ft.Z({shape:{points:kn(r,0,f,l,c===h.length-1,0===c)},style:(0,s.defaults)(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new v.ZP({style:{text:y,fill:a.getTextColor(),font:a.getFont()}}),textConfig:{position:"inside"},z:10,onclick:(0,s.curry)(i,g)});m.disableLabelAnimation=!0,this.group.add(m),Vn(m,e,g),r+=f+8}},e.prototype.remove=function(){this.group.removeAll()},e}();function kn(e,t,n,a,i,r){var o=[[i?e:e-On,t],[e+n,t],[e+n,t+a],[i?e:e-On,t+a]];return!r&&o.splice(2,0,[e+n+On,t+a/2]),!i&&o.push([e,t+a/2]),o}function Vn(e,t,n){(0,W.A)(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.componentIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&Dn(n,t)}}const zn=Rn;var Gn=n(479),Bn=n(2892),Fn=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(e,t,n,a,i){return!this._elExistsMap[e.id]&&(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:n,delay:a,easing:i}),!0)},e.prototype.finished=function(e){return this._finishedCallback=e,this},e.prototype.start=function(){for(var e=this,t=this._storage.length,n=function(){--t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},a=0,i=this._storage.length;a<i;a++){var r=this._storage[a];r.el.animateTo(r.target,{duration:r.duration,delay:r.delay,easing:r.easing,setToFinal:!0,done:n,aborted:n})}return this},e}(),Wn=n(9066),Hn=n(7719),Xn=m.Z,Yn=Z.Z,Un="label",qn="upperLabel",jn=(0,Wn.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Qn=function(e){var t=jn(e);return t.stroke=t.fill=t.lineWidth=null,t},Kn=(0,_.Yf)(),Jn=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._state="ready",n._storage={nodeGroup:[],background:[],content:[]},n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n,a){var i=t.findComponents({mainType:"series",subType:"treemap",query:a});if(!((0,s.indexOf)(i,e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var r=wn(a,["treemapZoomToNode","treemapRootToNode"],e),o=a&&a.type,l=e.layoutInfo,u=!this._oldTree,d=this._storage,h="treemapRootToNode"===o&&r&&d?{rootNodeGroup:d.nodeGroup[r.node.getRawIndex()],direction:a.direction}:null,c=this._giveContainerGroup(l),p=this._doRender(c,e,h);u||o&&"treemapZoomToNode"!==o&&"treemapRootToNode"!==o?p.renderFinally():this._doAnimation(c,p,e,h),this._resetController(n),this._renderBreadcrumb(e,n,r)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new Xn,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,n){var a=t.getData().tree,i=this._oldTree,r={nodeGroup:[],background:[],content:[]},o={nodeGroup:[],background:[],content:[]},l=this._storage,u=[];function d(e,a,i,d){return function(e,t,n,a,i,r,o,l,u,d){if(o){var h=o.getLayout(),c=e.getData(),p=o.getModel();if(c.setItemGraphicEl(o.dataIndex,null),h&&h.isInView){var g=h.width,f=h.height,y=h.borderWidth,v=h.invisible,x=o.getRawIndex(),b=l&&l.getRawIndex(),S=o.viewChildren,w=h.upperHeight,I=S&&S.length,M=p.getModel("itemStyle"),D=p.getModel(["emphasis","itemStyle"]),L=p.getModel(["blur","itemStyle"]),A=p.getModel(["select","itemStyle"]),T=M.get("borderRadius")||0,C=z("nodeGroup",Xn);if(C){if(u.add(C),C.x=h.x||0,C.y=h.y||0,C.markRedraw(),Kn(C).nodeWidth=g,Kn(C).nodeHeight=f,h.isAboveViewRoot)return C;var P=z("background",Yn,d,1);P&&function(t,n,a){var i=(0,W.A)(n);if(i.dataIndex=o.dataIndex,i.seriesIndex=e.seriesIndex,n.setShape({x:0,y:0,width:g,height:f,r:T}),v)R(n);else{n.invisible=!1;var r=o.getVisual("style"),s=r.stroke,l=Qn(M);l.fill=s;var u=jn(D);u.fill=D.get("borderColor");var d=jn(L);d.fill=L.get("borderColor");var h=jn(A);if(h.fill=A.get("borderColor"),a){var c=g-2*y;k(n,s,c,0,r.opacity,{x:y,y:0,width:c,height:w})}else n.removeTextContent();n.setStyle(l),n.ensureState("emphasis").style=u,n.ensureState("blur").style=d,n.ensureState("select").style=h,(0,G.MA)(n)}t.add(n)}(C,P,I&&h.upperLabelHeight);var N=p.get(["emphasis","focus"]),Z=p.get(["emphasis","blurScope"]),E="ancestor"===N?o.getAncestorsIndices():"descendant"===N?o.getDescendantIndices():null;if(I)(0,G.Av)(C)&&(0,G.Nj)(C,!1),P&&((0,G.Nj)(P,!0),c.setItemGraphicEl(o.dataIndex,P),(0,G.Ib)(P,E||N,Z));else{var O=z("content",Yn,d,2);O&&function(t,n){var a=(0,W.A)(n);a.dataIndex=o.dataIndex,a.seriesIndex=e.seriesIndex;var i=Math.max(g-2*y,0),r=Math.max(f-2*y,0);if(n.culling=!0,n.setShape({x:y,y,width:i,height:r,r:T}),v)R(n);else{n.invisible=!1;var s=o.getVisual("style"),l=s.fill,u=Qn(M);u.fill=l,u.decal=s.decal;var d=jn(D),h=jn(L),c=jn(A);k(n,l,i,s.opacity),n.setStyle(u),n.ensureState("emphasis").style=d,n.ensureState("blur").style=h,n.ensureState("select").style=c,(0,G.MA)(n)}t.add(n)}(C,O),P&&(0,G.Av)(P)&&(0,G.Nj)(P,!1),(0,G.Nj)(C,!0),c.setItemGraphicEl(o.dataIndex,C),(0,G.Ib)(C,E||N,Z)}return C}}}function R(e){!e.invisible&&r.push(e)}function k(t,n,a,i,r,l){var u=p.getModel(l?qn:Un),d=(0,s.retrieve)(e.getFormattedLabel(o.dataIndex,"normal",null,null,u.get("formatter")),(0,_.U5)(p.get("name"),null));if(!l&&h.isLeafRoot){var c=e.get("drillDownIcon",!0);d=c?c+" "+d:d}var g=u.getShallow("show");(0,B.ni)(t,(0,B.k3)(p,l?qn:Un),{defaultText:g?d:null,inheritColor:n,defaultOpacity:a,labelFetcher:e,labelDataIndex:o.dataIndex});var f=t.getTextContent(),y=f.style,m=(0,s.normalizeCssArray)(y.padding||0);l&&(t.setTextConfig({layoutRect:l}),f.disableLabelLayout=!0),f.beforeUpdate=function(){var e=Math.max((l?l.width:t.shape.width)-m[1]-m[3],0),n=Math.max((l?l.height:t.shape.height)-m[0]-m[2],0);y.width===e&&y.height===n||f.setStyle({width:e,height:n})},y.truncateMinChar=2,y.lineOverflow="truncate",V(y,l,h);var v=f.getState("emphasis");V(v?v.style:null,l,h)}function V(t,n,a){var i=t?t.text:null;if(!n&&a.isLeafRoot&&null!=i){var r=e.get("drillDownIcon",!0);t.text=r?r+" "+i:i}}function z(e,r,l,u){var d=null!=b&&n[e][b],h=i[e];return d?(n[e][b]=null,function(e,t){var n=e[x]={};t instanceof Xn?(n.oldX=t.x,n.oldY=t.y):n.oldShape=(0,s.extend)({},t.shape)}(h,d)):v||((d=new r)instanceof Hn.ZP&&(d.z=function(e,t){var n=10*e+t;return(n-1)/n}(l,u)),function(e,t){var n=e[x]={},r=o.parentNode,s=t instanceof m.Z;if(r&&(!a||"drillDown"===a.direction)){var l=0,u=0,d=i.background[r.getRawIndex()];!a&&d&&d.oldShape&&(l=d.oldShape.width,u=d.oldShape.height),s?(n.oldX=0,n.oldY=u):n.oldShape={x:l,y:u,width:0,height:0}}n.fadein=!s}(h,d)),t[e][x]=d}}(t,o,l,n,r,u,e,a,i,d)}!function e(t,n,a,i,r){function o(e){return e.getId()}function l(o,s){var l=null!=o?t[o]:null,u=null!=s?n[s]:null,h=d(l,u,a,r);h&&e(l&&l.viewChildren||[],u&&u.viewChildren||[],h,i,r+1)}i?(n=t,(0,s.each)(t,(function(e,t){!e.isRemoved()&&l(t,t)}))):new En.Z(n,t,o,o).add(l).update(l).remove((0,s.curry)(l,null)).execute()}(a.root?[a.root]:[],i&&i.root?[i.root]:[],e,a===i||!i,0);var h=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&(0,s.each)(e,(function(e,n){var a=t[n];(0,s.each)(e,(function(e){e&&(a.push(e),Kn(e).willDelete=!0)}))})),t}(l);return this._oldTree=a,this._storage=o,{lastsForAnimation:r,willDeleteEls:h,renderFinally:function(){(0,s.each)(h,(function(e){(0,s.each)(e,(function(e){e.parent&&e.parent.remove(e)}))})),(0,s.each)(u,(function(e){e.invisible=!0,e.dirty()}))}}},t.prototype._doAnimation=function(e,t,n,a){if(n.get("animation")){var i=n.get("animationDurationUpdate"),r=n.get("animationEasing"),o=((0,s.isFunction)(i)?0:i)||0,l=((0,s.isFunction)(r)?null:r)||"cubicOut",u=new Fn;(0,s.each)(t.willDeleteEls,(function(e,t){(0,s.each)(e,(function(e,n){if(!e.invisible){var i,r=e.parent,s=Kn(r);if(a&&"drillDown"===a.direction)i=r===a.rootNodeGroup?{shape:{x:0,y:0,width:s.nodeWidth,height:s.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var d=0,h=0;s.willDelete||(d=s.nodeWidth/2,h=s.nodeHeight/2),i="nodeGroup"===t?{x:d,y:h,style:{opacity:0}}:{shape:{x:d,y:h,width:0,height:0},style:{opacity:0}}}i&&u.add(e,i,o,0,l)}}))})),(0,s.each)(this._storage,(function(e,n){(0,s.each)(e,(function(e,a){var i=t.lastsForAnimation[n][a],r={};i&&(e instanceof m.Z?null!=i.oldX&&(r.x=e.x,r.y=e.y,e.x=i.oldX,e.y=i.oldY):(i.oldShape&&(r.shape=(0,s.extend)({},e.shape),e.setShape(i.oldShape)),i.fadein?(e.setStyle("opacity",0),r.style={opacity:1}):1!==e.style.opacity&&(r.style={opacity:1})),u.add(e,r,o,0,l))}))}),this),this._state="animating",u.finished((0,s.bind)((function(){this._state="ready",t.renderFinally()}),this)).start()}},t.prototype._resetController=function(e){var t=this._controller;t||((t=this._controller=new Ut.Z(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",(0,s.bind)(this._onPan,this)),t.on("zoom",(0,s.bind)(this._onZoom,this)));var n=new Gn.Z(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,a){return n.contain(t,a)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var a=this.seriesModel.getData().tree.root;if(!a)return;var i=a.getLayout();if(!i)return;var r=new Gn.Z(i.x,i.y,i.width,i.height),o=this.seriesModel.layoutInfo;t-=o.x,n-=o.y;var s=Bn.create();Bn.translate(s,s,[-t,-n]),Bn.scale(s,s,[e.scale,e.scale]),Bn.translate(s,s,[t,n]),r.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x,y:r.y,width:r.width,height:r.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var n=t.seriesModel.get("nodeClick",!0);if(n){var a=t.findTarget(e.offsetX,e.offsetY);if(a){var i=a.node;if(i.getLayout().isLeafRoot)t._rootToNode(a);else if("zoomToNode"===n)t._zoomToNode(a);else if("link"===n){var r=i.hostTree.data.getItemModel(i.dataIndex),o=r.get("link",!0),s=r.get("target",!0)||"blank";o&&(0,H.MI)(o,s)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,n){var a=this;n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(n={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new zn(this.group))).render(e,t,n.node,(function(t){"animating"!==a._state&&(Mn(e.getViewRoot(),t)?a._rootToNode({node:t}):a._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(a){var i=this._storage.background[a.getRawIndex()];if(i){var r=i.transformCoordToLocal(e,t),o=i.shape;if(!(o.x<=r[0]&&r[0]<=o.x+o.width&&o.y<=r[1]&&r[1]<=o.y+o.height))return!1;n={node:a,offsetX:r[0],offsetY:r[1]}}}),this),n},t.type="treemap",t}(N.Z);const $n=Jn;var ea=n(9937),ta=n(1092),na="itemStyle",aa=(0,_.Yf)();const ia={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;t.isRemoved()||ra(t,{},e.getViewRoot().getAncestors(),e)}};function ra(e,t,n,a){var i=e.getModel(),r=e.getLayout(),o=e.hostTree.data;if(r&&!r.invisible&&r.isInView){var l,u=i.getModel(na),d=function(e,t,n){var a=(0,s.extend)({},t),i=n.designatedVisualItemStyle;return(0,s.each)(["color","colorAlpha","colorSaturation"],(function(n){i[n]=t[n];var r=e.get(n);i[n]=null,null!=r&&(a[n]=r)})),a}(u,t,a),h=o.ensureUniqueItemVisual(e.dataIndex,"style"),c=u.get("borderColor"),p=u.get("borderColorSaturation");null!=p&&(c=function(e,t){return null!=t?(0,ta.modifyHSL)(t,null,null,e):null}(p,l=oa(d))),h.stroke=c;var g=e.viewChildren;if(g&&g.length){var f=function(e,t,n,a,i,r){if(r&&r.length){var o=la(t,"color")||null!=i.color&&"none"!==i.color&&(la(t,"colorAlpha")||la(t,"colorSaturation"));if(o){var s=t.get("visualMin"),l=t.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var d=t.get("colorMappingBy"),h={type:o.name,dataExtent:u,visual:o.range};"color"!==h.type||"index"!==d&&"id"!==d?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var c=new ea.Z(h);return aa(c).drColorMappingBy=d,c}}}(0,i,r,0,d,g);(0,s.each)(g,(function(e,t){if(e.depth>=n.length||e===n[e.depth]){var r=function(e,t,n,a,i,r){var o=(0,s.extend)({},t);if(i){var l=i.type,u="color"===l&&aa(i).drColorMappingBy,d="index"===u?a:"id"===u?r.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));o[l]=i.mapValueToVisual(d)}return o}(i,d,e,t,f,a);ra(e,r,n,a)}}))}else l=oa(d),h.fill=l}}function oa(e){var t=sa(e,"color");if(t){var n=sa(e,"colorAlpha"),a=sa(e,"colorSaturation");return a&&(t=(0,ta.modifyHSL)(t,null,null,a)),n&&(t=(0,ta.modifyAlpha)(t,n)),t}}function sa(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function la(e,t){var n=e.get(t);return(0,s.isArray)(n)&&n.length?{name:t,range:n}:null}var ua=Math.max,da=Math.min,ha=s.retrieve,ca=s.each,pa=["itemStyle","borderWidth"],ga=["itemStyle","gapWidth"],fa=["upperLabel","show"],ya=["upperLabel","height"];const ma={seriesType:"treemap",reset:function(e,t,n,a){var i=n.getWidth(),r=n.getHeight(),o=e.option,l=Ne.ME(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),u=o.size||[],d=(0,O.GM)(ha(l.width,u[0]),i),h=(0,O.GM)(ha(l.height,u[1]),r),c=a&&a.type,p=wn(a,["treemapZoomToNode","treemapRootToNode"],e),g="treemapRender"===c||"treemapMove"===c?a.rootRect:null,f=e.getViewRoot(),y=In(f);if("treemapMove"!==c){var m="treemapZoomToNode"===c?function(e,t,n,a,i){var r,o=(t||{}).node,s=[a,i];if(!o||o===n)return s;for(var l=a*i,u=l*e.option.zoomToNodeRatio;r=o.parentNode;){for(var d=0,h=r.children,c=0,p=h.length;c<p;c++)d+=h[c].getValue();var g=o.getValue();if(0===g)return s;u*=d/g;var f=r.getModel(),y=f.get(pa);(u+=4*y*y+(3*y+Math.max(y,Sa(f)))*Math.pow(u,.5))>O.YM&&(u=O.YM),o=r}u<l&&(u=l);var m=Math.pow(u/l,.5);return[a*m,i*m]}(e,p,f,d,h):g?[g.width,g.height]:[d,h],v=o.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var x={squareRatio:o.squareRatio,sort:v,leafDepth:o.leafDepth};f.hostTree.clearLayouts();var _={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};f.setLayout(_),va(f,x,!1,0),_=f.getLayout(),ca(y,(function(e,t){var n=(y[t+1]||f).getValue();e.setLayout(s.extend({dataExtent:[n,n],borderWidth:0,upperHeight:0},_))}))}var b=e.getData().tree.root;b.setLayout(function(e,t,n){if(t)return{x:t.x,y:t.y};var a={x:0,y:0};if(!n)return a;var i=n.node,r=i.getLayout();if(!r)return a;for(var o=[r.width/2,r.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:e.width/2-o[0],y:e.height/2-o[1]}}(l,g,p),!0),e.setLayoutInfo(l),ba(b,new Gn.Z(-l.x,-l.y,i,r),y,f,0)}};function va(e,t,n,a){var i,r;if(!e.isRemoved()){var o=e.getLayout();i=o.width,r=o.height;var l=e.getModel(),u=l.get(pa),d=l.get(ga)/2,h=Sa(l),c=Math.max(u,h),p=u-d,g=c-d;e.setLayout({borderWidth:u,upperHeight:c,upperLabelHeight:h},!0);var f=(i=ua(i-2*p,0))*(r=ua(r-p-g,0)),y=function(e,t,n,a,i,r){var o=e.children||[],l=a.sort;"asc"!==l&&"desc"!==l&&(l=null);var u=null!=a.leafDepth&&a.leafDepth<=r;if(i&&!u)return e.viewChildren=[];o=s.filter(o,(function(e){return!e.isRemoved()})),function(e,t){t&&e.sort((function(e,n){var a="asc"===t?e.getValue()-n.getValue():n.getValue()-e.getValue();return 0===a?"asc"===t?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:a}))}(o,l);var d=function(e,t,n){for(var a=0,i=0,r=t.length;i<r;i++)a+=t[i].getValue();var o,s=e.get("visualDimension");return t&&t.length?"value"===s&&n?(o=[t[t.length-1].getValue(),t[0].getValue()],"asc"===n&&o.reverse()):(o=[1/0,-1/0],ca(t,(function(e){var t=e.getValue(s);t<o[0]&&(o[0]=t),t>o[1]&&(o[1]=t)}))):o=[NaN,NaN],{sum:a,dataExtent:o}}(t,o,l);if(0===d.sum)return e.viewChildren=[];if(d.sum=function(e,t,n,a,i){if(!a)return n;for(var r=e.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var u=i["asc"===a?o-l-1:l].getValue();u/n*t<r&&(s=l,n-=u)}return"asc"===a?i.splice(0,o-s):i.splice(s,o-s),n}(t,n,d.sum,l,o),0===d.sum)return e.viewChildren=[];for(var h=0,c=o.length;h<c;h++){var p=o[h].getValue()/d.sum*n;o[h].setLayout({area:p})}return u&&(o.length&&e.setLayout({isLeafRoot:!0},!0),o.length=0),e.viewChildren=o,e.setLayout({dataExtent:d.dataExtent},!0),o}(e,l,f,t,n,a);if(y.length){var m={x:p,y:g,width:i,height:r},v=da(i,r),x=1/0,_=[];_.area=0;for(var b=0,S=y.length;b<S;){var w=y[b];_.push(w),_.area+=w.getLayout().area;var I=xa(_,v,t.squareRatio);I<=x?(b++,x=I):(_.area-=_.pop().getLayout().area,_a(_,v,m,d,!1),v=da(m.width,m.height),_.length=_.area=0,x=1/0)}if(_.length&&_a(_,v,m,d,!0),!n){var M=l.get("childrenVisibleMin");null!=M&&f<M&&(n=!0)}for(b=0,S=y.length;b<S;b++)va(y[b],t,n,a+1)}}}function xa(e,t,n){for(var a=0,i=1/0,r=0,o=void 0,s=e.length;r<s;r++)(o=e[r].getLayout().area)&&(o<i&&(i=o),o>a&&(a=o));var l=e.area*e.area,u=t*t*n;return l?ua(u*a/l,l/(u*i)):1/0}function _a(e,t,n,a,i){var r=t===n.width?0:1,o=1-r,s=["x","y"],l=["width","height"],u=n[s[r]],d=t?e.area/t:0;(i||d>n[l[o]])&&(d=n[l[o]]);for(var h=0,c=e.length;h<c;h++){var p=e[h],g={},f=d?p.getLayout().area/d:0,y=g[l[o]]=ua(d-2*a,0),m=n[s[r]]+n[l[r]]-u,v=h===c-1||m<f?m:f,x=g[l[r]]=ua(v-2*a,0);g[s[o]]=n[s[o]]+da(a,y/2),g[s[r]]=u+da(a,x/2),u+=v,p.setLayout(g,!0)}n[s[o]]+=d,n[l[o]]-=d}function ba(e,t,n,a,i){var r=e.getLayout(),o=n[i],s=o&&o===e;if(!(o&&!s||i===n.length&&e!==a)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(r),isAboveViewRoot:s},!0);var l=new Gn.Z(t.x-r.x,t.y-r.y,t.width,t.height);ca(e.viewChildren||[],(function(e){ba(e,l,n,a,i+1)}))}}function Sa(e){return e.get(fa)?e.get(ya):0}function wa(e){e.registerSeriesModel(Zn),e.registerChartView($n),e.registerVisual(ia),e.registerLayout(ma),function(e){for(var t=0;t<An.length;t++)e.registerAction({type:An[t],update:"updateView"},Ln);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},(function(t,n){var a=wn(e,["treemapZoomToNode","treemapRootToNode"],t);if(a){var i=t.getViewRoot();i&&(e.direction=Mn(i,a.node)?"rollUp":"drillDown"),t.resetViewRoot(a.node)}}))}))}(e)}function Ia(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),a=e.getGraph().data,i=n.mapArray(n.getName);a.filterSelf((function(e){var n=a.getItemModel(e).getShallow("category");if(null!=n){"number"==typeof n&&(n=i[n]);for(var r=0;r<t.length;r++)if(!t[r].isSelected(n))return!1}return!0}))}))}function Ma(e){var t={};e.eachSeriesByType("graph",(function(e){var n=e.getCategoriesData(),a=e.getData(),i={};n.each((function(a){var r=n.getName(a);i["ec-"+r]=a;var o=n.getItemModel(a),s=o.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e.getColorFromPalette(r,t)),n.setItemVisual(a,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var d=o.getShallow(l[u],!0);null!=d&&n.setItemVisual(a,l[u],d)}})),n.count()&&a.each((function(e){var t=a.getItemModel(e).getShallow("category");if(null!=t){"string"==typeof t&&(t=i["ec-"+t]);var r=n.getItemVisual(t,"style"),o=a.ensureUniqueItemVisual(e,"style");(0,s.extend)(o,r);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++)a.setItemVisual(e,l[u],n.getItemVisual(t,l[u]))}}))}))}function Da(e){return e instanceof Array||(e=[e,e]),e}function La(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),n=e.getEdgeData(),a=Da(e.get("edgeSymbol")),i=Da(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",a&&a[0]),n.setVisual("toSymbol",a&&a[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each((function(e){var a=n.getItemModel(e),i=t.getEdgeByIndex(e),r=Da(a.getShallow("symbol",!0)),o=Da(a.getShallow("symbolSize",!0)),l=a.getModel("lineStyle").getLineStyle(),u=n.ensureUniqueItemVisual(e,"style");switch((0,s.extend)(u,l),u.stroke){case"source":var d=i.node1.getVisual("style");u.stroke=d&&d.fill;break;case"target":d=i.node2.getVisual("style"),u.stroke=d&&d.fill}r[0]&&i.setVisual("fromSymbol",r[0]),r[1]&&i.setVisual("toSymbol",r[1]),o[0]&&i.setVisual("fromSymbolSize",o[0]),o[1]&&i.setVisual("toSymbolSize",o[1])}))}))}var Aa=n(5280),Ta="--\x3e",Ca=function(e){return e.get("autoCurveness")||null},Pa=function(e,t){var n=Ca(e),a=20,i=[];if("number"==typeof n)a=n;else if(s.isArray(n))return void(e.__curvenessList=n);t>a&&(a=t);var r=a%2?a+2:a+3;i=[];for(var o=0;o<r;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));e.__curvenessList=i},Na=function(e,t,n){var a=[e.id,e.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[n.uid,a,i].join(Ta)},Za=function(e){var t=e.split(Ta);return[t[0],t[2],t[1]].join(Ta)},Ea=function(e,t){var n=Na(e.node1,e.node2,t);return t.__edgeMap[n]},Oa=function(e,t){return Ra(Na(e.node1,e.node2,t),t)+Ra(Na(e.node2,e.node1,t),t)},Ra=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function ka(e,t,n,a){var i=Ca(t),r=s.isArray(i);if(!i)return null;var o=Ea(e,t);if(!o)return null;for(var l=-1,u=0;u<o.length;u++)if(o[u]===n){l=u;break}var d=Oa(e,t);Pa(t,d),e.lineStyle=e.lineStyle||{};var h=Na(e.node1,e.node2,t),c=t.__curvenessList,p=r||d%2?0:1;if(o.isForward)return c[p+l];var g=Za(h),f=Ra(g,t),y=c[l+f+p];return a?r?i&&0===i[0]?(f+p)%2?y:-y:((f%2?0:1)+p)%2?y:-y:(f+p)%2?y:-y:c[l+f+p]}function Va(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),za(n,e)}}function za(e,t){e.eachEdge((function(e,n){var a=s.retrieve3(e.getModel().get(["lineStyle","curveness"]),-ka(e,t,n,!0),0),i=Aa.clone(e.node1.getLayout()),r=Aa.clone(e.node2.getLayout()),o=[i,r];+a&&o.push([(i[0]+r[0])/2-(i[1]-r[1])*a,(i[1]+r[1])/2-(r[0]-i[0])*a]),e.setLayout(o)}))}function Ga(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),n=e.coordinateSystem;if(n&&"view"!==n.type){var a=e.getData(),i=[];(0,s.each)(n.dimensions,(function(e){i=i.concat(a.mapDimensionsAll(e))}));for(var r=0;r<a.count();r++){for(var o=[],l=!1,u=0;u<i.length;u++){var d=a.get(i[u],r);isNaN(d)||(l=!0),o.push(d)}l?a.setItemLayout(r,n.dataToPoint(o)):a.setItemLayout(r,[NaN,NaN])}za(a.graph,e)}else t&&"none"!==t||Va(e)}))}function Ba(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,a=t.scaleX;return((t.getZoom()-1)*n+1)/a}function Fa(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Wa=Math.PI,Ha=[];function Xa(e,t){var n=e.coordinateSystem;if(!n||"view"===n.type){var a=n.getBoundingRect(),i=e.getData(),r=i.graph,o=a.width/2+a.x,l=a.height/2+a.y,u=Math.min(a.width,a.height)/2,d=i.count();i.setLayout({cx:o,cy:l}),d&&(Ya[t](e,r,i,u,o,l,d),r.eachEdge((function(t,n){var a,i=s.retrieve3(t.getModel().get(["lineStyle","curveness"]),ka(t,e,n),0),r=Aa.clone(t.node1.getLayout()),u=Aa.clone(t.node2.getLayout()),d=(r[0]+u[0])/2,h=(r[1]+u[1])/2;+i&&(a=[o*(i*=3)+d*(1-i),l*i+h*(1-i)]),t.setLayout([r,u,a])})))}}var Ya={value:function(e,t,n,a,i,r,o){var s=0,l=n.getSum("value"),u=2*Math.PI/(l||o);t.eachNode((function(e){var t=e.getValue("value"),n=u*(l?t:1)/2;s+=n,e.setLayout([a*Math.cos(s)+i,a*Math.sin(s)+r]),s+=n}))},symbolSize:function(e,t,n,a,i,r,o){var s=0;Ha.length=o;var l=Ba(e);t.eachNode((function(e){var t=Fa(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=l;var n=Math.asin(t/2/a);isNaN(n)&&(n=Wa/2),Ha[e.dataIndex]=n,s+=2*n}));var u=(2*Wa-s)/o/2,d=0;t.eachNode((function(e){var t=u+Ha[e.dataIndex];d+=t,e.setLayout([a*Math.cos(d)+i,a*Math.sin(d)+r]),d+=t}))}};function Ua(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&Xa(e,"symbolSize")}))}var qa=Aa.scaleAndAdd;function ja(e){e.eachSeriesByType("graph",(function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var n=e.preservedPoints||{},a=e.getGraph(),i=a.data,r=a.edgeData,o=e.getModel("force"),l=o.get("initLayout");e.preservedPoints?i.each((function(e){var t=i.getId(e);i.setItemLayout(e,n[t]||[NaN,NaN])})):l&&"none"!==l?"circular"===l&&Xa(e,"value"):Va(e);var u=i.getDataExtent("value"),d=r.getDataExtent("value"),h=o.get("repulsion"),c=o.get("edgeLength"),p=s.isArray(h)?h:[h,h],g=s.isArray(c)?c:[c,c];g=[g[1],g[0]];var f=i.mapArray("value",(function(e,t){var n=i.getItemLayout(t),a=(0,O.NU)(e,u,p);return isNaN(a)&&(a=(p[0]+p[1])/2),{w:a,rep:a,fixed:i.getItemModel(t).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),y=r.mapArray("value",(function(t,n){var i=a.getEdgeByIndex(n),r=(0,O.NU)(t,d,g);isNaN(r)&&(r=(g[0]+g[1])/2);var o=i.getModel(),l=s.retrieve3(i.getModel().get(["lineStyle","curveness"]),-ka(i,e,n,!0),0);return{n1:f[i.node1.dataIndex],n2:f[i.node2.dataIndex],d:r,curveness:l,ignoreForceLayout:o.get("ignoreForceLayout")}})),m=t.getBoundingRect(),v=function(e,t,n){for(var a=e,i=t,r=n.rect,o=r.width,s=r.height,l=[r.x+o/2,r.y+s/2],u=null==n.gravity?.1:n.gravity,d=0;d<a.length;d++){var h=a[d];h.p||(h.p=Aa.create(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=Aa.clone(h.p),h.edges=null}var c,p,g=null==n.friction?.6:n.friction,f=g;return{warmUp:function(){f=.8*g},setFixed:function(e){a[e].fixed=!0},setUnfixed:function(e){a[e].fixed=!1},beforeStep:function(e){c=e},afterStep:function(e){p=e},step:function(e){c&&c(a,i);for(var t=[],n=a.length,r=0;r<i.length;r++){var o=i[r];if(!o.ignoreForceLayout){var s=o.n1,d=o.n2;Aa.sub(t,d.p,s.p);var h=Aa.len(t)-o.d,g=d.w/(s.w+d.w);isNaN(g)&&(g=0),Aa.normalize(t,t),!s.fixed&&qa(s.p,s.p,t,g*h*f),!d.fixed&&qa(d.p,d.p,t,-(1-g)*h*f)}}for(r=0;r<n;r++)(x=a[r]).fixed||(Aa.sub(t,l,x.p),qa(x.p,x.p,t,u*f));for(r=0;r<n;r++){s=a[r];for(var y=r+1;y<n;y++){d=a[y],Aa.sub(t,d.p,s.p),0===(h=Aa.len(t))&&(Aa.set(t,Math.random()-.5,Math.random()-.5),h=1);var m=(s.rep+d.rep)/h/h;!s.fixed&&qa(s.pp,s.pp,t,m),!d.fixed&&qa(d.pp,d.pp,t,-m)}}var v=[];for(r=0;r<n;r++){var x;(x=a[r]).fixed||(Aa.sub(v,x.p,x.pp),qa(x.p,x.p,v,f),Aa.copy(x.pp,x.p))}var _=(f*=.992)<.01;p&&p(a,i,_),e&&e(_)}}}(f,y,{rect:m,gravity:o.get("gravity"),friction:o.get("friction")});v.beforeStep((function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].fixed&&Aa.copy(e[n].p,a.getNodeByIndex(n).getLayout())})),v.afterStep((function(e,t,r){for(var o=0,s=e.length;o<s;o++)e[o].fixed||a.getNodeByIndex(o).setLayout(e[o].p),n[i.getId(o)]=e[o].p;for(o=0,s=t.length;o<s;o++){var l=t[o],u=a.getEdgeByIndex(o),d=l.n1.p,h=l.n2.p,c=u.getLayout();(c=c?c.slice():[])[0]=c[0]||[],c[1]=c[1]||[],Aa.copy(c[0],d),Aa.copy(c[1],h),+l.curveness&&(c[2]=[(d[0]+h[0])/2-(d[1]-h[1])*l.curveness,(d[1]+h[1])/2-(h[0]-d[0])*l.curveness]),u.setLayout(c)}})),e.forceLayout=v,e.preservedPoints=n,v.step()}else e.forceLayout=null}))}function Qa(e,t){var n=[];return e.eachSeriesByType("graph",(function(e){var a=e.get("coordinateSystem");if(!a||"view"===a){var i=e.getData(),r=i.mapArray((function(e){var t=i.getItemModel(e);return[+t.get("x"),+t.get("y")]})),o=[],l=[];Ht.zk(r,o,l),l[0]-o[0]==0&&(l[0]+=1,o[0]-=1),l[1]-o[1]==0&&(l[1]+=1,o[1]-=1);var u=(l[0]-o[0])/(l[1]-o[1]),d=function(e,t,n){var a=(0,s.extend)(e.getBoxLayoutParams(),{aspect:n});return(0,Ne.ME)(a,{width:t.getWidth(),height:t.getHeight()})}(e,t,u);isNaN(u)&&(o=[d.x,d.y],l=[d.x+d.width,d.y+d.height]);var h=l[0]-o[0],c=l[1]-o[1],p=d.width,g=d.height,f=e.coordinateSystem=new Xt.Z;f.zoomLimit=e.get("scaleLimit"),f.setBoundingRect(o[0],o[1],h,c),f.setViewRect(d.x,d.y,p,g),f.setCenter(e.get("center")),f.setZoom(e.get("zoom")),n.push(f)}})),n}var Ka=n(7145),Ja=[],$a=[],ei=[],ti=w.Zm,ni=Aa.distSquare,ai=Math.abs;function ii(e,t,n){for(var a,i=e[0],r=e[1],o=e[2],s=1/0,l=n*n,u=.1,d=.1;d<=.9;d+=.1)Ja[0]=ti(i[0],r[0],o[0],d),Ja[1]=ti(i[1],r[1],o[1],d),(p=ai(ni(Ja,t)-l))<s&&(s=p,a=d);for(var h=0;h<32;h++){var c=a+u;$a[0]=ti(i[0],r[0],o[0],a),$a[1]=ti(i[1],r[1],o[1],a),ei[0]=ti(i[0],r[0],o[0],c),ei[1]=ti(i[1],r[1],o[1],c);var p=ni($a,t)-l;if(ai(p)<.01)break;var g=ni(ei,t)-l;u/=2,p<0?g>=0?a+=u:a-=u:g>=0?a-=u:a+=u}return a}function ri(e,t){var n=[],a=w.Lx,i=[[],[],[]],r=[[],[]],o=[];t/=2,e.eachEdge((function(e,s){var l=e.getLayout(),u=e.getVisual("fromSymbol"),d=e.getVisual("toSymbol");l.__original||(l.__original=[Aa.clone(l[0]),Aa.clone(l[1])],l[2]&&l.__original.push(Aa.clone(l[2])));var h=l.__original;if(null!=l[2]){if(Aa.copy(i[0],h[0]),Aa.copy(i[1],h[2]),Aa.copy(i[2],h[1]),u&&"none"!==u){var c=Fa(e.node1),p=ii(i,h[0],c*t);a(i[0][0],i[1][0],i[2][0],p,n),i[0][0]=n[3],i[1][0]=n[4],a(i[0][1],i[1][1],i[2][1],p,n),i[0][1]=n[3],i[1][1]=n[4]}d&&"none"!==d&&(c=Fa(e.node2),p=ii(i,h[1],c*t),a(i[0][0],i[1][0],i[2][0],p,n),i[1][0]=n[1],i[2][0]=n[2],a(i[0][1],i[1][1],i[2][1],p,n),i[1][1]=n[1],i[2][1]=n[2]),Aa.copy(l[0],i[0]),Aa.copy(l[1],i[2]),Aa.copy(l[2],i[1])}else Aa.copy(r[0],h[0]),Aa.copy(r[1],h[1]),Aa.sub(o,r[1],r[0]),Aa.normalize(o,o),u&&"none"!==u&&(c=Fa(e.node1),Aa.scaleAndAdd(r[0],r[0],o,c*t)),d&&"none"!==d&&(c=Fa(e.node2),Aa.scaleAndAdd(r[1],r[1],o,-c*t)),Aa.copy(l[0],r[0]),Aa.copy(l[1],r[1])}))}function oi(e){return"view"===e.type}const si=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.init=function(e,t){var n=new l.Z,a=new Ka.Z,i=this.group;this._controller=new Ut.Z(t.getZr()),this._controllerHost={target:i},i.add(n.group),i.add(a.group),this._symbolDraw=n,this._lineDraw=a,this._firstRender=!0},t.prototype.render=function(e,t,n){var a=this,i=e.coordinateSystem;this._model=e;var r=this._symbolDraw,o=this._lineDraw,l=this.group;if(oi(i)){var u={x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY};this._firstRender?l.attr(u):x.updateProps(l,u,e)}ri(e.getGraph(),Ba(e));var d=e.getData();r.updateData(d);var h=e.getEdgeData();o.updateData(h),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var c=e.forceLayout,p=e.get(["force","layoutAnimation"]);c&&this._startForceLayoutIteration(c,p),d.graph.eachNode((function(e){var t=e.dataIndex,n=e.getGraphicEl(),i=e.getModel();n.off("drag").off("dragend");var r=i.get("draggable");r&&n.on("drag",(function(){c&&(c.warmUp(),!a._layouting&&a._startForceLayoutIteration(c,p),c.setFixed(t),d.setItemLayout(t,[n.x,n.y]))})).on("dragend",(function(){c&&c.setUnfixed(t)})),n.setDraggable(r&&!!c),"adjacency"===i.get(["emphasis","focus"])&&((0,W.A)(n).focus=e.getAdjacentDataIndices())})),d.graph.eachEdge((function(e){var t=e.getGraphicEl();"adjacency"===e.getModel().get(["emphasis","focus"])&&((0,W.A)(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})}));var g="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),f=d.getLayout("cx"),y=d.getLayout("cy");d.eachItemGraphicEl((function(e,t){var n=d.getItemModel(t).get(["label","rotate"])||0,a=e.getSymbolPath();if(g){var i=d.getItemLayout(t),r=Math.atan2(i[1]-y,i[0]-f);r<0&&(r=2*Math.PI+r);var o=i[0]<f;o&&(r-=Math.PI);var l=o?"left":"right";a.setTextConfig({rotation:-r,position:l,origin:"center"});var u=a.ensureState("emphasis");s.extend(u.textConfig||(u.textConfig={}),{position:l})}else a.setTextConfig({rotation:n*=Math.PI/180})})),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,t){var n=this;!function a(){e.step((function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(a,16):a())}))}()},t.prototype._updateController=function(e,t,n){var a=this,i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker((function(t,a,i){var r=o.getBoundingRect();return r.applyTransform(o.transform),r.contain(a,i)&&!(0,qt.l)(t,n,e)})),oi(e.coordinateSystem)?(i.enable(e.get("roam")),r.zoomLimit=e.get("scaleLimit"),r.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",(function(t){Yt.e(r,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){Yt.H(r,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),a._updateNodeAndLinkScale(),ri(e.getGraph(),Ba(e)),a._lineDraw.updateLayout(),n.updateLabelLayout()}))):i.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),n=Ba(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(n)}))},t.prototype.updateLayout=function(e){ri(e.getGraph(),Ba(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(N.Z);function li(e){return"_EC_"+e}var ui=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[li(e)]){var a=new di(e,t);return a.hostGraph=this,this.nodes.push(a),n[li(e)]=a,a}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[li(e)]},e.prototype.addEdge=function(e,t,n){var a=this._nodesMap,i=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),e instanceof di||(e=a[li(e)]),t instanceof di||(t=a[li(t)]),e&&t){var r=e.id+"-"+t.id,o=new hi(e,t,n);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),t.inEdges.push(o)),e.edges.push(o),e!==t&&t.edges.push(o),this.edges.push(o),i[r]=o,o}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof di&&(e=e.id),t instanceof di&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var n=this.nodes,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&e.call(t,n[i],i)},e.prototype.eachEdge=function(e,t){for(var n=this.edges,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&e.call(t,n[i],i)},e.prototype.breadthFirstTraverse=function(e,t,n,a){if(t instanceof di||(t=this._nodesMap[li(t)]),t){for(var i="out"===n?"outEdges":"in"===n?"inEdges":"edges",r=0;r<this.nodes.length;r++)this.nodes[r].__visited=!1;if(!e.call(a,t,null))for(var o=[t];o.length;){var s=o.shift(),l=s[i];for(r=0;r<l.length;r++){var u=l[r],d=u.node1===s?u.node2:u.node1;if(!d.__visited){if(e.call(a,d,s))return;o.push(d),d.__visited=!0}}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,a=this.edges,i=0,r=n.length;i<r;i++)n[i].dataIndex=-1;for(i=0,r=e.count();i<r;i++)n[e.getRawIndex(i)].dataIndex=i;for(t.filterSelf((function(e){var n=a[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0})),i=0,r=a.length;i<r;i++)a[i].dataIndex=-1;for(i=0,r=t.count();i<r;i++)a[t.getRawIndex(i)].dataIndex=i},e.prototype.clone=function(){for(var t=new e(this._directed),n=this.nodes,a=this.edges,i=0;i<n.length;i++)t.addNode(n[i].id,n[i].dataIndex);for(i=0;i<a.length;i++){var r=a[i];t.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return t},e}(),di=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},e}(),hi=function(){function e(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e}();function ci(e,t){return{getValue:function(n){var a=this[e][t];return a.get(a.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,a){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,a)},getVisual:function(n){return this[e][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,a){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,a)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}s.mixin(di,ci("hostGraph","data")),s.mixin(hi,ci("hostGraph","edgeData"));const pi=ui;var gi=n(4267);function fi(e,t,n,a,r){for(var o=new pi(a),l=0;l<e.length;l++)o.addNode(s.retrieve(e[l].id,e[l].name,l),l);var u=[],d=[],h=0;for(l=0;l<t.length;l++){var c=t[l],p=c.source,g=c.target;o.addEdge(p,g,h)&&(d.push(c),u.push(s.retrieve((0,_.U5)(c.id,null),p+" > "+g)),h++)}var f,y=n.get("coordinateSystem");if("cartesian2d"===y||"polar"===y)f=(0,i.Z)(e,n);else{var m=gi.Z.get(y),v=m&&m.dimensions||[];s.indexOf(v,"value")<0&&v.concat(["value"]);var x=(0,qe.Z)(e,{coordDimensions:v});(f=new je.Z(x,n)).initData(e)}var b=new je.Z(["value"],n);return b.initData(d,u),r&&r(f,b),cn({mainData:f,struct:o,structAttr:"graph",datas:{node:f,edge:b},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var yi=n(3993),mi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return(0,a.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments);var n=this;function a(){return n._categoriesData}this.legendVisualProvider=new Je(a,a),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(t){e.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,_.Cc)(t,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,t){var n,a=e.edges||e.links||[],i=e.data||e.nodes||[],r=this;if(i&&a){Ca(n=this)&&(n.__curvenessList=[],n.__edgeMap={},Pa(n));var o=fi(i,a,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e){var t=r._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var n=fn.Z.prototype.getModel;function a(e,t){var a=n.call(this,e,t);return a.resolveParentPath=i,a}function i(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",(function(e){return e.resolveParentPath=i,e.getModel=a,e}))}));return s.each(o.edges,(function(e){!function(e,t,n,a){if(Ca(n)){var i=Na(e,t,n),r=n.__edgeMap,o=r[Za(i)];r[i]&&!o?r[i].isForward=!0:o&&r[i]&&(o.isForward=!0,r[i].isForward=!1),r[i]=r[i]||[],r[i].push(a)}}(e.node1,e.node2,this,e.dataIndex)}),this),o.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,t,n){if("edge"===n){var a=this.getData(),i=this.getDataParams(e,n),r=a.graph.getEdgeByIndex(e),o=a.getName(r.node1.dataIndex),s=a.getName(r.node2.dataIndex),l=[];return null!=o&&l.push(o),null!=s&&l.push(s),(0,vt.TX)("nameValue",{name:l.join(" > "),value:i.value,noValue:null==i.value})}return(0,yi.w)({series:this,dataIndex:e,multipleSeries:t})},t.prototype._updateCategoriesData=function(){var e=s.map(this.option.categories||[],(function(e){return null!=e.value?e:s.extend({value:0},e)})),t=new je.Z(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e)}))},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(r.Z);const vi=mi;var xi={type:"graphRoam",event:"graphRoam",update:"none"};function _i(e){e.registerChartView(si),e.registerSeriesModel(vi),e.registerProcessor(Ia),e.registerVisual(Ma),e.registerVisual(La),e.registerLayout(Ga),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,Ua),e.registerLayout(ja),e.registerCoordinateSystem("graphView",{dimensions:Xt.Z.dimensions,create:Qa}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},(function(){})),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},(function(){})),e.registerAction(xi,(function(e,t){t.eachComponent({mainType:"series",query:e},(function(t){var n=t.coordinateSystem,a=(0,bn.A)(n,e);t.setCenter&&t.setCenter(a.center),t.setZoom&&t.setZoom(a.zoom)}))}))}var bi=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0};const Si=function(e){function t(t){var n=e.call(this,t)||this;return n.type="pointer",n}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new bi},t.prototype.buildPath=function(e,t){var n=Math.cos,a=Math.sin,i=t.r,r=t.width,o=t.angle,s=t.x-n(o)*r*(r>=i/3?1:2),l=t.y-a(o)*r*(r>=i/3?1:2);o=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+n(o)*r,t.y+a(o)*r),e.lineTo(t.x+n(t.angle)*i,t.y+a(t.angle)*i),e.lineTo(t.x-n(o)*r,t.y-a(o)*r),e.lineTo(s,l)},t}(b.ZP);var wi=n(2095);function Ii(e,t){var n=null==e?"":e+"";return t&&("string"==typeof t?n=t.replace("{value}",n):"function"==typeof t&&(n=t(e))),n}var Mi=2*Math.PI,Di=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){this.group.removeAll();var a=e.get(["axisLine","lineStyle","color"]),i=function(e,t){var n=e.get("center"),a=t.getWidth(),i=t.getHeight(),r=Math.min(a,i);return{cx:(0,O.GM)(n[0],t.getWidth()),cy:(0,O.GM)(n[1],t.getHeight()),r:(0,O.GM)(e.get("radius"),r/2)}}(e,n);this._renderMain(e,t,n,a,i),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,t,n,a,i){for(var r=this.group,o=e.get("clockwise"),s=-e.get("startAngle")/180*Math.PI,l=-e.get("endAngle")/180*Math.PI,u=e.getModel("axisLine"),d=u.get("roundCap")?ce:E.Z,h=u.get("show"),c=u.getModel("lineStyle"),p=c.get("width"),g=(l-s)%Mi||l===s?(l-s)%Mi:Mi,f=s,y=0;h&&y<a.length;y++){var m=new d({shape:{startAngle:f,endAngle:l=s+g*Math.min(Math.max(a[y][0],0),1),cx:i.cx,cy:i.cy,clockwise:o,r0:i.r-p,r:i.r},silent:!0});m.setStyle({fill:a[y][1]}),m.setStyle(c.getLineStyle(["color","width"])),r.add(m),f=l}var v=function(e){if(e<=0)return a[0][1];var t;for(t=0;t<a.length;t++)if(a[t][0]>=e&&(0===t?0:a[t-1][0])<e)return a[t][1];return a[t-1][1]};if(!o){var x=s;s=l,l=x}this._renderTicks(e,t,n,v,i,s,l,o,p),this._renderTitleAndDetail(e,t,n,v,i),this._renderAnchor(e,i),this._renderPointer(e,t,n,v,i,s,l,o,p)},t.prototype._renderTicks=function(e,t,n,a,i,r,o,s,l){for(var u,d,h=this.group,c=i.cx,p=i.cy,g=i.r,f=+e.get("min"),y=+e.get("max"),m=e.getModel("splitLine"),x=e.getModel("axisTick"),_=e.getModel("axisLabel"),b=e.get("splitNumber"),S=x.get("splitNumber"),w=(0,O.GM)(m.get("length"),g),I=(0,O.GM)(x.get("length"),g),M=r,D=(o-r)/b,L=D/S,A=m.getModel("lineStyle").getLineStyle(),T=x.getModel("lineStyle").getLineStyle(),C=m.get("distance"),P=0;P<=b;P++){if(u=Math.cos(M),d=Math.sin(M),m.get("show")){var N=C?C+l:l,Z=new wi.Z({shape:{x1:u*(g-N)+c,y1:d*(g-N)+p,x2:u*(g-w-N)+c,y2:d*(g-w-N)+p},style:A,silent:!0});"auto"===A.stroke&&Z.setStyle({stroke:a(P/b)}),h.add(Z)}if(_.get("show")){N=_.get("distance")+C;var E=Ii((0,O.NM)(P/b*(y-f)+f),_.get("formatter")),R=a(P/b);h.add(new v.ZP({style:(0,B.Lr)(_,{text:E,x:u*(g-w-N)+c,y:d*(g-w-N)+p,verticalAlign:d<-.8?"top":d>.8?"bottom":"middle",align:u<-.4?"left":u>.4?"right":"center"},{inheritColor:R}),silent:!0}))}if(x.get("show")&&P!==b){N=(N=x.get("distance"))?N+l:l;for(var k=0;k<=S;k++){u=Math.cos(M),d=Math.sin(M);var V=new wi.Z({shape:{x1:u*(g-N)+c,y1:d*(g-N)+p,x2:u*(g-I-N)+c,y2:d*(g-I-N)+p},silent:!0,style:T});"auto"===T.stroke&&V.setStyle({stroke:a((P+k/S)/b)}),h.add(V),M+=L}M-=L}else M+=D}},t.prototype._renderPointer=function(e,t,n,a,i,r,o,s,l){var u=this.group,d=this._data,h=this._progressEls,c=[],p=e.get(["pointer","show"]),g=e.getModel("progress"),f=g.get("show"),y=e.getData(),m=y.mapDimension("value"),v=+e.get("min"),_=+e.get("max"),b=[v,_],S=[r,o];function w(t,n){var a,r=y.getItemModel(t).getModel("pointer"),o=(0,O.GM)(r.get("width"),i.r),s=(0,O.GM)(r.get("length"),i.r),l=e.get(["pointer","icon"]),u=r.get("offsetCenter"),d=(0,O.GM)(u[0],i.r),h=(0,O.GM)(u[1],i.r),c=r.get("keepAspect");return(a=l?(0,at.t)(l,d-o/2,h-s,o,s,null,c):new Si({shape:{angle:-Math.PI/2,width:o,r:s,x:d,y:h}})).rotation=-(n+Math.PI/2),a.x=i.cx,a.y=i.cy,a}function I(e,t){var n=g.get("roundCap")?ce:E.Z,a=g.get("overlap"),o=a?g.get("width"):l/y.count(),u=a?i.r-o:i.r-(e+1)*o,d=a?i.r:i.r-e*o,h=new n({shape:{startAngle:r,endAngle:t,cx:i.cx,cy:i.cy,clockwise:s,r0:u,r:d}});return a&&(h.z2=_-y.get(m,e)%_),h}(f||p)&&(y.diff(d).add((function(t){if(p){var n=w(t,r);x.initProps(n,{rotation:-((0,O.NU)(y.get(m,t),b,S,!0)+Math.PI/2)},e),u.add(n),y.setItemGraphicEl(t,n)}if(f){var a=I(t,r),i=g.get("clip");x.initProps(a,{shape:{endAngle:(0,O.NU)(y.get(m,t),b,S,i)}},e),u.add(a),c[t]=a}})).update((function(t,n){if(p){var a=d.getItemGraphicEl(n),i=a?a.rotation:r,o=w(t,i);o.rotation=i,x.updateProps(o,{rotation:-((0,O.NU)(y.get(m,t),b,S,!0)+Math.PI/2)},e),u.add(o),y.setItemGraphicEl(t,o)}if(f){var s=h[n],l=I(t,s?s.shape.endAngle:r),v=g.get("clip");x.updateProps(l,{shape:{endAngle:(0,O.NU)(y.get(m,t),b,S,v)}},e),u.add(l),c[t]=l}})).execute(),y.each((function(e){var t=y.getItemModel(e),n=t.getModel("emphasis");if(p){var i=y.getItemGraphicEl(e);i.useStyle(y.getItemVisual(e,"style")),i.setStyle(t.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===i.style.fill&&i.setStyle("fill",a((0,O.NU)(y.get(m,e),b,[0,1],!0))),i.z2EmphasisLift=0,(0,G.WO)(i,t),(0,G.vF)(i,n.get("focus"),n.get("blurScope"))}if(f){var r=c[e];r.useStyle(y.getItemVisual(e,"style")),r.setStyle(t.getModel(["progress","itemStyle"]).getItemStyle()),r.z2EmphasisLift=0,(0,G.WO)(r,t),(0,G.vF)(r,n.get("focus"),n.get("blurScope"))}})),this._progressEls=c)},t.prototype._renderAnchor=function(e,t){var n=e.getModel("anchor");if(n.get("show")){var a=n.get("size"),i=n.get("icon"),r=n.get("offsetCenter"),o=n.get("keepAspect"),s=(0,at.t)(i,t.cx-a/2+(0,O.GM)(r[0],t.r),t.cy-a/2+(0,O.GM)(r[1],t.r),a,a,null,o);s.z2=n.get("showAbove")?1:0,s.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(s)}},t.prototype._renderTitleAndDetail=function(e,t,n,a,i){var r=this,o=e.getData(),s=o.mapDimension("value"),l=+e.get("min"),u=+e.get("max"),d=new m.Z,h=[],c=[],p=e.isAnimationEnabled();o.diff(this._data).add((function(e){h[e]=new v.ZP({silent:!0}),c[e]=new v.ZP({silent:!0})})).update((function(e,t){h[e]=r._titleEls[t],c[e]=r._detailEls[t]})).execute(),o.each((function(t){var n=o.getItemModel(t),r=o.get(s,t),g=new m.Z,f=a((0,O.NU)(r,[l,u],[0,1],!0)),y=n.getModel("title");if(y.get("show")){var v=y.get("offsetCenter"),x=i.cx+(0,O.GM)(v[0],i.r),_=i.cy+(0,O.GM)(v[1],i.r);(A=h[t]).attr({style:(0,B.Lr)(y,{x,y:_,text:o.getName(t),align:"center",verticalAlign:"middle"},{inheritColor:f})}),g.add(A)}var b=n.getModel("detail");if(b.get("show")){var S=b.get("offsetCenter"),w=i.cx+(0,O.GM)(S[0],i.r),I=i.cy+(0,O.GM)(S[1],i.r),M=(0,O.GM)(b.get("width"),i.r),D=(0,O.GM)(b.get("height"),i.r),L=e.get(["progress","show"])?o.getItemVisual(t,"style").fill:f,A=c[t],T=b.get("formatter");A.attr({style:(0,B.Lr)(b,{x:w,y:I,text:Ii(r,T),width:isNaN(M)?null:M,height:isNaN(D)?null:D,align:"center",verticalAlign:"middle"},{inheritColor:L})}),(0,B.pe)(A,{normal:b},r,(function(e){return Ii(e,T)})),p&&(0,B.tD)(A,t,o,e,{getFormattedLabel:function(e,t,n,a,i,o){return Ii(o?o.interpolatedValue:r,T)}}),g.add(A)}d.add(g)})),this.group.add(d),this._titleEls=h,this._detailEls=c},t.type="gauge",t}(N.Z);const Li=Di,Ai=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="itemStyle",n.useColorPaletteOnData=!0,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){return Qe(this,["value"])},t.type="series.gauge",t.defaultOption={zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(r.Z);function Ti(e){e.registerChartView(Li),e.registerSeriesModel(Ai)}var Ci=["itemStyle","opacity"],Pi=function(e){function t(t,n){var a=e.call(this)||this,i=a,r=new ke.Z,o=new v.ZP;return i.setTextContent(o),a.setTextGuideLine(r),a.updateData(t,n,!0),a}return(0,a.ZT)(t,e),t.prototype.updateData=function(e,t,n){var a=this,i=e.hostModel,r=e.getItemModel(t),o=e.getItemLayout(t),s=r.getModel("emphasis"),l=r.get(Ci);l=null==l?1:l,a.useStyle(e.getItemVisual(t,"style")),a.style.lineJoin="round",n?(a.setShape({points:o.points}),a.style.opacity=0,x.initProps(a,{style:{opacity:l}},i,t)):x.updateProps(a,{style:{opacity:l},shape:{points:o.points}},i,t),(0,G.WO)(a,r),this._updateLabel(e,t),(0,G.vF)(this,s.get("focus"),s.get("blurScope"))},t.prototype._updateLabel=function(e,t){var n=this,a=this.getTextGuideLine(),i=n.getTextContent(),r=e.hostModel,o=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"style"),u=l.fill;(0,B.ni)(i,(0,B.k3)(o),{labelFetcher:e.hostModel,labelDataIndex:t,defaultOpacity:l.opacity,defaultText:e.getName(t)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),n.setTextConfig({local:!0,inside:!!s.inside,insideStroke:u,outsideFill:u});var d=s.linePoints;a.setShape({points:d}),n.textGuideLineConfig={anchor:d?new Ve.Z(d[0][0],d[0][1]):null},x.updateProps(i,{style:{x:s.x,y:s.y}},r,t),i.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),(0,ze.Iu)(n,(0,ze.$x)(o),{stroke:u})},t}(ft.Z);const Ni=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreLabelLineUpdate=!0,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this._data,r=this.group;a.diff(i).add((function(e){var t=new Pi(a,e);a.setItemGraphicEl(e,t),r.add(t)})).update((function(e,t){var n=i.getItemGraphicEl(t);n.updateData(a,e),r.add(n),a.setItemGraphicEl(e,n)})).remove((function(t){var n=i.getItemGraphicEl(t);x.removeElementWithFadeOut(n,e,t)})).execute(),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(N.Z);var Zi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.useColorPaletteOnData=!0,n}return(0,a.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Je(s.bind(this.getData,this),s.bind(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.getInitialData=function(e,t){return Qe(this,{coordDimensions:["value"],encodeDefaulter:s.curry(Ke.Ss,this)})},t.prototype._defaultLabelLine=function(e){(0,_.Cc)(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.prototype.getDataParams=function(t){var n=this.getData(),a=e.prototype.getDataParams.call(this,t),i=n.mapDimension("value"),r=n.getSum(i);return a.percent=r?+(n.get(i,t)/r*100).toFixed(2):0,a.$vars.push("percent"),a},t.type="series.funnel",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(r.Z);const Ei=Zi;function Oi(e,t){e.eachSeriesByType("funnel",(function(e){var n=e.getData(),a=n.mapDimension("value"),i=e.get("sort"),r=function(e,t){return Ne.ME(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),o=e.get("orient"),s=r.width,l=r.height,u=function(e,t){for(var n=e.mapDimension("value"),a=e.mapArray(n,(function(e){return e})),i=[],r="ascending"===t,o=0,s=e.count();o<s;o++)i[o]=o;return"function"==typeof t?i.sort(t):"none"!==t&&i.sort((function(e,t){return r?a[e]-a[t]:a[t]-a[e]})),i}(n,i),d=r.x,h=r.y,c="horizontal"===o?[(0,O.GM)(e.get("minSize"),l),(0,O.GM)(e.get("maxSize"),l)]:[(0,O.GM)(e.get("minSize"),s),(0,O.GM)(e.get("maxSize"),s)],p=n.getDataExtent(a),g=e.get("min"),f=e.get("max");null==g&&(g=Math.min(p[0],0)),null==f&&(f=p[1]);var y=e.get("funnelAlign"),m=e.get("gap"),v=(("horizontal"===o?s:l)-m*(n.count()-1))/n.count(),x=function(e,t){if("horizontal"===o){var i=n.get(a,e)||0,r=(0,O.NU)(i,[g,f],c,!0),u=void 0;switch(y){case"top":u=h;break;case"center":u=h+(l-r)/2;break;case"bottom":u=h+(l-r)}return[[t,u],[t,u+r]]}var p,m=n.get(a,e)||0,v=(0,O.NU)(m,[g,f],c,!0);switch(y){case"left":p=d;break;case"center":p=d+(s-v)/2;break;case"right":p=d+s-v}return[[p,t],[p+v,t]]};"ascending"===i&&(v=-v,m=-m,"horizontal"===o?d+=s:h+=l,u=u.reverse());for(var _=0;_<u.length;_++){var b=u[_],S=u[_+1],w=n.getItemModel(b);if("horizontal"===o){var I=w.get(["itemStyle","width"]);null==I?I=v:(I=(0,O.GM)(I,s),"ascending"===i&&(I=-I));var M=x(b,d),D=x(S,d+I);d+=I+m,n.setItemLayout(b,{points:M.concat(D.slice().reverse())})}else{var L=w.get(["itemStyle","height"]);null==L?L=v:(L=(0,O.GM)(L,l),"ascending"===i&&(L=-L)),M=x(b,h),D=x(S,h+L),h+=L+m,n.setItemLayout(b,{points:M.concat(D.slice().reverse())})}}!function(e){var t=e.hostModel.get("orient");e.each((function(n){var a,i,r,o,s=e.getItemModel(n),l=s.getModel("label").get("position"),u=s.getModel("labelLine"),d=e.getItemLayout(n),h=d.points,c="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(c)"insideLeft"===l?(i=(h[0][0]+h[3][0])/2+5,r=(h[0][1]+h[3][1])/2,a="left"):"insideRight"===l?(i=(h[1][0]+h[2][0])/2-5,r=(h[1][1]+h[2][1])/2,a="right"):(i=(h[0][0]+h[1][0]+h[2][0]+h[3][0])/4,r=(h[0][1]+h[1][1]+h[2][1]+h[3][1])/4,a="center"),o=[[i,r],[i,r]];else{var p=void 0,g=void 0,f=void 0,y=void 0,m=u.get("length");"left"===l?(p=(h[3][0]+h[0][0])/2,g=(h[3][1]+h[0][1])/2,i=(f=p-m)-5,a="right"):"right"===l?(p=(h[1][0]+h[2][0])/2,g=(h[1][1]+h[2][1])/2,i=(f=p+m)+5,a="left"):"top"===l?(p=(h[3][0]+h[0][0])/2,r=(y=(g=(h[3][1]+h[0][1])/2)-m)-5,a="center"):"bottom"===l?(p=(h[1][0]+h[2][0])/2,r=(y=(g=(h[1][1]+h[2][1])/2)+m)+5,a="center"):"rightTop"===l?(p="horizontal"===t?h[3][0]:h[1][0],g="horizontal"===t?h[3][1]:h[1][1],"horizontal"===t?(r=(y=g-m)-5,a="center"):(i=(f=p+m)+5,a="top")):"rightBottom"===l?(p=h[2][0],g=h[2][1],"horizontal"===t?(r=(y=g+m)+5,a="center"):(i=(f=p+m)+5,a="bottom")):"leftTop"===l?(p=h[0][0],g="horizontal"===t?h[0][1]:h[1][1],"horizontal"===t?(r=(y=g-m)-5,a="center"):(i=(f=p-m)-5,a="right")):"leftBottom"===l?(p="horizontal"===t?h[1][0]:h[3][0],g="horizontal"===t?h[1][1]:h[2][1],"horizontal"===t?(r=(y=g+m)+5,a="center"):(i=(f=p-m)-5,a="right")):(p=(h[1][0]+h[2][0])/2,g=(h[1][1]+h[2][1])/2,"horizontal"===t?(r=(y=g+m)+5,a="center"):(i=(f=p+m)+5,a="left")),"horizontal"===t?i=f=p:r=y=g,o=[[p,g],[f,y]]}d.label={linePoints:o,x:i,y:r,verticalAlign:"middle",textAlign:a,inside:c}}))}(n)}))}function Ri(e){e.registerChartView(Ni),e.registerSeriesModel(Ei),e.registerLayout(Oi),e.registerProcessor(Re("funnel"))}var ki=.3,Vi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._dataGroup=new m.Z,n._initialized=!1,n}return(0,a.ZT)(t,e),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,t,n,a){var i=this._dataGroup,r=e.getData(),o=this._data,s=e.coordinateSystem,l=s.dimensions,u=Bi(e);if(r.diff(o).add((function(e){Fi(Gi(r,i,e,l,s),r,e,u)})).update((function(t,n){var a=o.getItemGraphicEl(n),i=zi(r,t,l,s);r.setItemGraphicEl(t,a),x.updateProps(a,{shape:{points:i}},e,t),Fi(a,r,t,u)})).remove((function(e){var t=o.getItemGraphicEl(e);i.remove(t)})).execute(),!this._initialized){this._initialized=!0;var d=function(e,t,n){var a=e.model,r=e.getRect(),o=new Z.Z({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),s="horizontal"===a.get("layout")?"width":"height";return o.setShape(s,0),x.initProps(o,{shape:{width:r.width,height:r.height}},t,(function(){setTimeout((function(){i.removeClipPath()}))})),o}(s,e);i.setClipPath(d)}this._data=r},t.prototype.incrementalPrepareRender=function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,t,n){for(var a=t.getData(),i=t.coordinateSystem,r=i.dimensions,o=Bi(t),s=e.start;s<e.end;s++){var l=Gi(a,this._dataGroup,s,r,i);l.incremental=!0,Fi(l,a,s,o)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(N.Z);function zi(e,t,n,a){for(var i,r=[],o=0;o<n.length;o++){var s=n[o],l=e.get(e.mapDimension(s),t);i=l,("category"===a.getAxis(s).type?null==i:null==i||isNaN(i))||r.push(a.dataToPoint(l,s))}return r}function Gi(e,t,n,a,i){var r=zi(e,n,a,i),o=new ke.Z({shape:{points:r},z2:10});return t.add(o),e.setItemGraphicEl(n,o),o}function Bi(e){var t=e.get("smooth",!0);return!0===t&&(t=ki),t=(0,O.FK)(t),(0,s.eqNaN)(t)&&(t=0),{smooth:t}}function Fi(e,t,n,a){e.useStyle(t.getItemVisual(n,"style")),e.style.fill=null,e.setShape("smooth",a.smooth);var i=t.getItemModel(n),r=i.getModel("emphasis");(0,G.WO)(e,i,"lineStyle"),(0,G.vF)(e,r.get("focus"),r.get("blurScope"))}const Wi=Vi;function Hi(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var n={};return(0,s.each)(t.dimensions,(function(e){var t=+e.replace("dim","");n[e]=t})),n}}const Xi=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,i.Z)(this.getSource(),this,{useEncodeDefaulter:(0,s.bind)(Hi,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var t=this.coordinateSystem,n=this.getData(),a=[];return t.eachActiveState(n,(function(t,i){e===t&&a.push(n.getRawIndex(i))})),a},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(r.Z);var Yi=["lineStyle","opacity"];const Ui={seriesType:"parallel",reset:function(e,t){var n=e.coordinateSystem,a={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(e,t){n.eachActiveState(t,(function(e,n){var i=a[e];if("normal"===e&&t.hasItemOption){var r=t.getItemModel(n).get(Yi,!0);null!=r&&(i=r)}t.ensureUniqueItemVisual(n,"style").opacity=i}),e.start,e.end)}}}};var qi=n(520);function ji(e){(0,tt.D)(qi.N),e.registerChartView(Wi),e.registerSeriesModel(Xi),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,Ui)}var Qi=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},Ki=function(e){function t(t){return e.call(this,t)||this}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new Qi},t.prototype.buildPath=function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},t.prototype.highlight=function(){(0,G.fD)(this)},t.prototype.downplay=function(){(0,G.Mh)(this)},t}(b.ZP),Ji=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._focusAdjacencyDisabled=!1,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=this,i=e.getGraph(),r=this.group,o=e.layoutInfo,s=o.width,l=o.height,u=e.getData(),d=e.getData("edge"),h=e.get("orient");this._model=e,r.removeAll(),r.x=o.x,r.y=o.y,i.eachEdge((function(t){var n=new Ki,a=(0,W.A)(n);a.dataIndex=t.dataIndex,a.seriesIndex=e.seriesIndex,a.dataType="edge";var i,o,u,c,p,g,f,m,v=t.getModel(),x=v.getModel("lineStyle"),_=x.get("curveness"),b=t.node1.getLayout(),S=t.node1.getModel(),w=S.get("localX"),I=S.get("localY"),M=t.node2.getLayout(),D=t.node2.getModel(),L=D.get("localX"),A=D.get("localY"),T=t.getLayout();switch(n.shape.extent=Math.max(1,T.dy),n.shape.orient=h,"vertical"===h?(i=(null!=w?w*s:b.x)+T.sy,o=(null!=I?I*l:b.y)+b.dy,u=(null!=L?L*s:M.x)+T.ty,p=i,g=o*(1-_)+(c=null!=A?A*l:M.y)*_,f=u,m=o*_+c*(1-_)):(i=(null!=w?w*s:b.x)+b.dx,o=(null!=I?I*l:b.y)+T.sy,p=i*(1-_)+(u=null!=L?L*s:M.x)*_,g=o,f=i*_+u*(1-_),m=c=(null!=A?A*l:M.y)+T.ty),n.setShape({x1:i,y1:o,x2:u,y2:c,cpx1:p,cpy1:g,cpx2:f,cpy2:m}),n.useStyle(x.getItemStyle()),n.style.fill){case"source":n.style.fill=t.node1.getVisual("color"),n.style.decal=t.node1.getVisual("style").decal;break;case"target":n.style.fill=t.node2.getVisual("color"),n.style.decal=t.node2.getVisual("style").decal;break;case"gradient":var C=t.node1.getVisual("color"),P=t.node2.getVisual("color");"string"==typeof C&&"string"==typeof P&&(n.style.fill=new y.Z(0,0,1,0,[{color:C,offset:0},{color:P,offset:1}]))}var N=v.getModel("emphasis");(0,G.WO)(n,v,"lineStyle",(function(e){return e.getItemStyle()})),r.add(n),d.setItemGraphicEl(t.dataIndex,n);var Z=N.get("focus");(0,G.vF)(n,"adjacency"===Z?t.getAdjacentDataIndices():Z,N.get("blurScope")),(0,W.A)(n).dataType="edge"})),i.eachNode((function(t){var n=t.getLayout(),a=t.getModel(),i=a.get("localX"),o=a.get("localY"),d=a.getModel("emphasis"),h=new Z.Z({shape:{x:null!=i?i*s:n.x,y:null!=o?o*l:n.y,width:n.dx,height:n.dy},style:a.getModel("itemStyle").getItemStyle()});(0,B.ni)(h,(0,B.k3)(a),{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id}),h.disableLabelAnimation=!0,h.setStyle("fill",t.getVisual("color")),h.setStyle("decal",t.getVisual("style").decal),(0,G.WO)(h,a),r.add(h),u.setItemGraphicEl(t.dataIndex,h),(0,W.A)(h).dataType="node";var c=d.get("focus");(0,G.vF)(h,"adjacency"===c?t.getAdjacentDataIndices():c,d.get("blurScope"))})),u.eachItemGraphicEl((function(t,i){u.getItemModel(i).get("draggable")&&(t.drift=function(t,r){a._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=r,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:u.getRawIndex(i),localX:this.shape.x/s,localY:this.shape.y/l})},t.ondragend=function(){a._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&r.setClipPath(function(e,t,n){var a=new Z.Z({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return x.initProps(a,{shape:{width:e.width+20}},t,(function(){r.removeClipPath()})),a}(r.getBoundingRect(),e)),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(N.Z);const $i=Ji;var er=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){var n=e.edges||e.links,a=e.data||e.nodes,i=e.levels;this.levelModels=[];for(var r=this.levelModels,o=0;o<i.length;o++)null!=i[o].depth&&i[o].depth>=0&&(r[i[o].depth]=new fn.Z(i[o],this,t));if(a&&n){var s=fi(a,n,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){var n=e.parentModel,a=n.getData().getItemLayout(t);if(a){var i=a.depth,r=n.levelModels[i];r&&(e.parentModel=r)}return e})),t.wrapMethod("getItemModel",(function(e,t){var n=e.parentModel,a=n.getGraph().getEdgeByIndex(t).node1.getLayout();if(a){var i=a.depth,r=n.levelModels[i];r&&(e.parentModel=r)}return e}))}));return s.data}},t.prototype.setNodePosition=function(e,t){var n=this.option.data[e];n.localX=t[0],n.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,n){function a(e){return isNaN(e)||null==e}if("edge"===n){var i=this.getDataParams(e,n),r=i.data,o=i.value,s=r.source+" -- "+r.target;return(0,vt.TX)("nameValue",{name:s,value:o,noValue:a(o)})}var l=this.getGraph().getNodeByIndex(e).getLayout().value,u=this.getDataParams(e,n).data.name;return(0,vt.TX)("nameValue",{name:null!=u?u+"":null,value:l,noValue:a(l)})},t.prototype.optionUpdated=function(){this.option},t.prototype.getDataParams=function(t,n){var a=e.prototype.getDataParams.call(this,t,n);if(null==a.value&&"node"===n){var i=this.getGraph().getNodeByIndex(t).getLayout().value;a.value=i}return a},t.type="series.sankey",t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(r.Z);const tr=er;function nr(e,t){e.eachSeriesByType("sankey",(function(e){var n=e.get("nodeWidth"),a=e.get("nodeGap"),i=function(e,t){return Ne.ME(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=i;var r=i.width,o=i.height,l=e.getGraph(),u=l.nodes,d=l.edges;!function(e){s.each(e,(function(e){var t=cr(e.outEdges,hr),n=cr(e.inEdges,hr),a=e.getValue()||0,i=Math.max(t,n,a);e.setLayout({value:i},!0)}))}(u),function(e,t,n,a,i,r,o,l,u){(function(e,t,n,a,i,r,o){for(var l=[],u=[],d=[],h=[],c=0,p=0;p<t.length;p++)l[p]=1;for(p=0;p<e.length;p++)u[p]=e[p].inEdges.length,0===u[p]&&d.push(e[p]);for(var g=-1;d.length;){for(var f=0;f<d.length;f++){var y=d[f],m=y.hostGraph.data.getRawDataItem(y.dataIndex),v=null!=m.depth&&m.depth>=0;v&&m.depth>g&&(g=m.depth),y.setLayout({depth:v?m.depth:c},!0),"vertical"===r?y.setLayout({dy:n},!0):y.setLayout({dx:n},!0);for(var x=0;x<y.outEdges.length;x++){var _=y.outEdges[x];l[t.indexOf(_)]=0;var b=_.node2;0==--u[e.indexOf(b)]&&h.indexOf(b)<0&&h.push(b)}}++c,d=h,h=[]}for(p=0;p<l.length;p++)if(1===l[p])throw new Error("Sankey is a DAG, the original data has cycle!");var S=g>c-1?g:c-1;o&&"left"!==o&&function(e,t,n,a){if("right"===t){for(var i=[],r=e,o=0;r.length;){for(var l=0;l<r.length;l++){var u=r[l];u.setLayout({skNodeHeight:o},!0);for(var d=0;d<u.inEdges.length;d++){var h=u.inEdges[d];i.indexOf(h.node1)<0&&i.push(h.node1)}}r=i,i=[],++o}s.each(e,(function(e){ar(e)||e.setLayout({depth:Math.max(0,a-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){s.each(e,(function(e){ar(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,a)}(e,o,0,S),function(e,t,n){s.each(e,(function(e){var a=e.getLayout().depth*t;"vertical"===n?e.setLayout({y:a},!0):e.setLayout({x:a},!0)}))}(e,"vertical"===r?(i-n)/S:(a-n)/S,r)})(e,t,n,i,r,l,u),function(e,t,n,a,i,r,o){var l=function(e,t){var n=[],a="vertical"===t?"y":"x",i=(0,_.pv)(e,(function(e){return e.getLayout()[a]}));return i.keys.sort((function(e,t){return e-t})),s.each(i.keys,(function(e){n.push(i.buckets.get(e))})),n}(e,o);(function(e,t,n,a,i,r){var o=1/0;s.each(e,(function(e){var t=e.length,l=0;s.each(e,(function(e){l+=e.getLayout().value}));var u="vertical"===r?(a-(t-1)*i)/l:(n-(t-1)*i)/l;u<o&&(o=u)})),s.each(e,(function(e){s.each(e,(function(e,t){var n=e.getLayout().value*o;"vertical"===r?(e.setLayout({x:t},!0),e.setLayout({dx:n},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:n},!0))}))})),s.each(t,(function(e){var t=+e.getValue()*o;e.setLayout({dy:t},!0)}))})(l,t,n,a,i,o),ir(l,i,n,a,o);for(var u=1;r>0;r--)rr(l,u*=.99,o),ir(l,i,n,a,o),pr(l,u,o),ir(l,i,n,a,o)}(e,t,r,i,a,o,l),function(e,t){var n="vertical"===t?"x":"y";s.each(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[n]-t.node2.getLayout()[n]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[n]-t.node1.getLayout()[n]}))})),s.each(e,(function(e){var t=0,n=0;s.each(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),s.each(e.inEdges,(function(e){e.setLayout({ty:n},!0),n+=e.getLayout().dy}))}))}(e,l)}(u,d,n,a,r,o,0!==s.filter(u,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))}))}function ar(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function ir(e,t,n,a,i){var r="vertical"===i?"x":"y";s.each(e,(function(e){var o,s,l;e.sort((function(e,t){return e.getLayout()[r]-t.getLayout()[r]}));for(var u=0,d=e.length,h="vertical"===i?"dx":"dy",c=0;c<d;c++)(l=u-(s=e[c]).getLayout()[r])>0&&(o=s.getLayout()[r]+l,"vertical"===i?s.setLayout({x:o},!0):s.setLayout({y:o},!0)),u=s.getLayout()[r]+s.getLayout()[h]+t;if((l=u-t-("vertical"===i?a:n))>0)for(o=s.getLayout()[r]-l,"vertical"===i?s.setLayout({x:o},!0):s.setLayout({y:o},!0),u=o,c=d-2;c>=0;--c)(l=(s=e[c]).getLayout()[r]+s.getLayout()[h]+t-u)>0&&(o=s.getLayout()[r]-l,"vertical"===i?s.setLayout({x:o},!0):s.setLayout({y:o},!0)),u=s.getLayout()[r]}))}function rr(e,t,n){s.each(e.slice().reverse(),(function(e){s.each(e,(function(e){if(e.outEdges.length){var a=cr(e.outEdges,or,n)/cr(e.outEdges,hr);if(isNaN(a)){var i=e.outEdges.length;a=i?cr(e.outEdges,sr,n)/i:0}if("vertical"===n){var r=e.getLayout().x+(a-dr(e,n))*t;e.setLayout({x:r},!0)}else{var o=e.getLayout().y+(a-dr(e,n))*t;e.setLayout({y:o},!0)}}}))}))}function or(e,t){return dr(e.node2,t)*e.getValue()}function sr(e,t){return dr(e.node2,t)}function lr(e,t){return dr(e.node1,t)*e.getValue()}function ur(e,t){return dr(e.node1,t)}function dr(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function hr(e){return e.getValue()}function cr(e,t,n){for(var a=0,i=e.length,r=-1;++r<i;){var o=+t(e[r],n);isNaN(o)||(a+=o)}return a}function pr(e,t,n){s.each(e,(function(e){s.each(e,(function(e){if(e.inEdges.length){var a=cr(e.inEdges,lr,n)/cr(e.inEdges,hr);if(isNaN(a)){var i=e.inEdges.length;a=i?cr(e.inEdges,ur,n)/i:0}if("vertical"===n){var r=e.getLayout().x+(a-dr(e,n))*t;e.setLayout({x:r},!0)}else{var o=e.getLayout().y+(a-dr(e,n))*t;e.setLayout({y:o},!0)}}}))}))}function gr(e){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph().nodes;if(t.length){var n=1/0,a=-1/0;s.each(t,(function(e){var t=e.getLayout().value;t<n&&(n=t),t>a&&(a=t)})),s.each(t,(function(t){var i=new ea.Z({type:"color",mappingMethod:"linear",dataExtent:[n,a],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),r=t.getModel().get(["itemStyle","color"]);null!=r?(t.setVisual("color",r),t.setVisual("style",{fill:r})):(t.setVisual("color",i),t.setVisual("style",{fill:i}))}))}}))}function fr(e){e.registerChartView($i),e.registerSeriesModel(tr),e.registerLayout(nr),e.registerVisual(gr),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))}var yr=n(381),mr=function(){function e(){}return e.prototype.getInitialData=function(e,t){var n,a,i=t.getComponent("xAxis",this.get("xAxisIndex")),r=t.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),l=r.get("type");"category"===o?(e.layout="horizontal",n=i.getOrdinalMeta(),a=!0):"category"===l?(e.layout="vertical",n=r.getOrdinalMeta(),a=!0):e.layout=e.layout||"horizontal";var u=["x","y"],d="horizontal"===e.layout?0:1,h=this._baseAxisDim=u[d],c=u[1-d],p=[i,r],g=p[d].get("type"),f=p[1-d].get("type"),y=e.data;if(y&&a){var m=[];s.each(y,(function(e,t){var n;s.isArray(e)?(n=e.slice(),e.unshift(t)):s.isArray(e.value)?(n=e.value.slice(),e.value.unshift(t)):n=e,m.push(n)})),e.data=m}var v=this.defaultValueDimensions,x=[{name:h,type:(0,yr.T)(g),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:c,type:(0,yr.T)(f),dimsDef:v.slice()}];return Qe(this,{coordDimensions:x,dimensionsCount:v.length+1,encodeDefaulter:s.curry(Ke.pY,x,this)})},e.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},e}(),vr=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return(0,a.ZT)(t,e),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(r.Z);(0,s.mixin)(vr,mr,!0);const xr=vr;var _r=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this.group,r=this._data;this._data||i.removeAll();var o="horizontal"===e.get("layout")?1:0;a.diff(r).add((function(e){if(a.hasValue(e)){var t=wr(a.getItemLayout(e),a,e,o,!0);a.setItemGraphicEl(e,t),i.add(t)}})).update((function(e,t){var n=r.getItemGraphicEl(t);if(a.hasValue(e)){var s=a.getItemLayout(e);n?Ir(s,n,a,e):n=wr(s,a,e,o),i.add(n),a.setItemGraphicEl(e,n)}else i.remove(n)})).remove((function(e){var t=r.getItemGraphicEl(e);t&&i.remove(t)})).execute(),this._data=a},t.prototype.remove=function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl((function(e){e&&t.remove(e)}))},t.type="boxplot",t}(N.Z),br=function(){},Sr=function(e){function t(t){var n=e.call(this,t)||this;return n.type="boxplotBoxPath",n}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new br},t.prototype.buildPath=function(e,t){var n=t.points,a=0;for(e.moveTo(n[a][0],n[a][1]),a++;a<4;a++)e.lineTo(n[a][0],n[a][1]);for(e.closePath();a<n.length;a++)e.moveTo(n[a][0],n[a][1]),a++,e.lineTo(n[a][0],n[a][1])},t}(b.ZP);function wr(e,t,n,a,i){var r=e.ends,o=new Sr({shape:{points:i?Mr(r,a,e):r}});return Ir(e,o,t,n,i),o}function Ir(e,t,n,a,i){var r=n.hostModel;(0,x[i?"initProps":"updateProps"])(t,{shape:{points:e.ends}},r,a),t.useStyle(n.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.z2=100;var o=n.getItemModel(a);(0,G.WO)(t,o),(0,G.vF)(t,o.get(["emphasis","focus"]),o.get(["emphasis","blurScope"]))}function Mr(e,t,n){return s.map(e,(function(e){return(e=e.slice())[t]=n.initBaseline,e}))}const Dr=_r;function Lr(e,t){e.eachRawSeriesByType("boxplot",(function(e){e.getData().setVisual("legendSymbol","roundRect")}))}var Ar=s.each;function Tr(e){var t=function(e){var t=[],n=[];return e.eachSeriesByType("boxplot",(function(e){var a=e.getBaseAxis(),i=s.indexOf(n,a);i<0&&(i=n.length,n[i]=a,t[i]={axis:a,seriesModels:[]}),t[i].seriesModels.push(e)})),t}(e);Ar(t,(function(e){var t=e.seriesModels;t.length&&(function(e){var t,n,a=e.axis,i=e.seriesModels,r=i.length,o=e.boxWidthList=[],l=e.boxOffsetList=[],u=[];if("category"===a.type)n=a.getBandWidth();else{var d=0;Ar(i,(function(e){d=Math.max(d,e.getData().count())})),t=a.getExtent(),Math.abs(t[1]-t[0])}Ar(i,(function(e){var t=e.get("boxWidth");s.isArray(t)||(t=[t,t]),u.push([(0,O.GM)(t[0],n)||0,(0,O.GM)(t[1],n)||0])}));var h=.8*n-2,c=h/r*.3,p=(h-c*(r-1))/r,g=p/2-h/2;Ar(i,(function(e,t){l.push(g),g+=c+p,o.push(Math.min(Math.max(p,u[t][0]),u[t][1]))}))}(e),Ar(t,(function(t,n){!function(e,t,n){var a=e.coordinateSystem,i=e.getData(),r=n/2,o="horizontal"===e.get("layout")?0:1,s=1-o,l=["x","y"],u=i.mapDimension(l[o]),d=i.mapDimensionsAll(l[s]);if(!(null==u||d.length<5))for(var h=0;h<i.count();h++){var c=i.get(u,h),p=x(c,d[2],h),g=x(c,d[0],h),f=x(c,d[1],h),y=x(c,d[3],h),m=x(c,d[4],h),v=[];_(v,f,!1),_(v,y,!0),v.push(g,f,m,y),b(v,g),b(v,m),b(v,p),i.setItemLayout(h,{initBaseline:p[s],ends:v})}function x(e,n,r){var l,u=i.get(n,r),d=[];return d[o]=e,d[s]=u,isNaN(e)||isNaN(u)?l=[NaN,NaN]:(l=a.dataToPoint(d))[o]+=t,l}function _(e,t,n){var a=t.slice(),i=t.slice();a[o]+=r,i[o]-=r,n?e.push(a,i):e.push(i,a)}function b(e,t){var n=t.slice(),a=t.slice();n[o]-=r,a[o]+=r,e.push(n,a)}}(t,e.boxOffsetList[n],e.boxWidthList[n])})))}))}var Cr=n(175),Pr=n(4279),Nr={type:"echarts:boxplot",transform:function(e){var t=e.upstream;t.sourceFormat!==Pr.XD&&(0,Cr._y)("");var n=function(e,t){for(var n=[],a=[],i=(t=t||{}).boundIQR,r="none"===i||0===i,o=0;o<e.length;o++){var l=(0,O.dt)(e[o].slice()),u=(0,O.VR)(l,.25),d=(0,O.VR)(l,.5),h=(0,O.VR)(l,.75),c=l[0],p=l[l.length-1],g=(null==i?1.5:i)*(h-u),f=r?c:Math.max(c,u-g),y=r?p:Math.min(p,h+g),m=t.itemNameFormatter,v=(0,s.isFunction)(m)?m({value:o}):(0,s.isString)(m)?m.replace("{value}",o+""):o+"";n.push([v,f,u,d,h,y]);for(var x=0;x<l.length;x++){var _=l[x];if(_<f||_>y){var b=[v,_];a.push(b)}}}return{boxData:n,outliers:a}}(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function Zr(e){e.registerSeriesModel(xr),e.registerChartView(Dr),e.registerVisual(Lr),e.registerLayout(Tr),e.registerTransform(Nr)}var Er=["color","borderColor"],Or=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,t,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,t,n,a){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e){var t=e.getData(),n=this._data,a=this.group,i=t.getLayout("isSimpleBox"),r=e.get("clip",!0),o=e.coordinateSystem,s=o.getArea&&o.getArea();this._data||a.removeAll(),t.diff(n).add((function(n){if(t.hasValue(n)){var o=t.getItemLayout(n);if(r&&zr(s,o))return;var l=Vr(o,0,!0);x.initProps(l,{shape:{points:o.ends}},e,n),Gr(l,t,n,i),a.add(l),t.setItemGraphicEl(n,l)}})).update((function(o,l){var u=n.getItemGraphicEl(l);if(t.hasValue(o)){var d=t.getItemLayout(o);r&&zr(s,d)?a.remove(u):(u?x.updateProps(u,{shape:{points:d.ends}},e,o):u=Vr(d),Gr(u,t,o,i),a.add(u),t.setItemGraphicEl(o,u))}else a.remove(u)})).remove((function(e){var t=n.getItemGraphicEl(e);t&&a.remove(t)})).execute(),this._data=t},t.prototype._renderLarge=function(e){this._clear(),Hr(e,this.group);var t=e.get("clip",!0)?V(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,t){for(var n,a=t.getData(),i=a.getLayout("isSimpleBox");null!=(n=e.next());){var r=Vr(a.getItemLayout(n));Gr(r,a,n,i),r.incremental=!0,this.group.add(r)}},t.prototype._incrementalRenderLarge=function(e,t){Hr(t,this.group,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(N.Z),Rr=function(){},kr=function(e){function t(t){var n=e.call(this,t)||this;return n.type="normalCandlestickBox",n}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new Rr},t.prototype.buildPath=function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(b.ZP);function Vr(e,t,n){var a=e.ends;return new kr({shape:{points:n?Br(a,e):a},z2:100})}function zr(e,t){for(var n=!0,a=0;a<t.ends.length;a++)if(e.contain(t.ends[a][0],t.ends[a][1])){n=!1;break}return n}function Gr(e,t,n,a){var i=t.getItemModel(n);e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.__simpleBox=a,(0,G.WO)(e,i)}function Br(e,t){return s.map(e,(function(e){return(e=e.slice())[1]=t.initBaseline,e}))}var Fr=function(){},Wr=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeCandlestickBox",n}return(0,a.ZT)(t,e),t.prototype.getDefaultShape=function(){return new Fr},t.prototype.buildPath=function(e,t){for(var n=t.points,a=0;a<n.length;)if(this.__sign===n[a++]){var i=n[a++];e.moveTo(i,n[a++]),e.lineTo(i,n[a++])}else a+=3},t}(b.ZP);function Hr(e,t,n){var a=e.getData(),i=a.getLayout("largePoints"),r=new Wr({shape:{points:i},__sign:1});t.add(r);var o=new Wr({shape:{points:i},__sign:-1});t.add(o),Xr(1,r,e),Xr(-1,o,e),n&&(r.incremental=!0,o.incremental=!0)}function Xr(e,t,n,a){var i=n.get(["itemStyle",e>0?"borderColor":"borderColor0"])||n.get(["itemStyle",e>0?"color":"color0"]),r=n.getModel("itemStyle").getItemStyle(Er);t.useStyle(r),t.style.fill=null,t.style.stroke=i}const Yr=Or;var Ur=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return(0,a.ZT)(t,e),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,t,n){var a=t.getItemLayout(e);return a&&n.rect(a.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(r.Z);(0,s.mixin)(Ur,mr,!0);const qr=Ur;function jr(e){e&&s.isArray(e.series)&&s.each(e.series,(function(e){s.isObject(e)&&"k"===e.type&&(e.type="candlestick")}))}var Qr=["itemStyle","borderColor"],Kr=["itemStyle","borderColor0"],Jr=["itemStyle","color"],$r=["itemStyle","color0"],eo={seriesType:"candlestick",plan:(0,$.Z)(),performRawSeries:!0,reset:function(e,t){function n(e,t){return t.get(e>0?Jr:$r)}function a(e,t){return t.get(e>0?Qr:Kr)}if(e.getData().setVisual("legendSymbol","roundRect"),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,t){for(var i;null!=(i=e.next());){var r=t.getItemModel(i),o=t.getItemLayout(i).sign,l=r.getItemStyle();l.fill=n(o,r),l.stroke=a(o,r)||l.fill;var u=t.ensureUniqueItemVisual(i,"style");(0,s.extend)(u,l)}}}}};const to=eo;var no="undefined"!=typeof Float32Array?Float32Array:Array;function ao(e,t,n,a,i){return n>a?-1:n<a?1:t>0?e.get(i,t-1)<=a?1:-1:1}const io={seriesType:"candlestick",plan:(0,$.Z)(),reset:function(e){var t=e.coordinateSystem,n=e.getData(),a=function(e,t){var n,a=e.getBaseAxis(),i="category"===a.type?a.getBandWidth():(n=a.getExtent(),Math.abs(n[1]-n[0])/t.count()),r=(0,O.GM)((0,s.retrieve2)(e.get("barMaxWidth"),i),i),o=(0,O.GM)((0,s.retrieve2)(e.get("barMinWidth"),1),i),l=e.get("barWidth");return null!=l?(0,O.GM)(l,i):Math.max(Math.min(i/2,r),o)}(e,n),i=["x","y"],r=n.mapDimension(i[0]),o=n.mapDimensionsAll(i[1]),l=o[0],u=o[1],d=o[2],h=o[3];if(n.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),!(null==r||o.length<4))return{progress:e.pipelineContext.large?function(e,n){for(var a,i,o=new no(4*e.count),s=0,c=[],p=[];null!=(i=e.next());){var g=n.get(r,i),f=n.get(l,i),y=n.get(u,i),m=n.get(d,i),v=n.get(h,i);isNaN(g)||isNaN(m)||isNaN(v)?(o[s++]=NaN,s+=3):(o[s++]=ao(n,i,f,y,u),c[0]=g,c[1]=m,a=t.dataToPoint(c,null,p),o[s++]=a?a[0]:NaN,o[s++]=a?a[1]:NaN,c[1]=v,a=t.dataToPoint(c,null,p),o[s++]=a?a[1]:NaN)}n.setLayout("largePoints",o)}:function(e,n){for(var i;null!=(i=e.next());){var o=n.get(r,i),s=n.get(l,i),c=n.get(u,i),p=n.get(d,i),g=n.get(h,i),f=Math.min(s,c),y=Math.max(s,c),m=w(f,o),v=w(y,o),_=w(p,o),b=w(g,o),S=[];I(S,v,0),I(S,m,1),S.push(D(b),D(v),D(_),D(m)),n.setItemLayout(i,{sign:ao(n,i,s,c,u),initBaseline:s>c?v[1]:m[1],ends:S,brushRect:M(p,g,o)})}function w(e,n){var a=[];return a[0]=n,a[1]=e,isNaN(n)||isNaN(e)?[NaN,NaN]:t.dataToPoint(a)}function I(e,t,n){var i=t.slice(),r=t.slice();i[0]=(0,x.subPixelOptimize)(i[0]+a/2,1,!1),r[0]=(0,x.subPixelOptimize)(r[0]-a/2,1,!0),n?e.push(i,r):e.push(r,i)}function M(e,t,n){var i=w(e,n),r=w(t,n);return i[0]-=a/2,r[0]-=a/2,{x:i[0],y:i[1],width:a,height:r[1]-i[1]}}function D(e){return e[0]=(0,x.subPixelOptimize)(e[0],1),e}}}}};function ro(e){e.registerChartView(Yr),e.registerSeriesModel(qr),e.registerPreprocessor(jr),e.registerVisual(to),e.registerLayout(io)}function oo(e,t){var n=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})}))}var so=function(e){function t(t,n){var a=e.call(this)||this,i=new u.Z(t,n),r=new m.Z;return a.add(i),a.add(r),a.updateData(t,n),a}return(0,a.ZT)(t,e),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,a=this.childAt(1),i=0;i<3;i++){var r=(0,at.t)(t,-1,-1,2,2,n);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var o=-i/3*e.period+e.effectOffset;r.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(o).start(),r.animateStyle(!0).when(e.period,{opacity:0}).delay(o).start(),a.add(r)}oo(a,e)},t.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),a=["symbolType","period","rippleScale"],i=0;i<a.length;i++){var r=a[i];if(t[r]!==e[r])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}oo(n,e)},t.prototype.highlight=function(){(0,G.fD)(this)},t.prototype.downplay=function(){(0,G.Mh)(this)},t.prototype.updateData=function(e,t){var n=this,a=e.hostModel;this.childAt(0).updateData(e,t);var i=this.childAt(1),r=e.getItemModel(t),o=e.getItemVisual(t,"symbol"),l=function(e){return s.isArray(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),u=e.getItemVisual(t,"style"),d=u&&u.fill;i.setScale(l),i.traverse((function(e){e.setStyle("fill",d)}));var h=r.getShallow("symbolOffset");h&&(i.x=(0,O.GM)(h[0],l[0]),i.y=(0,O.GM)(h[1],l[1]));var c=e.getItemVisual(t,"symbolRotate");i.rotation=(c||0)*Math.PI/180||0;var p={};p.showEffectOn=a.get("showEffectOn"),p.rippleScale=r.get(["rippleEffect","scale"]),p.brushType=r.get(["rippleEffect","brushType"]),p.period=1e3*r.get(["rippleEffect","period"]),p.effectOffset=t/e.count(),p.z=a.getShallow("z")||0,p.zlevel=a.getShallow("zlevel")||0,p.symbolType=o,p.color=d,p.rippleEffectColor=r.get(["rippleEffect","color"]),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===p.showEffectOn?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==p.showEffectOn&&n.startEffectAnimation(p):"normal"===e&&"render"!==p.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=p,(0,G.vF)(this)},t.prototype.fadeOut=function(e){this.off("mouseover").off("mouseout"),e&&e()},t}(m.Z);s.inherits(so,m.Z);const lo=so,uo=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.init=function(){this._symbolDraw=new l.Z(lo)},t.prototype.render=function(e,t,n){var a=e.getData(),i=this._symbolDraw;i.updateData(a),this.group.add(i.group)},t.prototype.updateTransform=function(e,t,n){var a=e.getData();this.group.dirty();var i=ee("").reset(e,t,n);i.progress&&i.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=Bn.clone(t.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(N.Z),ho=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,i.Z)(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10},t}(r.Z);function co(e){e.registerChartView(uo),e.registerSeriesModel(ho),e.registerLayout(ee("effectScatter"))}var po=n(9971),go=function(e){function t(t,n,a){var i=e.call(this)||this;return i.add(i.createLine(t,n,a)),i._updateEffectSymbol(t,n),i}return(0,a.ZT)(t,e),t.prototype.createLine=function(e,t,n){return new po.Z(e,t,n)},t.prototype._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),a=n.get("symbolSize"),i=n.get("symbol");s.isArray(a)||(a=[a,a]);var r=e.getItemVisual(t,"style"),o=n.get("color")||r&&r.stroke,l=this.childAt(1);this._symbolType!==i&&(this.remove(l),(l=(0,at.t)(i,-.5,-.5,1,1,o)).z2=100,l.culling=!0,this.add(l)),l&&(l.setStyle("shadowColor",o),l.setStyle(n.getItemStyle(["color"])),l.scaleX=a[0],l.scaleY=a[1],l.setColor(o),this._symbolType=i,this._symbolScale=a,this._updateEffectAnimation(e,n,t))},t.prototype._updateEffectAnimation=function(e,t,n){var a=this.childAt(1);if(a){var i=this,r=e.getItemLayout(n),o=1e3*t.get("period"),l=t.get("loop"),u=t.get("constantSpeed"),d=s.retrieve(t.get("delay"),(function(t){return t/e.count()*o/3}));if(a.ignore=!0,this._updateAnimationPoints(a,r),u>0&&(o=this._getLineLength(a)/u*1e3),(o!==this._period||l!==this._loop)&&(a.stopAnimation(),o>0)){var h=void 0;h="function"==typeof d?d(n):d,a.__t>0&&(h=-o*a.__t),a.__t=0;var c=a.animate("",l).when(o,{__t:1}).delay(h).during((function(){i._updateSymbolPosition(a)}));l||c.done((function(){i.remove(a)})),c.start()}this._period=o,this._loop=l}},t.prototype._getLineLength=function(e){return Aa.dist(e.__p1,e.__cp1)+Aa.dist(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},t.prototype.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},t.prototype._updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,a=e.__cp1,i=e.__t,r=[e.x,e.y],o=r.slice(),s=w.Zm,l=w.AZ;r[0]=s(t[0],a[0],n[0],i),r[1]=s(t[1],a[1],n[1],i);var u=l(t[0],a[0],n[0],i),d=l(t[1],a[1],n[1],i);e.rotation=-Math.atan2(d,u)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*Aa.dist(o,r),1===i&&(r[0]=o[0]+(r[0]-o[0])/2,r[1]=o[1]+(r[1]-o[1])/2)):1===e.__lastT?e.scaleY=2*Aa.dist(t,r):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=r[0],e.y=r[1]},t.prototype.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},t}(m.Z);const fo=go;var yo=function(e){function t(t,n,a){var i=e.call(this)||this;return i._createPolyline(t,n,a),i}return(0,a.ZT)(t,e),t.prototype._createPolyline=function(e,t,n){var a=e.getItemLayout(t),i=new ke.Z({shape:{points:a}});this.add(i),this._updateCommonStl(e,t,n)},t.prototype.updateData=function(e,t,n){var a=e.hostModel,i=this.childAt(0),r={shape:{points:e.getItemLayout(t)}};x.updateProps(i,r,a,t),this._updateCommonStl(e,t,n)},t.prototype._updateCommonStl=function(e,t,n){var a=this.childAt(0),i=e.getItemModel(t),r=n&&n.emphasisLineStyle;n&&!e.hasItemOption||(r=i.getModel(["emphasis","lineStyle"]).getLineStyle()),a.useStyle(e.getItemVisual(t,"style")),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=r,(0,G.vF)(this)},t.prototype.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},t}(m.Z);const mo=yo,vo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return(0,a.ZT)(t,e),t.prototype.createLine=function(e,t,n){return new mo(e,t,n)},t.prototype._updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],a=0,i=1;i<t.length;i++){var r=t[i-1],o=t[i];a+=Aa.dist(r,o),n.push(a)}if(0!==a){for(i=0;i<n.length;i++)n[i]/=a;this._offsets=n,this._length=a}else this._length=0},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var t=e.__t,n=this._points,a=this._offsets,i=n.length;if(a){var r,o=this._lastFrame;if(t<this._lastFramePercent){for(r=Math.min(o+1,i-1);r>=0&&!(a[r]<=t);r--);r=Math.min(r,i-2)}else{for(r=o;r<i&&!(a[r]>t);r++);r=Math.min(r-1,i-2)}var s=(t-a[r])/(a[r+1]-a[r]),l=n[r],u=n[r+1];e.x=l[0]*(1-s)+s*u[0],e.y=l[1]*(1-s)+s*u[1];var d=u[0]-l[0],h=u[1]-l[1];e.rotation=-Math.atan2(h,d)-Math.PI/2,this._lastFrame=r,this._lastFramePercent=t,e.ignore=!1}},t}(fo);var xo=n(3640),_o=n(5674),bo=function(){this.polyline=!1,this.curveness=0,this.segs=[]},So=function(e){function t(t){return e.call(this,t)||this}return(0,a.ZT)(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new bo},t.prototype.buildPath=function(e,t){var n=t.segs,a=t.curveness;if(t.polyline)for(var i=0;i<n.length;){var r=n[i++];if(r>0){e.moveTo(n[i++],n[i++]);for(var o=1;o<r;o++)e.lineTo(n[i++],n[i++])}}else for(i=0;i<n.length;){var s=n[i++],l=n[i++],u=n[i++],d=n[i++];if(e.moveTo(s,l),a>0){var h=(s+u)/2-(l-d)*a,c=(l+d)/2-(u-s)*a;e.quadraticCurveTo(h,c,u,d)}else e.lineTo(u,d)}},t.prototype.findDataIndex=function(e,t){var n=this.shape,a=n.segs,i=n.curveness,r=this.style.lineWidth;if(n.polyline)for(var o=0,s=0;s<a.length;){var l=a[s++];if(l>0)for(var u=a[s++],d=a[s++],h=1;h<l;h++){var c=a[s++],p=a[s++];if(xo.m(u,d,c,p,r,e,t))return o}o++}else for(o=0,s=0;s<a.length;){if(u=a[s++],d=a[s++],c=a[s++],p=a[s++],i>0){var g=(u+c)/2-(d-p)*i,f=(d+p)/2-(c-u)*i;if(_o.m(u,d,g,f,c,p,r,e,t))return o}else if(xo.m(u,d,c,p,r,e,t))return o;o++}return-1},t}(b.ZP);const wo=function(){function e(){this.group=new m.Z}return e.prototype.isPersistent=function(){return!this._incremental},e.prototype.updateData=function(e){this.group.removeAll();var t=new So({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>5e5?(this._incremental||(this._incremental=new it.Z({silent:!0})),this.group.add(this._incremental)):this._incremental=null},e.prototype.incrementalUpdate=function(e,t){var n=new So;n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=e.start,this.group.add(n))},e.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},e.prototype._setCommon=function(e,t,n){var a=t.hostModel;e.setShape({polyline:a.get("polyline"),curveness:a.get(["lineStyle","curveness"])}),e.useStyle(a.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("style");if(i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null),!n){var r=(0,W.A)(e);r.seriesIndex=a.seriesIndex,e.on("mousemove",(function(t){r.dataIndex=null;var n=e.findDataIndex(t.offsetX,t.offsetY);n>0&&(r.dataIndex=n+e.__startIndex)}))}},e.prototype._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},e}(),Io={seriesType:"lines",plan:(0,$.Z)(),reset:function(e){var t=e.coordinateSystem,n=e.get("polyline"),a=e.pipelineContext.large;return{progress:function(i,r){var o=[];if(a){var s=void 0,l=i.end-i.start;if(n){for(var u=0,d=i.start;d<i.end;d++)u+=e.getLineCoordsCount(d);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var h=0,c=[];for(d=i.start;d<i.end;d++){var p=e.getLineCoords(d,o);n&&(s[h++]=p);for(var g=0;g<p;g++)c=t.dataToPoint(o[g],!1,c),s[h++]=c[0],s[h++]=c[1]}r.setLayout("linesPoints",s)}else for(d=i.start;d<i.end;d++){var f=r.getItemModel(d),y=(p=e.getLineCoords(d,o),[]);if(n)for(var m=0;m<p;m++)y.push(t.dataToPoint(o[m]));else{y[0]=t.dataToPoint(o[0]),y[1]=t.dataToPoint(o[1]);var v=f.get(["lineStyle","curveness"]);+v&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*v,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*v])}r.setItemLayout(d,y)}}}}},Mo=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this._updateLineDraw(a,e),r=e.get("zlevel"),o=e.get(["effect","trailLength"]),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(r).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&o&&(l||s.configLayer(r,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(o/10+.9,1),0)})),i.updateData(a);var u=e.get("clip",!0)&&V(e.coordinateSystem,!1,e);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=r,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var a=e.getData();this._updateLineDraw(a,e).incrementalPrepareUpdate(a),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,n){var a=e.getData(),i=e.pipelineContext;if(!this._finished||i.large||i.progressiveRender)return{update:!0};var r=Io.reset(e,t,n);r.progress&&r.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(e,t){var n=this._lineDraw,a=this._showEffect(t),i=!!t.get("polyline"),r=t.pipelineContext.large;return n&&a===this._hasEffet&&i===this._isPolyline&&r===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=r?new wo:new Ka.Z(i?a?vo:mo:a?fo:po.Z),this._hasEffet=a,this._isPolyline=i,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},t.type="lines",t}(N.Z);var Do="undefined"==typeof Uint32Array?Array:Uint32Array,Lo="undefined"==typeof Float64Array?Array:Float64Array;function Ao(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=(0,s.map)(t,(function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),(0,s.mergeAll)([t,e[0],e[1]])})))}const To=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return(0,a.ZT)(t,e),t.prototype.init=function(t){t.data=t.data||[],Ao(t);var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(t){if(Ao(t),t.data){var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=(0,s.concatArray)(this._flatCoords,t.flatCoords),this._flatCoordsOffset=(0,s.concatArray)(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],a=this._flatCoordsOffset[2*e+1],i=0;i<a;i++)t[i]=t[i]||[],t[i][0]=this._flatCoords[n+2*i],t[i][1]=this._flatCoords[n+2*i+1];return a}var r=this._getCoordsFromItemModel(e);for(i=0;i<r.length;i++)t[i]=t[i]||[],t[i][0]=r[i][0],t[i][1]=r[i][1];return r.length},t.prototype._processFlatCoordsArray=function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"==typeof e[0]){for(var n=e.length,a=new Do(n),i=new Lo(n),r=0,o=0,s=0,l=0;l<n;){s++;var u=e[l++];a[o++]=r+t,a[o++]=u;for(var d=0;d<u;d++){var h=e[l++],c=e[l++];i[r++]=h,i[r++]=c}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,o),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,t){var n=new je.Z(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],(function(e,t,a,i){if(e instanceof Array)return NaN;n.hasItemOption=!0;var r=e.value;return null!=r?r instanceof Array?r[i]:r:void 0})),n},t.prototype.formatTooltip=function(e,t,n){var a=this.getData().getItemModel(e),i=a.get("name");if(i)return i;var r=a.get("fromName"),o=a.get("toName"),s=[];return null!=r&&s.push(r),null!=o&&s.push(o),(0,vt.TX)("nameValue",{name:s.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(r.Z);function Co(e){return e instanceof Array||(e=[e,e]),e}const Po={seriesType:"lines",reset:function(e){var t=Co(e.get("symbol")),n=Co(e.get("symbolSize")),a=e.getData();return a.setVisual("fromSymbol",t&&t[0]),a.setVisual("toSymbol",t&&t[1]),a.setVisual("fromSymbolSize",n&&n[0]),a.setVisual("toSymbolSize",n&&n[1]),{dataEach:a.hasItemOption?function(e,t){var n=e.getItemModel(t),a=Co(n.getShallow("symbol",!0)),i=Co(n.getShallow("symbolSize",!0));a[0]&&e.setItemVisual(t,"fromSymbol",a[0]),a[1]&&e.setItemVisual(t,"toSymbol",a[1]),i[0]&&e.setItemVisual(t,"fromSymbolSize",i[0]),i[1]&&e.setItemVisual(t,"toSymbolSize",i[1])}:null}}};function No(e){e.registerChartView(Mo),e.registerSeriesModel(To),e.registerLayout(Io),e.registerVisual(Po)}var Zo=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=s.createCanvas();this.canvas=e}return e.prototype.update=function(e,t,n,a,i,r){var o=this._getBrush(),s=this._getGradient(i,"inRange"),l=this._getGradient(i,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,h=d.getContext("2d"),c=e.length;d.width=t,d.height=n;for(var p=0;p<c;++p){var g=e[p],f=g[0],y=g[1],m=a(g[2]);h.globalAlpha=m,h.drawImage(o,f-u,y-u)}if(!d.width||!d.height)return d;for(var v=h.getImageData(0,0,d.width,d.height),x=v.data,_=0,b=x.length,S=this.minOpacity,w=this.maxOpacity-S;_<b;){m=x[_+3]/256;var I=4*Math.floor(255*m);if(m>0){var M=r(m)?s:l;m>0&&(m=m*w+S),x[_++]=M[I],x[_++]=M[I+1],x[_++]=M[I+2],x[_++]=M[I+3]*m*256}else _+=4}return h.putImageData(v,0,0),d},e.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=s.createCanvas()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var a=e.getContext("2d");return a.clearRect(0,0,n,n),a.shadowOffsetX=n,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-t,t,this.pointSize,0,2*Math.PI,!0),a.closePath(),a.fill(),e},e.prototype._getGradient=function(e,t){for(var n=this._gradientPixels,a=n[t]||(n[t]=new Uint8ClampedArray(1024)),i=[0,0,0,0],r=0,o=0;o<256;o++)e[t](o/255,!0,i),a[r++]=i[0],a[r++]=i[1],a[r++]=i[2],a[r++]=i[3];return a},e}();const Eo=Zo;function Oo(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}const Ro=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a;t.eachComponent("visualMap",(function(t){t.eachTargetSeries((function(n){n===e&&(a=t)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var i=e.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):Oo(i)&&this._renderOnGeo(i,e,a,n)},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll()},t.prototype.incrementalRender=function(e,t,n,a){var i=t.coordinateSystem;i&&(Oo(i)?this.render(t,n,a):this._renderOnCartesianAndCalendar(t,a,e.start,e.end,!0))},t.prototype._renderOnCartesianAndCalendar=function(e,t,n,a,i){var r,o,s,l,u=e.coordinateSystem;if((0,z.H)(u,"cartesian2d")){var d=u.getAxis("x"),h=u.getAxis("y");r=d.getBandWidth(),o=h.getBandWidth(),s=d.scale.getExtent(),l=h.scale.getExtent()}for(var c=this.group,p=e.getData(),g=e.getModel(["emphasis","itemStyle"]).getItemStyle(),f=e.getModel(["blur","itemStyle"]).getItemStyle(),y=e.getModel(["select","itemStyle"]).getItemStyle(),m=(0,B.k3)(e),v=e.get(["emphasis","focus"]),x=e.get(["emphasis","blurScope"]),_=(0,z.H)(u,"cartesian2d")?[p.mapDimension("x"),p.mapDimension("y"),p.mapDimension("value")]:[p.mapDimension("time"),p.mapDimension("value")],b=n;b<a;b++){var S=void 0,w=p.getItemVisual(b,"style");if((0,z.H)(u,"cartesian2d")){var I=p.get(_[0],b),M=p.get(_[1],b);if(isNaN(p.get(_[2],b))||I<s[0]||I>s[1]||M<l[0]||M>l[1])continue;var D=u.dataToPoint([I,M]);S=new Z.Z({shape:{x:Math.floor(Math.round(D[0])-r/2),y:Math.floor(Math.round(D[1])-o/2),width:Math.ceil(r),height:Math.ceil(o)},style:w})}else{if(isNaN(p.get(_[1],b)))continue;S=new Z.Z({z2:1,shape:u.dataToRect([p.get(_[0],b)]).contentShape,style:w})}var L=p.getItemModel(b);if(p.hasItemOption){var A=L.getModel("emphasis");g=A.getModel("itemStyle").getItemStyle(),f=L.getModel(["blur","itemStyle"]).getItemStyle(),y=L.getModel(["select","itemStyle"]).getItemStyle(),v=A.get("focus"),x=A.get("blurScope"),m=(0,B.k3)(L)}var T=e.getRawValue(b),C="-";T&&null!=T[2]&&(C=T[2]+""),(0,B.ni)(S,m,{labelFetcher:e,labelDataIndex:b,defaultOpacity:w.opacity,defaultText:C}),S.ensureState("emphasis").style=g,S.ensureState("blur").style=f,S.ensureState("select").style=y,(0,G.vF)(S,v,x),S.incremental=i,i&&(S.states.emphasis.hoverLayer=!0),c.add(S),p.setItemGraphicEl(b,S)}},t.prototype._renderOnGeo=function(e,t,n,a){var i=n.targetVisuals.inRange,r=n.targetVisuals.outOfRange,o=t.getData(),l=this._hmLayer||this._hmLayer||new Eo;l.blurSize=t.get("blurSize"),l.pointSize=t.get("pointSize"),l.minOpacity=t.get("minOpacity"),l.maxOpacity=t.get("maxOpacity");var u=e.getViewRect().clone(),d=e.getRoamTransform();u.applyTransform(d);var h=Math.max(u.x,0),c=Math.max(u.y,0),p=Math.min(u.width+u.x,a.getWidth()),g=Math.min(u.height+u.y,a.getHeight()),f=p-h,y=g-c,m=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")],v=o.mapArray(m,(function(t,n,a){var i=e.dataToPoint([t,n]);return i[0]-=h,i[1]-=c,i.push(a),i})),x=n.getExtent(),_="visualMap.continuous"===n.type?function(e,t){var n=e[1]-e[0];return t=[(t[0]-e[0])/n,(t[1]-e[0])/n],function(e){return e>=t[0]&&e<=t[1]}}(x,n.option.range):function(e,t,n){var a=e[1]-e[0],i=(t=s.map(t,(function(t){return{interval:[(t.interval[0]-e[0])/a,(t.interval[1]-e[0])/a]}}))).length,r=0;return function(e){var a;for(a=r;a<i;a++)if((o=t[a].interval)[0]<=e&&e<=o[1]){r=a;break}if(a===i)for(a=r-1;a>=0;a--){var o;if((o=t[a].interval)[0]<=e&&e<=o[1]){r=a;break}}return a>=0&&a<i&&n[a]}}(x,n.getPieceList(),n.option.selected);l.update(v,f,y,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:r.color.getColorMapper()},_);var b=new yt.ZP({style:{width:f,height:y,x:h,y:c,image:l.canvas},silent:!0});this.group.add(b)},t.type="heatmap",t}(N.Z),ko=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){return(0,i.Z)(this.getSource(),this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=gi.Z.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(r.Z);function Vo(e){e.registerChartView(Ro),e.registerSeriesModel(ko)}var zo=["itemStyle","borderWidth"],Go=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Bo=new St.Z;function Fo(e,t,n,a){var i=e.getItemLayout(t),r=n.get("symbolRepeat"),o=n.get("symbolClip"),l=n.get("symbolPosition")||"start",u=(n.get("symbolRotate")||0)*Math.PI/180||0,d=n.get("symbolPatternSize")||2,h=n.isAnimationEnabled(),c={dataIndex:t,layout:i,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:r,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:u,animationModel:h?n:null,hoverScale:h&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};!function(e,t,n,a,i){var r,o=a.valueDim,l=e.get("symbolBoundingData"),u=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),d=u.toGlobalCoord(u.dataToCoord(0)),h=1-+(n[o.wh]<=0);if(s.isArray(l)){var c=[Wo(u,l[0])-d,Wo(u,l[1])-d];c[1]<c[0]&&c.reverse(),r=c[h]}else r=null!=l?Wo(u,l)-d:t?a.coordSysExtent[o.index][h]-d:n[o.wh];i.boundingLength=r,t&&(i.repeatCutLength=n[o.wh]),i.pxSign=r>0?1:r<0?-1:0}(n,r,i,a,c),function(e,t,n,a,i,r,o,l,u,d){var h,c=u.valueDim,p=u.categoryDim,g=Math.abs(n[p.wh]),f=e.getItemVisual(t,"symbolSize");(h=s.isArray(f)?f.slice():null==f?["100%","100%"]:[f,f])[p.index]=(0,O.GM)(h[p.index],g),h[c.index]=(0,O.GM)(h[c.index],a?g:Math.abs(r)),d.symbolSize=h,(d.symbolScale=[h[0]/l,h[1]/l])[c.index]*=(u.isHorizontal?-1:1)*o}(e,t,i,r,0,c.boundingLength,c.pxSign,d,a,c),function(e,t,n,a,i){var r=e.get(zo)||0;r&&(Bo.attr({scaleX:t[0],scaleY:t[1],rotation:n}),Bo.updateTransform(),r/=Bo.getLineScale(),r*=t[a.valueDim.index]),i.valueLineWidth=r}(n,c.symbolScale,u,a,c);var p=c.symbolSize,g=n.get("symbolOffset");return s.isArray(g)&&(g=[(0,O.GM)(g[0],p[0]),(0,O.GM)(g[1],p[1])]),function(e,t,n,a,i,r,o,l,u,d,h,c){var p=h.categoryDim,g=h.valueDim,f=c.pxSign,y=Math.max(t[g.index]+l,0),m=y;if(a){var v=Math.abs(u),x=s.retrieve(e.get("symbolMargin"),"15%")+"",_=!1;x.lastIndexOf("!")===x.length-1&&(_=!0,x=x.slice(0,x.length-1));var b=(0,O.GM)(x,t[g.index]),S=Math.max(y+2*b,0),w=_?0:2*b,I=(0,O.kE)(a),M=I?a:is((v+w)/S);S=y+2*(b=(v-M*y)/2/(_?M:M-1)),w=_?0:2*b,I||"fixed"===a||(M=d?is((Math.abs(d)+w)/S):0),m=M*S-w,c.repeatTimes=M,c.symbolMargin=b}var D=f*(m/2),L=c.pathPosition=[];L[p.index]=n[p.wh]/2,L[g.index]="start"===o?D:"end"===o?u-D:u/2,r&&(L[0]+=r[0],L[1]+=r[1]);var A=c.bundlePosition=[];A[p.index]=n[p.xy],A[g.index]=n[g.xy];var T=c.barRectShape=s.extend({},n);T[g.wh]=f*Math.max(Math.abs(n[g.wh]),Math.abs(L[g.index]+D)),T[p.wh]=n[p.wh];var C=c.clipShape={};C[p.xy]=-n[p.xy],C[p.wh]=h.ecSize[p.wh],C[g.xy]=0,C[g.wh]=n[g.wh]}(n,p,i,r,0,g,l,c.valueLineWidth,c.boundingLength,c.repeatCutLength,a,c),c}function Wo(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function Ho(e){var t=e.symbolPatternSize,n=(0,at.t)(e.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function Xo(e,t,n,a){var i=e.__pictorialBundle,r=n.symbolSize,o=n.valueLineWidth,s=n.pathPosition,l=t.valueDim,u=n.repeatTimes||0,d=0,h=r[t.valueDim.index]+o+2*n.symbolMargin;for(ts(e,(function(e){e.__pictorialAnimationIndex=d,e.__pictorialRepeatTimes=u,d<u?ns(e,null,g(d),n,a):ns(e,null,{scaleX:0,scaleY:0},n,a,(function(){i.remove(e)})),d++}));d<u;d++){var c=Ho(n);c.__pictorialAnimationIndex=d,c.__pictorialRepeatTimes=u,i.add(c);var p=g(d);ns(c,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},n,a)}function g(e){var t=s.slice(),a=n.pxSign,i=e;return("start"===n.symbolRepeatDirection?a>0:a<0)&&(i=u-1-e),t[l.index]=h*(i-u/2+.5)+s[l.index],{x:t[0],y:t[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function Yo(e,t,n,a){var i=e.__pictorialBundle,r=e.__pictorialMainPath;r?ns(r,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,a):(r=e.__pictorialMainPath=Ho(n),i.add(r),ns(r,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,a))}function Uo(e,t,n){var a=s.extend({},t.barRectShape),i=e.__pictorialBarRect;i?ns(i,null,{shape:a},t,n):(i=e.__pictorialBarRect=new Z.Z({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(i))}function qo(e,t,n,a){if(n.symbolClip){var i=e.__pictorialClipPath,r=s.extend({},n.clipShape),o=t.valueDim,l=n.animationModel,u=n.dataIndex;if(i)x.updateProps(i,{shape:r},l,u);else{r[o.wh]=0,i=new Z.Z({shape:r}),e.__pictorialBundle.setClipPath(i),e.__pictorialClipPath=i;var d={};d[o.wh]=n.clipShape[o.wh],x[a?"updateProps":"initProps"](i,{shape:d},l,u)}}}function jo(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=Qo,n.isAnimationEnabled=Ko,n}function Qo(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function Ko(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Jo(e,t,n,a){var i=new m.Z,r=new m.Z;return i.add(r),i.__pictorialBundle=r,r.x=n.bundlePosition[0],r.y=n.bundlePosition[1],n.symbolRepeat?Xo(i,t,n):Yo(i,0,n),Uo(i,n,a),qo(i,t,n,a),i.__pictorialShapeStr=es(e,n),i.__pictorialSymbolMeta=n,i}function $o(e,t,n,a){var i=a.__pictorialBarRect;i&&i.removeTextContent();var r=[];ts(a,(function(e){r.push(e)})),a.__pictorialMainPath&&r.push(a.__pictorialMainPath),a.__pictorialClipPath&&(n=null),s.each(r,(function(e){x.removeElement(e,{scaleX:0,scaleY:0},n,t,(function(){a.parent&&a.parent.remove(a)}))})),e.setItemGraphicEl(t,null)}function es(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function ts(e,t,n){s.each(e.__pictorialBundle.children(),(function(a){a!==e.__pictorialBarRect&&t.call(n,a)}))}function ns(e,t,n,a,i,r){t&&e.attr(t),a.symbolClip&&!i?n&&e.attr(n):n&&x[i?"updateProps":"initProps"](e,n,a.animationModel,a.dataIndex,r)}function as(e,t,n){var a=n.dataIndex,i=n.itemModel,r=i.getModel("emphasis"),o=r.getModel("itemStyle").getItemStyle(),l=i.getModel(["blur","itemStyle"]).getItemStyle(),u=i.getModel(["select","itemStyle"]).getItemStyle(),d=i.getShallow("cursor"),h=r.get("focus"),c=r.get("blurScope"),p=r.get("scale");ts(e,(function(e){if(e instanceof yt.ZP){var t=e.style;e.useStyle(s.extend({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},n.style))}else e.useStyle(n.style);var a=e.ensureState("emphasis");a.style=o,p&&(a.scaleX=1.1*e.scaleX,a.scaleY=1.1*e.scaleY),e.ensureState("blur").style=l,e.ensureState("select").style=u,d&&(e.cursor=d),e.z2=n.z2}));var g=t.valueDim.posDesc[+(n.boundingLength>0)],f=e.__pictorialBarRect;(0,B.ni)(f,(0,B.k3)(i),{labelFetcher:t.seriesModel,labelDataIndex:a,defaultText:(0,F.H)(t.seriesModel.getData(),a),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:g}),(0,G.vF)(e,h,c)}function is(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}const rs=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=this.group,i=e.getData(),r=this._data,o=e.coordinateSystem,s=o.getBaseAxis().isHorizontal(),l=o.master.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:o,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:Go[+s],categoryDim:Go[1-+s]};return i.diff(r).add((function(e){if(i.hasValue(e)){var t=jo(i,e),n=Fo(i,e,t,u),r=Jo(i,u,n);i.setItemGraphicEl(e,r),a.add(r),as(r,u,n)}})).update((function(e,t){var n=r.getItemGraphicEl(t);if(i.hasValue(e)){var o=jo(i,e),s=Fo(i,e,o,u),l=es(i,s);n&&l!==n.__pictorialShapeStr&&(a.remove(n),i.setItemGraphicEl(e,null),n=null),n?function(e,t,n){var a=n.animationModel,i=n.dataIndex,r=e.__pictorialBundle;x.updateProps(r,{x:n.bundlePosition[0],y:n.bundlePosition[1]},a,i),n.symbolRepeat?Xo(e,t,n,!0):Yo(e,0,n,!0),Uo(e,n,!0),qo(e,t,n,!0)}(n,u,s):n=Jo(i,u,s,!0),i.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=s,a.add(n),as(n,u,s)}else a.remove(n)})).remove((function(e){var t=r.getItemGraphicEl(e);t&&$o(r,e,t.__pictorialSymbolMeta.animationModel,t)})).execute(),this._data=i,this.group},t.prototype.remove=function(e,t){var n=this.group,a=this._data;e.get("animation")?a&&a.eachItemGraphicEl((function(t){$o(a,(0,W.A)(t).dataIndex,e,t)})):n.removeAll()},t.type="pictorialBar",t}(N.Z),os=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(t){return t.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=(0,le.ZL)(se.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(se);function ss(e){e.registerChartView(rs),e.registerSeriesModel(os),e.registerLayout((0,s.curry)(re.bK,"pictorialBar"))}var ls=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._layers=[],n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n){var a=e.getData(),i=this,r=this.group,o=e.getLayerSeries(),l=a.getLayout("layoutInfo"),u=l.rect,d=l.boundaryGap;function h(e){return e.name}r.x=0,r.y=u.y+d[0];var c=new En.Z(this._layersSeries||[],o,h,h),p=[];function g(t,n,s){var l=i._layers;if("remove"!==t){for(var u,d,h=[],c=[],g=o[n].indices,f=0;f<g.length;f++){var y=a.getItemLayout(g[f]),v=y.x,_=y.y0,b=y.y;h.push(v,_),c.push(v,_+b),u=a.getItemVisual(g[f],"style")}var S=a.getItemLayout(g[0]),w=e.getModel("label").get("margin"),I=e.getModel("emphasis");if("add"===t){var M=p[n]=new m.Z;d=new P({shape:{points:h,stackedOnPoints:c,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),M.add(d),r.add(M),e.isAnimationEnabled()&&d.setClipPath(function(e,t,n){var a=new Z.Z({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return x.initProps(a,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,(function(){d.removeClipPath()})),a}(d.getBoundingRect(),e))}else M=l[s],d=M.childAt(0),r.add(M),p[n]=M,x.updateProps(d,{shape:{points:h,stackedOnPoints:c}},e);(0,B.ni)(d,(0,B.k3)(e),{labelDataIndex:g[f-1],defaultText:a.getName(g[f-1]),inheritColor:u.fill},{normal:{verticalAlign:"middle"}}),d.setTextConfig({position:null,local:!0});var D=d.getTextContent();D&&(D.x=S.x-w,D.y=S.y0+S.y/2),d.useStyle(u),a.setItemGraphicEl(n,d),(0,G.WO)(d,e),(0,G.vF)(d,I.get("focus"),I.get("blurScope"))}else r.remove(l[n])}c.add((0,s.bind)(g,this,"add")).update((0,s.bind)(g,this,"update")).remove((0,s.bind)(g,this,"remove")).execute(),this._layersSeries=o,this._layers=p},t.type="themeRiver",t}(N.Z);const us=ls,ds=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.useColorPaletteOnData=!0,n}return(0,a.ZT)(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Je(s.bind(this.getData,this),s.bind(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,n={},a=(0,_.pv)(e,(function(e){return n.hasOwnProperty(e[0]+"")||(n[e[0]+""]=-1),e[2]})),i=[];a.buckets.each((function(e,t){i.push({name:t,dataList:e})}));for(var r=i.length,o=0;o<r;++o){for(var s=i[o].name,l=0;l<i[o].dataList.length;++l){var u=i[o].dataList[l][0]+"";n[u]=o}for(var u in n)n.hasOwnProperty(u)&&n[u]!==o&&(n[u]=o,e[t]=[u,0,s],t++)}return e},t.prototype.getInitialData=function(e,t){for(var n=this.getReferringComponents("singleAxis",_.C6).models[0].get("type"),a=s.filter(e.data,(function(e){return void 0!==e[2]})),i=this.fixData(a||[]),r=[],o=this.nameMap=s.createHashMap(),l=0,u=0;u<i.length;++u)r.push(i[u][2]),o.get(i[u][2])||(o.set(i[u][2],l),l++);var d=(0,qe.Z)(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,yr.T)(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),h=new je.Z(d,this);return h.initData(i),h},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),n=[],a=0;a<t;++a)n[a]=a;var i=e.mapDimension("single"),r=(0,_.pv)(n,(function(t){return e.get("name",t)})),o=[];return r.buckets.each((function(t,n){t.sort((function(t,n){return e.get(i,t)-e.get(i,n)})),o.push({name:n,indices:t})})),o},t.prototype.getAxisTooltipData=function(e,t,n){s.isArray(e)||(e=e?[e]:[]);for(var a,i=this.getData(),r=this.getLayerSeries(),o=[],l=r.length,u=0;u<l;++u){for(var d=Number.MAX_VALUE,h=-1,c=r[u].indices.length,p=0;p<c;++p){var g=i.get(e[0],r[u].indices[p]),f=Math.abs(g-t);f<=d&&(a=g,d=f,h=r[u].indices[p])}o.push(h)}return{dataIndices:o,nestestValue:a}},t.prototype.formatTooltip=function(e,t,n){var a=this.getData(),i=a.getName(e),r=a.get(a.mapDimension("value"),e);return(0,vt.TX)("nameValue",{name:i,value:r})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(r.Z);function hs(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),n=e.coordinateSystem,a={},i=n.getRect();a.rect=i;var r=e.get("boundaryGap"),o=n.getAxis();a.boundaryGap=r,"horizontal"===o.orient?(r[0]=O.GM(r[0],i.height),r[1]=O.GM(r[1],i.height),cs(t,e,i.height-r[0]-r[1])):(r[0]=O.GM(r[0],i.width),r[1]=O.GM(r[1],i.width),cs(t,e,i.width-r[0]-r[1])),t.setLayout("layoutInfo",a)}))}function cs(e,t,n){if(e.count())for(var a,i=t.coordinateSystem,r=t.getLayerSeries(),o=e.mapDimension("single"),l=e.mapDimension("value"),u=s.map(r,(function(t){return s.map(t.indices,(function(t){var n=i.dataToPoint(e.get(o,t));return n[1]=e.get(l,t),n}))})),d=function(e){for(var t=e.length,n=e[0].length,a=[],i=[],r=0,o=0;o<n;++o){for(var s=0,l=0;l<t;++l)s+=e[l][o][1];s>r&&(r=s),a.push(s)}for(var u=0;u<n;++u)i[u]=(r-a[u])/2;r=0;for(var d=0;d<n;++d){var h=a[d]+i[d];h>r&&(r=h)}return{y0:i,max:r}}(u),h=d.y0,c=n/d.max,p=r.length,g=r[0].indices.length,f=0;f<g;++f){a=h[f]*c,e.setItemLayout(r[0].indices[f],{layerIndex:0,x:u[0][f][0],y0:a,y:u[0][f][1]*c});for(var y=1;y<p;++y)a+=u[y-1][f][1]*c,e.setItemLayout(r[y].indices[f],{layerIndex:y,x:u[y][f][0],y0:a,y:u[y][f][1]*c})}}function ps(e){e.registerChartView(us),e.registerSeriesModel(ds),e.registerLayout(hs),e.registerProcessor(Re("themeRiver"))}var gs=n(9361),fs=function(e){function t(t,n,a,i){var r=e.call(this)||this;r.z2=2,r.textConfig={inside:!0},(0,W.A)(r).seriesIndex=n.seriesIndex;var o=new v.ZP({z2:4,silent:t.getModel().get(["label","silent"])});return r.setTextContent(o),r.updateData(!0,t,n,a,i),r}return(0,a.ZT)(t,e),t.prototype.updateData=function(e,t,n,a,i){this.node=t,t.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var r=this;(0,W.A)(r).dataIndex=t.dataIndex;var o=t.getModel(),l=o.getModel("emphasis"),u=t.getLayout(),d=s.extend({},u);d.label=null;var h=t.getVisual("style");h.lineJoin="bevel";var c=t.getVisual("decal");c&&(h.decal=(0,gs.I)(c,i));var p=Xe(o.getModel("itemStyle"),d);s.extend(d,p),s.each(G.L1,(function(e){var t=r.ensureState(e),n=o.getModel([e,"itemStyle"]);t.style=n.getItemStyle();var a=Xe(n,d);a&&(t.shape=a)})),e?(r.setShape(d),r.shape.r=u.r0,x.updateProps(r,{shape:{r:u.r}},n,t.dataIndex)):x.updateProps(r,{shape:d},n),r.useStyle(h),this._updateLabel(n);var g=o.getShallow("cursor");g&&r.attr("cursor",g),this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel;var f=l.get("focus"),y="ancestor"===f?t.getAncestorsIndices():"descendant"===f?t.getDescendantIndices():null;(0,G.vF)(this,y||f,l.get("blurScope"))},t.prototype._updateLabel=function(e){var t=this,n=this.node.getModel(),a=n.getModel("label"),i=this.node.getLayout(),r=i.endAngle-i.startAngle,o=(i.startAngle+i.endAngle)/2,l=Math.cos(o),u=Math.sin(o),d=this,h=d.getTextContent(),c=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,g=a.get("show")&&!(null!=p&&Math.abs(r)<p);function f(e,t){var n=e.get(t);return null==n?a.get(t):n}h.ignore=!g,s.each(G.qc,(function(a){var r="normal"===a?n.getModel("label"):n.getModel([a,"label"]),s="normal"===a,p=s?h:h.ensureState(a),g=e.getFormattedLabel(c,a);s&&(g=g||t.node.name),p.style=(0,B.Lr)(r,{},null,"normal"!==a,!0),g&&(p.style.text=g);var y=r.get("show");null==y||s||(p.ignore=!y);var m,v=f(r,"position"),x=s?d:d.states[a],_=x.style.fill;x.textConfig={outsideFill:"inherit"===r.get("color")?_:null,inside:"outside"!==v};var b=f(r,"distance")||0,S=f(r,"align");"outside"===v?(m=i.r+b,S=o>Math.PI/2?"right":"left"):S&&"center"!==S?"left"===S?(m=i.r0+b,o>Math.PI/2&&(S="right")):"right"===S&&(m=i.r-b,o>Math.PI/2&&(S="left")):(m=(i.r+i.r0)/2,S="center"),p.style.align=S,p.style.verticalAlign=f(r,"verticalAlign")||"middle",p.x=m*l+i.cx,p.y=m*u+i.cy;var w=f(r,"rotate"),I=0;"radial"===w?(I=-o)<-Math.PI/2&&(I+=Math.PI):"tangential"===w?(I=Math.PI/2-o)>Math.PI/2?I-=Math.PI:I<-Math.PI/2&&(I+=Math.PI):"number"==typeof w&&(I=w*Math.PI/180),p.rotation=I})),h.dirtyStyle()},t}(E.Z);const ys=fs;var ms="sunburstRootToNode",vs="sunburstHighlight",xs="sunburstUnhighlight",_s=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n,a){var i=this;this.seriesModel=e,this.api=n,this.ecModel=t;var r=e.getData(),o=r.tree.root,l=e.getViewRoot(),u=this.group,d=e.get("renderLabelForZeroData"),h=[];l.eachNode((function(e){h.push(e)}));var c=this._oldChildren||[];!function(a,i){function l(e){return e.getId()}function h(s,l){!function(a,i){if(d||!a||a.getValue()||(a=null),a!==o&&i!==o)if(i&&i.piece)a?(i.piece.updateData(!1,a,e,t,n),r.setItemGraphicEl(a.dataIndex,i.piece)):(l=i)&&l.piece&&(u.remove(l.piece),l.piece=null);else if(a){var s=new ys(a,e,t,n);u.add(s),r.setItemGraphicEl(a.dataIndex,s)}var l}(null==s?null:a[s],null==l?null:i[l])}0===a.length&&0===i.length||new En.Z(i,a,l,l).add(h).update(h).remove(s.curry(h,null)).execute()}(h,c),function(a,r){r.depth>0?(i.virtualPiece?i.virtualPiece.updateData(!1,a,e,t,n):(i.virtualPiece=new ys(a,e,t,n),u.add(i.virtualPiece)),r.piece.off("click"),i.virtualPiece.on("click",(function(e){i._rootToNode(r.parentNode)}))):i.virtualPiece&&(u.remove(i.virtualPiece),i.virtualPiece=null)}(o,l),this._initEvents(),this._oldChildren=h},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var n=!1;e.seriesModel.getViewRoot().eachNode((function(a){if(!n&&a.piece&&a.piece===t.target){var i=a.getModel().get("nodeClick");if("rootToNode"===i)e._rootToNode(a);else if("link"===i){var r=a.getModel(),o=r.get("link");if(o){var s=r.get("target",!0)||"_blank";(0,H.MI)(o,s)}}n=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ms,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var a=e[0]-n.cx,i=e[1]-n.cy,r=Math.sqrt(a*a+i*i);return r<=n.r&&r>=n.r0}},t.type="sunburst",t}(N.Z);const bs=_s;var Ss=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreStyleOnData=!0,n}return(0,a.ZT)(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};ws(n);var a=s.map(e.levels||[],(function(e){return new fn.Z(e,this,t)}),this),i=gn.createTree(n,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var n=i.getNodeByDataIndex(t),r=a[n.depth];return r&&(e.parentModel=r),e}))}));return i.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treePathInfo=Dn(a,this),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Cn(this)},t.type="series.sunburst",t.defaultOption={zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],levels:[],sort:"desc"},t}(r.Z);function ws(e){var t=0;s.each(e.children,(function(e){ws(e);var n=e.value;s.isArray(n)&&(n=n[0]),t+=n}));var n=e.value;s.isArray(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=t),n<0&&(n=0),s.isArray(e.value)?e.value[0]=n:e.value=n}const Is=Ss;var Ms=Math.PI/180;function Ds(e,t,n){t.eachSeriesByType(e,(function(e){var t=e.get("center"),a=e.get("radius");s.isArray(a)||(a=[0,a]),s.isArray(t)||(t=[t,t]);var i=n.getWidth(),r=n.getHeight(),o=Math.min(i,r),l=(0,O.GM)(t[0],i),u=(0,O.GM)(t[1],r),d=(0,O.GM)(a[0],o/2),h=(0,O.GM)(a[1],o/2),c=-e.get("startAngle")*Ms,p=e.get("minAngle")*Ms,g=e.getData().tree.root,f=e.getViewRoot(),y=f.depth,m=e.get("sort");null!=m&&Ls(f,m);var v=0;s.each(f.children,(function(e){!isNaN(e.getValue())&&v++}));var x=f.getValue(),_=Math.PI/(x||v)*2,b=f.depth>0,S=f.height-(b?-1:1),w=(h-d)/(S||1),I=e.get("clockwise"),M=e.get("stillShowZeroSum"),D=I?1:-1,L=function(e,t){if(e){var n=t;if(e!==g){var a=e.getValue(),i=0===x&&M?_:a*_;i<p&&(i=p),n=t+D*i;var r=e.depth-y-(b?-1:1),h=d+w*r,c=d+w*(r+1),f=e.getModel();null!=f.get("r0")&&(h=(0,O.GM)(f.get("r0"),o/2)),null!=f.get("r")&&(c=(0,O.GM)(f.get("r"),o/2)),e.setLayout({angle:i,startAngle:t,endAngle:n,clockwise:I,cx:l,cy:u,r0:h,r:c})}if(e.children&&e.children.length){var m=0;s.each(e.children,(function(e){m+=L(e,t+m)}))}return n-t}};if(b){var A=d,T=d+w,C=2*Math.PI;g.setLayout({angle:C,startAngle:c,endAngle:c+C,clockwise:I,cx:l,cy:u,r0:A,r:T})}L(f,c)}))}function Ls(e,t){var n=e.children||[];e.children=function(e,t){if("function"==typeof t){var n=s.map(e,(function(e,t){var n=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return n}},index:t}}));return n.sort((function(e,n){return t(e.params,n.params)})),s.map(n,(function(t){return e[t.index]}))}var a="asc"===t;return e.sort((function(e,t){var n=(e.getValue()-t.getValue())*(a?1:-1);return 0===n?(e.dataIndex-t.dataIndex)*(a?-1:1):n}))}(n,t),n.length&&s.each(e.children,(function(e){Ls(e,t)}))}function As(e){var t={};e.eachSeriesByType("sunburst",(function(e){var n=e.getData(),a=n.tree;a.eachNode((function(i){var r=i.getModel().getModel("itemStyle").getItemStyle();r.fill||(r.fill=function(e,n,a){for(var i=e;i&&i.depth>1;)i=i.parentNode;var r=n.getColorFromPalette(i.name||i.dataIndex+"",t);return e.depth>1&&"string"==typeof r&&(r=(0,ta.lift)(r,(e.depth-1)/(a-1)*.5)),r}(i,e,a.root.height));var o=n.ensureUniqueItemVisual(i.dataIndex,"style");(0,s.extend)(o,r)}))}))}function Ts(e){e.registerChartView(bs),e.registerSeriesModel(Is),e.registerLayout((0,s.curry)(Ds,"sunburst")),e.registerProcessor((0,s.curry)(Re,"sunburst")),e.registerVisual(As),function(e){e.registerAction({type:ms,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,n){var a=wn(e,[ms],t);if(a){var i=t.getViewRoot();i&&(e.direction=Mn(i,a.node)?"rollUp":"drillDown"),t.resetViewRoot(a.node)}}))})),e.registerAction({type:vs,update:"none"},(function(e,t,n){e=(0,s.extend)({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t){var n=wn(e,[vs],t);n&&(e.dataIndex=n.node.dataIndex)})),n.dispatchAction((0,s.extend)(e,{type:"highlight"}))})),e.registerAction({type:xs,update:"updateView"},(function(e,t,n){e=(0,s.extend)({},e),n.dispatchAction((0,s.extend)(e,{type:"downplay"}))}))}(e)}function Cs(e,t){return t=t||[0,0],s.map(["x","y"],(function(n,a){var i=this.getAxis(n),r=t[a],o=e[a]/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(r-o)-i.dataToCoord(r+o))}),this)}function Ps(e,t){return t=t||[0,0],s.map([0,1],(function(n){var a=t[n],i=e[n]/2,r=[],o=[];return r[n]=a-i,o[n]=a+i,r[1-n]=o[1-n]=t[1-n],Math.abs(this.dataToPoint(r)[n]-this.dataToPoint(o)[n])}),this)}function Ns(e,t){var n=this.getAxis(),a=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(a-i)-n.dataToCoord(a+i))}function Zs(e,t){return t=t||[0,0],s.map(["Radius","Angle"],(function(n,a){var i=this["get"+n+"Axis"](),r=t[a],o=e[a]/2,s="category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(r-o)-i.dataToCoord(r+o));return"Angle"===n&&(s=s*Math.PI/180),s}),this)}var Es=n(5248),Os=n(7411),Rs=n(5622),ks=S.Z.CMD,Vs=2*Math.PI,zs=["x","y"],Gs=["width","height"],Bs=[];function Fs(e,t){return Math.abs(e-t)<1e-5}function Ws(e){var t,n,a,i,r,o=e.data,s=e.len(),l=[],u=0,d=0,h=0,c=0;function p(e,n){t&&t.length>2&&l.push(t),t=[e,n]}function g(e,n,a,i){Fs(e,a)&&Fs(n,i)||t.push(e,n,a,i,a,i)}function f(e,n,a,i,r,o){var s=Math.abs(n-e),l=4*Math.tan(s/4)/3,u=n<e?-1:1,d=Math.cos(e),h=Math.sin(e),c=Math.cos(n),p=Math.sin(n),g=d*r+a,f=h*o+i,y=c*r+a,m=p*o+i,v=r*l*u,x=o*l*u;t.push(g-v*h,f+x*d,y+v*p,m-x*c,y,m)}for(var y=0;y<s;){var m=o[y++],v=1===y;switch(v&&(h=u=o[y],c=d=o[y+1],m!==ks.L&&m!==ks.C&&m!==ks.Q||(t=[h,c])),m){case ks.M:u=h=o[y++],d=c=o[y++],p(h,c);break;case ks.L:g(u,d,n=o[y++],a=o[y++]),u=n,d=a;break;case ks.C:t.push(o[y++],o[y++],o[y++],o[y++],u=o[y++],d=o[y++]);break;case ks.Q:n=o[y++],a=o[y++],i=o[y++],r=o[y++],t.push(u+2/3*(n-u),d+2/3*(a-d),i+2/3*(n-i),r+2/3*(a-r),i,r),u=i,d=r;break;case ks.A:var x=o[y++],_=o[y++],b=o[y++],S=o[y++],w=o[y++],I=o[y++]+w;y+=1;var M=!o[y++];n=Math.cos(w)*b+x,a=Math.sin(w)*S+_,v?p(h=n,c=a):g(u,d,n,a),u=Math.cos(I)*b+x,d=Math.sin(I)*S+_;for(var D=(M?-1:1)*Math.PI/2,L=w;M?L>I:L<I;L+=D)f(L,M?Math.max(L+D,I):Math.min(L+D,I),x,_,b,S);break;case ks.R:h=u=o[y++],c=d=o[y++],n=h+o[y++],a=c+o[y++],p(n,c),g(n,c,n,a),g(n,a,h,a),g(h,a,h,c),g(h,c,n,c);break;case ks.Z:t&&g(u,d,h,c),u=h,d=c}}return t&&t.length>2&&l.push(t),l}function Hs(e,t){var n=e.length,a=t.length;if(n===a)return[e,t];for(var i=n<a?e:t,r=Math.min(n,a),o=Math.abs(a-n)/6,s=(r-2)/6,l=Math.ceil(o/s)+1,u=[i[0],i[1]],d=o,h=[],c=[],p=2;p<r;){var g=i[p-2],f=i[p-1],y=i[p++],m=i[p++],v=i[p++],x=i[p++],_=i[p++],b=i[p++];if(d<=0)u.push(y,m,v,x,_,b);else{for(var S=Math.min(d,l-1)+1,I=1;I<=S;I++){var M=I/S;(0,w.Vz)(g,y,v,_,M,h),(0,w.Vz)(f,m,x,b,M,c),g=h[3],f=c[3],u.push(h[1],c[1],h[2],c[2],g,f),y=h[5],m=c[5],v=h[6],x=c[6]}d-=S-1}}return i===e?[u,t]:[e,u]}function Xs(e,t){for(var n=e.length,a=e[n-2],i=e[n-1],r=[],o=0;o<t.length;)r[o++]=a,r[o++]=i;return r}function Ys(e){for(var t=0,n=0,a=0,i=e.length,r=0,o=i-2;r<i;o=r,r+=2){var s=e[o],l=e[o+1],u=e[r],d=e[r+1],h=s*d-u*l;t+=h,n+=(s+u)*h,a+=(l+d)*h}return 0===t?[e[0]||0,e[1]||0]:[n/t/3,a/t/3,t]}function Us(e,t,n,a){for(var i=(e.length-2)/6,r=1/0,o=0,s=e.length,l=s-2,u=0;u<i;u++){for(var d=6*u,h=0,c=0;c<s;c+=2){var p=0===c?d:(d+c-2)%l+2,g=e[p]-n[0],f=e[p+1]-n[1],y=t[c]-a[0]-g,m=t[c+1]-a[1]-f;h+=y*y+m*m}h<r&&(r=h,o=u)}return o}function qs(e){for(var t=[],n=e.length,a=0;a<n;a+=2)t[a]=e[n-a-2],t[a+1]=e[n-a-1];return t}function js(e,t,n){var a,i;if(!e||!t)return t;!e.path&&e.createPathProxy(),(a=e.path).beginPath(),e.buildPath(a,e.shape),!t.path&&t.createPathProxy(),(i=t.path)===a&&(i=new S.Z(!1)),i.beginPath(),Js(t)?t.__oldBuildPath(i,t.shape):t.buildPath(i,t.shape);var r=function(e,t){for(var n,a,i,r=[],o=[],s=0;s<Math.max(e.length,t.length);s++){var l=e[s],u=t[s],d=void 0,h=void 0;l?u?(a=d=(n=Hs(l,u))[0],i=h=n[1]):(h=Xs(i||l,l),d=l):(d=Xs(a||u,u),h=u),r.push(d),o.push(h)}return[r,o]}(Ws(a),Ws(i)),o=function(e,t,n,a){for(var i,r=[],o=0;o<e.length;o++){var s=e[o],l=t[o],u=Ys(s),d=Ys(l);null==i&&(i=u[2]<0!=d[2]<0);var h=[],c=[],p=0,g=1/0,f=[],y=s.length;i&&(s=qs(s));for(var m=6*Us(s,l,u,d),v=y-2,x=0;x<v;x+=2){var _=(m+x)%v+2;h[x+2]=s[_]-u[0],h[x+3]=s[_+1]-u[1]}h[0]=s[m]-u[0],h[1]=s[m+1]-u[1];for(var b=a/10,S=-a/2;S<=a/2;S+=b){var w=Math.sin(S),I=Math.cos(S),M=0;for(x=0;x<s.length;x+=2){var D=h[x],L=h[x+1],A=l[x]-d[0],T=l[x+1]-d[1],C=A*I-T*w,P=A*w+T*I;f[x]=C,f[x+1]=P;var N=C-D,Z=P-L;M+=N*N+Z*Z}if(M<g){g=M,p=S;for(var E=0;E<f.length;E++)c[E]=f[E]}}r.push({from:h,to:c,fromCp:u,toCp:d,rotation:-p})}return r}(r[0],r[1],0,Math.PI);!function(e,t,n){if(Js(e))Ks(e,t,0);else{var a=e;a.__oldBuildPath=a.buildPath,a.buildPath=Qs,Ks(a,t,0)}}(t,o);var l=n&&n.done,u=n&&n.aborted,d=n&&n.during;return t.animateTo({__morphT:1},(0,s.defaults)({during:function(e){t.dirtyShape(),d&&d(e)},done:function(){var e;Js(e=t)&&(e.buildPath=e.__oldBuildPath,e.__oldBuildPath=e.__morphingData=null),t.createPathProxy(),t.dirtyShape(),l&&l()},aborted:function(){u&&u()}},n)),t}function Qs(e){for(var t=this.__morphingData,n=this.__morphT,a=1-n,i=[],r=0;r<t.length;r++){var o=t[r],s=o.from,l=o.to,u=o.rotation*n,d=o.fromCp,h=o.toCp,c=Math.sin(u),p=Math.cos(u);(0,Aa.lerp)(i,d,h,n);for(var g=0;g<s.length;g+=2){var f=s[g],y=s[g+1],m=f*a+l[g]*n,v=y*a+l[g+1]*n;Bs[g]=m*p-v*c+i[0],Bs[g+1]=m*c+v*p+i[1]}for(g=0;g<s.length;)0===g&&e.moveTo(Bs[g++],Bs[g++]),e.bezierCurveTo(Bs[g++],Bs[g++],Bs[g++],Bs[g++],Bs[g++],Bs[g++])}}function Ks(e,t,n){e.__morphingData=t,e.__morphT=n}function Js(e){return null!=e.__oldBuildPath}function $s(e){return!!e.__combiningSubList}function el(e,t,n,a){for(var i=[],r=0,o=0;o<e.length;o++){var l=e[o];if($s(l)){for(var u=l.__combiningSubList,d=0;d<u.length;d++)i.push(u[d]);r+=u.length}else i.push(l),r++}if(r){var h=n?n.dividingMethod:null,c=ol(t,r,h);(0,s.assert)(c.length===r);var p=n&&n.done,g=n&&n.aborted,f=n&&n.during,y=0,m=!1,v=(0,s.defaults)({during:function(e){f&&f(e)},done:function(){++y===c.length&&(function(e){if($s(e)){var t=e;tl(t,null),t.addSelfToZr=t.__oldAddSelfToZr,t.removeSelfFromZr=t.__oldRemoveSelfFromZr,t.buildPath=t.__oldBuildPath,t.childrenRef=t.__combiningSubList=t.__oldAddSelfToZr=t.__oldRemoveSelfFromZr=t.__oldBuildPath=null}}(t),p&&p())},aborted:function(){m||(m=!0,g&&g())}},n);for(o=0;o<r;o++){var x=i[o],_=c[o];a&&a(t,_,!0),js(x,_,v)}return function(e,t){if($s(e))tl(e,t);else{var n=e;tl(n,t),n.__oldAddSelfToZr=e.addSelfToZr,n.__oldRemoveSelfFromZr=e.removeSelfFromZr,n.addSelfToZr=nl,n.removeSelfFromZr=il,n.__oldBuildPath=n.buildPath,n.buildPath=s.noop,n.childrenRef=rl}}(t,c),{fromIndividuals:i,toIndividuals:c,count:r}}}function tl(e,t){if(e.__combiningSubList!==t){if(al(e,"removeSelfFromZr"),e.__combiningSubList=t,t)for(var n=0;n<t.length;n++)t[n].parent=e;al(e,"addSelfToZr")}}function nl(e){this.__oldAddSelfToZr(e),al(this,"addSelfToZr")}function al(e,t){var n=e.__combiningSubList,a=e.__zr;if(n&&a)for(var i=0;i<n.length;i++)n[i][t](a)}function il(e){this.__oldRemoveSelfFromZr(e);for(var t=this.__combiningSubList,n=0;n<t.length;n++)t[n].removeSelfFromZr(e)}function rl(){return this.__combiningSubList}function ol(e,t,n){return"duplicate"===n?sl(e,t):function(e,t){var n=[];if(t<=0)return n;if(1===t)return sl(e,t);if(e instanceof Z.Z)for(var a=(h=e.shape).height>h.width?1:0,i=Gs[a],r=zs[a],o=h[i]/t,s=h[r],l=0;l<t;l++,s+=o){var u={x:h.x,y:h.y,width:h.width,height:h.height};u[r]=s,u[i]=l<t-1?o:h[r]+h[i]-s;var d=new Z.Z({shape:u});n.push(d)}else{if(!(e instanceof E.Z))return sl(e,t);var h,c=(h=e.shape).clockwise,p=h.startAngle,g=h.endAngle,f=function(e,t,n){return t+Vs*Math[n?"ceil":"floor"]((e-t)/Vs)}(p,h.endAngle,c),y=(f-p)/t,m=p;for(l=0;l<t;l++,m+=y)d=new E.Z({shape:{cx:h.cx,cy:h.cy,r:h.r,r0:h.r0,clockwise:c,startAngle:m,endAngle:l===t-1?g:m+y}}),n.push(d)}return n}(e,t)}function sl(e,t){var n=[];if(t<=0)return n;for(var a=e.constructor,i=0;i<t;i++){var r=new a({shape:(0,s.clone)(e.shape)});n.push(r)}return n}var ll=(0,_.Yf)(),ul=((0,s.keys)({x:1,y:1,scaleX:1,scaleY:1,originX:1,originY:1,rotation:1}).join(", "),{color:"fill",borderColor:"stroke"}),dl={symbol:1,symbolSize:1,symbolKeepAspect:1,legendSymbol:1,visualMeta:1,liftZ:1,decal:1},hl="emphasis",cl="normal",pl="blur",gl="select",fl=[cl,hl,pl,gl],yl={normal:["itemStyle"],emphasis:[hl,"itemStyle"],blur:[pl,"itemStyle"],select:[gl,"itemStyle"]},ml={normal:["label"],emphasis:[hl,"label"],blur:[pl,"label"],select:[gl,"label"]},vl="e\0\0",xl={normal:{},emphasis:{},blur:{},select:{}},_l={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},bl=new Os.Z,Sl={cartesian2d:function(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:s.bind(Cs,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:s.bind(Ps,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:(0,s.bind)(Ns,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),a=t.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:a[1],r0:a[0]},api:{coord:function(a){var i=t.dataToRadius(a[0]),r=n.dataToAngle(a[1]),o=e.coordToPoint([i,r]);return o.push(i,r*Math.PI/180),o},size:s.bind(Zs,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(t,n){return e.dataToPoint(t,n)}}}}},wl=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,t){return(0,i.Z)(this.getSource(),this)},t.prototype.getDataParams=function(t,n,a){var i=e.prototype.getDataParams.call(this,t,n);return a&&(i.info=ll(a).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,clip:!1},t}(r.Z),Il=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return(0,a.ZT)(t,e),t.prototype.render=function(e,t,n,a){var i=this._data,r=e.getData(),o=this.group,s=Hl(e,r,t,n),l=e.__transientTransitionOpt;if(!l||null!=l.from&&null!=l.to){var u=new ru(e,l),d=l?"multiple":"oneToOne";new En.Z(i?i.getIndices():[],r.getIndices(),Ml(i,d,l&&l.from),Ml(r,d,l&&l.to),null,d).add((function(t){Yl(n,null,t,s(t,a),e,o,r,null)})).remove((function(t){tu(i.getItemGraphicEl(t),e,o)})).update((function(t,l){u.reset("oneToOne");var d=i.getItemGraphicEl(l);u.findAndAddFrom(d),u.hasFrom()&&(iu(d,o),d=null),Yl(n,d,t,s(t,a),e,o,r,u),u.applyMorphing()})).updateManyToOne((function(t,l){u.reset("manyToOne");for(var d=0;d<l.length;d++){var h=i.getItemGraphicEl(l[d]);u.findAndAddFrom(h),iu(h,o)}Yl(n,null,t,s(t,a),e,o,r,u),u.applyMorphing()})).updateOneToMany((function(t,l){u.reset("oneToMany");var d=t.length,h=i.getItemGraphicEl(l);u.findAndAddFrom(h),iu(h,o);for(var c=0;c<d;c++)Yl(n,null,t[c],s(t[c],a),e,o,r,u);u.applyMorphing()})).execute()}else i&&i.each((function(t){tu(i.getItemGraphicEl(t),e,o)})),r.each((function(t){Yl(n,null,t,s(t,a),e,o,r,null)}));var h=e.get("clip",!0)?V(e.coordinateSystem,!1,e):null;h?o.setClipPath(h):o.removeClipPath(),this._data=r},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,t,n,a,i){var r=t.getData(),o=Hl(t,r,n,a);function s(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}for(var l=e.start;l<e.end;l++)Yl(null,null,l,o(l,i),t,this.group,r,null).traverse(s)},t.prototype.filterForExposedEvent=function(e,t,n,a){var i=t.element;if(null==i||n.name===i)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===i)return!0;return!1},t.type="custom",t}(N.Z);function Ml(e,t,n){if(e){if("oneToOne"===t)return function(t,n){return e.getId(n)};var a=e.getDimension(n),i=e.getDimensionInfo(a);i||(0,Cr._y)("");var r=i.ordinalMeta;return function(t,n){var i=e.get(a,n);return r&&(i=r.categories[i]),null==i||(0,s.eqNaN)(i)?t+"":"_ec_"+i}}}function Dl(e){var t,n=e.type;if("path"===n){var a=e.shape,i=null!=a.width&&null!=a.height?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,r=nu(a);t=x.makePath(r,null,i,a.layout||"center"),ll(t).customPathData=r}else if("image"===n)t=new yt.ZP({}),ll(t).customImagePath=e.style.image;else if("text"===n)t=new v.ZP({});else if("group"===n)t=new m.Z;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var o=x.getShapeClass(n);o||(0,Cr._y)(""),t=new o}return ll(t).customGraphicType=n,t.name=e.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function Ll(e,t,n,a,i,r,o,l,u,d){var h={},c={},p=t.isGroup?null:t;!n&&Cl("shape",t,null,i,h,u),Pl("shape",i,c),!n&&Cl("extra",t,null,i,h,u),Pl("extra",i,c),!n&&Nl(t,null,i,h,u),function(e,t){Bl(e,t,"position"),Bl(e,t,"scale"),Bl(e,t,"origin"),Fl(e,t,"x"),Fl(e,t,"y"),Fl(e,t,"scaleX"),Fl(e,t,"scaleY"),Fl(e,t,"originX"),Fl(e,t,"originY"),Fl(e,t,"rotation")}(i,c);var g=o&&o.normal.cfg;if(g&&t.setTextConfig(g),"text"===t.type&&r){var f=r;(0,s.hasOwn)(f,"textFill")&&(f.fill=f.textFill),(0,s.hasOwn)(f,"textStroke")&&(f.stroke=f.textStroke)}if(r){var y=void 0,m=au(t)?r.decal:null;e&&m&&(m.dirty=!0,y=(0,gs.I)(m,e)),r.__decalPattern=y}return!n&&Zl(t,null,i,r,h,u),p&&(0,s.hasOwn)(i,"invisible")&&(p.invisible=i.invisible),n||(Al(t,c,r),Tl(t,a,i,l,h,u)),(0,s.hasOwn)(i,"silent")&&(t.silent=i.silent),(0,s.hasOwn)(i,"ignore")&&(t.ignore=i.ignore),d||(0,s.hasOwn)(i,"info")&&(ll(t).info=i.info),r?t.dirty():t.markRedraw(),n?c:null}function Al(e,t,n){var a=e.isGroup?null:e;if(a&&n){var i=n.__decalPattern,r=void 0;i&&(r=n.decal,n.decal=i),a.useStyle(n),i&&(n.decal=r);for(var o=a.animators,s=0;s<o.length;s++){var l=o[s];"style"===l.targetName&&l.changeTarget(a.style)}}t&&e.attr(t)}function Tl(e,t,n,a,i,r){if(i){var o=n.during;ll(e).userDuring=o;var l={dataIndex:t,isFrom:!0,during:o?(0,s.bind)(Vl,{el:e,userDuring:o}):null};r?x.initProps(e,i,a,l):x.updateProps(e,i,a,l)}}function Cl(e,t,n,a,i,r){var o=a[e];if(o){var l,u=t[e],d=o.enterFrom;if(r&&d){!l&&(l=i[e]={});for(var h=(0,s.keys)(d),c=0;c<h.length;c++)l[b=h[c]]=d[b]}if(!r&&u&&(null==n||"shape"!==e))if(o.transition){!l&&(l=i[e]={});var p=(0,_.kF)(o.transition);for(c=0;c<p.length;c++){var g=u[b=p[c]];l[b]=g}}else if((0,s.indexOf)(a.transition,e)>=0){!l&&(l=i[e]={});var f=(0,s.keys)(u);for(c=0;c<f.length;c++)g=u[b=f[c]],El(o[b],g)&&(l[b]=g)}var y=o.leaveTo;if(y){var m=Ol(t),v=m[e]||(m[e]={}),x=(0,s.keys)(y);for(c=0;c<x.length;c++){var b;v[b=x[c]]=y[b]}}}}function Pl(e,t,n){var a=t[e];if(a)for(var i=n[e]={},r=(0,s.keys)(a),o=0;o<r.length;o++){var l=r[o];i[l]=(0,Rs.Ve)(a[l])}}function Nl(e,t,n,a,i){var r=n.enterFrom;if(i&&r)for(var o=(0,s.keys)(r),l=0;l<o.length;l++)a[f=o[l]]=r[f];if(!i)if(t){var u=function(e,t){if(!e||e===t||e.parent===t.parent)return e;var n=bl.transform||(bl.transform=Bn.identity([])),a=e.getComputedTransform();a?Bn.copy(n,a):Bn.identity(n);var i=t.parent;return i&&i.getComputedTransform(),bl.originX=e.originX,bl.originY=e.originY,bl.parent=i,bl.decomposeTransform(),bl}(t,e);Wl(a,"x",u),Wl(a,"y",u),Wl(a,"scaleX",u),Wl(a,"scaleY",u),Wl(a,"originX",u),Wl(a,"originY",u),Wl(a,"rotation",u)}else if(n.transition){var d=(0,_.kF)(n.transition);for(l=0;l<d.length;l++)if("style"!==(f=d[l])&&"shape"!==f&&"extra"!==f){var h=e[f];a[f]=h}}else Wl(a,"x",e),Wl(a,"y",e);var c=n.leaveTo;if(c){var p=Ol(e),g=(0,s.keys)(c);for(l=0;l<g.length;l++){var f;p[f=g[l]]=c[f]}}}function Zl(e,t,n,a,i,r){if(a){var o,l=(t||e).style,u=a.enterFrom;if(r&&u){var d=(0,s.keys)(u);!o&&(o=i.style={});for(var h=0;h<d.length;h++)o[S=d[h]]=u[S]}if(!r&&l)if(a.transition){var c=(0,_.kF)(a.transition);for(!o&&(o=i.style={}),h=0;h<c.length;h++){var p=l[S=c[h]];o[S]=p}}else if(e.getAnimationStyleProps&&(0,s.indexOf)(n.transition,"style")>=0){var g=e.getAnimationStyleProps(),f=g?g.style:null;if(f){!o&&(o=i.style={});var y=(0,s.keys)(a);for(h=0;h<y.length;h++)f[S=y[h]]&&(p=l[S],o[S]=p)}}var m=a.leaveTo;if(m){var v=(0,s.keys)(m),x=Ol(e),b=x.style||(x.style={});for(h=0;h<v.length;h++){var S;b[S=v[h]]=m[S]}}}}function El(e,t){return(0,s.isArrayLike)(e)?e!==t:null!=e&&isFinite(e)}function Ol(e){var t=ll(e);return t.leaveToProps||(t.leaveToProps={})}var Rl={},kl={setTransform:function(e,t){return Rl.el[e]=t,this},getTransform:function(e){return Rl.el[e]},setShape:function(e,t){return(Rl.el.shape||(Rl.el.shape={}))[e]=t,Rl.isShapeDirty=!0,this},getShape:function(e){var t=Rl.el.shape;if(t)return t[e]},setStyle:function(e,t){var n=Rl.el.style;return n&&(n[e]=t,Rl.isStyleDirty=!0),this},getStyle:function(e){var t=Rl.el.style;if(t)return t[e]},setExtra:function(e,t){return(Rl.el.extra||(Rl.el.extra={}))[e]=t,this},getExtra:function(e){var t=Rl.el.extra;if(t)return t[e]}};function Vl(){var e=this,t=e.el;if(t){var n=ll(t).userDuring,a=e.userDuring;n===a?(Rl.el=t,Rl.isShapeDirty=!1,Rl.isStyleDirty=!1,a(kl),Rl.isShapeDirty&&t.dirtyShape&&t.dirtyShape(),Rl.isStyleDirty&&t.dirtyStyle&&t.dirtyStyle()):e.el=e.userDuring=null}}function zl(e,t,n,a,i,r,o){var s=t.isGroup?null:t,l=i&&i[e].cfg;if(s){var u=s.ensureState(e);if(!1===a){var d=s.getState(e);d&&(d.style=null)}else u.style=a||null;l&&(u.textConfig=l),(0,G.MA)(s)}}function Gl(e,t,n){var a=n===cl,i=a?t:Ql(t,n),r=i?i.z2:null;null!=r&&((a?e:e.ensureState(n)).z2=r||0)}function Bl(e,t,n,a){var i=e[n],r=_l[n];i&&(a?(t[r[0]]=a[r[0]],t[r[1]]=a[r[1]]):(t[r[0]]=i[0],t[r[1]]=i[1]))}function Fl(e,t,n,a){null!=e[n]&&(t[n]=a?a[n]:e[n])}function Wl(e,t,n){n&&(e[t]=n[t])}function Hl(e,t,n,a){var i=e.get("renderItem"),r=e.coordinateSystem,o={};r&&(o=r.prepareCustoms?r.prepareCustoms(r):Sl[r.type](r));for(var l,u,d=(0,s.defaults)({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:function(e,n){return null==n&&(n=l),t.get(t.getDimension(e||0),n)},style:function(n,a){null==a&&(a=l);var i=t.getItemVisual(a,"style"),r=i&&i.fill,o=i&&i.opacity,u=x(a,cl).getItemStyle();null!=r&&(u.fill=r),null!=o&&(u.opacity=o);var d={inheritColor:(0,s.isString)(r)?r:"#000"},h=_(a,cl),c=B.Lr(h,null,d,!1,!0);c.text=h.getShallow("show")?(0,s.retrieve2)(e.getFormattedLabel(a,cl),(0,F.H)(t,a)):null;var p=B.nC(h,d,!1);return S(n,u),u=(0,Es.n8)(u,c,p),n&&b(u,n),u.legacy=!0,u},ordinalRawValue:function(e,n){null==n&&(n=l);var a=t.getDimensionInfo(e||0);if(a){var i=t.get(a.name,n),r=a&&a.ordinalMeta;return r?r.categories[i]:i}},styleEmphasis:function(n,a){null==a&&(a=l);var i=x(a,hl).getItemStyle(),r=_(a,hl),o=B.Lr(r,null,null,!0,!0);o.text=r.getShallow("show")?(0,s.retrieve3)(e.getFormattedLabel(a,hl),e.getFormattedLabel(a,cl),(0,F.H)(t,a)):null;var u=B.nC(r,null,!0);return S(n,i),i=(0,Es.n8)(i,o,u),n&&b(i,n),i.legacy=!0,i},visual:function(e,n){if(null==n&&(n=l),(0,s.hasOwn)(ul,e)){var a=t.getItemVisual(n,"style");return a?a[ul[e]]:null}if((0,s.hasOwn)(dl,e))return t.getItemVisual(n,e)},barLayout:function(e){if("cartesian2d"===r.type){var t=r.getBaseAxis();return(0,re.Gk)((0,s.defaults)({axis:t},e))}},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(e){return B.qT(e,n)}},o.api||{}),h={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:Xl(e.getData())},c={},p={},g={},f={},y=0;y<fl.length;y++){var m=fl[y];g[m]=e.getModel(yl[m]),f[m]=e.getModel(ml[m])}function v(e){return e===l?u||(u=t.getItemModel(e)):t.getItemModel(e)}function x(e,n){return t.hasItemOption?e===l?c[n]||(c[n]=v(e).getModel(yl[n])):v(e).getModel(yl[n]):g[n]}function _(e,n){return t.hasItemOption?e===l?p[n]||(p[n]=v(e).getModel(ml[n])):v(e).getModel(ml[n]):f[n]}return function(e,n){return l=e,u=null,c={},p={},i&&i((0,s.defaults)({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:n?n.type:null},h),d)};function b(e,t){for(var n in t)(0,s.hasOwn)(t,n)&&(e[n]=t[n])}function S(e,t){e&&(e.textFill&&(t.textFill=e.textFill),e.textPosition&&(t.textPosition=e.textPosition))}}function Xl(e){var t={};return(0,s.each)(e.dimensions,(function(n,a){var i=e.getDimensionInfo(n);if(!i.isExtraCoord){var r=i.coordDim;(t[r]=t[r]||[])[i.coordDimIndex]=a}})),t}function Yl(e,t,n,a,i,r,o,s){if(a)return(t=Ul(e,t,n,a,i,r,0,s))&&o.setItemGraphicEl(n,t),(0,G.vF)(t,a.focus,a.blurScope),t;iu(t,r)}function Ul(e,t,n,a,i,r,o,s){var l=-1;t&&ql(t,a)&&(l=r.childrenRef().indexOf(t),t=null);var u=!t;t?t.clearStates():t=Dl(a);var d=(ll(t).canMorph=a.morph&&au(t))&&s&&s.hasFrom(),h=u&&!d;xl.normal.cfg=xl.normal.conOpt=xl.emphasis.cfg=xl.emphasis.conOpt=xl.blur.cfg=xl.blur.conOpt=xl.select.cfg=xl.select.conOpt=null,xl.isLegacy=!1,function(e,t,n,a,i,r){if(!e.isGroup){jl(n,null,r),jl(n,hl,r);var o=r.normal.conOpt,s=r.emphasis.conOpt,l=r.blur.conOpt,u=r.select.conOpt;if(null!=o||null!=s||null!=u||null!=l){var d=e.getTextContent();if(!1===o)d&&e.removeTextContent();else{o=r.normal.conOpt=o||{type:"text"},d?d.clearStates():(d=Dl(o),e.setTextContent(d));var h=o&&o.style;Ll(null,d,null,t,o,h,null,a,i,!0);for(var c=0;c<fl.length;c++){var p=fl[c];if(p!==cl)zl(p,d,0,Kl(o,r[p].conOpt,p),null)}h?d.dirty():d.markRedraw()}}}}(t,n,a,i,h,xl),function(e,t,n,a,i){var r=n.clipPath;if(!1===r)e&&e.getClipPath()&&e.removeClipPath();else if(r){var o=e.getClipPath();o&&ql(o,r)&&(o=null),o||(o=Dl(r),e.setClipPath(o)),Ll(null,o,null,t,r,null,null,a,i,!1)}}(t,n,a,i,h);var c=Ll(e,t,d,n,a,a.style,xl,i,h,!1);d&&s.addTo(t,a,n,c);for(var p=0;p<fl.length;p++){var g=fl[p];if(g!==cl)zl(g,t,0,Kl(a,Ql(a,g),g),xl)}return function(e,t,n,a){if(!e.isGroup){var i=e,r=n.currentZ,o=n.currentZLevel;i.z=r,i.zlevel=o;var s=t.z2;null!=s&&(i.z2=s||0);for(var l=0;l<fl.length;l++)Gl(i,t,fl[l])}}(t,a,i),"group"===a.type&&function(e,t,n,a,i,r){var o=a.children,s=o?o.length:0,l=a.$mergeChildren,u="byName"===l||a.diffChildrenByName,d=!1===l;if(s||u||d){if(u)return h={api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:n,seriesModel:i,group:t,morphPreparation:r},void new En.Z(h.oldChildren,h.newChildren,Jl,Jl,h).add($l).update($l).remove(eu).execute();var h;d&&t.removeAll();for(var c=0;c<s;c++)o[c]&&Ul(e,t.childAt(c),n,o[c],i,t,0,r);for(var p=t.childCount()-1;p>=c;p--)tu(t.childAt(p),i,t)}}(e,t,n,a,i,s),l>=0?r.replaceAt(t,l):r.add(t),t}function ql(e,t){var n,a=ll(e),i=t.type,r=t.shape,o=t.style;return null!=i&&i!==a.customGraphicType||"path"===i&&(n=r)&&((0,s.hasOwn)(n,"pathData")||(0,s.hasOwn)(n,"d"))&&nu(r)!==a.customPathData||"image"===i&&(0,s.hasOwn)(o,"image")&&o.image!==a.customImagePath}function jl(e,t,n){var a=t?Ql(e,t):e,i=t?Kl(e,a,hl):e.style,r=e.type,o=a?a.textConfig:null,s=e.textContent,l=s?t?Ql(s,t):s:null;if(i&&(n.isLegacy||(0,Es.Sv)(i,r,!!o,!!l))){n.isLegacy=!0;var u=(0,Es.Tw)(i,r,!t);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var d=l;!d.type&&(d.type="text")}var h=t?n[t]:n.normal;h.cfg=o,h.conOpt=l}function Ql(e,t){return t?e?e[t]:null:e}function Kl(e,t,n){var a=t&&t.style;return null==a&&n===hl&&e&&(a=e.styleEmphasis),a}function Jl(e,t){var n=e&&e.name;return null!=n?n:vl+t}function $l(e,t){var n=this.context,a=null!=e?n.newChildren[e]:null,i=null!=t?n.oldChildren[t]:null;Ul(n.api,i,n.dataIndex,a,n.seriesModel,n.group,0,n.morphPreparation)}function eu(e){var t=this.context;tu(t.oldChildren[e],t.seriesModel,t.group)}function tu(e,t,n){if(e){var a=ll(e).leaveToProps;a?x.updateProps(e,a,t,{cb:function(){n.remove(e)}}):n.remove(e)}}function nu(e){return e&&(e.pathData||e.d)}function au(e){return e&&e instanceof b.ZP}function iu(e,t){e&&t.remove(e)}var ru=function(){function e(e,t){this._fromList=[],this._toList=[],this._toElOptionList=[],this._allPropsFinalList=[],this._toDataIndices=[],this._morphConfigList=[],this._seriesModel=e,this._transOpt=t}return e.prototype.hasFrom=function(){return!!this._fromList.length},e.prototype.findAndAddFrom=function(e){if(e&&(ll(e).canMorph&&this._fromList.push(e),e.isGroup))for(var t=e.childrenRef(),n=0;n<t.length;n++)this.findAndAddFrom(t[n])},e.prototype.addTo=function(e,t,n,a){e&&(this._toList.push(e),this._toElOptionList.push(t),this._toDataIndices.push(n),this._allPropsFinalList.push(a))},e.prototype.applyMorphing=function(){var e=this._type,t=this._fromList,n=this._toList.length,a=t.length;if(a&&n)if("oneToOne"===e)for(var i=0;i<n;i++)this._oneToOneForSingleTo(i,i);else if("manyToOne"===e)for(var r=Math.max(1,Math.floor(a/n)),o=(i=0,0);i<n;i++,o+=r){var s=i+1>=n?a-o:r;this._manyToOneForSingleTo(i,o>=a?null:o,s)}else if("oneToMany"===e)for(var l=Math.max(1,Math.floor(n/a)),u=0,d=0;u<n;u+=l,d++){var h=u+l>=n?n-u:l;this._oneToManyForSingleFrom(u,h,d>=a?null:d)}},e.prototype._oneToOneForSingleTo=function(e,t){var n,a=this._toList[e],i=this._toElOptionList[e],r=this._toDataIndices[e],o=this._allPropsFinalList[e],s=this._fromList[t],l=this._getOrCreateMorphConfig(r),u=l.duration;if(s&&$s(s)){if(Al(a,o,i.style),u){var d=el([s],a,l,ou);this._processResultIndividuals(d,e,null)}}else{var h=u&&s&&(s!==a||Js(n=s)||$s(n))?s:null,c={};Cl("shape",a,h,i,c,!1),Cl("extra",a,h,i,c,!1),Nl(a,h,i,c,!1),Zl(a,h,i,i.style,c,!1),Al(a,o,i.style),h&&js(h,a,l),Tl(a,r,i,this._seriesModel,c,!1)}},e.prototype._manyToOneForSingleTo=function(e,t,n){var a=this._toList[e],i=this._toElOptionList[e];Al(a,this._allPropsFinalList[e],i.style);var r=this._getOrCreateMorphConfig(this._toDataIndices[e]);if(r.duration&&null!=t){for(var o=[],s=t;s<n;s++)o.push(this._fromList[s]);var l=el(o,a,r,ou);this._processResultIndividuals(l,e,null)}},e.prototype._oneToManyForSingleFrom=function(e,t,n){for(var a=null==n?null:this._fromList[n],i=this._toList,r=[],o=e;o<t;o++){var l=i[o];Al(l,this._allPropsFinalList[o],this._toElOptionList[o].style),r.push(l)}var u=this._getOrCreateMorphConfig(this._toDataIndices[e]);if(u.duration&&a){var d=function(e,t,n,a){var i,r=t.length,o=n?n.dividingMethod:null,l=!1;if($s(e)){var u=e.__combiningSubList;u.length===r?i=u:(i=ol(e,r,o),l=!0)}else i=ol(e,r,o),l=!0;(0,s.assert)(i.length===r);for(var d=0;d<r;d++)l&&a&&a(e,i[d],!1),js(i[d],t[d],n);return{fromIndividuals:i,toIndividuals:t,count:r}}(a,r,u,ou);this._processResultIndividuals(d,e,t)}},e.prototype._processResultIndividuals=function(e,t,n){for(var a=null!=n,i=0;i<e.count;i++){var r=e.fromIndividuals[i],o=e.toIndividuals[i],s=t+(a?i:0),l=this._toElOptionList[s],u=this._toDataIndices[s],d={};Nl(o,r,l,d,!1),Zl(o,r,l,l.style,d,!1),Tl(o,u,l,this._seriesModel,d,!1)}},e.prototype._getOrCreateMorphConfig=function(e){var t,n,a,i=this._morphConfigList,r=i[e];if(r)return r;var o=this._seriesModel,l=this._transOpt;if(o.isAnimationEnabled()){var u=void 0;if(o&&o.ecModel){var d=o.ecModel.getUpdatePayload();u=d&&d.animation}if(u)t=u.duration||0,n=u.easing||"cubicOut",a=u.delay||0;else{n=o.get("animationEasingUpdate");var h=o.get("animationDelayUpdate");a=(0,s.isFunction)(h)?h(e):h;var c=o.get("animationDurationUpdate");t=(0,s.isFunction)(c)?c(e):c}}return r={duration:t||0,delay:a,easing:n,dividingMethod:l?l.dividingMethod:null},i[e]=r,r},e.prototype.reset=function(e){this._type=e,this._fromList.length=this._toList.length=this._toElOptionList.length=this._allPropsFinalList.length=this._toDataIndices.length=0},e}();function ou(e,t,n){t.style=n?(0,s.clone)(e.style):e.style,t.zlevel=e.zlevel,t.z=e.z,t.z2=e.z2}function su(e){e.registerChartView(Il),e.registerSeriesModel(wl)}}}]);