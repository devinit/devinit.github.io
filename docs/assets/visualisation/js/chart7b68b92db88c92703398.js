(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[8732],{8732:(e,t,a)=>{"use strict";e.exports=a(97571)},74906:(e,t,a)=>{"use strict";var l=a(60851),r=a(85485),o=a(72910).Y,n=a(88176).f,i=a(88176).s,s=a(94867).extendFlat;e.exports={labels:l.labels,label0:l.label0,dlabel:l.dlabel,values:l.values,marker:{colors:l.marker.colors,line:{color:s({},l.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:s({},l.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:l.text,hovertext:l.hovertext,scalegroup:s({},l.scalegroup,{description:["If there are multiple funnelareas that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")}),textinfo:s({},l.textinfo,{flags:["label","text","value","percent"]}),texttemplate:i({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:s({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:n({},{keys:["label","color","value","text","percent"]}),textposition:s({},l.textposition,{values:["inside","none"],dflt:"inside"}),textfont:l.textfont,insidetextfont:l.insidetextfont,title:{text:l.title.text,font:l.title.font,position:s({},l.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",role:"info",min:0,dflt:1,editType:"plot",description:["Sets the ratio between height and width"].join(" ")},baseratio:{valType:"number",role:"info",min:0,max:1,dflt:.333,editType:"plot",description:["Sets the ratio between bottom length and maximum top length."].join(" ")}}},10141:(e,t,a)=>{"use strict";var l=a(79648);t.name="funnelarea",t.plot=function(e,a,r,o){l.plotBasePlot(t.name,e,a,r,o)},t.clean=function(e,a,r,o){l.cleanBasePlot(t.name,e,a,r,o)}},94129:(e,t,a)=>{"use strict";var l=a(75507);e.exports={calc:function(e,t){return l.calc(e,t)},crossTraceCalc:function(e){l.crossTraceCalc(e,{type:"funnelarea"})}}},88056:(e,t,a)=>{"use strict";var l=a(34141),r=a(74906),o=a(72910).c,n=a(58061).handleText,i=a(54583).handleLabelsAndValues;e.exports=function(e,t,a,s){function c(a,o){return l.coerce(e,t,r,a,o)}var d=c("labels"),u=c("values"),h=i(d,u),p=h.len;if(t._hasLabels=h.hasLabels,t._hasValues=h.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),p){t._length=p,c("marker.line.width")&&c("marker.line.color",s.paper_bgcolor),c("marker.colors"),c("scalegroup");var f,x=c("text"),m=c("texttemplate");if(m||(f=c("textinfo",Array.isArray(x)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),m||f&&"none"!==f){var y=c("textposition");n(e,t,s,c,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}o(t,s,c),c("title.text")&&(c("title.position"),l.coerceFont(c,"title.font",s.font)),c("aspectratio"),c("baseratio")}else t.visible=!1}},97571:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"funnelarea",basePlotModule:a(10141),categories:["pie-like","funnelarea","showLegend"],attributes:a(74906),layoutAttributes:a(21559),supplyDefaults:a(88056),supplyLayoutDefaults:a(69909),calc:a(94129).calc,crossTraceCalc:a(94129).crossTraceCalc,plot:a(88022),style:a(91091),styleOne:a(61613),meta:{description:["Visualize stages in a process using area-encoded trapezoids. This trace can be used",'to show data in a part-to-whole representation similar to a "pie" trace, wherein','each item appears in a single stage. See also the "funnel" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},21559:(e,t,a)=>{"use strict";var l=a(33861).hiddenlabels;e.exports={hiddenlabels:l,funnelareacolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default funnelarea slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendfunnelareacolors`."].join(" ")},extendfunnelareacolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the funnelarea slice colors (whether given by `funnelareacolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},69909:(e,t,a)=>{"use strict";var l=a(34141),r=a(21559);e.exports=function(e,t){function a(a,o){return l.coerce(e,t,r,a,o)}a("hiddenlabels"),a("funnelareacolorway",t.colorway),a("extendfunnelareacolors")}},88022:(e,t,a)=>{"use strict";var l=a(15078),r=a(84474),o=a(34141),n=a(8666),i=a(38327).toMoveInsideBar,s=a(50001),c=s.recordMinTextSize,d=s.clearMinTextSize,u=a(55687),h=a(19128),p=h.attachFxHandlers,f=h.determineInsideTextFont,x=h.layoutAreas,m=h.prerenderTitles,y=h.positionTitleOutside,v=h.formatSliceLabel;function b(e,t){return"l"+(t[0]-e[0])+","+(t[1]-e[1])}e.exports=function(e,t){var a=e._fullLayout;d("funnelarea",a),m(t,e),x(t,a._size),o.makeTraceGroups(a._funnelarealayer,t,"trace").each((function(t){var s=l.select(this),d=t[0],h=d.trace;!function(e){if(e.length){var t=e[0],a=t.trace,l=a.aspectratio,r=a.baseratio;r>.999&&(r=.999);var o,n,i,s=Math.pow(r,2),c=t.vTotal,d=c,u=c*s/(1-s)/c,h=[];for(h.push(B()),n=e.length-1;n>-1;n--)if(!(i=e[n]).hidden){var p=i.v/d;u+=p,h.push(B())}var f=1/0,x=-1/0;for(n=0;n<h.length;n++)o=h[n],f=Math.min(f,o[1]),x=Math.max(x,o[1]);for(n=0;n<h.length;n++)h[n][1]-=(x+f)/2;var m=h[h.length-1][0],y=t.r,v=(x-f)/2,b=y/m,g=y/v*l;for(t.r=g*v,n=0;n<h.length;n++)h[n][0]*=b,h[n][1]*=g;var T,w,k=[-(o=h[0])[0],o[1]],L=[o[0],o[1]],A=0;for(n=e.length-1;n>-1;n--)if(!(i=e[n]).hidden){var _=h[A+=1][0],S=h[A][1];i.TL=[-_,S],i.TR=[_,S],i.BL=k,i.BR=L,i.pxmid=(T=i.TR,w=i.BR,[.5*(T[0]+w[0]),.5*(T[1]+w[1])]),k=i.TL,L=i.TR}}function B(){var e,t={x:e=Math.sqrt(u),y:-e};return[t.x,t.y]}}(t),s.each((function(){var s=l.select(this).selectAll("g.slice").data(t);s.enter().append("g").classed("slice",!0),s.exit().remove(),s.each((function(s,x){if(s.hidden)l.select(this).selectAll("path,g").remove();else{s.pointNumber=s.i,s.curveNumber=h.index;var m=d.cx,y=d.cy,g=l.select(this),T=g.selectAll("path.surface").data([s]);T.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),g.call(p,e,t);var w="M"+(m+s.TR[0])+","+(y+s.TR[1])+b(s.TR,s.BR)+b(s.BR,s.BL)+b(s.BL,s.TL)+"Z";T.attr("d",w),v(e,s,d);var k=u.castOption(h.textposition,s.pts),L=g.selectAll("g.slicetext").data(s.text&&"none"!==k?[0]:[]);L.enter().append("g").classed("slicetext",!0),L.exit().remove(),L.each((function(){var d=o.ensureSingle(l.select(this),"text","",(function(e){e.attr("data-notex",1)})),u=o.ensureUniformFontSize(e,f(h,s,a.font));d.text(s.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(r.font,u).call(n.convertToTspans,e);var p,v,b,g=r.bBox(d.node()),T=Math.min(s.BL[1],s.BR[1])+y,w=Math.max(s.TL[1],s.TR[1])+y;v=Math.max(s.TL[0],s.BL[0])+m,b=Math.min(s.TR[0],s.BR[0])+m,(p=i(v,b,T,w,g,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=u.size,c(h.type,p,a),t[x].transform=p,d.attr("transform",o.getTextTransform(p))}))}}));var x=l.select(this).selectAll("g.titletext").data(h.title.text?[0]:[]);x.enter().append("g").classed("titletext",!0),x.exit().remove(),x.each((function(){var t=o.ensureSingle(l.select(this),"text","",(function(e){e.attr("data-notex",1)})),i=h.title.text;h._meta&&(i=o.templateString(i,h._meta)),t.text(i).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(r.font,h.title.font).call(n.convertToTspans,e);var s=y(d,a._size);t.attr("transform","translate("+s.x+","+s.y+")"+(s.scale<1?"scale("+s.scale+")":"")+"translate("+s.tx+","+s.ty+")")}))}))}))}},91091:(e,t,a)=>{"use strict";var l=a(15078),r=a(61613),o=a(50001).resizeText;e.exports=function(e){var t=e._fullLayout._funnelarealayer.selectAll(".trace");o(e,t,"funnelarea"),t.each((function(e){var t=e[0].trace,a=l.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each((function(e){l.select(this).call(r,e,t)}))}))}},54583:(e,t,a)=>{"use strict";var l=a(35924),r=a(34141),o=a(60851),n=a(72910).c,i=a(58061).handleText;function s(e,t){var a=Array.isArray(e),o=r.isArrayOrTypedArray(t),n=Math.min(a?e.length:1/0,o?t.length:1/0);if(isFinite(n)||(n=0),n&&o){for(var i,s=0;s<n;s++){var c=t[s];if(l(c)&&c>0){i=!0;break}}i||(n=0)}return{hasLabels:a,hasValues:o,len:n}}e.exports={handleLabelsAndValues:s,supplyDefaults:function(e,t,a,l){function c(a,l){return r.coerce(e,t,o,a,l)}var d=s(c("labels"),c("values")),u=d.len;if(t._hasLabels=d.hasLabels,t._hasValues=d.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),u){t._length=u,c("marker.line.width")&&c("marker.line.color"),c("marker.colors"),c("scalegroup");var h,p=c("text"),f=c("texttemplate");if(f||(h=c("textinfo",Array.isArray(p)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),f||h&&"none"!==h){var x=c("textposition");i(e,t,l,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(x)||"auto"===x||"outside"===x)&&c("automargin"),("inside"===x||"auto"===x||Array.isArray(x))&&c("insidetextorientation")}n(t,l,c);var m=c("hole");if(c("title.text")){var y=c("title.position",m?"middle center":"top center");m||"middle center"!==y||(t.title.position="top center"),r.coerceFont(c,"title.font",l.font)}c("sort"),c("direction"),c("rotation"),c("pull")}else t.visible=!1}}},33861:e=>{"use strict";e.exports={hiddenlabels:{valType:"data_array",role:"info",editType:"calc",description:["hiddenlabels is the funnelarea & pie chart analog of","visible:'legendonly'","but it can contain many labels, and can simultaneously","hide slices from several pies/funnelarea charts"].join(" ")},piecolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default pie slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendpiecolors`."].join(" ")},extendpiecolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the pie slice colors (whether given by `piecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}}}]);