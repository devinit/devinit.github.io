(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[739],{35185:(e,t,r)=>{"use strict";e.exports=r(99839)},59021:(e,t,r)=>{"use strict";var a=r(91441);a.register([r(78577),r(6791),r(35185)]),e.exports=a},96357:(e,t,r)=>{"use strict";var a=r(34141),i=r(18882),o=r(72910).c;e.exports=function(e,t,r,s){var n,l,p=s.type,u=s.attributes,c=s.handleDefaults,h=s.partition||"x",d=t._subplots[p],y=d.length,v=y&&d[0].replace(/\d+$/,"");function f(e,t){return a.coerce(n,l,u,e,t)}for(var m=0;m<y;m++){var b=d[m];n=e[b]?e[b]:e[b]={},l=i.newContainer(t,b,v),f("uirevision",t.uirevision);var x={};x[h]=[m/y,(m+1)/y],o(l,t,f,x),s.id=b,c(n,l,f,s)}}},37718:(e,t,r)=>{"use strict";var a=r(85088),i=r(88176).f,o=r(85485),s=r(69249),n=r(94867).extendFlat;e.exports=n({lon:s.lon,lat:s.lat,z:{valType:"data_array",editType:"calc",description:["Sets the points' weight.","For example, a value of 10 would be equivalent to having 10 points of weight 1","in the same spot"].join(" ")},radius:{valType:"number",role:"info",editType:"plot",arrayOk:!0,min:1,dflt:30,description:["Sets the radius of influence of one `lon` / `lat` point in pixels.","Increasing the value makes the densitymapbox trace smoother, but less detailed."].join(" ")},below:{valType:"string",role:"info",editType:"plot",description:["Determines if the densitymapbox trace will be inserted","before the layer with the specified ID.","By default, densitymapbox traces are placed below the first","layer of type symbol","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:s.text,hovertext:s.hovertext,hoverinfo:n({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:i(),showlegend:n({},o.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},6632:(e,t,r)=>{"use strict";var a=r(35924),i=r(34141).isArrayOrTypedArray,o=r(45020).BADNUM,s=r(90336),n=r(34141)._;e.exports=function(e,t){for(var r=t._length,l=new Array(r),p=t.z,u=i(p)&&p.length,c=0;c<r;c++){var h=l[c]={},d=t.lon[c],y=t.lat[c];if(h.lonlat=a(d)&&a(y)?[+d,+y]:[o,o],u){var v=p[c];h.z=a(v)?v:o}}return s(e,t,{vals:u?p:[0,1],containerStr:"",cLetter:"z"}),r&&(l[0].t={labels:{lat:n(e,"lat:")+" ",lon:n(e,"lon:")+" "}}),l}},608:(e,t,r)=>{"use strict";var a=r(35924),i=r(34141),o=r(57597),s=r(59430),n=r(45020).BADNUM,l=r(94511).makeBlank;e.exports=function(e){var t=e[0].trace,r=!0===t.visible&&0!==t._length,p=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:l()};if(!r)return p;var u,c=[],h=t.z,d=t.radius,y=i.isArrayOrTypedArray(h)&&h.length,v=i.isArrayOrTypedArray(d);for(u=0;u<e.length;u++){var f=e[u],m=f.lonlat;if(m[0]!==n){var b={};if(y){var x=f.z;b.z=x!==n?x:0}v&&(b.r=a(d[u])&&d[u]>0?+d[u]:0),c.push({type:"Feature",geometry:{type:"Point",coordinates:m},properties:b})}}var g=s.extractOpts(t),w=g.reversescale?s.flipScale(g.colorscale):g.colorscale,L=w[0][1],z=["interpolate",["linear"],["heatmap-density"],0,o.opacity(L)<1?L:o.addOpacity(L,0)];for(u=1;u<w.length;u++)z.push(w[u][0],w[u][1]);var _=["interpolate",["linear"],["get","z"],g.min,0,g.max,1];return i.extendFlat(p.heatmap.paint,{"heatmap-weight":y?_:1/(g.max-g.min),"heatmap-color":z,"heatmap-radius":v?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),p.geojson={type:"FeatureCollection",features:c},p.heatmap.layout.visibility="visible",p}},50189:(e,t,r)=>{"use strict";var a=r(34141),i=r(62252),o=r(37718);e.exports=function(e,t,r,s){function n(r,i){return a.coerce(e,t,o,r,i)}var l=n("lon")||[],p=n("lat")||[],u=Math.min(l.length,p.length);u?(t._length=u,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),i(e,t,s,n,{prefix:"",cLetter:"z"})):t.visible=!1}},39603:e=>{"use strict";e.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e.z=t.z,e}},20688:(e,t,r)=>{"use strict";var a=r(34141),i=r(34682),o=r(18191);e.exports=function(e,t,r){var s=o(e,t,r);if(s){var n=s[0],l=n.cd,p=l[0].trace,u=l[n.index];if(delete n.color,"z"in u){var c=n.subplot.mockAxis;n.z=u.z,n.zLabel=i.tickText(c,c.c2l(u.z),"hover").text}return n.extraText=function(e,t,r){if(!e.hovertemplate){var i=(t.hi||e.hoverinfo).split("+"),o=-1!==i.indexOf("all"),s=-1!==i.indexOf("lon"),n=-1!==i.indexOf("lat"),l=t.lonlat,p=[];return o||s&&n?p.push("("+u(l[0])+", "+u(l[1])+")"):s?p.push(r.lon+u(l[0])):n&&p.push(r.lat+u(l[1])),(o||-1!==i.indexOf("text"))&&a.fillText(t,e,p),p.join("<br>")}function u(e){return e+"Â°"}}(p,u,l[0].t.labels),[n]}}},99839:(e,t,r)=>{"use strict";e.exports={attributes:r(37718),supplyDefaults:r(50189),colorbar:r(95005),formatLabels:r(28591),calc:r(6632),plot:r(10812),hoverPoints:r(20688),eventData:r(39603),getBelow:function(e,t){for(var r=t.getMapLayers(),a=0;a<r.length;a++){var i=r[a],o=i.id;if("symbol"===i.type&&"string"==typeof o&&-1===o.indexOf("plotly-"))return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:r(90796),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox",description:["Draws a bivariate kernel density estimation with a Gaussian kernel","from `lon` and `lat` coordinates and optional `z` values using a colorscale."].join(" ")}}},10812:(e,t,r)=>{"use strict";var a=r(608),i=r(54210).traceLayerPrefix;function o(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",i+t+"-heatmap"]],this.below=null}var s=o.prototype;s.update=function(e){var t=this.subplot,r=this.layerList,i=a(e),o=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(i.geojson),o!==this.below&&(this._removeLayers(),this._addLayers(i,o),this.below=o);for(var s=0;s<r.length;s++){var n=r[s],l=n[0],p=n[1],u=i[l];t.setOptions(p,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&t.setOptions(p,"setPaintProperty",u.paint)}},s._addLayers=function(e,t){for(var r=this.subplot,a=this.layerList,i=this.sourceId,o=0;o<a.length;o++){var s=a[o],n=s[0],l=e[n];r.addLayer({type:n,id:s[1],source:i,layout:l.layout,paint:l.paint},t)}},s._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])},s.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},e.exports=function(e,t){var r=t[0].trace,i=new o(e,r.uid),s=i.sourceId,n=a(t),l=i.below=e.belowLookup["trace-"+r.uid];return e.map.addSource(s,{type:"geojson",data:n.geojson}),i._addLayers(n,l),i}}}]);