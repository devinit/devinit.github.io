(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[1881],{11881:(e,t,n)=>{"use strict";e.exports=n(33428)},6074:(e,t,n)=>{"use strict";var a=n(34141);e.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;a.mergeArray(t.text,e,"tx"),a.mergeArray(t.hovertext,e,"htx");var r=t.marker;if(r){a.mergeArray(r.opacity,e,"mo"),a.mergeArray(r.color,e,"mc");var o=r.line;o&&(a.mergeArray(o.color,e,"mlc"),a.mergeArrayCastPositive(o.width,e,"mlw"))}}},2964:(e,t,n)=>{"use strict";var a=n(67855),r=n(15451).line,o=n(85485),i=n(88176).f,l=n(88176).s,s=n(83389),c=n(94867).extendFlat,p=n(57597);e.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,hovertext:a.hovertext,hovertemplate:i({},{keys:s.eventDataKeys}),hoverinfo:c({},o.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],role:"info",editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple funnels, percentages & totals","are computed separately (per trace)."].join(" ")},texttemplate:l({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),text:a.text,textposition:c({},a.textposition,{dflt:"auto"}),insidetextanchor:c({},a.insidetextanchor,{dflt:"middle"}),textangle:c({},a.textangle,{dflt:0}),textfont:a.textfont,insidetextfont:a.insidetextfont,outsidetextfont:a.outsidetextfont,constraintext:a.constraintext,cliponaxis:a.cliponaxis,orientation:c({},a.orientation,{description:["Sets the orientation of the funnels.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal).","By default funnels are tend to be oriented horizontally;","unless only *y* array is presented or orientation is set to *v*.","Also regarding graphs including only 'horizontal' funnels,","*autorange* on the *y-axis* are set to *reversed*."].join(" ")}),offset:c({},a.offset,{arrayOk:!1}),width:c({},a.width,{arrayOk:!1}),marker:a.marker,connector:{fillcolor:{valType:"color",role:"style",editType:"style",description:["Sets the fill color."].join(" ")},line:{color:c({},r.color,{dflt:p.defaultLine}),width:c({},r.width,{dflt:0,editType:"plot"}),dash:r.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if connector regions and lines are drawn."].join(" ")},editType:"plot"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup}},94561:(e,t,n)=>{"use strict";var a=n(34682),r=n(6074),o=n(12356),i=n(45020).BADNUM;function l(e){return e===i?0:e}e.exports=function(e,t){var n,s,c,p,u=a.getFromId(e,t.xaxis||"x"),d=a.getFromId(e,t.yaxis||"y");"h"===t.orientation?(n=u.makeCalcdata(t,"x"),s=d.makeCalcdata(t,"y")):(n=d.makeCalcdata(t,"y"),s=u.makeCalcdata(t,"x"));var f,h=Math.min(s.length,n.length),v=new Array(h);for(t._base=[],c=0;c<h;c++){n[c]<0&&(n[c]=i);var x=!1;n[c]!==i&&c+1<h&&n[c+1]!==i&&(x=!0),p=v[c]={p:s[c],s:n[c],cNext:x},t._base[c]=-.5*p.s,t.ids&&(p.id=String(t.ids[c])),0===c&&(v[0].vTotal=0),v[0].vTotal+=l(p.s),p.begR=l(p.s)/l(v[0].s)}for(c=0;c<h;c++)(p=v[c]).s!==i&&(p.sumR=p.s/v[0].vTotal,p.difR=void 0!==f?p.s/f:1,f=p.s);return r(v,t),o(v,t),v}},83389:e=>{"use strict";e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},57394:(e,t,n)=>{"use strict";var a=n(55023).setGroupPositions;e.exports=function(e,t){var n,r,o=e._fullLayout,i=e._fullData,l=e.calcdata,s=t.xaxis,c=t.yaxis,p=[],u=[],d=[];for(r=0;r<i.length;r++){var f=i[r],h="h"===f.orientation;!0===f.visible&&f.xaxis===s._id&&f.yaxis===c._id&&"funnel"===f.type&&(n=l[r],h?d.push(n):u.push(n),p.push(n))}var v={mode:o.funnelmode,norm:o.funnelnorm,gap:o.funnelgap,groupgap:o.funnelgroupgap};for(a(e,s,c,u,v),a(e,c,s,d,v),r=0;r<p.length;r++){n=p[r];for(var x=0;x<n.length;x++)x+1<n.length&&(n[x].nextP0=n[x+1].p0,n[x].nextS0=n[x+1].s0,n[x].nextP1=n[x+1].p1,n[x].nextS1=n[x+1].s1)}}},72920:(e,t,n)=>{"use strict";var a=n(34141),r=n(58061).handleGroupingDefaults,o=n(58061).handleText,i=n(73978),l=n(2964),s=n(57597);e.exports={supplyDefaults:function(e,t,n,r){function c(n,r){return a.coerce(e,t,l,n,r)}if(i(e,t,r,c)){c("orientation",t.y&&!t.x?"v":"h"),c("offset"),c("width");var p=c("text");c("hovertext"),c("hovertemplate");var u=c("textposition");o(e,t,r,c,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===t.textposition||t.texttemplate||c("textinfo",Array.isArray(p)?"text+value":"value");var d=c("marker.color",n);c("marker.line.color",s.defaultLine),c("marker.line.width"),c("connector.visible")&&(c("connector.fillcolor",function(e){var t=a.isArrayOrTypedArray(e)?"#000":e;return s.addOpacity(t,.5*s.opacity(t))}(d)),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else t.visible=!1},crossTraceDefaults:function(e,t){var n,o;function i(e){return a.coerce(o._input,o,l,e)}if("group"===t.funnelmode)for(var s=0;s<e.length;s++)n=(o=e[s])._input,r(n,o,t,i)}}},8906:e=>{"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(e.percentInitial=t.percentInitial),"percentPrevious"in t&&(e.percentPrevious=t.percentPrevious),"percentTotal"in t&&(e.percentTotal=t.percentTotal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},3347:(e,t,n)=>{"use strict";var a=n(57597).opacity,r=n(99921).hoverOnBars,o=n(34141).formatPercent;e.exports=function(e,t,n,i){var l=r(e,t,n,i);if(l){var s=l.cd,c=s[0].trace,p="h"===c.orientation,u=s[l.index];l[(p?"x":"y")+"LabelVal"]=u.s,l.percentInitial=u.begR,l.percentInitialLabel=o(u.begR,1),l.percentPrevious=u.difR,l.percentPreviousLabel=o(u.difR,1),l.percentTotal=u.sumR,l.percentTotalLabel=o(u.sumR,1);var d=u.hi||c.hoverinfo,f=[];if(d&&"none"!==d&&"skip"!==d){var h="all"===d,v=d.split("+"),x=function(e){return h||-1!==v.indexOf(e)};x("percent initial")&&f.push(l.percentInitialLabel+" of initial"),x("percent previous")&&f.push(l.percentPreviousLabel+" of previous"),x("percent total")&&f.push(l.percentTotalLabel+" of total")}return l.extraText=f.join("<br>"),l.color=function(e,t){var n=e.marker,r=t.mc||n.color,o=t.mlc||n.line.color,i=t.mlw||n.line.width;return a(r)?r:a(o)&&i?o:void 0}(c,u),[l]}}},33428:(e,t,n)=>{"use strict";e.exports={attributes:n(2964),layoutAttributes:n(88195),supplyDefaults:n(72920).supplyDefaults,crossTraceDefaults:n(72920).crossTraceDefaults,supplyLayoutDefaults:n(98438),calc:n(94561),crossTraceCalc:n(57394),plot:n(80972),style:n(96129).style,hoverPoints:n(3347),eventData:n(8906),selectPoints:n(17155),moduleType:"trace",name:"funnel",basePlotModule:n(8095),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Visualize stages in a process using length-encoded bars. This trace can be used","to show data in either a part-to-whole representation wherein each item appears",'in a single stage, or in a "drop-off" representation wherein each item appears in','each stage it traversed. See also the "funnelarea" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},88195:e=>{"use strict";e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},funnelgap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},98438:(e,t,n)=>{"use strict";var a=n(34141),r=n(88195);e.exports=function(e,t,n){var o=!1;function i(n,o){return a.coerce(e,t,r,n,o)}for(var l=0;l<n.length;l++){var s=n[l];if(s.visible&&"funnel"===s.type){o=!0;break}}o&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},80972:(e,t,n)=>{"use strict";var a=n(15078),r=n(34141),o=n(84474),i=n(45020).BADNUM,l=n(38327),s=n(50001).clearMinTextSize;function c(e,t,n,a){var r=[],o=[],i=a?t:n,l=a?n:t;return r[0]=i.c2p(e.s0,!0),o[0]=l.c2p(e.p0,!0),r[1]=i.c2p(e.s1,!0),o[1]=l.c2p(e.p1,!0),r[2]=i.c2p(e.nextS0,!0),o[2]=l.c2p(e.nextP0,!0),r[3]=i.c2p(e.nextS1,!0),o[3]=l.c2p(e.nextP1,!0),a?[r,o]:[o,r]}e.exports=function(e,t,n,p){var u=e._fullLayout;s("funnel",u),function(e,t,n,l){var s=t.xaxis,p=t.yaxis;r.makeTraceGroups(l,n,"trace bars").each((function(n){var l=a.select(this),u=n[0].trace,d=r.ensureSingle(l,"g","regions");if(u.connector&&u.connector.visible){var f="h"===u.orientation,h=d.selectAll("g.region").data(r.identity);h.enter().append("g").classed("region",!0),h.exit().remove();var v=h.size();h.each((function(n,l){if(l===v-1||n.cNext){var u=c(n,s,p,f),d=u[0],h=u[1],x="";d[0]!==i&&h[0]!==i&&d[1]!==i&&h[1]!==i&&d[2]!==i&&h[2]!==i&&d[3]!==i&&h[3]!==i&&(x+=f?"M"+d[0]+","+h[1]+"L"+d[2]+","+h[2]+"H"+d[3]+"L"+d[1]+","+h[1]+"Z":"M"+d[1]+","+h[1]+"L"+d[2]+","+h[3]+"V"+h[2]+"L"+d[1]+","+h[0]+"Z"),""===x&&(x="M0,0Z"),r.ensureSingle(a.select(this),"path").attr("d",x).call(o.setClipUrl,t.layerClipId,e)}}))}else d.remove()}))}(e,t,n,p),function(e,t,n,i){var l=t.xaxis,s=t.yaxis;r.makeTraceGroups(i,n,"trace bars").each((function(n){var i=a.select(this),p=n[0].trace,u=r.ensureSingle(i,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var d="h"===p.orientation,f=u.selectAll("g.line").data(r.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var h=f.size();f.each((function(n,i){if(i===h-1||n.cNext){var p=c(n,l,s,d),u=p[0],f=p[1],v="";void 0!==u[3]&&void 0!==f[3]&&(d?(v+="M"+u[0]+","+f[1]+"L"+u[2]+","+f[2],v+="M"+u[1]+","+f[1]+"L"+u[3]+","+f[2]):(v+="M"+u[1]+","+f[1]+"L"+u[2]+","+f[3],v+="M"+u[1]+","+f[0]+"L"+u[2]+","+f[2])),""===v&&(v="M0,0Z"),r.ensureSingle(a.select(this),"path").attr("d",v).call(o.setClipUrl,t.layerClipId,e)}}))}else u.remove()}))}(e,t,n,p),l.plot(e,t,n,p,{mode:u.funnelmode,norm:u.funnelmode,gap:u.funnelgap,groupgap:u.funnelgroupgap})}},96129:(e,t,n)=>{"use strict";var a=n(15078),r=n(84474),o=n(57597),i=n(44822).DESELECTDIM,l=n(49888),s=n(50001).resizeText,c=l.styleTextPoints;e.exports={style:function(e,t,n){var l=n||a.select(e).selectAll("g.funnellayer").selectAll("g.trace");s(e,l,"funnel"),l.style("opacity",(function(e){return e[0].trace.opacity})),l.each((function(t){var n=a.select(this),l=t[0].trace;n.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=l.marker;a.select(this).call(o.fill,e.mc||t.color).call(o.stroke,e.mlc||t.line.color).call(r.dashLine,t.line.dash,e.mlw||t.line.width).style("opacity",l.selectedpoints&&!e.selected?i:1)}})),c(n,l,e),n.selectAll(".regions").each((function(){a.select(this).selectAll("path").style("stroke-width",0).call(o.fill,l.connector.fillcolor)})),n.selectAll(".lines").each((function(){var e=l.connector.line;r.lineGroupStyle(a.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}}}]);