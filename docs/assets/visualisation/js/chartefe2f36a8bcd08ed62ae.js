(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[1264],{71264:(e,t,o)=>{"use strict";e.exports=o(72281)},86731:(e,t,o)=>{"use strict";var r=o(94867).extendFlat,n=o(85485),a=o(38003),i=o(85088),l=o(88176).f,s=o(72910).Y,c=r({editType:"calc"},i("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",role:"info",editType:"plot",description:["Sets the shape of the paths.","If `linear`, paths are composed of straight lines.","If `hspline`, paths are composed of horizontal curved splines"].join(" ")},hovertemplate:l({editType:"plot",arrayOk:!1},{keys:["count","probability"],description:["This value here applies when hovering over lines."].join(" ")})});e.exports={domain:s({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:r({},n.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",role:"info",editType:"plot",description:["Sets the hover interaction mode for the parcats diagram.","If `category`, hover interaction take place per category.","If `color`, hover interactions take place per color per category.","If `dimension`, hover interactions take place across all categories per dimension."].join(" ")},hovertemplate:l({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"],description:["This value here applies when hovering over dimensions.","Note tath `*categorycount`, *colorcount* and *bandcolorcount*","are only available when `hoveron` contains the *color* flag"].join(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",role:"style",editType:"plot",description:["Sets the drag interaction mode for categories and dimensions.","If `perpendicular`, the categories can only move along a line perpendicular to the paths.","If `freeform`, the categories can freely move on the plane.","If `fixed`, the categories and dimensions are stationary."].join(" ")},bundlecolors:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:"Sort paths so that like colors are bundled together within each category."},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",role:"info",editType:"plot",description:["Sets the path sorting algorithm.","If `forward`, sort paths based on dimension categories from left to right.","If `backward`, sort paths based on dimensions categories from right to left."].join(" ")},labelfont:a({editType:"calc",description:"Sets the font for the `dimension` labels."}),tickfont:a({editType:"calc",description:"Sets the font for the `category` labels."}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",role:"info",editType:"calc",description:"The shown name of the dimension."},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",role:"info",editType:"calc",description:["Specifies the ordering logic for the categories in the dimension.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",role:"info",editType:"calc",description:["Sets the order in which categories in this dimension appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},ticktext:{valType:"data_array",role:"info",editType:"calc",description:["Sets alternative tick labels for the categories in this dimension.","Only has an effect if `categoryorder` is set to *array*.","Should be an array the same length as `categoryarray`","Used with `categoryorder`."].join(" ")},values:{valType:"data_array",role:"info",dflt:[],editType:"calc",description:["Dimension values. `values[n]` represents the category value of the `n`th point in the dataset,","therefore the `values` vector for all dimensions must be the same (longer vectors","will be truncated)."].join(" ")},displayindex:{valType:"integer",role:"info",editType:"calc",description:["The display index of dimension, from left to right, zero indexed, defaults to dimension","index."].join(" ")},editType:"calc",description:"The dimensions (variables) of the parallel categories diagram.",visible:{valType:"boolean",dflt:!0,role:"info",editType:"calc",description:"Shows the dimension when set to `true` (the default). Hides the dimension for `false`."}},line:c,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,role:"info",editType:"calc",description:["The number of observations represented by each state. Defaults to 1 so that each state represents","one observation"].join(" ")},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},79935:(e,t,o)=>{"use strict";var r=o(67763).a0,n=o(96750),a="parcats";t.name=a,t.plot=function(e,t,o,i){var l=r(e.calcdata,a);if(l.length){var s=l[0];n(e,s,o,i)}},t.clean=function(e,t,o,r){var n=r._has&&r._has("parcats"),a=t._has&&t._has("parcats");n&&!a&&r._paperdiv.selectAll(".parcats").remove()}},4946:(e,t,o)=>{"use strict";var r=o(77715).wrap,n=o(88003).hasColorscale,a=o(90336),i=o(76898),l=o(84474),s=o(34141);function c(e,t,o){e.valueInds.push(t),e.count+=o}function d(e,t,o){return{categoryInds:e,color:t,rawColor:o,valueInds:[],count:0}}function p(e,t,o){e.valueInds.push(t),e.count+=o}e.exports=function(e,t){var o=s.filterVisible(t.dimensions);if(0===o.length)return[];var u,h,f,m=o.map((function(e){var t;return"trace"===e.categoryorder?t=null:"array"===e.categoryorder?t=e.categoryarray:(t=i(e.values).sort(),"category descending"===e.categoryorder&&(t=t.reverse())),function(e,t){t=null==t?[]:t.map((function(e){return e}));var o={},r={},n=[];t.forEach((function(e,t){o[e]=0,r[e]=t}));for(var a=0;a<e.length;a++){var i,l=e[a];void 0===o[l]?(o[l]=1,i=t.push(l)-1,r[l]=i):(o[l]++,i=r[l]),n.push(i)}var s=t.map((function(e){return o[e]}));return{uniqueValues:t,uniqueCounts:s,inds:n}}(e.values,t)}));u=s.isArrayOrTypedArray(t.counts)?t.counts:[t.counts],function(e){var t,o=e.map((function(e){return e.displayindex}));if(function(e){for(var t=new Array(e.length),o=0;o<e.length;o++){if(e[o]<0||e[o]>=e.length)return!1;if(void 0!==t[e[o]])return!1;t[e[o]]=!0}return!0}(o))for(t=0;t<e.length;t++)e[t]._displayindex=e[t].displayindex;else for(t=0;t<e.length;t++)e[t]._displayindex=t}(o),o.forEach((function(e,t){!function(e,t){e._categoryarray=t.uniqueValues,null===e.ticktext||void 0===e.ticktext?e._ticktext=[]:e._ticktext=e.ticktext.slice();for(var o=e._ticktext.length;o<t.uniqueValues.length;o++)e._ticktext.push(t.uniqueValues[o])}(e,m[t])}));var y,g=t.line;g?(n(t,"line")&&a(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),y=l.tryColorscale(g)):y=s.identity;var v,w,b,I,x,M=o[0].values.length,V={},k=m.map((function(e){return e.inds}));for(f=0,v=0;v<M;v++){var D=[];for(w=0;w<k.length;w++)D.push(k[w][v]);h=u[v%u.length],f+=h;var C=(b=v,I=void 0,x=void 0,s.isArrayOrTypedArray(g.color)?x=I=g.color[b%g.color.length]:I=g.color,{color:y(I),rawColor:x}),T=D+"-"+C.rawColor;void 0===V[T]&&(V[T]=d(D,C.color,C.rawColor)),p(V[T],v,h)}var _,A=o.map((function(e,t){return function(e,t,o,r,n){return{dimensionInd:e,containerInd:t,displayInd:o,dimensionLabel:r,count:n,categories:[],dragX:null}}(t,e._index,e._displayindex,e.label,f)}));for(v=0;v<M;v++)for(h=u[v%u.length],w=0;w<A.length;w++){var S=A[w].containerInd,L=m[w].inds[v],O=A[w].categories;if(void 0===O[L]){var j=t.dimensions[S]._categoryarray[L],N=t.dimensions[S]._ticktext[L];O[L]={dimensionInd:w,categoryInd:_=L,categoryValue:j,displayInd:_,categoryLabel:N,valueInds:[],count:0,dragY:null}}c(O[L],v,h)}return r(function(e,t,o){var r=e.map((function(e){return e.categories.length})).reduce((function(e,t){return Math.max(e,t)}));return{dimensions:e,paths:t,trace:void 0,maxCats:r,count:o}}(A,V,f))}},23662:(e,t,o)=>{"use strict";var r=o(34141),n=o(88003).hasColorscale,a=o(62252),i=o(72910).c,l=o(69337),s=o(86731),c=o(78312);function d(e,t){function o(o,n){return r.coerce(e,t,s.dimensions,o,n)}var n=o("values"),a=o("visible");if(n&&n.length||(a=t.visible=!1),a){o("label"),o("displayindex",t._index);var i,l=e.categoryarray,c=Array.isArray(l)&&l.length>0;c&&(i="array");var d=o("categoryorder",i);"array"===d?(o("categoryarray"),o("ticktext")):(delete e.categoryarray,delete e.ticktext),c||"array"!==d||(t.categoryorder="trace")}}e.exports=function(e,t,o,p){function u(o,n){return r.coerce(e,t,s,o,n)}var h=l(e,t,{name:"dimensions",handleItemDefaults:d}),f=function(e,t,o,i,l){l("line.shape"),l("line.hovertemplate");var s=l("line.color",i.colorway[0]);if(n(e,"line")&&r.isArrayOrTypedArray(s)){if(s.length)return l("line.colorscale"),a(e,t,i,l,{prefix:"line.",cLetter:"c"}),s.length;t.line.color=o}return 1/0}(e,t,o,p,u);i(t,p,u),Array.isArray(h)&&h.length||(t.visible=!1),c(t,h,"values",f),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var m={family:p.font.family,size:Math.round(p.font.size),color:p.font.color};r.coerceFont(u,"labelfont",m);var y={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};r.coerceFont(u,"tickfont",y)}},72281:(e,t,o)=>{"use strict";e.exports={attributes:o(86731),supplyDefaults:o(23662),calc:o(4946),plot:o(96750),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:o(79935),categories:["noOpacity"],meta:{description:["Parallel categories diagram for multidimensional categorical data."].join(" ")}}},28176:(e,t,o)=>{"use strict";var r=o(15078),n=o(82264),a=o(87529),i=o(34141),l=o(84474),s=o(17621),c=o(8666);function d(e,t,o,n){var a=e.map(N.bind(0,t,o)),s=n.selectAll("g.parcatslayer").data([null]);s.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var d=s.selectAll("g.trace.parcats").data(a,p),y=d.enter().append("g").attr("class","trace parcats");d.attr("transform",(function(e){return"translate("+e.x+", "+e.y+")"})),y.append("g").attr("class","paths");var g=d.select("g.paths").selectAll("path.path").data((function(e){return e.paths}),p);g.attr("fill",(function(e){return e.model.color}));var b=g.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",(function(e){return e.model.color})).attr("fill-opacity",0);w(b),g.attr("d",(function(e){return e.svgD})),b.empty()||g.sort(h),g.exit().remove(),g.on("mouseover",f).on("mouseout",m).on("click",v),y.append("g").attr("class","dimensions");var M=d.select("g.dimensions").selectAll("g.dimension").data((function(e){return e.dimensions}),p);M.enter().append("g").attr("class","dimension"),M.attr("transform",(function(e){return"translate("+e.x+", 0)"})),M.exit().remove();var V=M.selectAll("g.category").data((function(e){return e.categories}),p),k=V.enter().append("g").attr("class","category");V.attr("transform",(function(e){return"translate(0, "+e.y+")"})),k.append("rect").attr("class","catrect").attr("pointer-events","none"),V.select("rect.catrect").attr("fill","none").attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height})),I(k);var D=V.selectAll("rect.bandrect").data((function(e){return e.bands}),p);D.each((function(){i.raiseToTop(this)})),D.attr("fill",(function(e){return e.color}));var L=D.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",(function(e){return e.color})).attr("fill-opacity",0);D.attr("fill",(function(e){return e.color})).attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height})).attr("y",(function(e){return e.y})).attr("cursor",(function(e){return"fixed"===e.parcatsViewModel.arrangement?"default":"perpendicular"===e.parcatsViewModel.arrangement?"ns-resize":"move"})),x(L),D.exit().remove(),k.append("text").attr("class","catlabel").attr("pointer-events","none");var O=t._fullLayout.paper_bgcolor;V.select("text.catlabel").attr("text-anchor",(function(e){return u(e)?"start":"end"})).attr("alignment-baseline","middle").style("text-shadow",O+" -1px  1px 2px, "+O+" 1px  1px 2px, "+O+"  1px -1px 2px, "+O+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",(function(e){return u(e)?e.width+5:-5})).attr("y",(function(e){return e.height/2})).text((function(e){return e.model.categoryLabel})).each((function(e){l.font(r.select(this),e.parcatsViewModel.categorylabelfont),c.convertToTspans(r.select(this),t)})),k.append("text").attr("class","dimlabel"),V.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",(function(e){return"fixed"===e.parcatsViewModel.arrangement?"default":"ew-resize"})).attr("x",(function(e){return e.width/2})).attr("y",-5).text((function(e,t){return 0===t?e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel:null})).each((function(e){l.font(r.select(this),e.parcatsViewModel.labelfont)})),V.selectAll("rect.bandrect").on("mouseover",C).on("mouseout",T),V.exit().remove(),M.call(r.behavior.drag().origin((function(e){return{x:e.x,y:0}})).on("dragstart",_).on("drag",A).on("dragend",S)),d.each((function(e){e.traceSelection=r.select(this),e.pathSelection=r.select(this).selectAll("g.paths").selectAll("path.path"),e.dimensionSelection=r.select(this).selectAll("g.dimensions").selectAll("g.dimension")})),d.exit().remove()}function p(e){return e.key}function u(e){var t=e.parcatsViewModel.dimensions.length,o=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===o}function h(e,t){return e.model.rawColor>t.model.rawColor?1:e.model.rawColor<t.model.rawColor?-1:0}function f(e){if(!e.parcatsViewModel.dragDimension&&-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){i.raiseToTop(this),b(r.select(this));var t=y(e),o=g(e);if(e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:t,event:r.event,constraints:o}),-1===e.parcatsViewModel.hoverinfoItems.indexOf("none")){var n,l,c,d=r.mouse(this)[0],p=e.parcatsViewModel.graphDiv,u=e.parcatsViewModel.trace,h=p._fullLayout,f=h._paperdiv.node().getBoundingClientRect(),m=e.parcatsViewModel.graphDiv.getBoundingClientRect();for(c=0;c<e.leftXs.length-1;c++)if(e.leftXs[c]+e.dimWidths[c]-2<=d&&d<=e.leftXs[c+1]+2){var v=e.parcatsViewModel.dimensions[c],w=e.parcatsViewModel.dimensions[c+1];n=(v.x+v.width+w.x)/2,l=(e.topYs[c]+e.topYs[c+1]+e.height)/2;break}var I=e.parcatsViewModel.x+n,x=e.parcatsViewModel.y+l,M=s.mostReadable(e.model.color,["black","white"]),V=e.model.count,k=V/e.parcatsViewModel.model.count,D={countLabel:V,probabilityLabel:k.toFixed(3)},C=[];-1!==e.parcatsViewModel.hoverinfoItems.indexOf("count")&&C.push(["Count:",D.countLabel].join(" ")),-1!==e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&C.push(["P:",D.probabilityLabel].join(" "));var T=C.join("<br>"),_=r.mouse(p)[0];a.loneHover({trace:u,x:I-f.left+m.left,y:x-f.top+m.top,text:T,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:M,idealAlign:_<I?"right":"left",hovertemplate:(u.line||{}).hovertemplate,hovertemplateLabels:D,eventData:[{data:u._input,fullData:u,count:V,probability:k}]},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:p})}}}function m(e){if(!e.parcatsViewModel.dragDimension&&(w(r.select(this)),a.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),e.parcatsViewModel.pathSelection.sort(h),-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var t=y(e),o=g(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:r.event,constraints:o})}}function y(e){for(var t=[],o=L(e.parcatsViewModel),r=0;r<e.model.valueInds.length;r++){var n=e.model.valueInds[r];t.push({curveNumber:o,pointNumber:n})}return t}function g(e){for(var t={},o=e.parcatsViewModel.model.dimensions,r=0;r<o.length;r++){var n=o[r],a=n.categories[e.model.categoryInds[r]];t[n.containerInd]=a.categoryValue}return void 0!==e.model.rawColor&&(t.color=e.model.rawColor),t}function v(e){if(-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){var t=y(e),o=g(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:r.event,constraints:o})}}function w(e){e.attr("fill",(function(e){return e.model.color})).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function b(e){e.attr("fill-opacity",.8).attr("stroke",(function(e){return s.mostReadable(e.model.color,["black","white"])})).attr("stroke-width",.3)}function I(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function x(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function M(e){var t=e.parcatsViewModel.pathSelection,o=e.categoryViewModel.model.dimensionInd,r=e.categoryViewModel.model.categoryInd;return t.filter((function(t){return t.model.categoryInds[o]===r&&t.model.color===e.color}))}function V(e,t,o){var n=r.select(e).datum(),a=n.categoryViewModel.model,i=n.parcatsViewModel.graphDiv,l=r.select(e.parentNode).selectAll("rect.bandrect"),s=[];l.each((function(e){M(e).each((function(e){Array.prototype.push.apply(s,y(e))}))}));var c={};c[a.dimensionInd]=a.categoryValue,i.emit(t,{points:s,event:o,constraints:c})}function k(e,t,o){var n=r.select(e).datum(),a=n.categoryViewModel.model,i=n.parcatsViewModel.graphDiv,l=M(n),s=[];l.each((function(e){Array.prototype.push.apply(s,y(e))}));var c={};c[a.dimensionInd]=a.categoryValue,void 0!==n.rawColor&&(c.color=n.rawColor),i.emit(t,{points:s,event:o,constraints:c})}function D(e,t){var o,n,a=r.select(t.parentNode).select("rect.catrect"),i=a.node().getBoundingClientRect(),l=a.datum(),s=l.parcatsViewModel,c=s.model.dimensions[l.model.dimensionInd],d=s.trace,p=i.top+i.height/2;s.dimensions.length>1&&c.displayInd===s.dimensions.length-1?(o=i.left,n="left"):(o=i.left+i.width,n="right");var u=l.model.count,h=l.model.categoryLabel,f=u/l.parcatsViewModel.model.count,m={countLabel:u,categoryLabel:h,probabilityLabel:f.toFixed(3)},y=[];-1!==l.parcatsViewModel.hoverinfoItems.indexOf("count")&&y.push(["Count:",m.countLabel].join(" ")),-1!==l.parcatsViewModel.hoverinfoItems.indexOf("probability")&&y.push(["P("+m.categoryLabel+"):",m.probabilityLabel].join(" "));var g=y.join("<br>");return{trace:d,x:o-e.left,y:p-e.top,text:g,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:n,hovertemplate:d.hovertemplate,hovertemplateLabels:m,eventData:[{data:d._input,fullData:d,count:u,category:h,probability:f}]}}function C(e){if(!e.parcatsViewModel.dragDimension&&-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(r.mouse(this)[1]<-1)return;var t,o=e.parcatsViewModel.graphDiv,n=o._fullLayout,l=n._paperdiv.node().getBoundingClientRect(),c=e.parcatsViewModel.hoveron,d=this;"color"===c?(function(e){var t=r.select(e).datum(),o=M(t);b(o),o.each((function(){i.raiseToTop(this)})),r.select(e.parentNode).selectAll("rect.bandrect").filter((function(e){return e.color===t.color})).each((function(){i.raiseToTop(this),r.select(this).attr("stroke","black").attr("stroke-width",1.5)}))}(d),k(d,"plotly_hover",r.event)):(function(e){r.select(e.parentNode).selectAll("rect.bandrect").each((function(e){var t=M(e);b(t),t.each((function(){i.raiseToTop(this)}))})),r.select(e.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(d),V(d,"plotly_hover",r.event)),-1===e.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===c?t=D(l,d):"color"===c?t=function(e,t){var o,n,a=t.getBoundingClientRect(),i=r.select(t).datum(),l=i.categoryViewModel,c=l.parcatsViewModel,d=c.model.dimensions[l.model.dimensionInd],p=c.trace,u=a.y+a.height/2;c.dimensions.length>1&&d.displayInd===c.dimensions.length-1?(o=a.left,n="left"):(o=a.left+a.width,n="right");var h=l.model.categoryLabel,f=i.parcatsViewModel.model.count,m=0;i.categoryViewModel.bands.forEach((function(e){e.color===i.color&&(m+=e.count)}));var y=l.model.count,g=0;c.pathSelection.each((function(e){e.model.color===i.color&&(g+=e.model.count)}));var v=m/f,w=m/g,b=m/y,I={countLabel:f,categoryLabel:h,probabilityLabel:v.toFixed(3)},x=[];-1!==l.parcatsViewModel.hoverinfoItems.indexOf("count")&&x.push(["Count:",I.countLabel].join(" ")),-1!==l.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(x.push("P(color âˆ© "+h+"): "+I.probabilityLabel),x.push("P("+h+" | color): "+w.toFixed(3)),x.push("P(color | "+h+"): "+b.toFixed(3)));var M=x.join("<br>"),V=s.mostReadable(i.color,["black","white"]);return{trace:p,x:o-e.left,y:u-e.top,text:M,color:i.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:V,fontSize:10,idealAlign:n,hovertemplate:p.hovertemplate,hovertemplateLabels:I,eventData:[{data:p._input,fullData:p,category:h,count:f,probability:v,categorycount:y,colorcount:g,bandcolorcount:m}]}}(l,d):"dimension"===c&&(t=function(e,t){var o=[];return r.select(t.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each((function(){o.push(D(e,this))})),o}(l,d)),t&&a.loneHover(t,{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:o}))}}function T(e){var t=e.parcatsViewModel;t.dragDimension||(w(t.pathSelection),I(t.dimensionSelection.selectAll("g.category")),x(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),a.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node()),t.pathSelection.sort(h),-1!==t.hoverinfoItems.indexOf("skip"))||("color"===e.parcatsViewModel.hoveron?k(this,"plotly_unhover",r.event):V(this,"plotly_unhover",r.event))}function _(e){"fixed"!==e.parcatsViewModel.arrangement&&(e.dragDimensionDisplayInd=e.model.displayInd,e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map((function(e){return e.displayInd})),e.dragHasMoved=!1,e.dragCategoryDisplayInd=null,r.select(this).selectAll("g.category").select("rect.catrect").each((function(t){var o=r.mouse(this)[0],n=r.mouse(this)[1];-2<=o&&o<=t.width+2&&-2<=n&&n<=t.height+2&&(e.dragCategoryDisplayInd=t.model.displayInd,e.initialDragCategoryDisplayInds=e.model.categories.map((function(e){return e.displayInd})),t.model.dragY=t.y,i.raiseToTop(this.parentNode),r.select(this.parentNode).selectAll("rect.bandrect").each((function(t){t.y<n&&n<=t.y+t.height&&(e.potentialClickBand=this)})))})),e.parcatsViewModel.dragDimension=e,a.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function A(e){if("fixed"!==e.parcatsViewModel.arrangement&&(e.dragHasMoved=!0,null!==e.dragDimensionDisplayInd)){var t=e.dragDimensionDisplayInd,o=t-1,n=t+1,a=e.parcatsViewModel.dimensions[t];if(null!==e.dragCategoryDisplayInd){var i=a.categories[e.dragCategoryDisplayInd];i.model.dragY+=r.event.dy;var l=i.model.dragY,s=i.model.displayInd,c=a.categories,d=c[s-1],p=c[s+1];void 0!==d&&l<d.y+d.height/2&&(i.model.displayInd=d.model.displayInd,d.model.displayInd=s),void 0!==p&&l+i.height>p.y+p.height/2&&(i.model.displayInd=p.model.displayInd,p.model.displayInd=s),e.dragCategoryDisplayInd=i.model.displayInd}if(null===e.dragCategoryDisplayInd||"freeform"===e.parcatsViewModel.arrangement){a.model.dragX=r.event.x;var u=e.parcatsViewModel.dimensions[o],h=e.parcatsViewModel.dimensions[n];void 0!==u&&a.model.dragX<u.x+u.width&&(a.model.displayInd=u.model.displayInd,u.model.displayInd=t),void 0!==h&&a.model.dragX+a.width>h.x&&(a.model.displayInd=h.model.displayInd,h.model.displayInd=e.dragDimensionDisplayInd),e.dragDimensionDisplayInd=a.model.displayInd}F(e.parcatsViewModel),B(e.parcatsViewModel),j(e.parcatsViewModel),O(e.parcatsViewModel)}}function S(e){if("fixed"!==e.parcatsViewModel.arrangement&&null!==e.dragDimensionDisplayInd){r.select(this).selectAll("text").attr("font-weight","normal");var t={},o=L(e.parcatsViewModel),a=e.parcatsViewModel.model.dimensions.map((function(e){return e.displayInd})),i=e.initialDragDimensionDisplayInds.some((function(e,t){return e!==a[t]}));i&&a.forEach((function(o,r){var n=e.parcatsViewModel.model.dimensions[r].containerInd;t["dimensions["+n+"].displayindex"]=o}));var l=!1;if(null!==e.dragCategoryDisplayInd){var s=e.model.categories.map((function(e){return e.displayInd}));if(l=e.initialDragCategoryDisplayInds.some((function(e,t){return e!==s[t]}))){var c=e.model.categories.slice().sort((function(e,t){return e.displayInd-t.displayInd})),d=c.map((function(e){return e.categoryValue})),p=c.map((function(e){return e.categoryLabel}));t["dimensions["+e.model.containerInd+"].categoryarray"]=[d],t["dimensions["+e.model.containerInd+"].ticktext"]=[p],t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}}-1===e.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!e.dragHasMoved&&e.potentialClickBand&&("color"===e.parcatsViewModel.hoveron?k(e.potentialClickBand,"plotly_click",r.event.sourceEvent):V(e.potentialClickBand,"plotly_click",r.event.sourceEvent)),e.model.dragX=null,null!==e.dragCategoryDisplayInd&&(e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd].model.dragY=null,e.dragCategoryDisplayInd=null),e.dragDimensionDisplayInd=null,e.parcatsViewModel.dragDimension=null,e.dragHasMoved=null,e.potentialClickBand=null,F(e.parcatsViewModel),B(e.parcatsViewModel),r.transition().duration(300).ease("cubic-in-out").each((function(){j(e.parcatsViewModel,!0),O(e.parcatsViewModel,!0)})).each("end",(function(){(i||l)&&n.restyle(e.parcatsViewModel.graphDiv,t,[o])}))}}function L(e){for(var t,o=e.graphDiv._fullData,r=0;r<o.length;r++)if(e.key===o[r].uid){t=r;break}return t}function O(e,t){var o;void 0===t&&(t=!1),e.pathSelection.data((function(e){return e.paths}),p),(o=e.pathSelection,t?o.transition():o).attr("d",(function(e){return e.svgD}))}function j(e,t){function o(e){return t?e.transition():e}void 0===t&&(t=!1),e.dimensionSelection.data((function(e){return e.dimensions}),p);var n=e.dimensionSelection.selectAll("g.category").data((function(e){return e.categories}),p);o(e.dimensionSelection).attr("transform",(function(e){return"translate("+e.x+", 0)"})),o(n).attr("transform",(function(e){return"translate(0, "+e.y+")"})),n.select(".dimlabel").text((function(e,t){return 0===t?e.parcatsViewModel.model.dimensions[e.model.dimensionInd].dimensionLabel:null})),n.select(".catlabel").attr("text-anchor",(function(e){return u(e)?"start":"end"})).attr("x",(function(e){return u(e)?e.width+5:-5})).each((function(e){var t,o;u(e)?(t=e.width+5,o="start"):(t=-5,o="end"),r.select(this).selectAll("tspan").attr("x",t).attr("text-anchor",o)}));var a=n.selectAll("rect.bandrect").data((function(e){return e.bands}),p),l=a.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",(function(e){return e.color})).attr("fill-opacity",0);a.attr("fill",(function(e){return e.color})).attr("width",(function(e){return e.width})).attr("height",(function(e){return e.height})).attr("y",(function(e){return e.y})),x(l),a.each((function(){i.raiseToTop(this)})),a.exit().remove()}function N(e,t,o){var r,n=o[0],a=t.margin||{l:80,r:80,t:100,b:80},i=n.trace,l=i.domain,s=t.width,c=t.height,d=Math.floor(s*(l.x[1]-l.x[0])),p=Math.floor(c*(l.y[1]-l.y[0])),u=l.x[0]*s+a.l,h=t.height-l.y[1]*t.height+a.t,f=i.line.shape;r="all"===i.hoverinfo?["count","probability"]:(i.hoverinfo||"").split("+");var m={trace:i,key:i.uid,model:n,x:u,y:h,width:d,height:p,hoveron:i.hoveron,hoverinfoItems:r,arrangement:i.arrangement,bundlecolors:i.bundlecolors,sortpaths:i.sortpaths,labelfont:i.labelfont,categorylabelfont:i.tickfont,pathShape:f,dragDimension:null,margin:a,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};return n.dimensions&&(F(m),B(m)),m}function z(e,t,o,n,a){var i,l,s=[],c=[];for(l=0;l<o.length-1;l++)i=r.interpolateNumber(o[l]+e[l],e[l+1]),s.push(i(a)),c.push(i(1-a));var d="M "+e[0]+","+t[0];for(d+="l"+o[0]+",0 ",l=1;l<o.length;l++)d+="C"+s[l-1]+","+t[l-1]+" "+c[l-1]+","+t[l]+" "+e[l]+","+t[l],d+="l"+o[l]+",0 ";for(d+="l0,"+n+" ",d+="l -"+o[o.length-1]+",0 ",l=o.length-2;l>=0;l--)d+="C"+c[l]+","+(t[l+1]+n)+" "+s[l]+","+(t[l]+n)+" "+(e[l]+o[l])+","+(t[l]+n),d+="l-"+o[l]+",0 ";return d+"Z"}function B(e){var t=e.dimensions,o=e.model,r=t.map((function(e){return e.categories.map((function(e){return e.y}))})),n=e.model.dimensions.map((function(e){return e.categories.map((function(e){return e.displayInd}))})),a=e.model.dimensions.map((function(e){return e.displayInd})),i=e.dimensions.map((function(e){return e.model.dimensionInd})),l=t.map((function(e){return e.x})),s=t.map((function(e){return e.width})),c=[];for(var d in o.paths)o.paths.hasOwnProperty(d)&&c.push(o.paths[d]);function p(e){var t=e.categoryInds.map((function(e,t){return n[t][e]}));return i.map((function(e){return t[e]}))}c.sort((function(t,o){var r=p(t),n=p(o);return"backward"===e.sortpaths&&(r.reverse(),n.reverse()),r.push(t.valueInds[0]),n.push(o.valueInds[0]),e.bundlecolors&&(r.unshift(t.rawColor),n.unshift(o.rawColor)),r<n?-1:r>n?1:0}));for(var u=new Array(c.length),h=t[0].model.count,f=t[0].categories.map((function(e){return e.height})).reduce((function(e,t){return e+t})),m=0;m<c.length;m++){var y,g=c[m];y=h>0?f*(g.count/h):0;for(var v,w=new Array(r.length),b=0;b<g.categoryInds.length;b++){var I=g.categoryInds[b],x=n[b][I],M=a[b];w[M]=r[M][x],r[M][x]+=y;var V=e.dimensions[M].categories[x],k=V.bands.length,D=V.bands[k-1];if(void 0===D||g.rawColor!==D.rawColor){var C=void 0===D?0:D.y+D.height;V.bands.push({key:C,color:g.color,rawColor:g.rawColor,height:y,width:V.width,count:g.count,y:C,categoryViewModel:V,parcatsViewModel:e})}else{var T=V.bands[k-1];T.height+=y,T.count+=g.count}}v="hspline"===e.pathShape?z(l,w,s,y,.5):z(l,w,s,y,0),u[m]={key:g.valueInds[0],model:g,height:y,leftXs:l,topYs:w,dimWidths:s,svgD:v,parcatsViewModel:e}}e.paths=u}function F(e){var t=e.model.dimensions.map((function(e){return{displayInd:e.displayInd,dimensionInd:e.dimensionInd}}));t.sort((function(e,t){return e.displayInd-t.displayInd}));var o=[];for(var r in t){var n=t[r].dimensionInd,a=e.model.dimensions[n];o.push(X(e,a))}e.dimensions=o}function X(e,t){var o,r=e.model.dimensions.length,n=t.displayInd;o=40+(r>1?(e.width-80-16)/(r-1):0)*n;var a,i,l,s,c,d=[],p=e.model.maxCats,u=t.categories.length,h=t.count,f=e.height-8*(p-1),m=8*(p-u)/2,y=t.categories.map((function(e){return{displayInd:e.displayInd,categoryInd:e.categoryInd}}));for(y.sort((function(e,t){return e.displayInd-t.displayInd})),c=0;c<u;c++)s=y[c].categoryInd,i=t.categories[s],a=h>0?i.count/h*f:0,l={key:i.valueInds[0],model:i,width:16,height:a,y:null!==i.dragY?i.dragY:m,bands:[],parcatsViewModel:e},m=m+a+8,d.push(l);return{key:t.dimensionInd,x:null!==t.dragX?t.dragX:o,y:0,width:16,model:t,categories:d,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}e.exports=function(e,t,o,r){d(o,e,r,t)}},96750:(e,t,o)=>{"use strict";var r=o(28176);e.exports=function(e,t,o,n){var a=e._fullLayout,i=a._paper,l=a._size;r(e,i,t,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},o,n)}}}]);