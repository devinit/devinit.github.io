(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[5472],{73758:e=>{e.exports=function(e,t){var r="number"==typeof e,a="number"==typeof t;r&&!a?(t=e,e=0):r||a||(e=0,t=0);var i=(t|=0)-(e|=0);if(i<0)throw new Error("array length must be positive");for(var s=new Array(i),o=0,n=e;o<i;o++,n++)s[o]=n;return s}},75:function(e){(function(){var t,r,a,i,s,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-s)/1e6},r=process.hrtime,i=(t=function(){var e;return 1e9*(e=r())[0]+e[1]})(),o=1e9*process.uptime(),s=i-o):Date.now?(e.exports=function(){return Date.now()-a},a=Date.now()):(e.exports=function(){return(new Date).getTime()-a},a=(new Date).getTime())}).call(this)},15472:(e,t,r)=>{"use strict";e.exports=r(45064)},96518:(e,t,r)=>{"use strict";var a=r(15451),i=r(85088),s=r(88176).f,o=r(45924),n=r(77212).idRegex,l=r(18882).templatedArray,d=r(94867).extendFlat,c=a.marker,p=c.line,u=d(i("marker.line",{editTypeOverride:"calc"}),{width:d({},p.width,{editType:"calc"}),editType:"calc"}),h=d(i("marker"),{symbol:c.symbol,size:d({},c.size,{editType:"markerSize"}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:c.opacity,colorbar:c.colorbar,line:u,editType:"calc"});function f(e){return{valType:"info_array",freeLength:!0,role:"info",editType:"calc",items:{valType:"subplotid",regex:n[e],editType:"plot"},description:["Sets the list of "+e+" axes","corresponding to dimensions of this splom trace.","By default, a splom will match the first N "+e+"axes","where N is the number of input dimensions.","Note that, in case where `diagonal.visible` is false and `showupperhalf`","or `showlowerhalf` is false, this splom trace will generate","one less x-axis and one less y-axis."].join(" ")}}h.color.editType=h.cmin.editType=h.cmax.editType="style",e.exports={dimensions:l("dimension",{visible:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not this dimension is shown on the graph.","Note that even visible false dimension contribute to the","default grid generate by this splom trace."].join(" ")},label:{valType:"string",role:"info",editType:"calc",description:"Sets the label corresponding to this splom dimension."},values:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the dimension values to be plotted."},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],role:"info",editType:"calc+clearAxisTypes",description:["Sets the axis type for this dimension's generated","x and y axes.","Note that the axis `type` values set in layout take","precedence over this attribute."].join(" ")},matches:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not the x & y axes generated by this","dimension match.","Equivalent to setting the `matches` axis attribute in the layout","with the correct axis id."].join(" ")},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:d({},o.text,{description:["Sets text elements associated with each (x,y) pair to appear on hover.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates."].join(" ")}),hovertext:d({},o.hovertext,{description:"Same as `text`."}),hovertemplate:s(),marker:h,xaxes:f("x"),yaxes:f("y"),diagonal:{visible:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the diagonal are displayed."].join(" ")},editType:"calc"},showupperhalf:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the upper half","from the diagonal are displayed."].join(" ")},showlowerhalf:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the lower half","from the diagonal are displayed."].join(" ")},selected:{marker:o.selected.marker,editType:"calc"},unselected:{marker:o.unselected.marker,editType:"calc"},opacity:o.opacity}},48507:(e,t,r)=>{"use strict";var a=r(47758),i=r(97997),s=r(22706),o=r(67763).a0,n=r(8095),l=r(44790).getFromId,d=r(34682).shouldShowZeroLine,c="splom";function p(e,t,r){for(var a=r.matrixOptions.data.length,i=t._visibleDims,s=r.viewOpts.ranges=new Array(a),o=0;o<i.length;o++){var n=i[o],d=s[o]=new Array(4),c=l(e,t._diag[n][0]);c&&(d[0]=c.r2l(c.range[0]),d[2]=c.r2l(c.range[1]));var p=l(e,t._diag[n][1]);p&&(d[1]=p.r2l(p.range[0]),d[3]=p.r2l(p.range[1]))}r.selectBatch.length||r.unselectBatch.length?r.matrix.update({ranges:s},{ranges:s}):r.matrix.update({ranges:s})}function u(e){var t=e._fullLayout,r=t._glcanvas.data()[0].regl,i=t._splomGrid;i||(i=t._splomGrid=a(r)),i.update(function(e){var t,r=e._fullLayout,a=r._size,i=[0,0,r.width,r.height],s={};function o(e,t,r,a,o,n){var l=t[e+"color"],d=t[e+"width"],c=String(l+d);c in s?s[c].data.push(NaN,NaN,r,a,o,n):s[c]={data:[r,a,o,n],join:"rect",thickness:d,color:l,viewport:i,range:i,overlay:!1}}for(t in r._splomSubplots){var n,l,c=r._plots[t],p=c.xaxis,u=c.yaxis,h=p._gridVals,f=u._gridVals,m=a.b+u.domain[0]*a.h,g=-u._m,y=-g*u.r2l(u.range[0],u.calendar);if(p.showgrid)for(t=0;t<h.length;t++)n=p._offset+p.l2p(h[t].x),o("grid",p,n,m,n,m+u._length);if(u.showgrid)for(t=0;t<f.length;t++)l=m+y+g*f[t].x,o("grid",u,p._offset,l,p._offset+p._length,l);d(e,p,u)&&(n=p._offset+p.l2p(0),o("zeroline",p,n,m,n,m+u._length)),d(e,u,p)&&(l=m+y+0,o("zeroline",u,p._offset,l,p._offset+p._length,l))}var x=[];for(t in s)x.push(s[t]);return x}(e))}e.exports={name:c,attr:n.attr,attrRegex:n.attrRegex,layoutAttributes:n.layoutAttributes,supplyLayoutDefaults:n.supplyLayoutDefaults,drawFramework:n.drawFramework,plot:function(e){var t=e._fullLayout,r=i.getModule(c),a=o(e.calcdata,r)[0];s(e,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(t._hasOnlyLargeSploms&&u(e),r.plot(e,{},a))},drag:function(e){var t=e.calcdata,r=e._fullLayout;r._hasOnlyLargeSploms&&u(e);for(var a=0;a<t.length;a++){var i=t[a][0].trace,s=r._splomScenes[i.uid];"splom"===i.type&&s&&s.matrix&&p(e,i,s)}},updateGrid:u,clean:function(e,t,r,a){var i,s={};if(a._splomScenes){for(i=0;i<e.length;i++){var o=e[i];"splom"===o.type&&(s[o.uid]=1)}for(i=0;i<r.length;i++){var l=r[i];if(!s[l.uid]){var d=a._splomScenes[l.uid];d&&d.destroy&&d.destroy(),a._splomScenes[l.uid]=null,delete a._splomScenes[l.uid]}}}0===Object.keys(a._splomScenes||{}).length&&delete a._splomScenes,a._splomGrid&&!t._hasOnlyLargeSploms&&a._hasOnlyLargeSploms&&(a._splomGrid.destroy(),a._splomGrid=null,delete a._splomGrid),n.clean(e,t,r,a)},updateFx:n.updateFx,toSVG:n.toSVG}},13606:(e,t,r)=>{"use strict";var a=r(34141),i=r(44790),s=r(52006).calcMarkerSize,o=r(52006).calcAxisExpansion,n=r(39764),l=r(25709).markerSelection,d=r(25709).markerStyle,c=r(99517),p=r(45020).BADNUM,u=r(90519).TOO_MANY_POINTS;e.exports=function(e,t){var r,h,f,m,g,y,x=t.dimensions,v=t._length,w={},b=w.cdata=[],_=w.data=[],S=t._visibleDims=[];function k(e,r){for(var i=e.makeCalcdata({v:r.values,vcalendar:t.calendar},"v"),s=0;s<i.length;s++)i[s]=i[s]===p?NaN:i[s];b.push(i),_.push("log"===e.type?a.simpleMap(i,e.c2l):i)}for(r=0;r<x.length;r++)if((f=x[r]).visible){if(m=i.getFromId(e,t._diag[r][0]),g=i.getFromId(e,t._diag[r][1]),m&&g&&m.type!==g.type){a.log("Skipping splom dimension "+r+" with conflicting axis types");continue}m?(k(m,f),g&&"category"===g.type&&(g._categories=m._categories.slice())):k(g,f),S.push(r)}for(n(e,t),a.extendFlat(w,d(t)),y=b.length*v>u?2*(w.sizeAvg||Math.max(w.size,3)):s(t,v),h=0;h<S.length;h++)f=x[r=S[h]],m=i.getFromId(e,t._diag[r][0])||{},g=i.getFromId(e,t._diag[r][1])||{},o(e,t,m,g,b[h],b[h],y);var T=c(e,t);return T.matrix||(T.matrix=!0),T.matrixOptions=w,T.selectedOptions=l(t,t.selected),T.unselectedOptions=l(t,t.unselected),[{x:!1,y:!1,t:{},trace:t}]}},8216:(e,t,r)=>{"use strict";var a=r(34141),i=r(69337),s=r(96518),o=r(32758),n=r(93327),l=r(78312),d=r(78873).isOpenSymbol;function c(e,t){function r(r,i){return a.coerce(e,t,s.dimensions,r,i)}r("label");var i=r("values");i&&i.length?r("visible"):t.visible=!1,r("axis.type"),r("axis.matches")}e.exports=function(e,t,r,p){function u(r,i){return a.coerce(e,t,s,r,i)}var h=i(e,t,{name:"dimensions",handleItemDefaults:c}),f=u("diagonal.visible"),m=u("showupperhalf"),g=u("showlowerhalf");if(l(t,h,"values")&&(f||m||g)){u("text"),u("hovertext"),u("hovertemplate"),n(e,t,r,p,u);var y=d(t.marker.symbol),x=o.isBubble(t);u("marker.line.width",y||x?1:0),function(e,t,r,a){var i,s,o=t.dimensions,n=o.length,l=t.showupperhalf,d=t.showlowerhalf,c=t.diagonal.visible,p=new Array(n),u=new Array(n);for(i=0;i<n;i++){var h=i?i+1:"";p[i]="x"+h,u[i]="y"+h}var f=a("xaxes",p),m=a("yaxes",u),g=t._diag=new Array(n);t._xaxes={},t._yaxes={};var y=[],x=[];function v(e,a,i,s){if(e){var o=e.charAt(0),n=r._splomAxes[o];if(t["_"+o+"axes"][e]=1,s.push(e),!(e in n)){var l=n[e]={};i&&(l.label=i.label||"",i.visible&&i.axis&&(i.axis.type&&(l.type=i.axis.type),i.axis.matches&&(l.matches=a)))}}}var w=!c&&!d,b=!c&&!l;for(t._axesDim={},i=0;i<n;i++){var _=o[i],S=0===i,k=i===n-1,T=S&&w||k&&b?void 0:f[i],z=S&&b||k&&w?void 0:m[i];v(T,z,_,y),v(z,T,_,x),g[i]=[T,z],t._axesDim[T]=i,t._axesDim[z]=i}for(i=0;i<y.length;i++)for(s=0;s<x.length;s++){var A=y[i]+x[s];i>s&&l||i<s&&d?r._splomSubplots[A]=1:i!==s||!c&&d&&l||(r._splomSubplots[A]=1)}(!d||!c&&l&&d)&&(r._splomGridDflt.xside="bottom",r._splomGridDflt.yside="left")}(0,t,p,u),a.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1}},46802:(e,t,r)=>{"use strict";var a=r(34141),i=r(39764),s=r(25709).markerStyle;e.exports=function(e,t){var r=t.trace,o=e._fullLayout._splomScenes[r.uid];if(o){i(e,r),a.extendFlat(o.matrixOptions,s(r));var n=a.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(n,null)}}},53403:(e,t)=>{"use strict";t.getDimIndex=function(e,t){for(var r=t._id,a={x:0,y:1}[r.charAt(0)],i=e._visibleDims,s=0;s<i.length;s++){var o=i[s];if(e._diag[o][a]===r)return s}return!1}},98551:(e,t,r)=>{"use strict";var a=r(53403),i=r(51281).calcHover;e.exports={hoverPoints:function(e,t,r){var s=e.cd[0].trace,o=e.scene.matrixOptions.cdata,n=e.xa,l=e.ya,d=n.c2p(t),c=l.c2p(r),p=e.distance,u=a.getDimIndex(s,n),h=a.getDimIndex(s,l);if(!1===u||!1===h)return[e];for(var f,m,g=o[u],y=o[h],x=p,v=0;v<g.length;v++){var w=g[v],b=y[v],_=n.c2p(w)-d,S=l.c2p(b)-c,k=Math.sqrt(_*_+S*S);k<x&&(x=m=k,f=v)}return e.index=f,e.distance=x,e.dxy=m,void 0===f?[e]:[i(e,g,y,s)]}}},45064:(e,t,r)=>{"use strict";var a=r(97997),i=r(21920);e.exports={moduleType:"trace",name:"splom",basePlotModule:r(48507),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:r(96518),supplyDefaults:r(8216),colorbar:r(62280),calc:r(13606),plot:r(37677),hoverPoints:r(98551).hoverPoints,selectPoints:r(13469),editStyle:r(46802),meta:{description:["Splom traces generate scatter plot matrix visualizations.","Each splom `dimensions` items correspond to a generated axis.","Values for each of those dimensions are set in `dimensions[i].values`.","Splom traces support all `scattergl` marker style attributes.","Specify `layout.grid` attributes and/or layout x-axis and y-axis attributes","for more control over the axis positioning and style. "].join(" ")}},a.register(i)},37677:(e,t,r)=>{"use strict";var a=r(65925),i=r(34141),s=r(44790),o=r(6363).selectMode;function n(e,t){var r,n,l,d,c,p=e._fullLayout,u=p._size,h=t.trace,f=t.t,m=p._splomScenes[h.uid],g=m.matrixOptions,y=g.cdata,x=p._glcanvas.data()[0].regl,v=p.dragmode;if(0!==y.length){g.lower=h.showupperhalf,g.upper=h.showlowerhalf,g.diagonal=h.diagonal.visible;var w=h._visibleDims,b=y.length,_=m.viewOpts={};for(_.ranges=new Array(b),_.domains=new Array(b),c=0;c<w.length;c++){l=w[c];var S=_.ranges[c]=new Array(4),k=_.domains[c]=new Array(4);(r=s.getFromId(e,h._diag[l][0]))&&(S[0]=r._rl[0],S[2]=r._rl[1],k[0]=r.domain[0],k[2]=r.domain[1]),(n=s.getFromId(e,h._diag[l][1]))&&(S[1]=n._rl[0],S[3]=n._rl[1],k[1]=n.domain[0],k[3]=n.domain[1])}_.viewport=[u.l,u.b,u.w+u.l,u.h+u.b],!0===m.matrix&&(m.matrix=a(x));var T=p.clickmode.indexOf("select")>-1,z=!0;if(o(v)||h.selectedpoints||T){var A=h._length;if(h.selectedpoints){m.selectBatch=h.selectedpoints;var O=h.selectedpoints,D={};for(l=0;l<O.length;l++)D[O[l]]=!0;var B=[];for(l=0;l<A;l++)D[l]||B.push(l);m.unselectBatch=B}var F=f.xpx=new Array(b),I=f.ypx=new Array(b);for(c=0;c<w.length;c++){if(l=w[c],r=s.getFromId(e,h._diag[l][0]))for(F[c]=new Array(A),d=0;d<A;d++)F[c][d]=r.c2p(y[c][d]);if(n=s.getFromId(e,h._diag[l][1]))for(I[c]=new Array(A),d=0;d<A;d++)I[c][d]=n.c2p(y[c][d])}if(m.selectBatch.length||m.unselectBatch.length){var L=i.extendFlat({},g,m.unselectedOptions,_),C=i.extendFlat({},g,m.selectedOptions,_);m.matrix.update(L,C),z=!1}}else f.xpx=f.ypx=null;if(z){var N=i.extendFlat({},g,_);m.matrix.update(N,null)}}}e.exports=function(e,t,r){if(r.length)for(var a=0;a<r.length;a++)n(e,r[a][0])}},99517:(e,t,r)=>{"use strict";var a=r(34141);e.exports=function(e,t){var r=e._fullLayout,i=t.uid,s=r._splomScenes;s||(s=r._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},n=s[t.uid];return n||((n=s[i]=a.extendFlat({},o,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){n.matrix&&n.matrix.draw&&(n.selectBatch.length||n.unselectBatch.length?n.matrix.draw(n.unselectBatch,n.selectBatch):n.matrix.draw()),n.dirty=!1},n.destroy=function(){n.matrix&&n.matrix.destroy&&n.matrix.destroy(),n.matrixOptions=null,n.selectBatch=null,n.unselectBatch=null,n=null}),n.dirty||a.extendFlat(n,o),n}},13469:(e,t,r)=>{"use strict";var a=r(34141),i=r(32758),s=r(53403);e.exports=function(e,t){var r=e.cd,o=r[0].trace,n=r[0].t,l=e.scene,d=l.matrixOptions.cdata,c=e.xaxis,p=e.yaxis,u=[];if(!l)return u;var h=!i.hasMarkers(o)&&!i.hasText(o);if(!0!==o.visible||h)return u;var f=s.getDimIndex(o,c),m=s.getDimIndex(o,p);if(!1===f||!1===m)return u;var g=n.xpx[f],y=n.ypx[m],x=d[f],v=d[m],w=[],b=[];if(!1!==t&&!t.degenerate)for(var _=0;_<x.length;_++)t.contains([g[_],y[_]],null,_,e)?(w.push(_),u.push({pointNumber:_,x:x[_],y:v[_]})):b.push(_);var S=l.matrixOptions;return w.length||b.length?l.selectBatch.length||l.unselectBatch.length||l.matrix.update(l.unselectedOptions,a.extendFlat({},S,l.selectedOptions,l.viewOpts)):l.matrix.update(S,null),l.selectBatch=w,l.unselectBatch=b,u}},54087:(e,t,r)=>{for(var a=r(75),i="undefined"==typeof window?r.g:window,s=["moz","webkit"],o="AnimationFrame",n=i["request"+o],l=i["cancel"+o]||i["cancelRequest"+o],d=0;!n&&d<s.length;d++)n=i[s[d]+"Request"+o],l=i[s[d]+"Cancel"+o]||i[s[d]+"CancelRequest"+o];if(!n||!l){var c=0,p=0,u=[];n=function(e){if(0===u.length){var t=a(),r=Math.max(0,16.666666666666668-(t-c));c=r+t,setTimeout((function(){var e=u.slice(0);u.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(r))}return u.push({handle:++p,callback:e,cancelled:!1}),p},l=function(e){for(var t=0;t<u.length;t++)u[t].handle===e&&(u[t].cancelled=!0)}}e.exports=function(e){return n.call(i,e)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=n,e.cancelAnimationFrame=l}},65925:(e,t,r)=>{"use strict";const a=r(89882),i=r(89715),s=r(5369),o=r(54087),n=r(73758),l=r(46882),d=r(38582);function c(e,t){if(!(this instanceof c))return new c(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=a(e),this.canvas=this.scatter.canvas}function p(e,t,r){return(null!=e.id?e.id:e)<<16|(255&t)<<8|255&r}function u(e,t,r){let a,i,s,o,n,l,d,c,p=e[t],u=e[r];return p.length>2?(a=p[0],s=p[2],i=p[1],o=p[3]):p.length?(a=i=p[0],s=o=p[1]):(a=p.x,i=p.y,s=p.x+p.width,o=p.y+p.height),u.length>2?(n=u[0],d=u[2],l=u[1],c=u[3]):u.length?(n=l=u[0],d=c=u[1]):(n=u.x,l=u.y,d=u.x+u.width,c=u.y+u.height),[n,i,d,o]}function h(e){if("number"==typeof e)return[e,e,e,e];if(2===e.length)return[e[0],e[1],e[0],e[1]];{let t=l(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}e.exports=c,c.prototype.render=function(...e){return e.length&&this.update(...e),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=o((()=>{this.draw(),this.dirty=!0,this.planned=null}))):(this.draw(),this.dirty=!0,o((()=>{this.dirty=!1}))),this)},c.prototype.update=function(...e){if(!e.length)return;for(let t=0;t<e.length;t++)this.updateItem(t,e[t]);this.traces=this.traces.filter(Boolean);let t=[],r=0;for(let e=0;e<this.traces.length;e++){let a=this.traces[e],i=this.traces[e].passes;for(let e=0;e<i.length;e++)t.push(this.passes[i[e]]);a.passOffset=r,r+=a.passes.length}return this.scatter.update(...t),this},c.prototype.updateItem=function(e,t){let{regl:r}=this;if(null===t)return this.traces[e]=null,this;if(!t)return this;let a,o=i(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),n=this.traces[e]||(this.traces[e]={id:e,buffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([r._gl.drawingBufferWidth,r._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=o.color&&(n.color=o.color),null!=o.size&&(n.size=o.size),null!=o.marker&&(n.marker=o.marker),null!=o.borderColor&&(n.borderColor=o.borderColor),null!=o.borderSize&&(n.borderSize=o.borderSize),null!=o.opacity&&(n.opacity=o.opacity),o.viewport&&(n.viewport=l(o.viewport)),null!=o.diagonal&&(n.diagonal=o.diagonal),null!=o.upper&&(n.upper=o.upper),null!=o.lower&&(n.lower=o.lower),o.data){n.buffer(d(o.data)),n.columns=o.data.length,n.count=o.data[0].length,n.bounds=[];for(let e=0;e<n.columns;e++)n.bounds[e]=s(o.data[e],1)}o.range&&(n.range=o.range,a=n.range&&"number"!=typeof n.range[0]),o.domain&&(n.domain=o.domain);let c=!1;null!=o.padding&&(Array.isArray(o.padding)&&o.padding.length===n.columns&&"number"==typeof o.padding[o.padding.length-1]?(n.padding=o.padding.map(h),c=!0):n.padding=h(o.padding));let f=n.columns,m=n.count,g=n.viewport.width,y=n.viewport.height,x=n.viewport.x,v=n.viewport.y,w=g/f,b=y/f;n.passes=[];for(let e=0;e<f;e++)for(let t=0;t<f;t++){if(!n.diagonal&&t===e)continue;if(!n.upper&&e>t)continue;if(!n.lower&&e<t)continue;let r=p(n.id,e,t),i=this.passes[r]||(this.passes[r]={});if(o.data&&(o.transpose?i.positions={x:{buffer:n.buffer,offset:t,count:m,stride:f},y:{buffer:n.buffer,offset:e,count:m,stride:f}}:i.positions={x:{buffer:n.buffer,offset:t*m,count:m},y:{buffer:n.buffer,offset:e*m,count:m}},i.bounds=u(n.bounds,e,t)),o.domain||o.viewport||o.data){let r=c?u(n.padding,e,t):n.padding;if(n.domain){let[a,s,o,l]=u(n.domain,e,t);i.viewport=[x+a*g+r[0],v+s*y+r[1],x+o*g-r[2],v+l*y-r[3]]}else i.viewport=[x+t*w+w*r[0],v+e*b+b*r[1],x+(t+1)*w-w*r[2],v+(e+1)*b-b*r[3]]}o.color&&(i.color=n.color),o.size&&(i.size=n.size),o.marker&&(i.marker=n.marker),o.borderSize&&(i.borderSize=n.borderSize),o.borderColor&&(i.borderColor=n.borderColor),o.opacity&&(i.opacity=n.opacity),o.range&&(i.range=a?u(n.range,e,t):n.range||i.bounds),n.passes.push(r)}return this},c.prototype.draw=function(...e){if(e.length){let t=[];for(let r=0;r<e.length;r++)if("number"==typeof e[r]){let{passes:a,passOffset:i}=this.traces[e[r]];t.push(...n(i,i+a.length))}else if(e[r].length){let a=e[r],{passes:i,passOffset:s}=this.traces[r];i=i.map(((e,r)=>{t[s+r]=a}))}this.scatter.draw(...t)}else this.scatter.draw();return this},c.prototype.destroy=function(){return this.traces.forEach((e=>{e.buffer&&e.buffer.destroy&&e.buffer.destroy()})),this.traces=null,this.passes=null,this.scatter.destroy(),this}}}]);