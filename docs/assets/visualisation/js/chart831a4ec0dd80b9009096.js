(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[6790],{24072:t=>{"use strict";t.exports=function(t,e){var a,n=t[0],r=n.z;switch(e.type){case"levels":var o=Math.min(r[0][0],r[0][1]);for(a=0;a<t.length;a++){var i=t[a];i.prefixBoundary=!i.edgepaths.length&&(o>i.level||i.starts.length&&o===i.level)}break;case"constraint":if(n.prefixBoundary=!1,n.edgepaths.length)return;var s=n.x.length,l=n.y.length,c=-1/0,h=1/0;for(a=0;a<l;a++)h=Math.min(h,r[a][0]),h=Math.min(h,r[a][s-1]),c=Math.max(c,r[a][0]),c=Math.max(c,r[a][s-1]);for(a=1;a<s-1;a++)h=Math.min(h,r[0][a]),h=Math.min(h,r[l-1][a]),c=Math.max(c,r[0][a]),c=Math.max(c,r[l-1][a]);var u,f,p=e.value;switch(e._operation){case">":p>c&&(n.prefixBoundary=!0);break;case"<":(p<h||n.starts.length&&p===h)&&(n.prefixBoundary=!0);break;case"[]":u=Math.min(p[0],p[1]),((f=Math.max(p[0],p[1]))<h||u>c||n.starts.length&&f===h)&&(n.prefixBoundary=!0);break;case"][":u=Math.min(p[0],p[1]),f=Math.max(p[0],p[1]),u<h&&f>c&&(n.prefixBoundary=!0)}}}},13633:t=>{"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},22839:(t,e,a)=>{"use strict";var n=a(59929),r=a(35924);function o(t,e){var a,o=Array.isArray(e);function i(t){return r(t)?+t:null}return-1!==n.COMPARISON_OPS2.indexOf(t)?a=i(o?e[0]:e):-1!==n.INTERVAL_OPS.indexOf(t)?a=o?[i(e[0]),i(e[1])]:[i(e),i(e)]:-1!==n.SET_OPS.indexOf(t)&&(a=o?e.map(i):[i(e)]),a}function i(t){return function(e){e=o(t,e);var a=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return{start:a,end:n,size:n-a}}}function s(t){return function(e){return{start:e=o(t,e),end:1/0,size:1/0}}}t.exports={"[]":i("[]"),"][":i("]["),">":s(">"),"<":s("<"),"=":s("=")}},49820:(t,e,a)=>{"use strict";var n=a(34141);function r(t){return n.extendFlat({},t,{edgepaths:n.extendDeep([],t.edgepaths),paths:n.extendDeep([],t.paths),starts:n.extendDeep([],t.starts)})}t.exports=function(t,e){var a,o,i,s=function(t){return t.reverse()},l=function(t){return t};switch(e){case"=":case"<":return t;case">":for(1!==t.length&&n.warn("Contour data invalid for the specified inequality operation."),o=t[0],a=0;a<o.edgepaths.length;a++)o.edgepaths[a]=s(o.edgepaths[a]);for(a=0;a<o.paths.length;a++)o.paths[a]=s(o.paths[a]);for(a=0;a<o.starts.length;a++)o.starts[a]=s(o.starts[a]);return t;case"][":var c=s;s=l,l=c;case"[]":for(2!==t.length&&n.warn("Contour data invalid for the specified inequality range operation."),o=r(t[0]),i=r(t[1]),a=0;a<o.edgepaths.length;a++)o.edgepaths[a]=s(o.edgepaths[a]);for(a=0;a<o.paths.length;a++)o.paths[a]=s(o.paths[a]);for(a=0;a<o.starts.length;a++)o.starts[a]=s(o.starts[a]);for(;i.edgepaths.length;)o.edgepaths.push(l(i.edgepaths.shift()));for(;i.paths.length;)o.paths.push(l(i.paths.shift()));for(;i.starts.length;)o.starts.push(l(i.starts.shift()));return[o]}}},69050:(t,e,a)=>{"use strict";var n=a(34141),r=a(22839),o=a(73013);t.exports=function(t,e,a){for(var i="constraint"===t.type?r[t._operation](t.value):t,s=i.size,l=[],c=o(i),h=a.trace._carpetTrace,u=h?{xaxis:h.aaxis,yaxis:h.baxis,x:a.a,y:a.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:a.x,y:a.y},f=i.start;f<c;f+=s)if(l.push(n.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},u)),l.length>1e3){n.warn("Too many contours, clipping at 1000",t);break}return l}},76646:(t,e,a)=>{"use strict";var n=a(34141),r=a(13633);function o(t,e,a,n){return Math.abs(t[0]-e[0])<a&&Math.abs(t[1]-e[1])<n}function i(t,e,a,i,l){var c,h=e.join(","),u=t.crossings[h],f=function(t,e,a){var n=0,o=0;return t>20&&e?208===t||1114===t?n=0===a[0]?1:-1:o=0===a[1]?1:-1:-1!==r.BOTTOMSTART.indexOf(t)?o=1:-1!==r.LEFTSTART.indexOf(t)?n=1:-1!==r.TOPSTART.indexOf(t)?o=-1:n=-1,[n,o]}(u,a,e),p=[s(t,e,[-f[0],-f[1]])],g=t.z.length,d=t.z[0].length,v=e.slice(),x=f.slice();for(c=0;c<1e4;c++){if(u>20?(u=r.CHOOSESADDLE[u][(f[0]||f[1])<0?0:1],t.crossings[h]=r.SADDLEREMAINDER[u]):delete t.crossings[h],!(f=r.NEWDELTA[u])){n.log("Found bad marching index:",u,e,t.level);break}p.push(s(t,e,f)),e[0]+=f[0],e[1]+=f[1],h=e.join(","),o(p[p.length-1],p[p.length-2],i,l)&&p.pop();var m=f[0]&&(e[0]<0||e[0]>d-2)||f[1]&&(e[1]<0||e[1]>g-2);if(e[0]===v[0]&&e[1]===v[1]&&f[0]===x[0]&&f[1]===x[1]||a&&m)break;u=t.crossings[h]}1e4===c&&n.log("Infinite loop in contour?");var M,y,A,b,T,L,E,S,O,I,C,k,R,w,N,_=o(p[0],p[p.length-1],i,l),B=0,D=.2*t.smoothing,z=[],P=0;for(c=1;c<p.length;c++)k=p[c],R=p[c-1],void 0,void 0,w=k[2]-R[2],N=k[3]-R[3],B+=E=Math.sqrt(w*w+N*N),z.push(E);var F=B/z.length*D;function j(t){return p[t%p.length]}for(c=p.length-2;c>=P;c--)if((M=z[c])<F){for(A=0,y=c-1;y>=P&&M+z[y]<F;y--)M+=z[y];if(_&&c===p.length-2)for(A=0;A<y&&M+z[A]<F;A++)M+=z[A];T=c-y+A+1,L=Math.floor((c+y+A+2)/2),b=_||c!==p.length-2?_||-1!==y?T%2?j(L):[(j(L)[0]+j(L+1)[0])/2,(j(L)[1]+j(L+1)[1])/2]:p[0]:p[p.length-1],p.splice(y+1,c-y+1,b),c=y+1,A&&(P=A),_&&(c===p.length-2?p[A]=p[p.length-1]:0===c&&(p[p.length-1]=p[0]))}for(p.splice(0,P),c=0;c<p.length;c++)p[c].length=2;if(!(p.length<2))if(_)p.pop(),t.paths.push(p);else{a||n.log("Unclosed interior contour?",t.level,v.join(","),p.join("L"));var G=!1;for(S=0;S<t.edgepaths.length;S++)if(I=t.edgepaths[S],!G&&o(I[0],p[p.length-1],i,l)){p.pop(),G=!0;var H=!1;for(O=0;O<t.edgepaths.length;O++)if(o((C=t.edgepaths[O])[C.length-1],p[0],i,l)){H=!0,p.shift(),t.edgepaths.splice(S,1),O===S?t.paths.push(p.concat(C)):(O>S&&O--,t.edgepaths[O]=C.concat(p,I));break}H||(t.edgepaths[S]=p.concat(I))}for(S=0;S<t.edgepaths.length&&!G;S++)o((I=t.edgepaths[S])[I.length-1],p[0],i,l)&&(p.shift(),t.edgepaths[S]=I.concat(p),G=!0);G||t.edgepaths.push(p)}}function s(t,e,a){var n=e[0]+Math.max(a[0],0),r=e[1]+Math.max(a[1],0),o=t.z[r][n],i=t.xaxis,s=t.yaxis;if(a[1]){var l=(t.level-o)/(t.z[r][n+1]-o);return[i.c2p((1-l)*t.x[n]+l*t.x[n+1],!0),s.c2p(t.y[r],!0),n+l,r]}var c=(t.level-o)/(t.z[r+1][n]-o);return[i.c2p(t.x[n],!0),s.c2p((1-c)*t.y[r]+c*t.y[r+1],!0),n,r+c]}t.exports=function(t,e,a){var r,o,s,l;for(e=e||.01,a=a||.01,o=0;o<t.length;o++){for(s=t[o],l=0;l<s.starts.length;l++)i(s,s.starts[l],"edge",e,a);for(r=0;Object.keys(s.crossings).length&&r<1e4;)r++,i(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,e,a);1e4===r&&n.log("Infinite loop in contour?")}}},44510:(t,e,a)=>{"use strict";var n=a(13633);function r(t,e){var a=(e[0][0]>t?0:1)+(e[0][1]>t?0:2)+(e[1][1]>t?0:4)+(e[1][0]>t?0:8);return 5===a||10===a?t>(e[0][0]+e[0][1]+e[1][0]+e[1][1])/4?5===a?713:1114:5===a?104:208:15===a?0:a}t.exports=function(t){var e,a,o,i,s,l,c,h,u,f=t[0].z,p=f.length,g=f[0].length,d=2===p||2===g;for(a=0;a<p-1;a++)for(i=[],0===a&&(i=i.concat(n.BOTTOMSTART)),a===p-2&&(i=i.concat(n.TOPSTART)),e=0;e<g-1;e++)for(o=i.slice(),0===e&&(o=o.concat(n.LEFTSTART)),e===g-2&&(o=o.concat(n.RIGHTSTART)),s=e+","+a,l=[[f[a][e],f[a][e+1]],[f[a+1][e],f[a+1][e+1]]],u=0;u<t.length;u++)(c=r((h=t[u]).level,l))&&(h.crossings[s]=c,-1!==o.indexOf(c)&&(h.starts.push([e,a]),d&&-1!==o.indexOf(c,o.indexOf(c)+1)&&h.starts.push([e,a])))}},89305:(t,e,a)=>{"use strict";var n=a(15078),r=a(34141),o=a(84474),i=a(59430),s=a(8666),l=a(34682),c=a(53522),h=a(40729),u=a(44510),f=a(76646),p=a(69050),g=a(49820),d=a(24072),v=a(13633),x=v.LABELOPTIMIZER;function m(t,e){var a,n,i,s,l,c,h,u="",f=0,p=t.edgepaths.map((function(t,e){return e})),g=!0;function d(t){return Math.abs(t[1]-e[2][1])<.01}function v(t){return Math.abs(t[0]-e[0][0])<.01}function x(t){return Math.abs(t[0]-e[2][0])<.01}for(;p.length;){for(c=o.smoothopen(t.edgepaths[f],t.smoothing),u+=g?c:c.replace(/^M/,"L"),p.splice(p.indexOf(f),1),a=t.edgepaths[f][t.edgepaths[f].length-1],s=-1,i=0;i<4;i++){if(!a){r.log("Missing end?",f,t);break}for(h=a,Math.abs(h[1]-e[0][1])<.01&&!x(a)?n=e[1]:v(a)?n=e[0]:d(a)?n=e[3]:x(a)&&(n=e[2]),l=0;l<t.edgepaths.length;l++){var m=t.edgepaths[l][0];Math.abs(a[0]-n[0])<.01?Math.abs(a[0]-m[0])<.01&&(m[1]-a[1])*(n[1]-m[1])>=0&&(n=m,s=l):Math.abs(a[1]-n[1])<.01?Math.abs(a[1]-m[1])<.01&&(m[0]-a[0])*(n[0]-m[0])>=0&&(n=m,s=l):r.log("endpt to newendpt is not vert. or horz.",a,n,m)}if(a=n,s>=0)break;u+="L"+n}if(s===t.edgepaths.length){r.log("unclosed perimeter path");break}f=s,(g=-1===p.indexOf(f))&&(f=p[0],u+="Z")}for(f=0;f<t.paths.length;f++)u+=o.smoothclosed(t.paths[f],t.smoothing);return u}function M(t,e,a,n){var o=e.width/2,i=e.height/2,s=t.x,l=t.y,c=t.theta,h=Math.cos(c)*o,u=Math.sin(c)*o,f=(s>n.center?n.right-s:s-n.left)/(h+Math.abs(Math.sin(c)*i)),p=(l>n.middle?n.bottom-l:l-n.top)/(Math.abs(u)+Math.cos(c)*i);if(f<1||p<1)return 1/0;var g=x.EDGECOST*(1/(f-1)+1/(p-1));g+=x.ANGLECOST*c*c;for(var d=s-h,v=l-u,m=s+h,M=l+u,y=0;y<a.length;y++){var A=a[y],b=Math.cos(A.theta)*A.width/2,T=Math.sin(A.theta)*A.width/2,L=2*r.segmentDistance(d,v,m,M,A.x-b,A.y-T,A.x+b,A.y+T)/(e.height+A.height),E=A.level===e.level,S=E?x.SAMELEVELDISTANCE:1;if(L<=S)return 1/0;g+=x.NEIGHBORCOST*(E?x.SAMELEVELFACTOR:1)/(L-S)}return g}function y(t){var e,a,n=t.trace._emptypoints,r=[],o=t.z.length,i=t.z[0].length,s=[];for(e=0;e<i;e++)s.push(1);for(e=0;e<o;e++)r.push(s.slice());for(e=0;e<n.length;e++)r[(a=n[e])[0]][a[1]]=0;return t.zmask=r,r}e.plot=function(t,a,i,s){var l=a.xaxis,c=a.yaxis;r.makeTraceGroups(s,i,"contour").each((function(i){var s=n.select(this),x=i[0],M=x.trace,A=x.x,b=x.y,T=M.contours,L=p(T,a,x),E=r.ensureSingle(s,"g","heatmapcoloring"),S=[];"heatmap"===T.coloring&&(S=[i]),h(t,a,S,E),u(L),f(L);var O=l.c2p(A[0],!0),I=l.c2p(A[A.length-1],!0),C=c.c2p(b[0],!0),k=c.c2p(b[b.length-1],!0),R=[[O,k],[I,k],[I,C],[O,C]],w=L;"constraint"===T.type&&(w=g(L,T._operation)),function(t,e,a){var n=r.ensureSingle(t,"g","contourbg").selectAll("path").data("fill"===a.coloring?[0]:[]);n.enter().append("path"),n.exit().remove(),n.attr("d","M"+e.join("L")+"Z").style("stroke","none")}(s,R,T),function(t,e,a,o){var i="fill"===o.coloring||"constraint"===o.type&&"="!==o._operation,s="M"+a.join("L")+"Z";i&&d(e,o);var l=r.ensureSingle(t,"g","contourfill").selectAll("path").data(i?e:[]);l.enter().append("path"),l.exit().remove(),l.each((function(t){var e=(t.prefixBoundary?s:"")+m(t,a);e?n.select(this).attr("d",e).style("stroke","none"):n.select(this).remove()}))}(s,w,R,T),function(t,a,i,s,l){var c=r.ensureSingle(t,"g","contourlines"),h=!1!==l.showlines,u=l.showlabels,f=h&&u,p=e.createLines(c,h||u,a),g=e.createLineClip(c,f,i,s.trace.uid),d=t.selectAll("g.contourlabels").data(u?[0]:[]);if(d.exit().remove(),d.enter().append("g").classed("contourlabels",!0),u){var x=[],m=[];r.clearLocationCache();var M=e.labelFormatter(i,s),y=o.tester.append("text").attr("data-notex",1).call(o.font,l.labelfont),A=a[0].xaxis,b=a[0].yaxis,T=A._length,L=b._length,E=A.range,S=b.range,O=r.aggNums(Math.min,null,s.x),I=r.aggNums(Math.max,null,s.x),C=r.aggNums(Math.min,null,s.y),k=r.aggNums(Math.max,null,s.y),R=Math.max(A.c2p(O,!0),0),w=Math.min(A.c2p(I,!0),T),N=Math.max(b.c2p(k,!0),0),_=Math.min(b.c2p(C,!0),L),B={};E[0]<E[1]?(B.left=R,B.right=w):(B.left=w,B.right=R),S[0]<S[1]?(B.top=N,B.bottom=_):(B.top=_,B.bottom=N),B.middle=(B.top+B.bottom)/2,B.center=(B.left+B.right)/2,x.push([[B.left,B.top],[B.right,B.top],[B.right,B.bottom],[B.left,B.bottom]]);var D=Math.sqrt(T*T+L*L),z=v.LABELDISTANCE*D/Math.max(1,a.length/v.LABELINCREASE);p.each((function(t){var a=e.calcTextOpts(t.level,M,y,i);n.select(this).selectAll("path").each((function(){var t=r.getVisibleSegment(this,B,a.height/2);if(t&&!(t.len<(a.width+a.height)*v.LABELMIN))for(var n=Math.min(Math.ceil(t.len/z),v.LABELMAX),o=0;o<n;o++){var i=e.findBestTextLocation(this,t,a,m,B);if(!i)break;e.addLabelData(i,a,m,x)}}))})),y.remove(),e.drawLabels(d,m,i,g,f?x:null)}u&&!h&&p.remove()}(s,L,t,x,T),function(t,e,a,n,i){var s=n.trace,l=a._fullLayout._clips,c="clip"+s.uid,h=l.selectAll("#"+c).data(s.connectgaps?[]:[0]);if(h.enter().append("clipPath").classed("contourclip",!0).attr("id",c),h.exit().remove(),!1===s.connectgaps){var p={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:e.xaxis,yaxis:e.yaxis,x:n.x,y:n.y,z:y(n),smoothing:0};u([p]),f([p]),d([p],{type:"levels"}),r.ensureSingle(h,"path","").attr("d",(p.prefixBoundary?"M"+i.join("L")+"Z":"")+m(p,i))}else c=null;o.setClipUrl(t,c,a)}(s,a,t,x,R)}))},e.createLines=function(t,e,a){var n=a[0].smoothing,r=t.selectAll("g.contourlevel").data(e?a:[]);if(r.exit().remove(),r.enter().append("g").classed("contourlevel",!0),e){var i=r.selectAll("path.openline").data((function(t){return t.pedgepaths||t.edgepaths}));i.exit().remove(),i.enter().append("path").classed("openline",!0),i.attr("d",(function(t){return o.smoothopen(t,n)})).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var s=r.selectAll("path.closedline").data((function(t){return t.ppaths||t.paths}));s.exit().remove(),s.enter().append("path").classed("closedline",!0),s.attr("d",(function(t){return o.smoothclosed(t,n)})).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return r},e.createLineClip=function(t,e,a,n){var r=e?"clipline"+n:null,i=a._fullLayout._clips.selectAll("#"+r).data(e?[0]:[]);return i.exit().remove(),i.enter().append("clipPath").classed("contourlineclip",!0).attr("id",r),o.setClipUrl(t,r,a),i},e.labelFormatter=function(t,e){var a=t._fullLayout,n=e.trace,r=n.contours,o={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(r.labelformat)o.tickformat=r.labelformat,c(o,a);else{var s=i.extractOpts(n);if(s&&s.colorbar&&s.colorbar._axis)o=s.colorbar._axis;else{if("constraint"===r.type){var h=r.value;Array.isArray(h)?o.range=[h[0],h[h.length-1]]:o.range=[h,h]}else o.range=[r.start,r.end],o.nticks=(r.end-r.start)/r.size;o.range[0]===o.range[1]&&(o.range[1]+=o.range[0]||1),o.nticks||(o.nticks=1e3),c(o,a),l.prepTicks(o),o._tmin=null,o._tmax=null}}return function(t){return l.tickText(o,t).text}},e.calcTextOpts=function(t,e,a,n){var r=e(t);a.text(r).call(s.convertToTspans,n);var i=a.node(),l=o.bBox(i,!0);return{text:r,width:l.width,height:l.height,fontSize:+i.style["font-size"].replace("px",""),level:t,dy:(l.top+l.bottom)/2}},e.findBestTextLocation=function(t,e,a,n,o){var i,s,l,c,h,u=a.width;e.isClosed?(s=e.len/x.INITIALSEARCHPOINTS,i=e.min+s/2,l=e.max):(s=(e.len-u)/(x.INITIALSEARCHPOINTS+1),i=e.min+s+u/2,l=e.max-(s+u)/2);for(var f=1/0,p=0;p<x.ITERATIONS;p++){for(var g=i;g<l;g+=s){var d=r.getTextLocation(t,e.total,g,u),v=M(d,a,n,o);v<f&&(f=v,h=d,c=g)}if(f>2*x.MAXCOST)break;p&&(s/=2),l=(i=c-s/2)+1.5*s}if(f<=x.MAXCOST)return h},e.addLabelData=function(t,e,a,n){var r=e.fontSize,o=e.width+r/3,i=Math.max(0,e.height-r/3),s=t.x,l=t.y,c=t.theta,h=Math.sin(c),u=Math.cos(c),f=function(t,e){return[s+t*u-e*h,l+t*h+e*u]},p=[f(-o/2,-i/2),f(-o/2,i/2),f(o/2,i/2),f(o/2,-i/2)];a.push({text:e.text,x:s,y:l,dy:e.dy,theta:c,level:e.level,width:o,height:i}),n.push(p)},e.drawLabels=function(t,e,a,o,i){var l=t.selectAll("text").data(e,(function(t){return t.text+","+t.x+","+t.y+","+t.theta}));if(l.exit().remove(),l.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each((function(t){var e=t.x+Math.sin(t.theta)*t.dy,r=t.y-Math.cos(t.theta)*t.dy;n.select(this).text(t.text).attr({x:e,y:r,transform:"rotate("+180*t.theta/Math.PI+" "+e+" "+r+")"}).call(s.convertToTspans,a)})),i){for(var c="",h=0;h<i.length;h++)c+="M"+i[h].join("L")+"Z";r.ensureSingle(o,"path","").attr("d",c)}}},46010:(t,e,a)=>{"use strict";var n=a(15078),r=a(84474),o=a(44369),i=a(60896);t.exports=function(t){var e=n.select(t).selectAll("g.contour");e.style("opacity",(function(t){return t[0].trace.opacity})),e.each((function(t){var e=n.select(this),a=t[0].trace,o=a.contours,s=a.line,l=o.size||1,c=o.start,h="constraint"===o.type,u=!h&&"lines"===o.coloring,f=!h&&"fill"===o.coloring,p=u||f?i(a):null;e.selectAll("g.contourlevel").each((function(t){n.select(this).selectAll("path").call(r.lineGroupStyle,s.width,u?p(t.level):s.color,s.dash)}));var g=o.labelfont;if(e.selectAll("g.contourlabels text").each((function(t){r.font(n.select(this),{family:g.family,size:g.size,color:g.color||(u?p(t.level):s.color)})})),h)e.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(f){var d;e.selectAll("g.contourfill path").style("fill",(function(t){return void 0===d&&(d=t.level),p(t.level+.5*l)})),void 0===d&&(d=c),e.selectAll("g.contourbg path").style("fill",p(d-.5*l))}})),o(t)}},40729:(t,e,a)=>{"use strict";var n=a(15078),r=a(17621),o=a(97997),i=a(34141),s=a(59430).makeColorScaleFuncFromTrace,l=a(96783);function c(t,e){var a=e.length-2,n=i.constrain(i.findBin(t,e),0,a),r=e[n],o=e[n+1],s=i.constrain(n+(t-r)/(o-r)-.5,0,a),l=Math.round(s),c=Math.abs(s-l);return s&&s!==a&&c?{bin0:l,frac:c,bin1:Math.round(l+c/(s-l))}:{bin0:l,bin1:l,frac:0}}function h(t,e){var a=e.length-1,n=i.constrain(i.findBin(t,e),0,a),r=e[n],o=(t-r)/(e[n+1]-r)||0;return o<=0?{bin0:n,bin1:n,frac:0}:o<.5?{bin0:n,bin1:n+1,frac:o}:{bin0:n+1,bin1:n,frac:1-o}}function u(t,e,a){t[e]=a[0],t[e+1]=a[1],t[e+2]=a[2],t[e+3]=Math.round(255*a[3])}t.exports=function(t,e,a,f){var p=e.xaxis,g=e.yaxis;i.makeTraceGroups(f,a,"hm").each((function(e){var a,f,d,v,x,m,M=n.select(this),y=e[0],A=y.trace,b=y.z,T=y.x,L=y.y,E=y.xCenter,S=y.yCenter,O=o.traceIs(A,"contour"),I=O?"best":A.zsmooth,C=b.length,k=i.maxRowLength(b),R=!1,w=!1;for(m=0;void 0===a&&m<T.length-1;)a=p.c2p(T[m]),m++;for(m=T.length-1;void 0===f&&m>0;)f=p.c2p(T[m]),m--;for(f<a&&(d=f,f=a,a=d,R=!0),m=0;void 0===v&&m<L.length-1;)v=g.c2p(L[m]),m++;for(m=L.length-1;void 0===x&&m>0;)x=g.c2p(L[m]),m--;if(x<v&&(d=v,v=x,x=d,w=!0),O&&(E=T,S=L,T=y.xfill,L=y.yfill),"fast"!==I){var N="best"===I?0:.5;a=Math.max(-N*p._length,a),f=Math.min((1+N)*p._length,f),v=Math.max(-N*g._length,v),x=Math.min((1+N)*g._length,x)}var _=Math.round(f-a),B=Math.round(x-v);if(_<=0||B<=0)M.selectAll("image").data([]).exit().remove();else{var D,z;"fast"===I?(D=k,z=C):(D=_,z=B);var P=document.createElement("canvas");P.width=D,P.height=z;var F,j,G=P.getContext("2d"),H=s(A,{noNumericCheck:!0,returnArray:!0});"fast"===I?(F=R?function(t){return k-1-t}:i.identity,j=w?function(t){return C-1-t}:i.identity):(F=function(t){return i.constrain(Math.round(p.c2p(T[t])-a),0,_)},j=function(t){return i.constrain(Math.round(g.c2p(L[t])-v),0,B)});var Z,V,U,X,q,W=j(0),J=[W,W],K=R?0:1,Q=w?0:1,Y=0,$=0,tt=0,et=0;if(I){var at,nt=0;try{at=new Uint8Array(_*B*4)}catch(t){at=new Array(_*B*4)}if("best"===I){var rt,ot,it,st=E||T,lt=S||L,ct=new Array(st.length),ht=new Array(lt.length),ut=new Array(_),ft=E?h:c,pt=S?h:c;for(m=0;m<st.length;m++)ct[m]=Math.round(p.c2p(st[m])-a);for(m=0;m<lt.length;m++)ht[m]=Math.round(g.c2p(lt[m])-v);for(m=0;m<_;m++)ut[m]=ft(m,ct);for(V=0;V<B;V++)for(ot=b[(rt=pt(V,ht)).bin0],it=b[rt.bin1],m=0;m<_;m++,nt+=4)u(at,nt,q=Lt(ot,it,ut[m],rt))}else for(V=0;V<C;V++)for(X=b[V],J=j(V),m=0;m<_;m++)q=Tt(X[m],1),u(at,nt=4*(J*_+F(m)),q);var gt=G.createImageData(_,B);try{gt.data.set(at)}catch(t){var dt=gt.data,vt=dt.length;for(V=0;V<vt;V++)dt[V]=at[V]}G.putImageData(gt,0,0)}else{var xt=A.xgap,mt=A.ygap,Mt=Math.floor(xt/2),yt=Math.floor(mt/2);for(V=0;V<C;V++)if(X=b[V],J.reverse(),J[Q]=j(V+1),J[0]!==J[1]&&void 0!==J[0]&&void 0!==J[1])for(Z=[U=F(0),U],m=0;m<k;m++)Z.reverse(),Z[K]=F(m+1),Z[0]!==Z[1]&&void 0!==Z[0]&&void 0!==Z[1]&&(q=Tt(X[m],(Z[1]-Z[0])*(J[1]-J[0])),G.fillStyle="rgba("+q.join(",")+")",G.fillRect(Z[0]+Mt,J[0]+yt,Z[1]-Z[0]-xt,J[1]-J[0]-mt))}$=Math.round($/Y),tt=Math.round(tt/Y),et=Math.round(et/Y);var At=r("rgb("+$+","+tt+","+et+")");t._hmpixcount=(t._hmpixcount||0)+Y,t._hmlumcount=(t._hmlumcount||0)+Y*At.getLuminance();var bt=M.selectAll("image").data(e);bt.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),bt.attr({height:B,width:_,x:a,y:v,"xlink:href":P.toDataURL("image/png")})}function Tt(t,e){if(void 0!==t){var a=H(t);return a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),Y+=e,$+=a[0]*e,tt+=a[1]*e,et+=a[2]*e,a}return[0,0,0,0]}function Lt(t,e,a,n){var r=t[a.bin0];if(void 0===r)return Tt(void 0,1);var o,i=t[a.bin1],s=e[a.bin0],l=e[a.bin1],c=i-r||0,h=s-r||0;return o=void 0===i?void 0===l?0:void 0===s?2*(l-r):2*(2*l-s-r)/3:void 0===l?void 0===s?0:2*(2*r-i-s)/3:void 0===s?2*(2*l-i-r)/3:l+r-i-s,Tt(r+a.frac*c+n.frac*(h+a.frac*o))}}))}},44369:(t,e,a)=>{"use strict";var n=a(15078);t.exports=function(t){n.select(t).selectAll(".hm image").style("opacity",(function(t){return t.trace.opacity}))}}}]);