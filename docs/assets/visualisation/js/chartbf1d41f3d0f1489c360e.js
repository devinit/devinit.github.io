(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[587],{55228:(t,e,r)=>{"use strict";t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,i=[t[0]],s=[0],o=1;o<e;++o)if(i.push(t[o]),n(i,r)){if(s.push(o),s.length===r+1)return s}else i.pop();return s};var i=r(50146);function n(t,e){for(var r=new Array(e+1),n=0;n<t.length;++n)r[n]=t[n];for(n=0;n<=t.length;++n){for(var s=t.length;s<=e;++s){for(var o=new Array(e),a=0;a<e;++a)o[a]=Math.pow(s+1-n,a);r[s]=o}if(i.apply(void 0,r))return!0}return!1}},81662:(t,e,r)=>{"use strict";t.exports=function(t,e){for(var r=e.length,s=new Array(r+1),o=0;o<r;++o){for(var a=new Array(r+1),h=0;h<=r;++h)a[h]=t[h][o];s[o]=a}for(s[r]=new Array(r+1),o=0;o<=r;++o)s[r][o]=1;var u=new Array(r+1);for(o=0;o<r;++o)u[o]=e[o];u[r]=1;var p=i(s,u),l=n(p[r+1]);0===l&&(l=1);var f=new Array(r+1);for(o=0;o<=r;++o)f[o]=n(p[o])/l;return f};var i=r(89489);function n(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}},9894:(t,e,r)=>{"use strict";var i=r(12721),n=r(78718),s=r(35153);t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var r=t[0].length;return 0===r?[]:1===r?i(t):2===r?n(t):s(t,r)}},12721:t=>{"use strict";t.exports=function(t){for(var e=0,r=0,i=1;i<t.length;++i)t[i][0]<t[e][0]&&(e=i),t[i][0]>t[r][0]&&(r=i);return e<r?[[e],[r]]:e>r?[[r],[e]]:[[e]]}},78718:(t,e,r)=>{"use strict";t.exports=function(t){var e=i(t),r=e.length;if(r<=2)return[];for(var n=new Array(r),s=e[r-1],o=0;o<r;++o){var a=e[o];n[o]=[s,a],s=a}return n};var i=r(74529)},35153:(t,e,r)=>{"use strict";t.exports=function(t,e){try{return i(t,!0)}catch(o){var r=n(t);if(r.length<=e)return[];var s=function(t,e){for(var r=t.length,i=new Array(r),n=0;n<e.length;++n)i[n]=t[e[n]];var s=e.length;for(n=0;n<r;++n)e.indexOf(n)<0&&(i[s++]=t[n]);return i}(t,r);return function(t,e){for(var r=t.length,i=e.length,n=0;n<r;++n)for(var s=t[n],o=0;o<s.length;++o){var a=s[o];if(a<i)s[o]=e[a];else{a-=i;for(var h=0;h<i;++h)a>=e[h]&&(a+=1);s[o]=a}}return t}(i(s,!0),r)}};var i=r(91293),n=r(55228)},84485:(t,e,r)=>{"use strict";var i=r(81662),n=r(15687);function s(t,e){for(var r=[0,0,0,0],i=0;i<4;++i)for(var n=0;n<4;++n)r[n]+=t[4*i+n]*e[i];return r}function o(t,e,r,i,n){for(var o=s(i,s(r,s(e,[t[0],t[1],t[2],1]))),a=0;a<3;++a)o[a]/=o[3];return[.5*n[0]*(1+o[0]),.5*n[1]*(1-o[1])]}function a(t,e){for(var r=[0,0,0],i=0;i<t.length;++i)for(var n=t[i],s=e[i],o=0;o<3;++o)r[o]+=s*n[o];return r}t.exports=function(t,e,r,s,h,u){if(1===t.length)return[0,t[0].slice()];for(var p=new Array(t.length),l=0;l<t.length;++l)p[l]=o(t[l],r,s,h,u);var f=0,c=1/0;for(l=0;l<p.length;++l){for(var v=0,d=0;d<2;++d)v+=Math.pow(p[l][d]-e[d],2);v<c&&(c=v,f=l)}var g=function(t,e){if(2===t.length){for(var r=0,s=0,o=0;o<2;++o)r+=Math.pow(e[o]-t[0][o],2),s+=Math.pow(e[o]-t[1][o],2);return(r=Math.sqrt(r))+(s=Math.sqrt(s))<1e-6?[1,0]:[s/(r+s),r/(s+r)]}if(3===t.length){var a=[0,0];return n(t[0],t[1],t[2],e,a),i(t,a)}return[]}(p,e),m=0;for(l=0;l<3;++l){if(g[l]<-.001||g[l]>1.0001)return null;m+=g[l]}return Math.abs(m-1)>.001?null:[f,a(t,g),g]}},21268:(t,e,r)=>{var i=r(72645),n=i("./triangle-vertex.glsl"),s=i("./triangle-fragment.glsl"),o=i("./edge-vertex.glsl"),a=i("./edge-fragment.glsl"),h=i("./point-vertex.glsl"),u=i("./point-fragment.glsl"),p=i("./pick-vertex.glsl"),l=i("./pick-fragment.glsl"),f=i("./pick-point-vertex.glsl"),c=i("./contour-vertex.glsl"),v=i("./contour-fragment.glsl");e.meshShader={vertex:n,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.wireShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.pointShader={vertex:h,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},e.pickShader={vertex:p,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},e.pointPickShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},e.contourShader={vertex:c,fragment:v,attributes:[{name:"position",type:"vec3"}]}},587:(t,e,r)=>{"use strict";var i=r(18057),n=r(28580),s=r(24324),o=r(86753),a=r(32484),h=r(29401),u=r(64481),p=r(62861),l=r(60800),f=r(84165),c=r(90316),v=r(21268),d=r(84485),g=v.meshShader,m=v.wireShader,y=v.pointShader,b=v.pickShader,x=v.pointPickShader,A=v.contourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function j(t,e,r,i,n,s,o,a,h,u,p,l,f,c,v,d,g,m,y,b,x,A,j,_,k,S,C){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.lineShader=i,this.pointShader=n,this.pickShader=s,this.pointPickShader=o,this.contourShader=a,this.trianglePositions=h,this.triangleColors=p,this.triangleNormals=f,this.triangleUVs=l,this.triangleIds=u,this.triangleVAO=c,this.triangleCount=0,this.lineWidth=1,this.edgePositions=v,this.edgeColors=g,this.edgeUVs=m,this.edgeIds=d,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=A,this.pointUVs=j,this.pointSizes=_,this.pointIds=x,this.pointVAO=k,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=S,this.contourVAO=C,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var _=j.prototype;function k(t,e){if(!e)return 1;if(!e.length)return 1;for(var r=0;r<e.length;++r){if(e.length<2)return 1;if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var i=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-i)+i*e[r-1][1]}}return 1}function S(t){var e=i(t,g.vertex,g.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.normal.location=4,e}function C(t){var e=i(t,m.vertex,m.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e}function I(t){var e=i(t,y.vertex,y.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.pointSize.location=4,e}function E(t){var e=i(t,b.vertex,b.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e}function V(t){var e=i(t,x.vertex,x.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e.attributes.pointSize.location=4,e}function M(t){var e=i(t,A.vertex,A.fragment);return e.attributes.position.location=0,e}_.isOpaque=function(){return!this.hasAlpha},_.isTransparent=function(){return this.hasAlpha},_.pickSlots=1,_.setPickBase=function(t){this.pickId=t},_.highlight=function(t){if(t&&this.contourEnable){for(var e=f(this.cells,this.intensity,t.intensity),r=e.cells,i=e.vertexIds,n=e.vertexWeights,s=r.length,o=c.mallocFloat32(6*s),a=0,h=0;h<s;++h)for(var u=r[h],p=0;p<2;++p){var l=u[0];2===u.length&&(l=u[p]);for(var v=i[l][0],d=i[l][1],g=n[l],m=1-g,y=this.positions[v],b=this.positions[d],x=0;x<3;++x)o[a++]=g*y[x]+m*b[x]}this.contourCount=a/3|0,this.contourPositions.update(o.subarray(0,a)),c.free(o)}else this.contourCount=0},_.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=o(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var r=l({colormap:t,nshades:256,format:"rgba"}),i=new Uint8Array(1024),n=0;n<256;++n){for(var s=r[n],o=0;o<3;++o)i[4*n+o]=s[o];i[4*n+3]=e?255*k(n/255,e):255*s[3]}return p(i,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var r=t.cells,i=t.positions;if(i&&r){var n=[],s=[],h=[],u=[],f=[],c=[],v=[],d=[],g=[],m=[],y=[],b=[],x=[],A=[];this.cells=r,this.positions=i;var w=t.vertexNormals,j=t.cellNormals,_=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,S=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!j&&(j=a.faceNormals(r,i,S)),j||w||(w=a.vertexNormals(r,i,_));var C=t.vertexColors,I=t.cellColors,E=t.meshColor||[1,1,1,1],V=t.vertexUVs,M=t.vertexIntensity,O=t.cellUVs,F=t.cellIntensity,N=1/0,L=-1/0;if(!V&&!O)if(M)if(t.vertexIntensityBounds)N=+t.vertexIntensityBounds[0],L=+t.vertexIntensityBounds[1];else for(var P=0;P<M.length;++P){var z=M[P];N=Math.min(N,z),L=Math.max(L,z)}else if(F)if(t.cellIntensityBounds)N=+t.cellIntensityBounds[0],L=+t.cellIntensityBounds[1];else for(P=0;P<F.length;++P)z=F[P],N=Math.min(N,z),L=Math.max(L,z);else for(P=0;P<i.length;++P)z=i[P][2],N=Math.min(N,z),L=Math.max(L,z);this.intensity=M||F||function(t){for(var e=t.length,r=new Array(e),i=0;i<e;++i)r[i]=t[i][2];return r}(i),this.pickVertex=!(F||I);var U=t.pointSizes,B=t.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],P=0;P<i.length;++P)for(var T=i[P],W=0;W<3;++W)!isNaN(T[W])&&isFinite(T[W])&&(this.bounds[0][W]=Math.min(this.bounds[0][W],T[W]),this.bounds[1][W]=Math.max(this.bounds[1][W],T[W]));var R=0,q=0,D=0;t:for(P=0;P<r.length;++P){var H=r[P];switch(H.length){case 1:for(T=i[Y=H[0]],W=0;W<3;++W)if(isNaN(T[W])||!isFinite(T[W]))continue t;m.push(T[0],T[1],T[2]),K=C?C[Y]:I?I[P]:E,this.opacityscale&&M?s.push(K[0],K[1],K[2],this.opacity*k((M[Y]-N)/(L-N),this.opacityscale)):3===K.length?y.push(K[0],K[1],K[2],this.opacity):(y.push(K[0],K[1],K[2],K[3]*this.opacity),K[3]<1&&(this.hasAlpha=!0)),Q=V?V[Y]:M?[(M[Y]-N)/(L-N),0]:O?O[P]:F?[(F[P]-N)/(L-N),0]:[(T[2]-N)/(L-N),0],b.push(Q[0],Q[1]),U?x.push(U[Y]):x.push(B),A.push(P),D+=1;break;case 2:for(W=0;W<2;++W){T=i[Y=H[W]];for(var G=0;G<3;++G)if(isNaN(T[G])||!isFinite(T[G]))continue t}for(W=0;W<2;++W)T=i[Y=H[W]],c.push(T[0],T[1],T[2]),K=C?C[Y]:I?I[P]:E,this.opacityscale&&M?s.push(K[0],K[1],K[2],this.opacity*k((M[Y]-N)/(L-N),this.opacityscale)):3===K.length?v.push(K[0],K[1],K[2],this.opacity):(v.push(K[0],K[1],K[2],K[3]*this.opacity),K[3]<1&&(this.hasAlpha=!0)),Q=V?V[Y]:M?[(M[Y]-N)/(L-N),0]:O?O[P]:F?[(F[P]-N)/(L-N),0]:[(T[2]-N)/(L-N),0],d.push(Q[0],Q[1]),g.push(P);q+=1;break;case 3:for(W=0;W<3;++W)for(T=i[Y=H[W]],G=0;G<3;++G)if(isNaN(T[G])||!isFinite(T[G]))continue t;for(W=0;W<3;++W){var Y,K,Q,Z;T=i[Y=H[2-W]],n.push(T[0],T[1],T[2]),(K=C?C[Y]:I?I[P]:E)?this.opacityscale&&M?s.push(K[0],K[1],K[2],this.opacity*k((M[Y]-N)/(L-N),this.opacityscale)):3===K.length?s.push(K[0],K[1],K[2],this.opacity):(s.push(K[0],K[1],K[2],K[3]*this.opacity),K[3]<1&&(this.hasAlpha=!0)):s.push(.5,.5,.5,1),Q=V?V[Y]:M?[(M[Y]-N)/(L-N),0]:O?O[P]:F?[(F[P]-N)/(L-N),0]:[(T[2]-N)/(L-N),0],u.push(Q[0],Q[1]),Z=w?w[Y]:j[P],h.push(Z[0],Z[1],Z[2]),f.push(P)}R+=1}}this.pointCount=D,this.edgeCount=q,this.triangleCount=R,this.pointPositions.update(m),this.pointColors.update(y),this.pointUVs.update(b),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(A)),this.edgePositions.update(c),this.edgeColors.update(v),this.edgeUVs.update(d),this.edgeIds.update(new Uint32Array(g)),this.trianglePositions.update(n),this.triangleColors.update(s),this.triangleUVs.update(u),this.triangleNormals.update(h),this.triangleIds.update(new Uint32Array(f))}},_.drawTransparent=_.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||w,i=t.view||w,n=t.projection||w,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);var a={model:r,view:i,projection:n,inverseModel:w.slice(),clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};a.inverseModel=u(a.inverseModel,a.model),e.disable(e.CULL_FACE),this.texture.bind(0);var p=new Array(16);for(h(p,a.view,a.model),h(p,a.projection,p),u(p,p),o=0;o<3;++o)a.eyePosition[o]=p[12+o]/p[15];var l,f=p[15];for(o=0;o<3;++o)f+=this.lightPosition[o]*p[4*o+3];for(o=0;o<3;++o){for(var c=p[12+o],v=0;v<3;++v)c+=p[4*v+o]*this.lightPosition[v];a.lightPosition[o]=c/f}this.triangleCount>0&&((l=this.triShader).bind(),l.uniforms=a,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((l=this.lineShader).bind(),l.uniforms=a,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((l=this.pointShader).bind(),l.uniforms=a,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((l=this.contourShader).bind(),l.uniforms=a,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},_.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||w,i=t.view||w,n=t.projection||w,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)s[0][o]=Math.max(s[0][o],this.clipBounds[0][o]),s[1][o]=Math.min(s[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(i),this._projection=[].slice.call(n),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var a,h={model:r,view:i,projection:n,clipBounds:s,pickId:this.pickId/255};(a=this.pickShader).bind(),a.uniforms=h,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((a=this.pointPickShader).bind(),a.uniforms=h,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},_.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],i=this.positions,n=new Array(r.length),s=0;s<r.length;++s)n[s]=i[r[s]];var o=t.coord[0],a=t.coord[1];if(!this.pickVertex){var h=this.positions[r[0]],u=this.positions[r[1]],p=this.positions[r[2]],l=[(h[0]+u[0]+p[0])/3,(h[1]+u[1]+p[1])/3,(h[2]+u[2]+p[2])/3];return{_cellCenter:!0,position:[o,a],index:e,cell:r,cellId:e,intensity:this.intensity[e],dataCoordinate:l}}var f=d(n,[o*this.pixelRatio,this._resolution[1]-a*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!f)return null;var c=f[2],v=0;for(s=0;s<r.length;++s)v+=c[s]*this.intensity[r[s]];return{position:f[1],index:r[f[0]],cell:r,cellId:e,intensity:v,dataCoordinate:this.positions[r[f[0]]]}},_.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=function(t,e){1===arguments.length&&(t=(e=t).gl);var r=t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives");if(!r)throw new Error("derivatives not supported");var i=S(t),a=C(t),h=I(t),u=E(t),l=V(t),f=M(t),c=o(t,p(new Uint8Array([255,255,255,255]),[1,1,4]));c.generateMipmap(),c.minFilter=t.LINEAR_MIPMAP_LINEAR,c.magFilter=t.LINEAR;var v=n(t),d=n(t),g=n(t),m=n(t),y=n(t),b=s(t,[{buffer:v,type:t.FLOAT,size:3},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:d,type:t.FLOAT,size:4},{buffer:g,type:t.FLOAT,size:2},{buffer:m,type:t.FLOAT,size:3}]),x=n(t),A=n(t),w=n(t),_=n(t),k=s(t,[{buffer:x,type:t.FLOAT,size:3},{buffer:_,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:A,type:t.FLOAT,size:4},{buffer:w,type:t.FLOAT,size:2}]),O=n(t),F=n(t),N=n(t),L=n(t),P=n(t),z=s(t,[{buffer:O,type:t.FLOAT,size:3},{buffer:P,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:t.FLOAT,size:4},{buffer:N,type:t.FLOAT,size:2},{buffer:L,type:t.FLOAT,size:1}]),U=n(t),B=s(t,[{buffer:U,type:t.FLOAT,size:3}]),T=new j(t,c,i,a,h,u,l,f,v,y,d,g,m,b,x,_,A,w,k,O,P,F,N,L,z,U,B);return T.update(e),T}},91293:(t,e,r)=>{"use strict";t.exports=function(t,e){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var n=t[0].length;if(r<=n)throw new Error("Must input at least d+1 points");var o=t.slice(0,n+1),a=i.apply(void 0,o);if(0===a)throw new Error("Input not in general position");for(var h=new Array(n+1),p=0;p<=n;++p)h[p]=p;a<0&&(h[0]=1,h[1]=0);var l=new s(h,new Array(n+1),!1),f=l.adjacent,c=new Array(n+2);for(p=0;p<=n;++p){for(var v=h.slice(),d=0;d<=n;++d)d===p&&(v[d]=-1);var g=v[0];v[0]=v[1],v[1]=g;var m=new s(v,new Array(n+1),!0);f[p]=m,c[p]=m}for(c[n+1]=l,p=0;p<=n;++p){v=f[p].vertices;var y=f[p].adjacent;for(d=0;d<=n;++d){var b=v[d];if(b<0)y[d]=l;else for(var x=0;x<=n;++x)f[x].vertices.indexOf(b)<0&&(y[d]=f[x])}}var A=new u(n,o,c),w=!!e;for(p=n+1;p<r;++p)A.insert(t[p],w);return A.boundary()};var i=r(50146),n=r(14572).H;function s(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function o(t,e,r){this.vertices=t,this.cell=e,this.index=r}function a(t,e){return n(t.vertices,e.vertices)}s.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var h=[];function u(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var n=0;n<=t;++n)this.tuple[n]=this.vertices[n];var s=h[t];s||(s=h[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],r=0;r<=t;++r)r>0&&e.push(","),e.push("tuple[",r,"]");e.push(")}return orient");var n=new Function("test",e.join("")),s=i[t+1];return s||(s=i),n(s)}(t)),this.orient=s}var p=u.prototype;p.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,i=this.vertices.length-1,n=this.tuple,s=this.vertices,o=[t];for(t.lastVisited=-i;o.length>0;){(t=o.pop()).vertices;for(var a=t.adjacent,h=0;h<=r;++h){var u=a[h];if(u.boundary&&!(u.lastVisited<=-i)){for(var p=u.vertices,l=0;l<=r;++l){var f=p[l];n[l]=f<0?e:s[f]}var c=this.orient();if(c>0)return u;u.lastVisited=-i,0===c&&o.push(u)}}}return null},p.walk=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,s=this.tuple,o=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[o];t:for(;!a.boundary;){for(var h=a.vertices,u=a.adjacent,p=0;p<=i;++p)s[p]=n[h[p]];for(a.lastVisited=r,p=0;p<=i;++p){var l=u[p];if(!(l.lastVisited>=r)){var f=s[p];s[p]=t;var c=this.orient();if(s[p]=f,c<0){a=l;continue t}l.boundary?l.lastVisited=-r:l.lastVisited=r}}return}return a},p.addPeaks=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,h=this.tuple,u=this.interior,p=this.simplices,l=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,u.push(e);for(var f=[];l.length>0;){var c=(e=l.pop()).vertices,v=e.adjacent,d=c.indexOf(r);if(!(d<0))for(var g=0;g<=i;++g)if(g!==d){var m=v[g];if(m.boundary&&!(m.lastVisited>=r)){var y=m.vertices;if(m.lastVisited!==-r){for(var b=0,x=0;x<=i;++x)y[x]<0?(b=x,h[x]=t):h[x]=n[y[x]];if(this.orient()>0){y[b]=r,m.boundary=!1,u.push(m),l.push(m),m.lastVisited=r;continue}m.lastVisited=-r}var A=m.adjacent,w=c.slice(),j=v.slice(),_=new s(w,j,!0);p.push(_);var k=A.indexOf(e);if(!(k<0))for(A[k]=_,j[d]=m,w[g]=-1,j[g]=e,v[g]=_,_.flip(),x=0;x<=i;++x){var S=w[x];if(!(S<0||S===r)){for(var C=new Array(i-1),I=0,E=0;E<=i;++E){var V=w[E];V<0||E===x||(C[I++]=V)}f.push(new o(C,_,x))}}}}}for(f.sort(a),g=0;g+1<f.length;g+=2){var M=f[g],O=f[g+1],F=M.index,N=O.index;F<0||N<0||(M.cell.adjacent[M.index]=O.cell,O.cell.adjacent[O.index]=M.cell)}},p.insert=function(t,e){var r=this.vertices;r.push(t);var i=this.walk(t,e);if(i){for(var n=this.dimension,s=this.tuple,o=0;o<=n;++o){var a=i.vertices[o];s[o]=a<0?t:r[a]}var h=this.orient(s);h<0||(0!==h||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},p.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,i=r.length,n=0;n<i;++n){var s=r[n];if(s.boundary){for(var o=new Array(t),a=s.vertices,h=0,u=0,p=0;p<=t;++p)a[p]>=0?o[h++]=a[p]:u=1&p;if(u===(1&t)){var l=o[0];o[0]=o[1],o[1]=l}e.push(o)}}return e}},95526:(t,e,r)=>{"use strict";t.exports=function(t){for(var e=1<<t+1,r=new Array(e),i=0;i<e;++i)r[i]=s(t,i);return r};var i=r(9894);function n(t,e,r){for(var i=new Array(t),n=0;n<t;++n)i[n]=0,n===e&&(i[n]+=.5),n===r&&(i[n]+=.5);return i}function s(t,e){if(0===e||e===(1<<t+1)-1)return[];for(var r=[],s=[],o=0;o<=t;++o)if(e&1<<o){r.push(n(t,o-1,o-1)),s.push(null);for(var a=0;a<=t;++a)~e&1<<a&&(r.push(n(t,o-1,a-1)),s.push([o,a]))}var h=i(r),u=[];t:for(o=0;o<h.length;++o){var p=h[o],l=[];for(a=0;a<p.length;++a){if(!s[p[a]])continue t;l.push(s[p[a]].slice())}u.push(l)}return u}},74529:(t,e,r)=>{"use strict";t.exports=function(t){var e=t.length;if(e<3){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var s=new Array(e);for(n=0;n<e;++n)s[n]=n;s.sort((function(e,r){return t[e][0]-t[r][0]||t[e][1]-t[r][1]}));var o=[s[0],s[1]],a=[s[0],s[1]];for(n=2;n<e;++n){for(var h=s[n],u=t[h],p=o.length;p>1&&i(t[o[p-2]],t[o[p-1]],u)<=0;)p-=1,o.pop();for(o.push(h),p=a.length;p>1&&i(t[a[p-2]],t[a[p-1]],u)>=0;)p-=1,a.pop();a.push(h)}r=new Array(a.length+o.length-2);for(var l=0,f=(n=0,o.length);n<f;++n)r[l++]=o[n];for(var c=a.length-2;c>0;--c)r[l++]=a[c];return r};var i=r(50146)[3]},30611:(t,e,r)=>{"use strict";var i=r(90316),n=32;function s(t){switch(t){case"uint8":return[i.mallocUint8,i.freeUint8];case"uint16":return[i.mallocUint16,i.freeUint16];case"uint32":return[i.mallocUint32,i.freeUint32];case"int8":return[i.mallocInt8,i.freeInt8];case"int16":return[i.mallocInt16,i.freeInt16];case"int32":return[i.mallocInt32,i.freeInt32];case"float32":return[i.mallocFloat,i.freeFloat];case"float64":return[i.mallocDouble,i.freeDouble];default:return null}}function o(t){for(var e=[],r=0;r<t;++r)e.push("s"+r);for(r=0;r<t;++r)e.push("n"+r);for(r=1;r<t;++r)e.push("d"+r);for(r=1;r<t;++r)e.push("e"+r);for(r=1;r<t;++r)e.push("f"+r);return e}t.exports=function(t,e){var r=["'use strict'"],i=["ndarraySortWrapper",t.join("d"),e].join("");r.push(["function ",i,"(",["array"].join(","),"){"].join(""));for(var a=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],h=0;h<t.length;++h)a.push(["s",h,"=stride[",h,"]|0,n",h,"=shape[",h,"]|0"].join(""));var u=new Array(t.length),p=[];for(h=0;h<t.length;++h)0!==(c=t[h])&&(0===p.length?u[c]="1":u[c]=p.join("*"),p.push("n"+c));var l=-1,f=-1;for(h=0;h<t.length;++h){var c,v=t[h];0!==v&&(l>0?a.push(["d",v,"=s",v,"-d",l,"*n",l].join("")):a.push(["d",v,"=s",v].join("")),l=v),0!=(c=t.length-1-h)&&(f>0?a.push(["e",c,"=s",c,"-e",f,"*n",f,",f",c,"=",u[c],"-f",f,"*n",f].join("")):a.push(["e",c,"=s",c,",f",c,"=",u[c]].join("")),f=c)}r.push("var "+a.join(","));var d=["0","n0-1","data","offset"].concat(o(t.length));r.push(["if(n0<=",n,"){","insertionSort(",d.join(","),")}else{","quickSort(",d.join(","),")}"].join("")),r.push("}return "+i);var g=new Function("insertionSort","quickSort",r.join("\n")),m=function(t,e){var r=["'use strict'"],i=["ndarrayInsertionSort",t.join("d"),e].join(""),n=["left","right","data","offset"].concat(o(t.length)),a=s(e),h=["i,j,cptr,ptr=left*s0+offset"];if(t.length>1){for(var u=[],p=1;p<t.length;++p)h.push("i"+p),u.push("n"+p);a?h.push("scratch=malloc("+u.join("*")+")"):h.push("scratch=new Array("+u.join("*")+")"),h.push("dptr","sptr","a","b")}else h.push("scratch");function l(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function f(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}if(r.push(["function ",i,"(",n.join(","),"){var ",h.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),t.length>1){for(r.push("dptr=0;sptr=ptr"),p=t.length-1;p>=0;--p)0!==(c=t[p])&&r.push(["for(i",c,"=0;i",c,"<n",c,";++i",c,"){"].join(""));for(r.push("scratch[dptr++]=",l("sptr")),p=0;p<t.length;++p)0!==(c=t[p])&&r.push("sptr+=d"+c,"}");for(r.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0"),p=1;p<t.length;++p)1===p&&r.push("__l:"),r.push(["for(i",p,"=0;i",p,"<n",p,";++i",p,"){"].join(""));for(r.push(["a=",l("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join("")),p=t.length-1;p>=1;--p)r.push("sptr+=e"+p,"dptr+=f"+p,"}");for(r.push("dptr=cptr;sptr=cptr-s0"),p=t.length-1;p>=0;--p)0!==(c=t[p])&&r.push(["for(i",c,"=0;i",c,"<n",c,";++i",c,"){"].join(""));for(r.push(f("dptr",l("sptr"))),p=0;p<t.length;++p)0!==(c=t[p])&&r.push(["dptr+=d",c,";sptr+=d",c].join(""),"}");for(r.push("cptr-=s0\n}"),r.push("dptr=cptr;sptr=0"),p=t.length-1;p>=0;--p)0!==(c=t[p])&&r.push(["for(i",c,"=0;i",c,"<n",c,";++i",c,"){"].join(""));for(r.push(f("dptr","scratch[sptr++]")),p=0;p<t.length;++p){var c;0!==(c=t[p])&&r.push("dptr+=d"+c,"}")}}else r.push("scratch="+l("ptr"),"while((j--\x3eleft)&&("+l("cptr-s0")+">scratch)){",f("cptr",l("cptr-s0")),"cptr-=s0","}",f("cptr","scratch"));return r.push("}"),t.length>1&&a&&r.push("free(scratch)"),r.push("} return "+i),a?new Function("malloc","free",r.join("\n"))(a[0],a[1]):new Function(r.join("\n"))()}(t,e),y=function(t,e,r){var i=["'use strict'"],a=["ndarrayQuickSort",t.join("d"),e].join(""),h=["left","right","data","offset"].concat(o(t.length)),u=s(e),p=0;i.push(["function ",a,"(",h.join(","),"){"].join(""));var l=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(t.length>1){for(var f=[],c=1;c<t.length;++c)f.push("n"+c),l.push("i"+c);for(c=0;c<8;++c)l.push("b_ptr"+c);l.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+f.join("*")),u?l.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):l.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else l.push("pivot1","pivot2");function v(t){return["(offset+",t,"*s0)"].join("")}function d(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function g(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}function m(e,r,n){if(1===e.length)i.push("ptr0="+v(e[0]));else for(var s=0;s<e.length;++s)i.push(["b_ptr",s,"=s0*",e[s]].join(""));for(r&&i.push("pivot_ptr=0"),i.push("ptr_shift=offset"),s=t.length-1;s>=0;--s)0!==(o=t[s])&&i.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(e.length>1)for(s=0;s<e.length;++s)i.push(["ptr",s,"=b_ptr",s,"+ptr_shift"].join(""));for(i.push(n),r&&i.push("++pivot_ptr"),s=0;s<t.length;++s){var o;0!==(o=t[s])&&(e.length>1?i.push("ptr_shift+=d"+o):i.push("ptr0+=d"+o),i.push("}"))}}function y(e,r,n,s){if(1===r.length)i.push("ptr0="+v(r[0]));else{for(var o=0;o<r.length;++o)i.push(["b_ptr",o,"=s0*",r[o]].join(""));i.push("ptr_shift=offset")}for(n&&i.push("pivot_ptr=0"),e&&i.push(e+":"),o=1;o<t.length;++o)i.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(r.length>1)for(o=0;o<r.length;++o)i.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));for(i.push(s),o=t.length-1;o>=1;--o)n&&i.push("pivot_ptr+=f"+o),r.length>1?i.push("ptr_shift+=e"+o):i.push("ptr0+=e"+o),i.push("}")}function b(){t.length>1&&u&&i.push("free(pivot1)","free(pivot2)")}function x(e,r){var n="el"+e,s="el"+r;if(t.length>1){var o="__l"+ ++p;y(o,[n,s],!1,["comp=",d("ptr0"),"-",d("ptr1"),"\n","if(comp>0){tmp0=",n,";",n,"=",s,";",s,"=tmp0;break ",o,"}\n","if(comp<0){break ",o,"}"].join(""))}else i.push(["if(",d(v(n)),">",d(v(s)),"){tmp0=",n,";",n,"=",s,";",s,"=tmp0}"].join(""))}function A(e,r){t.length>1?m([e,r],!1,g("ptr0",d("ptr1"))):i.push(g(v(e),d(v(r))))}function w(e,r,n){if(t.length>1){var s="__l"+ ++p;y(s,[r],!0,[e,"=",d("ptr0"),"-pivot",n,"[pivot_ptr]\n","if(",e,"!==0){break ",s,"}"].join(""))}else i.push([e,"=",d(v(r)),"-pivot",n].join(""))}function j(e,r){t.length>1?m([e,r],!1,["tmp=",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1","tmp")].join("")):i.push(["ptr0=",v(e),"\n","ptr1=",v(r),"\n","tmp=",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1","tmp")].join(""))}function _(e,r,n){t.length>1?(m([e,r,n],!1,["tmp=",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1",d("ptr2")),"\n",g("ptr2","tmp")].join("")),i.push("++"+r,"--"+n)):i.push(["ptr0=",v(e),"\n","ptr1=",v(r),"\n","ptr2=",v(n),"\n","++",r,"\n","--",n,"\n","tmp=",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1",d("ptr2")),"\n",g("ptr2","tmp")].join(""))}function k(t,e){j(t,e),i.push("--"+e)}function S(e,r,n){t.length>1?m([e,r],!0,[g("ptr0",d("ptr1")),"\n",g("ptr1",["pivot",n,"[pivot_ptr]"].join(""))].join("")):i.push(g(v(e),d(v(r))),g(v(r),"pivot"+n))}function C(e,r){i.push(["if((",r,"-",e,")<=",n,"){\n","insertionSort(",e,",",r,",data,offset,",o(t.length).join(","),")\n","}else{\n",a,"(",e,",",r,",data,offset,",o(t.length).join(","),")\n","}"].join(""))}function I(e,r,n){t.length>1?(i.push(["__l",++p,":while(true){"].join("")),m([e],!0,["if(",d("ptr0"),"!==pivot",r,"[pivot_ptr]){break __l",p,"}"].join("")),i.push(n,"}")):i.push(["while(",d(v(e)),"===pivot",r,"){",n,"}"].join(""))}return i.push("var "+l.join(",")),x(1,2),x(4,5),x(1,3),x(2,3),x(1,4),x(3,4),x(2,5),x(2,3),x(4,5),t.length>1?m(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",d("ptr1"),"\n","pivot2[pivot_ptr]=",d("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",d("ptr0"),"\n","y=",d("ptr2"),"\n","z=",d("ptr4"),"\n",g("ptr5","x"),"\n",g("ptr6","y"),"\n",g("ptr7","z")].join("")):i.push(["pivot1=",d(v("el2")),"\n","pivot2=",d(v("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",d(v("el1")),"\n","y=",d(v("el3")),"\n","z=",d(v("el5")),"\n",g(v("index1"),"x"),"\n",g(v("index3"),"y"),"\n",g(v("index5"),"z")].join("")),A("index2","left"),A("index4","right"),i.push("if(pivots_are_equal){"),i.push("for(k=less;k<=great;++k){"),w("comp","k",1),i.push("if(comp===0){continue}"),i.push("if(comp<0){"),i.push("if(k!==less){"),j("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),i.push("while(true){"),w("comp","great",1),i.push("if(comp>0){"),i.push("great--"),i.push("}else if(comp<0){"),_("k","less","great"),i.push("break"),i.push("}else{"),k("k","great"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}else{"),i.push("for(k=less;k<=great;++k){"),w("comp_pivot1","k",1),i.push("if(comp_pivot1<0){"),i.push("if(k!==less){"),j("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),w("comp_pivot2","k",2),i.push("if(comp_pivot2>0){"),i.push("while(true){"),w("comp","great",2),i.push("if(comp>0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),w("comp","great",1),i.push("if(comp<0){"),_("k","less","great"),i.push("}else{"),k("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),S("left","(less-1)",1),S("right","(great+1)",2),C("left","(less-2)"),C("(great+2)","right"),i.push("if(pivots_are_equal){"),b(),i.push("return"),i.push("}"),i.push("if(less<index1&&great>index5){"),I("less",1,"++less"),I("great",2,"--great"),i.push("for(k=less;k<=great;++k){"),w("comp_pivot1","k",1),i.push("if(comp_pivot1===0){"),i.push("if(k!==less){"),j("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),w("comp_pivot2","k",2),i.push("if(comp_pivot2===0){"),i.push("while(true){"),w("comp","great",2),i.push("if(comp===0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),w("comp","great",1),i.push("if(comp<0){"),_("k","less","great"),i.push("}else{"),k("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),b(),C("less","great"),i.push("}return "+a),t.length>1&&u?new Function("insertionSort","malloc","free",i.join("\n"))(r,u[0],u[1]):new Function("insertionSort",i.join("\n"))(r)}(t,e,m);return g(m,y)}},59471:(t,e,r)=>{"use strict";var i=r(30611),n={};t.exports=function(t){var e=t.order,r=t.dtype,s=[e,r].join(":"),o=n[s];return o||(n[s]=o=i(e,r)),o(t),t}},32484:(t,e)=>{e.vertexNormals=function(t,e,r){for(var i=e.length,n=new Array(i),s=void 0===r?1e-6:r,o=0;o<i;++o)n[o]=[0,0,0];for(o=0;o<t.length;++o)for(var a=t[o],h=0,u=a[a.length-1],p=a[0],l=0;l<a.length;++l){h=u,u=p,p=a[(l+1)%a.length];for(var f=e[h],c=e[u],v=e[p],d=new Array(3),g=0,m=new Array(3),y=0,b=0;b<3;++b)d[b]=f[b]-c[b],g+=d[b]*d[b],m[b]=v[b]-c[b],y+=m[b]*m[b];if(g*y>s){var x=n[u],A=1/Math.sqrt(g*y);for(b=0;b<3;++b){var w=(b+1)%3,j=(b+2)%3;x[b]+=A*(m[w]*d[j]-m[j]*d[w])}}}for(o=0;o<i;++o){x=n[o];var _=0;for(b=0;b<3;++b)_+=x[b]*x[b];if(_>s)for(A=1/Math.sqrt(_),b=0;b<3;++b)x[b]*=A;else for(b=0;b<3;++b)x[b]=0}return n},e.faceNormals=function(t,e,r){for(var i=t.length,n=new Array(i),s=void 0===r?1e-6:r,o=0;o<i;++o){for(var a=t[o],h=new Array(3),u=0;u<3;++u)h[u]=e[a[u]];var p=new Array(3),l=new Array(3);for(u=0;u<3;++u)p[u]=h[1][u]-h[0][u],l[u]=h[2][u]-h[0][u];var f=new Array(3),c=0;for(u=0;u<3;++u){var v=(u+1)%3,d=(u+2)%3;f[u]=p[v]*l[d]-p[d]*l[v],c+=f[u]*f[u]}for(c=c>s?1/Math.sqrt(c):0,u=0;u<3;++u)f[u]*=c;n[o]=f}return n}},15687:t=>{"use strict";var e=new Float64Array(4),r=new Float64Array(4),i=new Float64Array(4);t.exports=function(t,n,s,o,a){e.length<o.length&&(e=new Float64Array(o.length),r=new Float64Array(o.length),i=new Float64Array(o.length));for(var h=0;h<o.length;++h)e[h]=t[h]-o[h],r[h]=n[h]-t[h],i[h]=s[h]-t[h];var u=0,p=0,l=0,f=0,c=0,v=0;for(h=0;h<o.length;++h){var d=r[h],g=i[h],m=e[h];u+=d*d,p+=d*g,l+=g*g,f+=m*d,c+=m*g,v+=m*m}var y,b,x,A,w,j=Math.abs(u*l-p*p),_=p*c-l*f,k=p*f-u*c;if(_+k<=j)if(_<0)k<0&&f<0?(k=0,-f>=u?(_=1,y=u+2*f+v):y=f*(_=-f/u)+v):(_=0,c>=0?(k=0,y=v):-c>=l?(k=1,y=l+2*c+v):y=c*(k=-c/l)+v);else if(k<0)k=0,f>=0?(_=0,y=v):-f>=u?(_=1,y=u+2*f+v):y=f*(_=-f/u)+v;else{var S=1/j;y=(_*=S)*(u*_+p*(k*=S)+2*f)+k*(p*_+l*k+2*c)+v}else _<0?(x=l+c)>(b=p+f)?(A=x-b)>=(w=u-2*p+l)?(_=1,k=0,y=u+2*f+v):y=(_=A/w)*(u*_+p*(k=1-_)+2*f)+k*(p*_+l*k+2*c)+v:(_=0,x<=0?(k=1,y=l+2*c+v):c>=0?(k=0,y=v):y=c*(k=-c/l)+v):k<0?(x=u+f)>(b=p+c)?(A=x-b)>=(w=u-2*p+l)?(k=1,_=0,y=l+2*c+v):y=(_=1-(k=A/w))*(u*_+p*k+2*f)+k*(p*_+l*k+2*c)+v:(k=0,x<=0?(_=1,y=u+2*f+v):f>=0?(_=0,y=v):y=f*(_=-f/u)+v):(A=l+c-p-f)<=0?(_=0,k=1,y=l+2*c+v):A>=(w=u-2*p+l)?(_=1,k=0,y=u+2*f+v):y=(_=A/w)*(u*_+p*(k=1-_)+2*f)+k*(p*_+l*k+2*c)+v;var C=1-_-k;for(h=0;h<o.length;++h)a[h]=C*t[h]+_*n[h]+k*s[h];return y<0?0:y}},35154:t=>{"use strict";t.exports=function(t){for(var e=t.length,r=t[t.length-1],i=e,n=e-2;n>=0;--n){var s=r,o=t[n];(h=o-((r=s+o)-s))&&(t[--i]=r,r=h)}var a=0;for(n=i;n<e;++n){var h;(h=(o=r)-((r=(s=t[n])+o)-s))&&(t[a++]=h)}return t[a++]=r,t.length=a,t}},89437:(t,e,r)=>{"use strict";var i=r(68005),n=r(56740),s=r(35442),o=r(35154);function a(t,e){for(var r=new Array(t.length-1),i=1;i<t.length;++i)for(var n=r[i-1]=new Array(t.length-1),s=0,o=0;s<t.length;++s)s!==e&&(n[o++]=t[i][s]);return r}function h(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var i=0;i<t;++i)e[r][i]=["m[",r,"][",i,"]"].join("")}return e}function u(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",u(t.slice(0,e)),",",u(t.slice(e)),")"].join("")}function p(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],r=0;r<t.length;++r)e.push(["scale(",p(a(t,r)),",",(i=r,1&i?"-":""),t[0][r],")"].join(""));return u(e);var i}function l(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",p(h(t)),")};return robustDeterminant",t].join(""))(n,s,i,o)}var f=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;f.length<6;)f.push(l(f.length));for(var e=[],r=["function robustDeterminant(m){switch(m.length){"],i=0;i<6;++i)e.push("det"+i),r.push("case ",i,":return det",i,"(m);");r.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",r.join(""));var n=Function.apply(void 0,e);for(t.exports=n.apply(void 0,f.concat([f,l])),i=0;i<f.length;++i)t.exports[i]=f[i]}()},89489:(t,e,r)=>{"use strict";var i=r(89437);function n(t){for(var e="robustLinearSolve"+t+"d",r=["function ",e,"(A,b){return ["],n=0;n<t;++n){r.push("det([");for(var s=0;s<t;++s){s>0&&r.push(","),r.push("[");for(var o=0;o<t;++o)o>0&&r.push(","),o===n?r.push("+b[",s,"]"):r.push("+A[",s,"][",o,"]");r.push("]")}r.push("]),")}return r.push("det(A)]}return ",e),new Function("det",r.join(""))(t<6?i[t]:i)}var s=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];!function(){for(;s.length<6;)s.push(n(s.length));for(var e=[],r=["function dispatchLinearSolve(A,b){switch(A.length){"],i=0;i<6;++i)e.push("s"+i),r.push("case ",i,":return s",i,"(A,b);");r.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",r.join(""));var o=Function.apply(void 0,e);for(t.exports=o.apply(void 0,s.concat([s,n])),i=0;i<6;++i)t.exports[i]=s[i]}()},84165:(t,e,r)=>{"use strict";t.exports=function(t,e,r,a){if(r=r||0,void 0===a&&(a=function(t){for(var e=t.length,r=0,i=0;i<e;++i)r=0|Math.max(r,t[i].length);return r-1}(t)),0===t.length||a<1)return{cells:[],vertexIds:[],vertexWeights:[]};var h=function(t,e){for(var r=t.length,i=n.mallocUint8(r),s=0;s<r;++s)i[s]=t[s]<e|0;return i}(e,+r),u=function(t,e){for(var r=t.length,o=e*(e+1)/2*r|0,a=n.mallocUint32(2*o),h=0,u=0;u<r;++u)for(var p=t[u],l=(e=p.length,0);l<e;++l)for(var f=0;f<l;++f){var c=p[f],v=p[l];a[h++]=0|Math.min(c,v),a[h++]=0|Math.max(c,v)}s(i(a,[h/2|0,2]));var d=2;for(u=2;u<h;u+=2)a[u-2]===a[u]&&a[u-1]===a[u+1]||(a[d++]=a[u],a[d++]=a[u+1]);return i(a,[d/2|0,2])}(t,a),p=function(t,e,r,s){for(var o=t.data,a=t.shape[0],h=n.mallocDouble(a),u=0,p=0;p<a;++p){var l=o[2*p],f=o[2*p+1];if(r[l]!==r[f]){var c=e[l],v=e[f];o[2*u]=l,o[2*u+1]=f,h[u++]=(v-s)/(v-c)}}return t.shape[0]=u,i(h,[u])}(u,e,h,+r),l=function(t,e){var r=n.mallocInt32(2*e),i=t.shape[0],s=t.data;r[0]=0;for(var o=0,a=0;a<i;++a){var h=s[2*a];if(h!==o){for(r[2*o+1]=a;++o<h;)r[2*o]=a,r[2*o+1]=a;r[2*o]=a}}for(r[2*o+1]=i;++o<e;)r[2*o]=r[2*o+1]=i;return r}(u,0|e.length),f=o(a)(t,u.data,l,h),c=function(t){for(var e=0|t.shape[0],r=t.data,i=new Array(e),n=0;n<e;++n)i[n]=[r[2*n],r[2*n+1]];return i}(u),v=[].slice.call(p.data,0,p.shape[0]);return n.free(h),n.free(u.data),n.free(p.data),n.free(l),{cells:f,vertexIds:c,vertexWeights:v}};var i=r(62861),n=r(90316),s=r(59471),o=r(65692)},65692:(t,e,r)=>{"use strict";t.exports=function(t){var e=s[t];return e||(e=s[t]=function(t){var e=0,r=new Array(t+1);r[0]=[[]];for(var s=1;s<=t;++s)for(var o=r[s]=n(s),a=0;a<o.length;++a)e=Math.max(e,o[s].length);var h=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",t,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function u(t){if(!(t.length<=0)){h.push("R.push(");for(var e=0;e<t.length;++e){var r=t[e];e>0&&h.push(","),h.push("[");for(var i=0;i<r.length;++i){var n=r[i];i>0&&h.push(","),h.push("B(C,E,c[",n[0],"],c[",n[1],"])")}h.push("]")}h.push(");")}}for(s=t+1;s>1;--s){s<t+1&&h.push("else "),h.push("if(l===",s,"){");var p=[];for(a=0;a<s;++a)p.push("(S[c["+a+"]]<<"+a+")");for(h.push("var M=",p.join("+"),";if(M===0||M===",(1<<s)-1,"){continue}switch(M){"),o=r[s-1],a=0;a<o.length;++a)h.push("case ",a,":"),u(o[a]),h.push("break;");h.push("}}")}return h.push("}return R;};return getContour",t,"d"),new Function("pool",h.join(""))(i)}(t)),e};var i=r(90316),n=r(95526),s={}},14572:(t,e,r)=>{"use strict";r(746),r(87102);function i(t,e){var r=t.length,i=t.length-e.length,n=Math.min;if(i)return i;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(a=t[0]+t[1]-e[0]-e[1])||n(t[0],t[1])-n(e[0],e[1]);case 3:var s=t[0]+t[1],o=e[0]+e[1];if(a=s+t[2]-(o+e[2]))return a;var a,h=n(t[0],t[1]),u=n(e[0],e[1]);return(a=n(h,t[2])-n(u,e[2]))||n(h+t[2],s)-n(u+e[2],o);default:var p=t.slice(0);p.sort();var l=e.slice(0);l.sort();for(var f=0;f<r;++f)if(i=p[f]-l[f])return i;return 0}}e.H=i}}]);