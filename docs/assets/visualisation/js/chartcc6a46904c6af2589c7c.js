(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[8009],{72754:(t,e,r)=>{"use strict";var i=r(56591);t.exports=function(t,e){var r=t.positions,n=t.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),s;for(var a=0,o=1/0,c=-1/0,l=1/0,u=-1/0,h=1/0,p=-1/0,d=null,f=null,v=[],x=1/0,g=!1,m=0;m<r.length;m++){var y=r[m];o=Math.min(y[0],o),c=Math.max(y[0],c),l=Math.min(y[1],l),u=Math.max(y[1],u),h=Math.min(y[2],h),p=Math.max(y[2],p);var b=n[m];if(i.length(b)>a&&(a=i.length(b)),m){var M=2*i.distance(d,y)/(i.length(f)+i.length(b));M?(x=Math.min(x,M),g=!1):g=!0}g||(d=y,f=b),v.push(b)}var S=[o,l,h],T=[c,u,p];e&&(e[0]=S,e[1]=T),0===a&&(a=1);var w=1/a;isFinite(x)||(x=1),s.vectorScale=x;var z=t.coneSize||.5;t.absoluteConeSize&&(z=t.absoluteConeSize*w),s.coneScale=z,m=0;for(var _=0;m<r.length;m++)for(var A=(y=r[m])[0],k=y[1],I=y[2],L=v[m],F=i.length(L)*w,O=0;O<8;O++){s.positions.push([A,k,I,_++]),s.positions.push([A,k,I,_++]),s.positions.push([A,k,I,_++]),s.positions.push([A,k,I,_++]),s.positions.push([A,k,I,_++]),s.positions.push([A,k,I,_++]),s.vectors.push(L),s.vectors.push(L),s.vectors.push(L),s.vectors.push(L),s.vectors.push(L),s.vectors.push(L),s.vertexIntensity.push(F,F,F),s.vertexIntensity.push(F,F,F);var P=s.positions.length;s.cells.push([P-6,P-5,P-4],[P-3,P-2,P-1])}return s};var n=r(5875);t.exports.createMesh=r(66330),t.exports.createConeMesh=function(e,r){return t.exports.createMesh(e,r,{shaders:n,traceType:"cone"})}},66330:(t,e,r)=>{"use strict";var i=r(18057),n=r(28580),s=r(24324),a=r(86753),o=r(29401),c=r(64481),l=r(62861),u=r(60800),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(t,e,r,i,n,s,a,o,c,l,u){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.pickShader=i,this.trianglePositions=n,this.triangleVectors=s,this.triangleColors=o,this.triangleUVs=c,this.triangleIds=a,this.triangleVAO=l,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=u,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=h,this._view=h,this._projection=h,this._resolution=[1,1]}var d=p.prototype;function f(t,e){var r=i(t,e.meshShader.vertex,e.meshShader.fragment,null,e.meshShader.attributes);return r.attributes.position.location=0,r.attributes.color.location=2,r.attributes.uv.location=3,r.attributes.vector.location=4,r}function v(t,e){var r=i(t,e.pickShader.vertex,e.pickShader.fragment,null,e.pickShader.attributes);return r.attributes.position.location=0,r.attributes.id.location=1,r.attributes.vector.location=4,r}d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(t){this.pickId=t},d.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),void 0!==t.tubeScale&&(this.tubeScale=t.tubeScale),void 0!==t.vectorScale&&(this.vectorScale=t.vectorScale),void 0!==t.coneScale&&(this.coneScale=t.coneScale),void 0!==t.coneOffset&&(this.coneOffset=t.coneOffset),t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t){for(var e=u({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),i=0;i<256;++i){for(var n=e[i],s=0;s<3;++s)r[4*i+s]=n[s];r[4*i+3]=255*n[3]}return l(r,[256,256,4],[4,0,1])}(t.colormap)),this.texture.generateMipmap());var r=t.cells,i=t.positions,n=t.vectors;if(i&&r&&n){var s=[],a=[],o=[],c=[],h=[];this.cells=r,this.positions=i,this.vectors=n;var p=t.meshColor||[1,1,1,1],d=t.vertexIntensity,f=1/0,v=-1/0;if(d)if(t.vertexIntensityBounds)f=+t.vertexIntensityBounds[0],v=+t.vertexIntensityBounds[1];else for(var x=0;x<d.length;++x){var g=d[x];f=Math.min(f,g),v=Math.max(v,g)}else for(x=0;x<i.length;++x)g=i[x][2],f=Math.min(f,g),v=Math.max(v,g);for(this.intensity=d||function(t){for(var e=t.length,r=new Array(e),i=0;i<e;++i)r[i]=t[i][2];return r}(i),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],x=0;x<i.length;++x)for(var m=i[x],y=0;y<3;++y)!isNaN(m[y])&&isFinite(m[y])&&(this.bounds[0][y]=Math.min(this.bounds[0][y],m[y]),this.bounds[1][y]=Math.max(this.bounds[1][y],m[y]));var b=0;t:for(x=0;x<r.length;++x){var M=r[x];if(3===M.length){for(y=0;y<3;++y){m=i[T=M[y]];for(var S=0;S<3;++S)if(isNaN(m[S])||!isFinite(m[S]))continue t}for(y=0;y<3;++y){var T;m=i[T=M[2-y]],s.push(m[0],m[1],m[2],m[3]);var w=n[T];a.push(w[0],w[1],w[2],w[3]||0);var z,_=p;3===_.length?o.push(_[0],_[1],_[2],1):o.push(_[0],_[1],_[2],_[3]),z=d?[(d[T]-f)/(v-f),0]:[(m[2]-f)/(v-f),0],c.push(z[0],z[1]),h.push(x)}b+=1}}this.triangleCount=b,this.trianglePositions.update(s),this.triangleVectors.update(a),this.triangleColors.update(o),this.triangleUVs.update(c),this.triangleIds.update(new Uint32Array(h))}},d.drawTransparent=d.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||h,i=t.view||h,n=t.projection||h,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)s[0][a]=Math.max(s[0][a],this.clipBounds[0][a]),s[1][a]=Math.min(s[1][a],this.clipBounds[1][a]);var l={model:r,view:i,projection:n,inverseModel:h.slice(),clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};l.inverseModel=c(l.inverseModel,l.model),e.disable(e.CULL_FACE),this.texture.bind(0);var u=new Array(16);for(o(u,l.view,l.model),o(u,l.projection,u),c(u,u),a=0;a<3;++a)l.eyePosition[a]=u[12+a]/u[15];var p=u[15];for(a=0;a<3;++a)p+=this.lightPosition[a]*u[4*a+3];for(a=0;a<3;++a){for(var d=u[12+a],f=0;f<3;++f)d+=u[4*f+a]*this.lightPosition[f];l.lightPosition[a]=d/p}if(this.triangleCount>0){var v=this.triShader;v.bind(),v.uniforms=l,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},d.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||h,i=t.view||h,n=t.projection||h,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)s[0][a]=Math.max(s[0][a],this.clipBounds[0][a]),s[1][a]=Math.min(s[1][a],this.clipBounds[1][a]);this._model=[].slice.call(r),this._view=[].slice.call(i),this._projection=[].slice.call(n),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var o={model:r,view:i,projection:n,clipBounds:s,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},c=this.pickShader;c.bind(),c.uniforms=o,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},d.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],i=this.positions[r[1]].slice(0,3),n={position:i,dataCoordinate:i,index:Math.floor(r[1]/48)};return"cone"===this.traceType?n.index=Math.floor(r[1]/48):"streamtube"===this.traceType&&(n.intensity=this.intensity[r[1]],n.velocity=this.vectors[r[1]].slice(0,3),n.divergence=this.vectors[r[1]][3],n.index=e),n},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=function(t,e,r){var i=r.shaders;1===arguments.length&&(t=(e=t).gl);var o=f(t,i),c=v(t,i),u=a(t,l(new Uint8Array([255,255,255,255]),[1,1,4]));u.generateMipmap(),u.minFilter=t.LINEAR_MIPMAP_LINEAR,u.magFilter=t.LINEAR;var h=n(t),d=n(t),x=n(t),g=n(t),m=n(t),y=s(t,[{buffer:h,type:t.FLOAT,size:4},{buffer:m,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:t.FLOAT,size:4},{buffer:g,type:t.FLOAT,size:2},{buffer:d,type:t.FLOAT,size:4}]),b=new p(t,u,o,c,h,d,m,x,g,y,r.traceType||"cone");return b.update(e),b}},5875:(t,e,r)=>{var i=r(72645),n=i("./triangle-vertex.glsl"),s=i("./triangle-fragment.glsl"),a=i("./pick-vertex.glsl"),o=i("./pick-fragment.glsl");e.meshShader={vertex:n,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},e.pickShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},76636:(t,e,r)=>{var i=r(72645),n=i("./triangle-vertex.glsl"),s=i("./triangle-fragment.glsl"),a=i("./pick-vertex.glsl"),o=i("./pick-fragment.glsl");e.meshShader={vertex:n,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},e.pickShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},25368:(t,e,r)=>{"use strict";var i=r(56591),n=r(22925),s=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(t,e){var r,i=t.length;for(r=0;r<i;r++){var n=t[r];if(n===e)return r;if(n>e)return r-1}return r},o=function(t,e,r){return t<e?e:t>r?r:t},c=function(t){var e=1/0;t.sort((function(t,e){return t-e}));for(var r=t.length,i=1;i<r;i++){var n=Math.abs(t[i]-t[i-1]);n<e&&(e=n)}return e};t.exports=function(t,e){var r=t.startingPositions,l=t.maxLength||1e3,u=t.tubeSize||1,h=t.absoluteTubeSize,p=t.gridFill||"+x+y+z",d={};-1!==p.indexOf("-x")&&(d.reversedX=!0),-1!==p.indexOf("-y")&&(d.reversedY=!0),-1!==p.indexOf("-z")&&(d.reversedZ=!0),d.filled=s.indexOf(p.replace(/-/g,"").replace(/\+/g,""));var f=t.getVelocity||function(e){return function(t,e,r){var n=e.vectors,s=e.meshgrid,c=t[0],l=t[1],u=t[2],h=s[0].length,p=s[1].length,d=s[2].length,f=a(s[0],c),v=a(s[1],l),x=a(s[2],u),g=f+1,m=v+1,y=x+1;if(f=o(f,0,h-1),g=o(g,0,h-1),v=o(v,0,p-1),m=o(m,0,p-1),x=o(x,0,d-1),y=o(y,0,d-1),f<0||v<0||x<0||g>h-1||m>p-1||y>d-1)return i.create();var b,M,S,T,w,z,_=s[0][f],A=s[0][g],k=s[1][v],I=s[1][m],L=s[2][x],F=(c-_)/(A-_),O=(l-k)/(I-k),P=(u-L)/(s[2][y]-L);switch(isFinite(F)||(F=.5),isFinite(O)||(O=.5),isFinite(P)||(P=.5),r.reversedX&&(f=h-1-f,g=h-1-g),r.reversedY&&(v=p-1-v,m=p-1-m),r.reversedZ&&(x=d-1-x,y=d-1-y),r.filled){case 5:w=x,z=y,S=v*d,T=m*d,b=f*d*p,M=g*d*p;break;case 4:w=x,z=y,b=f*d,M=g*d,S=v*d*h,T=m*d*h;break;case 3:S=v,T=m,w=x*p,z=y*p,b=f*p*d,M=g*p*d;break;case 2:S=v,T=m,b=f*p,M=g*p,w=x*p*h,z=y*p*h;break;case 1:b=f,M=g,w=x*h,z=y*h,S=v*h*d,T=m*h*d;break;default:b=f,M=g,S=v*h,T=m*h,w=x*h*p,z=y*h*p}var C=n[b+S+w],q=n[b+S+z],B=n[b+T+w],j=n[b+T+z],N=n[M+S+w],E=n[M+S+z],V=n[M+T+w],D=n[M+T+z],R=i.create(),U=i.create(),Y=i.create(),X=i.create();i.lerp(R,C,N,F),i.lerp(U,q,E,F),i.lerp(Y,B,V,F),i.lerp(X,j,D,F);var Z=i.create(),G=i.create();i.lerp(Z,R,Y,O),i.lerp(G,U,X,O);var Q=i.create();return i.lerp(Q,Z,G,P),Q}(e,t,d)},v=t.getDivergence||function(t,e){var r=i.create(),n=1e-4;i.add(r,t,[n,0,0]);var s=f(r);i.subtract(s,s,e),i.scale(s,s,1/n),i.add(r,t,[0,n,0]);var a=f(r);i.subtract(a,a,e),i.scale(a,a,1/n),i.add(r,t,[0,0,n]);var o=f(r);return i.subtract(o,o,e),i.scale(o,o,1/n),i.add(r,s,a),i.add(r,r,o),r},x=[],g=e[0][0],m=e[0][1],y=e[0][2],b=e[1][0],M=e[1][1],S=e[1][2],T=function(t){var e=t[0],r=t[1],i=t[2];return!(e<g||e>b||r<m||r>M||i<y||i>S)},w=10*i.distance(e[0],e[1])/l,z=w*w,_=1,A=0,k=r.length;k>1&&(_=function(t){for(var e=[],r=[],i=[],n={},s={},a={},o=t.length,l=0;l<o;l++){var u=t[l],h=u[0],p=u[1],d=u[2];n[h]||(e.push(h),n[h]=!0),s[p]||(r.push(p),s[p]=!0),a[d]||(i.push(d),a[d]=!0)}var f=c(e),v=c(r),x=c(i),g=Math.min(f,v,x);return isFinite(g)?g:1}(r));for(var I=0;I<k;I++){var L=i.create();i.copy(L,r[I]);var F=[L],O=[],P=f(L),C=L;O.push(P);var q=[],B=v(L,P),j=i.length(B);isFinite(j)&&j>A&&(A=j),q.push(j),x.push({points:F,velocities:O,divergences:q});for(var N=0;N<100*l&&F.length<l&&T(L);){N++;var E=i.clone(P),V=i.squaredLength(E);if(0===V)break;V>z&&i.scale(E,E,w/Math.sqrt(V)),i.add(E,E,L),P=f(E),i.squaredDistance(C,E)-z>-1e-4*z&&(F.push(E),C=E,O.push(P),B=v(E,P),j=i.length(B),isFinite(j)&&j>A&&(A=j),q.push(j)),L=E}}var D=function(t,e,r,s){for(var a=0,o=0;o<t.length;o++)for(var c=t[o].velocities,l=0;l<c.length;l++)a=Math.max(a,i.length(c[l]));var u=t.map((function(t){return function(t,e,r,s){for(var a=t.points,o=t.velocities,c=t.divergences,l=[],u=[],h=[],p=[],d=[],f=[],v=0,x=0,g=n.create(),m=n.create(),y=0;y<a.length;y++){var b=a[y],M=o[y],S=c[y];0===e&&(S=.05*r),x=i.length(M)/s,g=n.create(),i.copy(g,M),g[3]=S;for(var T=0;T<8;T++)d[T]=[b[0],b[1],b[2],T];if(p.length>0)for(T=0;T<8;T++){var w=(T+1)%8;l.push(p[T],d[T],d[w],d[w],p[w],p[T]),h.push(m,g,g,g,m,m),f.push(v,x,x,x,v,v);var z=l.length;u.push([z-6,z-5,z-4],[z-3,z-2,z-1])}var _=p;p=d,d=_;var A=m;m=g,g=A;var k=v;v=x,x=k}return{positions:l,cells:u,vectors:h,vertexIntensity:f}}(t,r,s,a)})),h=[],p=[],d=[],f=[];for(o=0;o<u.length;o++){var v=u[o],x=h.length;for(h=h.concat(v.positions),d=d.concat(v.vectors),f=f.concat(v.vertexIntensity),l=0;l<v.cells.length;l++){var g=v.cells[l],m=[];p.push(m);for(var y=0;y<g.length;y++)m.push(g[y]+x)}}return{positions:h,cells:p,vectors:d,vertexIntensity:f,colormap:e}}(x,t.colormap,A,_);return h?D.tubeScale=h:(0===A&&(A=1),D.tubeScale=.5*u*_/A),D};var l=r(76636),u=r(72754).createMesh;t.exports.createTubeMesh=function(t,e){return u(t,e,{shaders:l,traceType:"streamtube"})}},62512:t=>{t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}},22237:(t,e,r)=>{t.exports=function(t,e){var r=i(t[0],t[1],t[2]),a=i(e[0],e[1],e[2]);n(r,r),n(a,a);var o=s(r,a);return o>1?0:Math.acos(o)};var i=r(45221),n=r(60091),s=r(58368)},98798:t=>{t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},56522:t=>{t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},39982:t=>{t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},23544:t=>{t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},45507:(t,e,r)=>{t.exports=r(90176)},90176:t=>{t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}},67924:(t,e,r)=>{t.exports=r(97041)},97041:t=>{t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}},77159:t=>{t.exports=1e-6},488:(t,e,r)=>{t.exports=function(t,e){var r=t[0],n=t[1],s=t[2],a=e[0],o=e[1],c=e[2];return Math.abs(r-a)<=i*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=i*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(s-c)<=i*Math.max(1,Math.abs(s),Math.abs(c))};var i=r(77159)},40180:t=>{t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},1170:t=>{t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},39003:(t,e,r)=>{t.exports=function(t,e,r,n,s,a){var o,c;for(e||(e=3),r||(r=0),c=n?Math.min(n*e+r,t.length):t.length,o=r;o<c;o+=e)i[0]=t[o],i[1]=t[o+1],i[2]=t[o+2],s(i,i,a),t[o]=i[0],t[o+1]=i[1],t[o+2]=i[2];return t};var i=r(23544)()},45221:t=>{t.exports=function(t,e,r){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=r,i}},56591:(t,e,r)=>{t.exports={EPSILON:r(77159),create:r(23544),clone:r(56522),angle:r(22237),fromValues:r(45221),copy:r(39982),set:r(2738),equals:r(488),exactEquals:r(40180),add:r(62512),subtract:r(64703),sub:r(69965),multiply:r(93943),mul:r(99007),divide:r(97041),div:r(67924),min:r(72234),max:r(91874),floor:r(1170),ceil:r(98798),round:r(42499),scale:r(54657),scaleAndAdd:r(80117),distance:r(90176),dist:r(45507),squaredDistance:r(60467),sqrDist:r(18399),length:r(97563),len:r(85421),squaredLength:r(91189),sqrLen:r(93729),negate:r(68811),inverse:r(82658),normalize:r(60091),dot:r(58368),cross:r(53858),lerp:r(6919),random:r(62563),transformMat4:r(91156),transformMat3:r(93459),transformQuat:r(21092),rotateX:r(43741),rotateY:r(13631),rotateZ:r(11586),forEach:r(39003)}},82658:t=>{t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},85421:(t,e,r)=>{t.exports=r(97563)},91874:t=>{t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}},72234:t=>{t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}},99007:(t,e,r)=>{t.exports=r(93943)},93943:t=>{t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}},68811:t=>{t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},62563:t=>{t.exports=function(t,e){e=e||1;var r=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=i*e,t}},43741:t=>{t.exports=function(t,e,r,i){var n=r[1],s=r[2],a=e[1]-n,o=e[2]-s,c=Math.sin(i),l=Math.cos(i);return t[0]=e[0],t[1]=n+a*l-o*c,t[2]=s+a*c+o*l,t}},13631:t=>{t.exports=function(t,e,r,i){var n=r[0],s=r[2],a=e[0]-n,o=e[2]-s,c=Math.sin(i),l=Math.cos(i);return t[0]=n+o*c+a*l,t[1]=e[1],t[2]=s+o*l-a*c,t}},11586:t=>{t.exports=function(t,e,r,i){var n=r[0],s=r[1],a=e[0]-n,o=e[1]-s,c=Math.sin(i),l=Math.cos(i);return t[0]=n+a*l-o*c,t[1]=s+a*c+o*l,t[2]=e[2],t}},42499:t=>{t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},54657:t=>{t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}},80117:t=>{t.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}},2738:t=>{t.exports=function(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}},18399:(t,e,r)=>{t.exports=r(60467)},93729:(t,e,r)=>{t.exports=r(91189)},60467:t=>{t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}},91189:t=>{t.exports=function(t){var e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}},69965:(t,e,r)=>{t.exports=r(64703)},64703:t=>{t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}},93459:t=>{t.exports=function(t,e,r){var i=e[0],n=e[1],s=e[2];return t[0]=i*r[0]+n*r[3]+s*r[6],t[1]=i*r[1]+n*r[4]+s*r[7],t[2]=i*r[2]+n*r[5]+s*r[8],t}},91156:t=>{t.exports=function(t,e,r){var i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*i+r[4]*n+r[8]*s+r[12])/a,t[1]=(r[1]*i+r[5]*n+r[9]*s+r[13])/a,t[2]=(r[2]*i+r[6]*n+r[10]*s+r[14])/a,t}},21092:t=>{t.exports=function(t,e,r){var i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],c=r[2],l=r[3],u=l*i+o*s-c*n,h=l*n+c*i-a*s,p=l*s+a*n-o*i,d=-a*i-o*n-c*s;return t[0]=u*l+d*-a+h*-c-p*-o,t[1]=h*l+d*-o+p*-a-u*-c,t[2]=p*l+d*-c+u*-o-h*-a,t}},61320:t=>{t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}},91933:t=>{t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},46330:t=>{t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},47330:t=>{t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},18227:t=>{t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(r*r+i*i+n*n+s*s)}},16385:t=>{t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}},89522:t=>{t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},13444:t=>{t.exports=function(t,e,r,i){var n=new Float32Array(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n}},22925:(t,e,r)=>{t.exports={create:r(47330),clone:r(91933),fromValues:r(13444),copy:r(46330),set:r(35338),add:r(61320),subtract:r(5616),multiply:r(78161),divide:r(16385),min:r(22617),max:r(18406),scale:r(11284),scaleAndAdd:r(38148),distance:r(18227),squaredDistance:r(15563),length:r(89548),squaredLength:r(46641),negate:r(17171),inverse:r(11859),normalize:r(27999),dot:r(89522),lerp:r(96507),random:r(46567),transformMat4:r(54020),transformQuat:r(1262)}},11859:t=>{t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},89548:t=>{t.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return Math.sqrt(e*e+r*r+i*i+n*n)}},96507:t=>{t.exports=function(t,e,r,i){var n=e[0],s=e[1],a=e[2],o=e[3];return t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s),t[2]=a+i*(r[2]-a),t[3]=o+i*(r[3]-o),t}},18406:t=>{t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}},22617:t=>{t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}},78161:t=>{t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}},17171:t=>{t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},27999:t=>{t.exports=function(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],a=r*r+i*i+n*n+s*s;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=i*a,t[2]=n*a,t[3]=s*a),t}},46567:(t,e,r)=>{var i=r(27999),n=r(11284);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),i(t,t),n(t,t,e),t}},11284:t=>{t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}},38148:t=>{t.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t}},35338:t=>{t.exports=function(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t}},15563:t=>{t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return r*r+i*i+n*n+s*s}},46641:t=>{t.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return e*e+r*r+i*i+n*n}},5616:t=>{t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}},1262:t=>{t.exports=function(t,e,r){var i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],c=r[2],l=r[3],u=l*i+o*s-c*n,h=l*n+c*i-a*s,p=l*s+a*n-o*i,d=-a*i-o*n-c*s;return t[0]=u*l+d*-a+h*-c-p*-o,t[1]=h*l+d*-o+p*-a-u*-c,t[2]=p*l+d*-c+u*-o-h*-a,t[3]=e[3],t}},78009:(t,e,r)=>{"use strict";t.exports=r(54778)},73265:(t,e,r)=>{"use strict";var i=r(85088),n=r(88176).f,s=r(83952),a=r(85485),o=r(94867).extendFlat,c={x:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the x coordinates of the vector field."},y:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the y coordinates of the vector field."},z:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the z coordinates of the vector field."},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},starts:{x:{valType:"data_array",editType:"calc",description:["Sets the x components of the starting position of the streamtubes"].join(" ")},y:{valType:"data_array",editType:"calc",description:["Sets the y components of the starting position of the streamtubes"].join(" ")},z:{valType:"data_array",editType:"calc",description:["Sets the z components of the starting position of the streamtubes"].join(" ")},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,role:"info",editType:"calc",description:["The maximum number of displayed segments in a streamtube."].join(" ")},sizeref:{valType:"number",role:"info",editType:"calc",min:0,dflt:1,description:["The scaling factor for the streamtubes.","The default is 1, which avoids two max divergence tubes from touching","at adjacent starting positions."].join(" ")},text:{valType:"string",role:"info",dflt:"",editType:"calc",description:["Sets a text element associated with this trace.","If trace `hoverinfo` contains a *text* flag,","this text element will be seen in all hover labels.","Note that streamtube traces do not support array `text` values."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",editType:"calc",description:"Same as `text`."},hovertemplate:n({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),showlegend:o({},a.showlegend,{dflt:!1})};o(c,i("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach((function(t){c[t]=s[t]})),c.hoverinfo=o({},a.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),c.transforms=void 0,t.exports=c},77811:(t,e,r)=>{"use strict";var i=r(25368),n=i.createTubeMesh,s=r(34141),a=r(72106).parseColorScale,o=r(59430).extractOpts,c=r(98619),l={xaxis:0,yaxis:1,zaxis:2};function u(t,e){this.scene=t,this.uid=e,this.mesh=null,this.data=null}var h=u.prototype;function p(t){var e=t.length;return e>2?t.slice(1,e-1):2===e?[(t[0]+t[1])/2]:t}function d(t){var e=t.length;return 1===e?[.5,.5]:[t[1]-t[0],t[e-1]-t[e-2]]}function f(t,e){var r=t.fullSceneLayout,n=t.dataScale,u=e._len,h={};function f(t,e){var i=r[e],a=n[l[e]];return s.simpleMap(t,(function(t){return i.d2l(t)*a}))}if(h.vectors=c(f(e._u,"xaxis"),f(e._v,"yaxis"),f(e._w,"zaxis"),u),!u)return{positions:[],cells:[]};var v=f(e._Xs,"xaxis"),x=f(e._Ys,"yaxis"),g=f(e._Zs,"zaxis");if(h.meshgrid=[v,x,g],h.gridFill=e._gridFill,e._slen)h.startingPositions=c(f(e._startsX,"xaxis"),f(e._startsY,"yaxis"),f(e._startsZ,"zaxis"));else{for(var m=x[0],y=p(v),b=p(g),M=new Array(y.length*b.length),S=0,T=0;T<y.length;T++)for(var w=0;w<b.length;w++)M[S++]=[y[T],m,b[w]];h.startingPositions=M}h.colormap=a(e),h.tubeSize=e.sizeref,h.maxLength=e.maxdisplayed;var z=f(e._xbnds,"xaxis"),_=f(e._ybnds,"yaxis"),A=f(e._zbnds,"zaxis"),k=d(v),I=d(x),L=d(g),F=[[z[0]-k[0],_[0]-I[0],A[0]-L[0]],[z[1]+k[1],_[1]+I[1],A[1]+L[1]]],O=i(h,F),P=o(e);O.vertexIntensityBounds=[P.min/e._normMax,P.max/e._normMax];var C=e.lightposition;return O.lightPosition=[C.x,C.y,C.z],O.ambient=e.lighting.ambient,O.diffuse=e.lighting.diffuse,O.specular=e.lighting.specular,O.roughness=e.lighting.roughness,O.fresnel=e.lighting.fresnel,O.opacity=e.opacity,e._pad=O.tubeScale*e.sizeref*2,O}h.handlePick=function(t){var e=this.scene.fullSceneLayout,r=this.scene.dataScale;function i(t,i){var n=e[i],s=r[l[i]];return n.l2c(t)/s}if(t.object===this.mesh){var n=t.data.position,s=t.data.velocity;return t.traceCoordinate=[i(n[0],"xaxis"),i(n[1],"yaxis"),i(n[2],"zaxis"),i(s[0],"xaxis"),i(s[1],"yaxis"),i(s[2],"zaxis"),t.data.intensity*this.data._normMax,t.data.divergence],t.textLabel=this.data.hovertext||this.data.text,!0}},h.update=function(t){this.data=t;var e=f(this.scene,t);this.mesh.update(e)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},t.exports=function(t,e){var r=t.glplot.gl,i=f(t,e),s=n(r,i),a=new u(t,e.uid);return a.mesh=s,a.data=e,s._trace=a,t.glplot.add(s),a}},96672:(t,e,r)=>{"use strict";var i=r(34141),n=r(62252),s=r(73265);t.exports=function(t,e,r,a){function o(r,n){return i.coerce(t,e,s,r,n)}var c=o("u"),l=o("v"),u=o("w"),h=o("x"),p=o("y"),d=o("z");c&&c.length&&l&&l.length&&u&&u.length&&h&&h.length&&p&&p.length&&d&&d.length?(o("starts.x"),o("starts.y"),o("starts.z"),o("maxdisplayed"),o("sizeref"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),n(t,e,a,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),e._length=null):e.visible=!1}},54778:(t,e,r)=>{"use strict";t.exports={moduleType:"trace",name:"streamtube",basePlotModule:r(20883),categories:["gl3d","showLegend"],attributes:r(73265),supplyDefaults:r(96672),colorbar:{min:"cmin",max:"cmax"},calc:r(64662).calc,plot:r(77811),eventData:function(t,e){return t.tubex=t.x,t.tubey=t.y,t.tubez=t.z,t.tubeu=e.traceCoordinate[3],t.tubev=e.traceCoordinate[4],t.tubew=e.traceCoordinate[5],t.norm=e.traceCoordinate[6],t.divergence=e.traceCoordinate[7],delete t.x,delete t.y,delete t.z,t},meta:{description:["Use a streamtube trace to visualize flow in a vector field.","","Specify a vector field using 6 1D arrays of equal length,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, and `w`.","","By default, the tubes' starting positions will be cut from the vector field's","x-z plane at its minimum y value.","To specify your own starting position, use attributes `starts.x`, `starts.y`","and `starts.z`.","The color is encoded by the norm of (u, v, w), and the local radius","by the divergence of (u, v, w)."].join(" ")}}}}]);