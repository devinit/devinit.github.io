(self.webpackChunkdi_website=self.webpackChunkdi_website||[]).push([[5332,3769,7400,8613,5472,8577,1881,7254,8732,4048,6791,4914],{38200:(e,t,a)=>{"use strict";e.exports=function(e,t){return r(t).filter((function(a){for(var r=new Array(a.length),i=0;i<a.length;++i)r[i]=t[a[i]];return o(r)*e<1}))};var r=a(91930),o=a(14341)},3269:(e,t,a)=>{e.exports=function(e,t){return o(r(e,t))};var r=a(38200),o=a(83972)},73758:e=>{e.exports=function(e,t){var a="number"==typeof e,r="number"==typeof t;a&&!r?(t=e,e=0):a||r||(e=0,t=0);var o=(t|=0)-(e|=0);if(o<0)throw new Error("array length must be positive");for(var i=new Array(o),n=0,s=e;n<o;n++,s++)i[n]=s;return i}},49995:e=>{"use strict";e.exports=function(e){var t,a,r,o=e.length,i=0;for(t=0;t<o;++t)i+=e[t].length;var n=new Array(i),s=0;for(t=0;t<o;++t){var l=e[t],c=l.length;for(a=0;a<c;++a){var p=n[s++]=new Array(c-1),d=0;for(r=0;r<c;++r)r!==a&&(p[d++]=l[r]);if(1&a){var h=p[1];p[1]=p[0],p[0]=h}}}return n}},42989:e=>{"use strict";e.exports=function(e){for(var t=1,a=1;a<e.length;++a)for(var r=0;r<a;++r)if(e[a]<e[r])t=-t;else if(e[r]===e[a])return 0;return t}},15645:(e,t,a)=>{"use strict";var r=a(96841),o=a(89489);function i(e,t){for(var a=0,r=e.length,o=0;o<r;++o)a+=e[o]*t[o];return a}function n(e){var t=e.length;if(0===t)return[];e[0].length;var a=r([e.length+1,e.length+1],1),n=r([e.length+1],1);a[t][t]=0;for(var s=0;s<t;++s){for(var l=0;l<=s;++l)a[l][s]=a[s][l]=2*i(e[s],e[l]);n[s]=i(e[s],e[s])}var c=o(a,n),p=0,d=c[t+1];for(s=0;s<d.length;++s)p+=d[s];var h=new Array(t);for(s=0;s<t;++s){d=c[s];var u=0;for(l=0;l<d.length;++l)u+=d[l];h[s]=u/p}return h}function s(e){if(0===e.length)return[];for(var t=e[0].length,a=r([t]),o=n(e),i=0;i<e.length;++i)for(var s=0;s<t;++s)a[s]+=e[i][s]*o[i];return a}s.barycenetric=n,e.exports=s},14341:(e,t,a)=>{e.exports=function(e){for(var t=r(e),a=0,o=0;o<e.length;++o)for(var i=e[o],n=0;n<t.length;++n)a+=Math.pow(i[n]-t[n],2);return Math.sqrt(a/e.length)};var r=a(15645)},68032:e=>{e.exports=function(e,r){var o=e.length,i=e.length-r.length;if(i)return i;switch(o){case 0:return 0;case 1:return e[0]-r[0];case 2:return e[0]+e[1]-r[0]-r[1]||t(e[0],e[1])-t(r[0],r[1]);case 3:var n=e[0]+e[1],s=r[0]+r[1];if(i=n+e[2]-(s+r[2]))return i;var l=t(e[0],e[1]),c=t(r[0],r[1]);return t(l,e[2])-t(c,r[2])||t(l+e[2],n)-t(c+r[2],s);case 4:var p=e[0],d=e[1],h=e[2],u=e[3],f=r[0],y=r[1],m=r[2],x=r[3];return p+d+h+u-(f+y+m+x)||t(p,d,h,u)-t(f,y,m,x,f)||t(p+d,p+h,p+u,d+h,d+u,h+u)-t(f+y,f+m,f+x,y+m,y+x,m+x)||t(p+d+h,p+d+u,p+h+u,d+h+u)-t(f+y+m,f+y+x,f+m+x,y+m+x);default:for(var v=e.slice().sort(a),g=r.slice().sort(a),b=0;b<o;++b)if(i=v[b]-g[b])return i;return 0}};var t=Math.min;function a(e,t){return e-t}},669:(e,t,a)=>{"use strict";var r=a(68032),o=a(42989);e.exports=function(e,t){return r(e,t)||o(e)-o(t)}},62319:(e,t,a)=>{"use strict";e.exports=function(e,t){var a=e.gl,r=new c(e,n(a,l.vertex,l.fragment),n(a,l.pickVertex,l.pickFragment),s(a),s(a),s(a),s(a));return r.update(t),e.addObject(r),r};var r=a(73076),o=a(16907),i=a(90316),n=a(18057),s=a(28580),l=a(54468);function c(e,t,a,r,o,i,n){this.plot=e,this.shader=t,this.pickShader=a,this.positionBuffer=r,this.weightBuffer=o,this.colorBuffer=i,this.idBuffer=n,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var p,d=c.prototype,h=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=(p=[1,0,0,0,1,0,0,0,1],function(){var e=this.plot,t=this.shader,a=this.bounds,r=this.numVertices;if(!(r<=0)){var o=e.gl,i=e.dataBox,n=a[2]-a[0],s=a[3]-a[1],l=i[2]-i[0],c=i[3]-i[1];p[0]=2*n/l,p[4]=2*s/c,p[6]=2*(a[0]-i[0])/l-1,p[7]=2*(a[1]-i[1])/c-1,t.bind();var d=t.uniforms;d.viewTransform=p,d.shape=this.shape;var h=t.attributes;this.positionBuffer.bind(),h.position.pointer(),this.weightBuffer.bind(),h.weight.pointer(o.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),h.color.pointer(o.UNSIGNED_BYTE,!0),o.drawArrays(o.TRIANGLES,0,r)}}),d.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(a){var r=this.plot,o=this.pickShader,i=this.bounds,n=this.numVertices;if(!(n<=0)){var s=r.gl,l=r.dataBox,c=i[2]-i[0],p=i[3]-i[1],d=l[2]-l[0],h=l[3]-l[1];e[0]=2*c/d,e[4]=2*p/h,e[6]=2*(i[0]-l[0])/d-1,e[7]=2*(i[1]-l[1])/h-1;for(var u=0;u<4;++u)t[u]=a>>8*u&255;this.pickOffset=a,o.bind();var f=o.uniforms;f.viewTransform=e,f.pickOffset=t,f.shape=this.shape;var y=o.attributes;return this.positionBuffer.bind(),y.position.pointer(),this.weightBuffer.bind(),y.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),y.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,n),a+this.shape[0]*this.shape[1]}}}(),d.pick=function(e,t,a){var r=this.pickOffset,o=this.shape[0]*this.shape[1];if(a<r||a>=r+o)return null;var i=a-r,n=this.xData,s=this.yData;return{object:this,pointId:i,dataCoord:[n[i%this.shape[0]],s[i/this.shape[0]|0]]}},d.update=function(e){var t=(e=e||{}).shape||[0,0],a=e.x||o(t[0]),n=e.y||o(t[1]),s=e.z||new Float32Array(t[0]*t[1]);this.xData=a,this.yData=n;var l=e.colorLevels||[0],c=e.colorValues||[0,0,0,1],p=l.length,d=this.bounds,u=d[0]=a[0],f=d[1]=n[0],y=1/((d[2]=a[a.length-1])-u),m=1/((d[3]=n[n.length-1])-f),x=t[0],v=t[1];this.shape=[x,v];var g=(x-1)*(v-1)*(h.length>>>1);this.numVertices=g;for(var b=i.mallocUint8(4*g),w=i.mallocFloat32(2*g),T=i.mallocUint8(2*g),k=i.mallocUint32(g),_=0,S=0;S<v-1;++S)for(var L=m*(n[S]-f),z=m*(n[S+1]-f),A=0;A<x-1;++A)for(var M=y*(a[A]-u),O=y*(a[A+1]-u),D=0;D<h.length;D+=2){var j,I,C,P,F=h[D],N=h[D+1],B=s[(S+N)*x+(A+F)],V=r.le(l,B);if(V<0)j=c[0],I=c[1],C=c[2],P=c[3];else if(V===p-1)j=c[4*p-4],I=c[4*p-3],C=c[4*p-2],P=c[4*p-1];else{var E=(B-l[V])/(l[V+1]-l[V]),R=1-E,G=4*V,U=4*(V+1);j=R*c[G]+E*c[U],I=R*c[G+1]+E*c[U+1],C=R*c[G+2]+E*c[U+2],P=R*c[G+3]+E*c[U+3]}b[4*_]=255*j,b[4*_+1]=255*I,b[4*_+2]=255*C,b[4*_+3]=255*P,w[2*_]=.5*M+.5*O,w[2*_+1]=.5*L+.5*z,T[2*_]=F,T[2*_+1]=N,k[_]=S*x+A,_+=1}this.positionBuffer.update(w),this.weightBuffer.update(T),this.colorBuffer.update(b),this.idBuffer.update(k),i.free(w),i.free(b),i.free(T),i.free(k)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},54468:(e,t,a)=>{"use strict";var r=a(72645);e.exports={fragment:r("./shaders/fragment.glsl"),vertex:r("./shaders/vertex.glsl"),pickFragment:r("./shaders/pick-fragment.glsl"),pickVertex:r("./shaders/pick-vertex.glsl")}},20133:(e,t,a)=>{var r=a(72645);t.pointVertex=r("./shader/point-vertex.glsl"),t.pointFragment=r("./shader/point-fragment.glsl"),t.pickVertex=r("./shader/pick-vertex.glsl"),t.pickFragment=r("./shader/pick-fragment.glsl")},22717:(e,t,a)=>{"use strict";var r=a(18057),o=a(28580),i=a(90316),n=a(20133);function s(e,t,a,r,o){this.plot=e,this.offsetBuffer=t,this.pickBuffer=a,this.shader=r,this.pickShader=o,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}e.exports=function(e,t){var a=e.gl,i=new s(e,o(a),o(a),r(a,n.pointVertex,n.pointFragment),r(a,n.pickVertex,n.pickFragment));return i.update(t),e.addObject(i),i};var l,c,p=s.prototype;p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},p.update=function(e){var t;function a(t,a){return t in e?e[t]:a}e=e||{},this.sizeMin=a("sizeMin",.5),this.sizeMax=a("sizeMax",20),this.color=a("color",[1,0,0,1]).slice(),this.areaRatio=a("areaRatio",1),this.borderColor=a("borderColor",[0,0,0,1]).slice(),this.blend=a("blend",!1);var r=e.positions.length>>>1,o=e.positions instanceof Float32Array,n=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=r,s=e.positions,l=o?s:i.mallocFloat32(s.length),c=n?e.idToIndex:i.mallocInt32(r);if(o||l.set(s),!n)for(l.set(s),t=0;t<r;t++)c[t]=t;this.points=s,this.offsetBuffer.update(l),this.pickBuffer.update(c),o||i.free(l),n||i.free(c),this.pointCount=r,this.pickOffset=0},p.unifiedDraw=(l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0],function(e){var t=void 0!==e,a=t?this.pickShader:this.shader,r=this.plot.gl,o=this.plot.dataBox;if(0===this.pointCount)return e;var i=o[2]-o[0],n=o[3]-o[1],s=function(e,t){var a,r=0,o=e.length>>>1;for(a=0;a<o;a++){var i=e[2*a],n=e[2*a+1];i>=t[0]&&i<=t[2]&&n>=t[1]&&n<=t[3]&&r++}return r}(this.points,o),p=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(s,.33333)));l[0]=2/i,l[4]=2/n,l[6]=-2*o[0]/i-1,l[7]=-2*o[1]/n-1,this.offsetBuffer.bind(),a.bind(),a.attributes.position.pointer(),a.uniforms.matrix=l,a.uniforms.color=this.color,a.uniforms.borderColor=this.borderColor,a.uniforms.pointCloud=p<5,a.uniforms.pointSize=p,a.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),t&&(c[0]=255&e,c[1]=e>>8&255,c[2]=e>>16&255,c[3]=e>>24&255,this.pickBuffer.bind(),a.attributes.pickId.pointer(r.UNSIGNED_BYTE),a.uniforms.pickOffset=c,this.pickOffset=e);var d=r.getParameter(r.BLEND),h=r.getParameter(r.DITHER);return d&&!this.blend&&r.disable(r.BLEND),h&&r.disable(r.DITHER),r.drawArrays(r.POINTS,0,this.pointCount),d&&!this.blend&&r.enable(r.BLEND),h&&r.enable(r.DITHER),e+this.pointCount}),p.draw=p.unifiedDraw,p.drawPick=p.unifiedDraw,p.pick=function(e,t,a){var r=this.pickOffset,o=this.pointCount;if(a<r||a>=r+o)return null;var i=a-r,n=this.points;return{object:this,pointId:i,dataCoord:[n[2*i],n[2*i+1]]}}},75:function(e){(function(){var t,a,r,o,i,n;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-i)/1e6},a=process.hrtime,o=(t=function(){var e;return 1e9*(e=a())[0]+e[1]})(),n=1e9*process.uptime(),i=o-n):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},41461:(e,t,a)=>{"use strict";e.exports=a(44134)},62381:(e,t,a)=>{"use strict";e.exports=a(79018)},91152:(e,t,a)=>{"use strict";e.exports=a(30371)},74048:(e,t,a)=>{"use strict";e.exports=a(49045)},92983:(e,t,a)=>{"use strict";e.exports=a(51250)},6791:(e,t,a)=>{"use strict";e.exports=a(67931)},85094:(e,t,a)=>{"use strict";e.exports=a(53409)},33769:(e,t,a)=>{"use strict";e.exports=a(15828)},4914:(e,t,a)=>{"use strict";e.exports=a(93048)},35185:(e,t,a)=>{"use strict";e.exports=a(99839)},11881:(e,t,a)=>{"use strict";e.exports=a(33428)},8732:(e,t,a)=>{"use strict";e.exports=a(97571)},65851:(e,t,a)=>{"use strict";e.exports=a(81174)},20115:(e,t,a)=>{"use strict";e.exports=a(26543)},6416:(e,t,a)=>{"use strict";e.exports=a(28371)},45977:(e,t,a)=>{"use strict";e.exports=a(60458)},34229:(e,t,a)=>{"use strict";e.exports=a(19340)},47400:(e,t,a)=>{"use strict";e.exports=a(36332)},55332:(e,t,a)=>{"use strict";var r=a(91441);r.register([a(41461),a(91152),a(65851),a(6416),a(45977),a(34229),a(33769),a(90453),a(90235),a(11881),a(7254),a(47400),a(30677),a(9139),a(47009),a(8732),a(48385),a(63170),a(13865),a(12866),a(84594),a(85094),a(78009),a(60526),a(92983),a(58985),a(15472),a(69136),a(20115),a(16823),a(71264),a(78577),a(6791),a(35185),a(43980),a(35168),a(80950),a(19080),a(68613),a(4914),a(1498),a(74048),a(11058),a(86983),a(62381)]),r.register([a(86207),a(16875),a(60262),a(93175)]),r.register([a(5526)]),e.exports=r},13865:(e,t,a)=>{"use strict";e.exports=a(29176)},84594:(e,t,a)=>{"use strict";e.exports=a(99059)},1498:(e,t,a)=>{"use strict";e.exports=a(6053)},30677:(e,t,a)=>{"use strict";e.exports=a(11327)},69136:(e,t,a)=>{"use strict";e.exports=a(83980)},68613:(e,t,a)=>{"use strict";e.exports=a(65005)},60526:(e,t,a)=>{"use strict";e.exports=a(47097)},58985:(e,t,a)=>{"use strict";e.exports=a(68547)},78577:(e,t,a)=>{"use strict";e.exports=a(3871)},11058:(e,t,a)=>{"use strict";e.exports=a(24888)},86983:(e,t,a)=>{"use strict";e.exports=a(81703)},15472:(e,t,a)=>{"use strict";e.exports=a(45064)},9139:(e,t,a)=>{"use strict";e.exports=a(30653)},12866:(e,t,a)=>{"use strict";e.exports=a(70182)},7254:(e,t,a)=>{"use strict";e.exports=a(98822)},10697:(e,t,a)=>{"use strict";var r=a(34682),o=a(88003).hasColorscale,i=a(90336),n=a(34515),s=a(12356);e.exports=function(e,t){var a,l,c=r.getFromId(e,t.xaxis||"x"),p=r.getFromId(e,t.yaxis||"y"),d={msUTC:!(!t.base&&0!==t.base)};"h"===t.orientation?(a=c.makeCalcdata(t,"x",d),l=p.makeCalcdata(t,"y")):(a=p.makeCalcdata(t,"y",d),l=c.makeCalcdata(t,"x"));for(var h=Math.min(l.length,a.length),u=new Array(h),f=0;f<h;f++)u[f]={p:l[f],s:a[f]},t.ids&&(u[f].id=String(t.ids[f]));return o(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),n(u,t),s(u,t),u}},76126:e=>{"use strict";e.exports=function(e,t,a){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===a.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},44134:(e,t,a)=>{"use strict";e.exports={attributes:a(67855),layoutAttributes:a(36383),supplyDefaults:a(58061).supplyDefaults,crossTraceDefaults:a(58061).crossTraceDefaults,supplyLayoutDefaults:a(75986),calc:a(10697),crossTraceCalc:a(55023).crossTraceCalc,colorbar:a(62280),arraysToCalcdata:a(34515),plot:a(38327).plot,style:a(49888).style,styleOnSelect:a(49888).styleOnSelect,hoverPoints:a(99921).hoverPoints,eventData:a(76126),selectPoints:a(17155),moduleType:"trace",name:"bar",basePlotModule:a(8095),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set th *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},36383:e=>{"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",role:"info",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},75986:(e,t,a)=>{"use strict";var r=a(97997),o=a(34682),i=a(34141),n=a(36383);e.exports=function(e,t,a){function s(a,r){return i.coerce(e,t,n,a,r)}for(var l=!1,c=!1,p=!1,d={},h=s("barmode"),u=0;u<a.length;u++){var f=a[u];if(r.traceIs(f,"bar")&&f.visible){if(l=!0,"group"===h){var y=f.xaxis+f.yaxis;d[y]&&(p=!0),d[y]=!0}f.visible&&"histogram"===f.type&&"category"!==o.getFromId({_fullLayout:t},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(c=!0)}}l?("overlay"!==h&&s("barnorm"),s("bargap",c&&!p?0:.2),s("bargroupgap")):delete t.barmode}},51068:(e,t,a)=>{"use strict";var r=a(88176).f,o=a(94867).extendFlat,i=a(31627),n=a(67855);e.exports={r:i.r,theta:i.theta,r0:i.r0,dr:i.dr,theta0:i.theta0,dtheta:i.dtheta,thetaunit:i.thetaunit,base:o({},n.base,{description:["Sets where the bar base is drawn (in radial axis units).","In *stack* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")}),offset:o({},n.offset,{description:["Shifts the angular position where the bar is drawn","(in *thetatunit* units)."].join(" ")}),width:o({},n.width,{description:["Sets the bar angular width (in *thetaunit* units)."].join(" ")}),text:o({},n.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:o({},n.hovertext,{description:"Same as `text`."}),marker:n.marker,hoverinfo:i.hoverinfo,hovertemplate:r(),selected:n.selected,unselected:n.unselected}},52620:(e,t,a)=>{"use strict";var r=a(88003).hasColorscale,o=a(90336),i=a(34515),n=a(55023).setGroupPositions,s=a(12356),l=a(97997).traceIs,c=a(34141).extendFlat;e.exports={calc:function(e,t){for(var a=e._fullLayout,n=t.subplot,l=a[n].radialaxis,c=a[n].angularaxis,p=l.makeCalcdata(t,"r"),d=c.makeCalcdata(t,"theta"),h=t._length,u=new Array(h),f=p,y=d,m=0;m<h;m++)u[m]={p:y[m],s:f[m]};function x(e){var a=t[e];void 0!==a&&(t["_"+e]=Array.isArray(a)?c.makeCalcdata(t,e):c.d2c(a,t.thetaunit))}return"linear"===c.type&&(x("width"),x("offset")),r(t,"marker")&&o(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&o(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),i(u,t),s(u,t),u},crossTraceCalc:function(e,t,a){for(var r=e.calcdata,o=[],i=0;i<r.length;i++){var s=r[i],p=s[0].trace;!0===p.visible&&l(p,"bar")&&p.subplot===a&&o.push(s)}var d=c({},t.radialaxis,{_id:"x"}),h=t.angularaxis;n(e,h,d,o,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}}},65913:(e,t,a)=>{"use strict";var r=a(34141),o=a(39820).handleRThetaDefaults,i=a(30572),n=a(51068);e.exports=function(e,t,a,s){function l(a,o){return r.coerce(e,t,n,a,o)}o(e,t,s,l)?(l("thetaunit"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate"),i(e,t,l,a,s),r.coerceSelectionMarkerOpacity(t,l)):t.visible=!1}},70562:(e,t,a)=>{"use strict";var r=a(87529),o=a(34141),i=a(99921).getTraceColor,n=o.fillText,s=a(16882).makeHoverPointText,l=a(41602).isPtInsidePolygon;e.exports=function(e,t,a){var c=e.cd,p=c[0].trace,d=e.subplot,h=d.radialAxis,u=d.angularAxis,f=d.vangles,y=f?l:o.isPtInsideSector,m=e.maxHoverDistance,x=u._period||2*Math.PI,v=Math.abs(h.g2p(Math.sqrt(t*t+a*a))),g=Math.atan2(a,t);if(h.range[0]>h.range[1]&&(g+=Math.PI),r.getClosest(c,(function(e){return y(v,g,[e.rp0,e.rp1],[e.thetag0,e.thetag1],f)?m+Math.min(1,Math.abs(e.thetag1-e.thetag0)/x)-1+(e.rp1-v)/(e.rp1-e.rp0)-1:1/0}),e),!1!==e.index){var b=c[e.index];e.x0=e.x1=b.ct[0],e.y0=e.y1=b.ct[1];var w=o.extendFlat({},b,{r:b.s,theta:b.p});return n(b,p,e),s(w,p,d,e),e.hovertemplate=p.hovertemplate,e.color=i(p,b),e.xLabelVal=e.yLabelVal=void 0,b.s<0&&(e.idealAlign="left"),[e]}}},79018:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"barpolar",basePlotModule:a(59759),categories:["polar","bar","showLegend"],attributes:a(51068),layoutAttributes:a(89247),supplyDefaults:a(65913),supplyLayoutDefaults:a(87371),calc:a(52620).calc,crossTraceCalc:a(52620).crossTraceCalc,plot:a(31615),colorbar:a(62280),formatLabels:a(7388),style:a(49888).style,styleOnSelect:a(49888).styleOnSelect,hoverPoints:a(70562),selectPoints:a(17155),meta:{hrName:"bar_polar",description:["The data visualized by the radial span of the bars is set in `r`"].join(" ")}}},89247:e=>{"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},bargap:{valType:"number",dflt:.1,min:0,max:1,role:"style",editType:"calc",description:["Sets the gap between bars of","adjacent location coordinates.","Values are unitless, they represent fractions of the minimum difference","in bar positions in the data."].join(" ")}}},87371:(e,t,a)=>{"use strict";var r=a(34141),o=a(89247);e.exports=function(e,t,a){var i,n={};function s(a,n){return r.coerce(e[i]||{},t[i],o,a,n)}for(var l=0;l<a.length;l++){var c=a[l];"barpolar"===c.type&&!0===c.visible&&(n[i=c.subplot]||(s("barmode"),s("bargap"),n[i]=1))}}},31615:(e,t,a)=>{"use strict";var r=a(15078),o=a(35924),i=a(34141),n=a(84474),s=a(41602);e.exports=function(e,t,a){var l=t.xaxis,c=t.yaxis,p=t.radialAxis,d=t.angularAxis,h=function(e){var t=e.cxx,a=e.cyy;return e.vangles?function(r,o,n,l){var c,p;i.angleDelta(n,l)>0?(c=n,p=l):(c=l,p=n);var d=[s.findEnclosingVertexAngles(c,e.vangles)[0],(c+p)/2,s.findEnclosingVertexAngles(p,e.vangles)[1]];return s.pathPolygonAnnulus(r,o,c,p,d,t,a)}:function(e,r,o,n){return i.pathAnnulus(e,r,o,n,t,a)}}(t),u=t.layers.frontplot.select("g.barlayer");i.makeTraceGroups(u,a,"trace bars").each((function(){var a=r.select(this),s=i.ensureSingle(a,"g","points").selectAll("g.point").data(i.identity);s.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),s.exit().remove(),s.each((function(e){var t,a=r.select(this),n=e.rp0=p.c2p(e.s0),s=e.rp1=p.c2p(e.s1),u=e.thetag0=d.c2g(e.p0),f=e.thetag1=d.c2g(e.p1);if(o(n)&&o(s)&&o(u)&&o(f)&&n!==s&&u!==f){var y=p.c2g(e.s1),m=(u+f)/2;e.ct=[l.c2p(y*Math.cos(m)),c.c2p(y*Math.sin(m))],t=h(n,s,u,f)}else t="M0,0Z";i.ensureSingle(a,"path").attr("d",t)})),n.setClipUrl(a,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,e)}))}},81971:e=>{"use strict";e.exports=function(e,t){return t.hoverOnBox&&(e.hoverOnBox=t.hoverOnBox),"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},30371:(e,t,a)=>{"use strict";e.exports={attributes:a(43384),layoutAttributes:a(89455),supplyDefaults:a(21428).supplyDefaults,crossTraceDefaults:a(21428).crossTraceDefaults,supplyLayoutDefaults:a(28327).supplyLayoutDefaults,calc:a(22161),crossTraceCalc:a(72665).crossTraceCalc,plot:a(90217).plot,style:a(23843).style,styleOnSelect:a(23843).styleOnSelect,hoverPoints:a(52248).hoverPoints,eventData:a(81971),selectPoints:a(96945),moduleType:"trace",name:"box",basePlotModule:a(8095),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{description:["Each box spans from quartile 1 (Q1) to quartile 3 (Q3).","The second quartile (Q2, i.e. the median) is marked by a line inside the box.","The fences grow outward from the boxes' edges,","by default they span +/- 1.5 times the interquartile range (IQR: Q3-Q1),","The sample mean and standard deviation as well as notches and","the sample, outlier and suspected outliers points can be optionally","added to the box plot.","The values and positions corresponding to each boxes can be input","using two signatures.","The first signature expects users to supply the sample values in the `y`","data array for vertical boxes (`x` for horizontal boxes).","By supplying an `x` (`y`) array, one box per distinct `x` (`y`) value is drawn","If no `x` (`y`) {array} is provided, a single box is drawn.","In this case, the box is positioned with the trace `name` or with `x0` (`y0`) if provided.","The second signature expects users to supply the boxes corresponding Q1, median and Q3","statistics in the `q1`, `median` and `q3` data arrays respectively.","Other box features relying on statistics namely `lowerfence`, `upperfence`, `notchspan`","can be set directly by the users.","To have plotly compute them or to show sample points besides the boxes,","users can set the `y` data array for vertical boxes (`x` for horizontal boxes)","to a 2D array with the outer length corresponding","to the number of boxes in the traces and the inner length corresponding the sample size."].join(" ")}}},23843:(e,t,a)=>{"use strict";var r=a(15078),o=a(57597),i=a(84474);e.exports={style:function(e,t,a){var n=a||r.select(e).selectAll("g.trace.boxes");n.style("opacity",(function(e){return e[0].trace.opacity})),n.each((function(t){var a=r.select(this),n=t[0].trace,s=n.line.width;function l(e,t,a,r){e.style("stroke-width",t+"px").call(o.stroke,a).call(o.fill,r)}var c=a.selectAll("path.box");if("candlestick"===n.type)c.each((function(e){if(!e.empty){var t=r.select(this),a=n[e.dir];l(t,a.line.width,a.line.color,a.fillcolor),t.style("opacity",n.selectedpoints&&!e.selected?.3:1)}}));else{l(c,s,n.line.color,n.fillcolor),a.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(o.stroke,n.line.color);var p=a.selectAll("path.point");i.pointStyle(p,n,e)}}))},styleOnSelect:function(e,t,a){var r=t[0].trace,o=a.selectAll("path.point");r.selectedpoints?i.selectedPointStyle(o,r):i.pointStyle(o,r,e)}}},70617:(e,t,a)=>{"use strict";var r=a(34141).extendFlat,o=a(32010),i=a(43384);function n(e){return{line:{color:r({},i.line.color,{dflt:e}),width:i.line.width,editType:"style"},fillcolor:i.fillcolor,editType:"style"}}e.exports={x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:r({},i.line.width,{description:[i.line.width.description,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),editType:"style"},increasing:n(o.increasing.line.color.dflt),decreasing:n(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:r({},i.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel}},80044:(e,t,a)=>{"use strict";var r=a(34141),o=a(34682),i=a(65675).calcCommon;function n(e,t,a,r){return{min:a,q1:Math.min(e,r),med:r,q3:Math.max(e,r),max:t}}e.exports=function(e,t){var a=e._fullLayout,s=o.getFromId(e,t.xaxis),l=o.getFromId(e,t.yaxis),c=s.makeCalcdata(t,"x"),p=i(e,t,c,l,n);return p.length?(r.extendFlat(p[0].t,{num:a._numBoxes,dPos:r.distinctVals(c).minDiff/2,posLetter:"x",valLetter:"y"}),a._numBoxes++,p):[{t:{empty:!0}}]}},86872:(e,t,a)=>{"use strict";var r=a(34141),o=a(57597),i=a(90748),n=a(70617);function s(e,t,a,r){var i=a(r+".line.color");a(r+".line.width",t.line.width),a(r+".fillcolor",o.addOpacity(i,.5))}e.exports=function(e,t,a,o){function l(a,o){return r.coerce(e,t,n,a,o)}i(e,t,l,o)?(l("line.width"),s(0,t,l,"increasing"),s(0,t,l,"decreasing"),l("text"),l("hovertext"),l("whiskerwidth"),o._requestRangeslider[t.xaxis]=!0):t.visible=!1}},49045:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"candlestick",basePlotModule:a(8095),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{description:["The candlestick is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The boxes represent the spread between the `open` and `close` values and","the lines represent the spread between the `low` and `high` values","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing candles are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:a(70617),layoutAttributes:a(89455),supplyLayoutDefaults:a(28327).supplyLayoutDefaults,crossTraceCalc:a(72665).crossTraceCalc,supplyDefaults:a(86872),calc:a(80044),plot:a(90217).plot,layerName:"boxlayer",style:a(23843).style,hoverPoints:a(70791).hoverPoints,selectPoints:a(91951)}},43349:(e,t,a)=>{"use strict";var r=a(34141).isArrayOrTypedArray;e.exports=function(e,t,a,o){var i,n,s,l,c,p,d,h,u,f,y,m,x,v=r(a)?"a":"b",g=("a"===v?e.aaxis:e.baxis).smoothing,b="a"===v?e.a2i:e.b2j,w="a"===v?a:o,T="a"===v?o:a,k="a"===v?t.a.length:t.b.length,_="a"===v?t.b.length:t.a.length,S=Math.floor("a"===v?e.b2j(T):e.a2i(T)),L="a"===v?function(t){return e.evalxy([],t,S)}:function(t){return e.evalxy([],S,t)};g&&(s=Math.max(0,Math.min(_-2,S)),l=S-s,n="a"===v?function(t,a){return e.dxydi([],t,s,a,l)}:function(t,a){return e.dxydj([],s,t,l,a)});var z=b(w[0]),A=b(w[1]),M=z<A?1:-1,O=1e-8*(A-z),D=M>0?Math.floor:Math.ceil,j=M>0?Math.ceil:Math.floor,I=M>0?Math.min:Math.max,C=M>0?Math.max:Math.min,P=D(z+O),F=j(A-O),N=[[d=L(z)]];for(i=P;i*M<F*M;i+=M)c=[],y=C(z,i),x=(m=I(A,i+M))-y,p=Math.max(0,Math.min(k-2,Math.floor(.5*(y+m)))),h=L(m),g&&(u=n(p,y-p),f=n(p,m-p),c.push([d[0]+u[0]/3*x,d[1]+u[1]/3*x]),c.push([h[0]-f[0]/3*x,h[1]-f[1]/3*x])),c.push(h),N.push(c),d=h;return N}},13290:e=>{"use strict";e.exports=function(e,t){for(var a,r=e._fullData.length,o=0;o<r;o++){var i=e._fullData[o];if(i.index!==t.index&&"carpet"===i.type&&(a||(a=i),i.carpet===t.carpet))return i}return a}},38543:(e,t,a)=>{"use strict";var r=a(88176).f,o=a(15845),i=a(85088),n=a(85485),s=a(28604).defaultLine,l=a(94867).extendFlat,c=o.marker.line;e.exports=l({locations:{valType:"data_array",editType:"calc",description:["Sets the coordinates via location IDs or names.","See `locationmode` for more info."].join(" ")},locationmode:o.locationmode,z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:l({},o.geojson,{description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")}),featureidkey:o.featureidkey,text:l({},o.text,{description:"Sets the text elements associated with each location."}),hovertext:l({},o.hovertext,{description:"Same as `text`."}),marker:{line:{color:l({},c.color,{dflt:s}),width:l({},c.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,role:"style",editType:"style",description:"Sets the opacity of the locations."},editType:"calc"},selected:{marker:{opacity:o.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:o.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:l({},n.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:r(),showlegend:l({},n.showlegend,{dflt:!1})},i("",{cLetter:"z",editTypeOverride:"calc"}))},97296:(e,t,a)=>{"use strict";var r=a(35924),o=a(45020).BADNUM,i=a(90336),n=a(77503),s=a(12356);function l(e){return e&&"string"==typeof e}e.exports=function(e,t){var a,c=t._length,p=new Array(c);a=t.geojson?function(e){return l(e)||r(e)}:l;for(var d=0;d<c;d++){var h=p[d]={},u=t.locations[d],f=t.z[d];a(u)&&r(f)?(h.loc=u,h.z=f):(h.loc=null,h.z=o),h.index=d}return n(p,t),i(e,t,{vals:t.z,containerStr:"",cLetter:"z"}),s(p,t),p}},3415:(e,t,a)=>{"use strict";var r=a(34141),o=a(62252),i=a(38543);e.exports=function(e,t,a,n){function s(a,o){return r.coerce(e,t,i,a,o)}var l=s("locations"),c=s("z");if(l&&l.length&&r.isArrayOrTypedArray(c)&&c.length){t._length=Math.min(l.length,c.length);var p,d=s("geojson");("string"==typeof d&&""!==d||r.isPlainObject(d))&&(p="geojson-id"),"geojson-id"===s("locationmode",p)&&s("featureidkey"),s("text"),s("hovertext"),s("hovertemplate"),s("marker.line.width")&&s("marker.line.color"),s("marker.opacity"),o(e,t,n,s,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(t,s)}else t.visible=!1}},11445:e=>{"use strict";e.exports=function(e,t,a,r,o){e.location=t.location,e.z=t.z;var i=r[o];return i.fIn&&i.fIn.properties&&(e.properties=i.fIn.properties),e.ct=i.ct,e}},78451:(e,t,a)=>{"use strict";var r=a(34682),o=a(38543),i=a(34141).fillText;e.exports=function(e,t,a){var n,s,l,c,p=e.cd,d=p[0].trace,h=e.subplot;for(s=0;s<p.length;s++)if(c=!1,(n=p[s])._polygons){for(l=0;l<n._polygons.length;l++)n._polygons[l].contains([t,a])&&(c=!c),n._polygons[l].contains([t+360,a])&&(c=!c);if(c)break}if(c&&n)return e.x0=e.x1=e.xa.c2p(n.ct),e.y0=e.y1=e.ya.c2p(n.ct),e.index=n.index,e.location=n.loc,e.z=n.z,e.zLabel=r.tickText(h.mockAxis,h.mockAxis.c2l(n.z),"hover").text,e.hovertemplate=n.hovertemplate,function(e,t,a){if(!t.hovertemplate){var r=a.hi||t.hoverinfo,n=String(a.loc),s="all"===r?o.hoverinfo.flags:r.split("+"),l=-1!==s.indexOf("name"),c=-1!==s.indexOf("location"),p=-1!==s.indexOf("z"),d=-1!==s.indexOf("text"),h=[];!l&&c?e.nameOverride=n:(l&&(e.nameOverride=t.name),c&&h.push(n)),p&&h.push(e.zLabel),d&&i(a,t,h),e.extraText=h.join("<br>")}}(e,d,n,h.mockAxis),[e]}},51250:(e,t,a)=>{"use strict";e.exports={attributes:a(38543),supplyDefaults:a(3415),colorbar:a(95005),calc:a(97296),calcGeoJSON:a(4973).calcGeoJSON,plot:a(4973).plot,style:a(80012).style,styleOnSelect:a(80012).styleOnSelect,hoverPoints:a(78451),eventData:a(11445),selectPoints:a(71436),moduleType:"trace",name:"choropleth",basePlotModule:a(42483),categories:["geo","noOpacity","showLegend"],meta:{description:["The data that describes the choropleth value-to-color mapping","is set in `z`.","The geographic locations corresponding to each value in `z`","are set in `locations`."].join(" ")}}},4973:(e,t,a)=>{"use strict";var r=a(15078),o=a(34141),i=a(94187),n=a(27653).getTopojsonFeatures,s=a(5816).findExtremes,l=a(80012).style;e.exports={calcGeoJSON:function(e,t){for(var a=e[0].trace,r=t[a.geo],o=r._subplot,l=a.locationmode,c=a._length,p="geojson-id"===l?i.extractTraceFeature(e):n(a,o.topojson),d=[],h=[],u=0;u<c;u++){var f=e[u],y="geojson-id"===l?f.fOut:i.locationToFeature(l,f.loc,p);if(y){f.geojson=y,f.ct=y.properties.ct,f._polygons=i.feature2polygons(y);var m=i.computeBbox(y);d.push(m[0],m[2]),h.push(m[1],m[3])}else f.geojson=null}if("geojson"===r.fitbounds&&"geojson-id"===l){var x=i.computeBbox(i.getTraceGeojson(a));d=[x[0],x[2]],h=[x[1],x[3]]}var v={padded:!0};a._extremes.lon=s(r.lonaxis._ax,d,v),a._extremes.lat=s(r.lataxis._ax,h,v)},plot:function(e,t,a){var i=t.layers.backplot.select(".choroplethlayer");o.makeTraceGroups(i,a,"trace choropleth").each((function(t){var a=r.select(this).selectAll("path.choroplethlocation").data(o.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),l(e,t)}))}}},71436:e=>{"use strict";e.exports=function(e,t){var a,r,o,i,n,s=e.cd,l=e.xaxis,c=e.yaxis,p=[];if(!1===t)for(a=0;a<s.length;a++)s[a].selected=0;else for(a=0;a<s.length;a++)(o=(r=s[a]).ct)&&(i=l.c2p(o),n=c.c2p(o),t.contains([i,n],null,a,e)?(p.push({pointNumber:a,lon:o[0],lat:o[1]}),r.selected=1):r.selected=0);return p}},80012:(e,t,a)=>{"use strict";var r=a(15078),o=a(57597),i=a(84474),n=a(59430);function s(e,t){var a=t[0].trace,s=t[0].node3.selectAll(".choroplethlocation"),l=a.marker||{},c=l.line||{},p=n.makeColorScaleFuncFromTrace(a);s.each((function(e){r.select(this).attr("fill",p(e.z)).call(o.stroke,e.mlc||c.color).call(i.dashLine,"",e.mlw||c.width||0).style("opacity",l.opacity)})),i.selectedPointStyle(s,a,e)}e.exports={style:function(e,t){t&&s(e,t)},styleOnSelect:function(e,t){var a=t[0].node3,r=t[0].trace;r.selectedpoints?i.selectedPointStyle(a.selectAll(".choroplethlocation"),r,e):s(e,t)}}},99917:(e,t,a)=>{"use strict";var r=a(38543),o=a(85088),i=a(88176).f,n=a(85485),s=a(94867).extendFlat;e.exports=s({locations:{valType:"data_array",editType:"calc",description:["Sets which features found in *geojson* to plot using","their feature `id` field."].join(" ")},z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:{valType:"any",role:"info",editType:"calc",description:["Sets the GeoJSON data associated with this trace.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:s({},r.featureidkey,{description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Support nested property, for example *properties.name*."].join(" ")}),below:{valType:"string",role:"info",editType:"plot",description:["Determines if the choropleth polygons will be inserted","before the layer with the specified ID.","By default, choroplethmapbox traces are placed above the water layers.","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:r.text,hovertext:r.hovertext,marker:{line:{color:s({},r.marker.line.color,{editType:"plot"}),width:s({},r.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:s({},r.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:s({},r.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:s({},r.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:r.hoverinfo,hovertemplate:i({},{keys:["properties"]}),showlegend:s({},n.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},28378:(e,t,a)=>{"use strict";var r=a(35924),o=a(34141),i=a(59430),n=a(84474),s=a(94511).makeBlank,l=a(94187);function c(e){var t,a=e[0].trace,r=a._opts;if(a.selectedpoints){for(var i=n.makeSelectedPointStyleFns(a),s=0;s<e.length;s++){var l=e[s];l.fOut&&(l.fOut.properties.mo2=i.selectedOpacityFn(l))}t={type:"identity",property:"mo2"}}else t=o.isArrayOrTypedArray(a.marker.opacity)?{type:"identity",property:"mo"}:a.marker.opacity;return o.extendFlat(r.fill.paint,{"fill-opacity":t}),o.extendFlat(r.line.paint,{"line-opacity":t}),r}e.exports={convert:function(e){var t=e[0].trace,a=!0===t.visible&&0!==t._length,n={layout:{visibility:"none"},paint:{}},p={layout:{visibility:"none"},paint:{}},d=t._opts={fill:n,line:p,geojson:s()};if(!a)return d;var h=l.extractTraceFeature(e);if(!h)return d;var u,f,y,m=i.makeColorScaleFuncFromTrace(t),x=t.marker,v=x.line||{};o.isArrayOrTypedArray(x.opacity)&&(u=function(e){var t=e.mo;return r(t)?+o.constrain(t,0,1):0}),o.isArrayOrTypedArray(v.color)&&(f=function(e){return e.mlc}),o.isArrayOrTypedArray(v.width)&&(y=function(e){return e.mlw});for(var g=0;g<e.length;g++){var b=e[g],w=b.fOut;if(w){var T=w.properties;T.fc=m(b.z),u&&(T.mo=u(b)),f&&(T.mlc=f(b)),y&&(T.mlw=y(b)),b.ct=T.ct,b._polygons=l.feature2polygons(w)}}var k=u?{type:"identity",property:"mo"}:x.opacity;return o.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":k}),o.extendFlat(p.paint,{"line-color":f?{type:"identity",property:"mlc"}:v.color,"line-width":y?{type:"identity",property:"mlw"}:v.width,"line-opacity":k}),n.layout.visibility="visible",p.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:h},c(e),d},convertOnSelect:c}},37888:(e,t,a)=>{"use strict";var r=a(34141),o=a(62252),i=a(99917);e.exports=function(e,t,a,n){function s(a,o){return r.coerce(e,t,i,a,o)}var l=s("locations"),c=s("z"),p=s("geojson");r.isArrayOrTypedArray(l)&&l.length&&r.isArrayOrTypedArray(c)&&c.length&&("string"==typeof p&&""!==p||r.isPlainObject(p))?(s("featureidkey"),t._length=Math.min(l.length,c.length),s("below"),s("text"),s("hovertext"),s("hovertemplate"),s("marker.line.width")&&s("marker.line.color"),s("marker.opacity"),o(e,t,n,s,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(t,s)):t.visible=!1}},67931:(e,t,a)=>{"use strict";e.exports={attributes:a(99917),supplyDefaults:a(37888),colorbar:a(95005),calc:a(97296),plot:a(31844),hoverPoints:a(78451),eventData:a(11445),selectPoints:a(71436),styleOnSelect:function(e,t){t&&t[0].trace._glTrace.updateOnSelect(t)},getBelow:function(e,t){for(var a=t.getMapLayers(),r=a.length-2;r>=0;r--){var o=a[r].id;if("string"==typeof o&&0===o.indexOf("water"))for(var i=r+1;i<a.length;i++)if("string"==typeof(o=a[i].id)&&-1===o.indexOf("plotly-"))return o}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:a(90796),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox",description:["GeoJSON features to be filled are set in `geojson`","The data that describes the choropleth value-to-color mapping","is set in `locations` and `z`."].join(" ")}}},31844:(e,t,a)=>{"use strict";var r=a(28378).convert,o=a(28378).convertOnSelect,i=a(54210).traceLayerPrefix;function n(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",i+t+"-fill"],["line",i+t+"-line"]],this.below=null}var s=n.prototype;s.update=function(e){this._update(r(e))},s.updateOnSelect=function(e){this._update(o(e))},s._update=function(e){var t=this.subplot,a=this.layerList,r=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(e,r),this.below=r);for(var o=0;o<a.length;o++){var i=a[o],n=i[0],s=i[1],l=e[n];t.setOptions(s,"setLayoutProperty",l.layout),"visible"===l.layout.visibility&&t.setOptions(s,"setPaintProperty",l.paint)}},s._addLayers=function(e,t){for(var a=this.subplot,r=this.layerList,o=this.sourceId,i=0;i<r.length;i++){var n=r[i],s=n[0],l=e[s];a.addLayer({type:s,id:n[1],source:o,layout:l.layout,paint:l.paint},t)}},s._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,a=t.length-1;a>=0;a--)e.removeLayer(t[a][1])},s.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},e.exports=function(e,t){var a=t[0].trace,o=new n(e,a.uid),i=o.sourceId,s=r(t),l=o.below=e.belowLookup["trace-"+a.uid];return e.map.addSource(i,{type:"geojson",data:s.geojson}),o._addLayers(s,l),t[0].trace._glTrace=o,o}},45032:(e,t,a)=>{"use strict";var r=a(85088),o=a(88176).f,i=a(83952),n=a(85485),s=a(94867).extendFlat,l={x:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:["Sets the x coordinates of the vector field","and of the displayed cones."].join(" ")},y:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:["Sets the y coordinates of the vector field","and of the displayed cones."].join(" ")},z:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:["Sets the z coordinates of the vector field","and of the displayed cones."].join(" ")},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},sizemode:{valType:"enumerated",values:["scaled","absolute"],role:"info",editType:"calc",dflt:"scaled",description:["Determines whether `sizeref` is set as a *scaled* (i.e unitless) scalar","(normalized by the max u/v/w norm in the vector field) or as","*absolute* value (in the same units as the vector field)."].join(" ")},sizeref:{valType:"number",role:"info",editType:"calc",min:0,description:["Adjusts the cone size scaling.","The size of the cones is determined by their u/v/w norm multiplied a factor and `sizeref`.",'This factor (computed internally) corresponds to the minimum "time" to travel across',"two successive x/y/z positions at the average velocity of those two successive positions.","All cones in a given trace use the same factor.","With `sizemode` set to *scaled*, `sizeref` is unitless, its default value is *0.5*","With `sizemode` set to *absolute*, `sizeref` has the same units as the u/v/w vector field,","its the default value is half the sample's maximum vector norm."].join(" ")},anchor:{valType:"enumerated",role:"info",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm",description:["Sets the cones' anchor with respect to their x/y/z positions.","Note that *cm* denote the cone's center of mass which corresponds to","1/4 from the tail to tip."].join(" ")},text:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the cones.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:o({editType:"calc"},{keys:["norm"]}),showlegend:s({},n.showlegend,{dflt:!1})};s(l,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach((function(e){l[e]=i[e]})),l.hoverinfo=s({},n.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),l.transforms=void 0,e.exports=l},16512:(e,t,a)=>{"use strict";var r=a(90336);e.exports=function(e,t){for(var a=t.u,o=t.v,i=t.w,n=Math.min(t.x.length,t.y.length,t.z.length,a.length,o.length,i.length),s=-1/0,l=1/0,c=0;c<n;c++){var p=a[c],d=o[c],h=i[c],u=Math.sqrt(p*p+d*d+h*h);s=Math.max(s,u),l=Math.min(l,u)}t._len=n,t._normMax=s,r(e,t,{vals:[l,s],containerStr:"",cLetter:"c"})}},97998:(e,t,a)=>{"use strict";var r=a(72754),o=a(72754).createConeMesh,i=a(34141).simpleMap,n=a(72106).parseColorScale,s=a(59430).extractOpts,l=a(98619);function c(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var p=c.prototype;p.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index,a=this.data.x[t],r=this.data.y[t],o=this.data.z[t],i=this.data.u[t],n=this.data.v[t],s=this.data.w[t];e.traceCoordinate=[a,r,o,i,n,s,Math.sqrt(i*i+n*n+s*s)];var l=this.data.hovertext||this.data.text;return Array.isArray(l)&&void 0!==l[t]?e.textLabel=l[t]:l&&(e.textLabel=l),!0}};var d={xaxis:0,yaxis:1,zaxis:2},h={tip:1,tail:0,cm:.25,center:.5},u={tip:1,tail:1,cm:.75,center:.5};function f(e,t){var a=e.fullSceneLayout,o=e.dataScale,c={};function p(e,t){var r=a[t],n=o[d[t]];return i(e,(function(e){return r.d2l(e)*n}))}c.vectors=l(p(t.u,"xaxis"),p(t.v,"yaxis"),p(t.w,"zaxis"),t._len),c.positions=l(p(t.x,"xaxis"),p(t.y,"yaxis"),p(t.z,"zaxis"),t._len);var f=s(t);c.colormap=n(t),c.vertexIntensityBounds=[f.min/t._normMax,f.max/t._normMax],c.coneOffset=h[t.anchor],"scaled"===t.sizemode?c.coneSize=t.sizeref||.5:c.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5;var y=r(c),m=t.lightposition;return y.lightPosition=[m.x,m.y,m.z],y.ambient=t.lighting.ambient,y.diffuse=t.lighting.diffuse,y.specular=t.lighting.specular,y.roughness=t.lighting.roughness,y.fresnel=t.lighting.fresnel,y.opacity=t.opacity,t._pad=u[t.anchor]*y.vectorScale*y.coneScale*t._normMax,y}p.update=function(e){this.data=e;var t=f(this.scene,e);this.mesh.update(t)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},e.exports=function(e,t){var a=e.glplot.gl,r=f(e,t),i=o(a,r),n=new c(e,t.uid);return n.mesh=i,n.data=t,i._trace=n,e.glplot.add(i),n}},19783:(e,t,a)=>{"use strict";var r=a(34141),o=a(62252),i=a(45032);e.exports=function(e,t,a,n){function s(a,o){return r.coerce(e,t,i,a,o)}var l=s("u"),c=s("v"),p=s("w"),d=s("x"),h=s("y"),u=s("z");l&&l.length&&c&&c.length&&p&&p.length&&d&&d.length&&h&&h.length&&u&&u.length?(s("sizeref"),s("sizemode"),s("anchor"),s("lighting.ambient"),s("lighting.diffuse"),s("lighting.specular"),s("lighting.roughness"),s("lighting.fresnel"),s("lightposition.x"),s("lightposition.y"),s("lightposition.z"),o(e,t,n,s,{prefix:"",cLetter:"c"}),s("text"),s("hovertext"),s("hovertemplate"),t._length=null):t.visible=!1}},53409:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"cone",basePlotModule:a(20883),categories:["gl3d","showLegend"],attributes:a(45032),supplyDefaults:a(19783),colorbar:{min:"cmin",max:"cmax"},calc:a(16512),plot:a(97998),eventData:function(e,t){return e.norm=t.traceCoordinate[6],e},meta:{description:["Use cone traces to visualize vector fields.","","Specify a vector field using 6 1D arrays,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, `w`.","The cones are drawn exactly at the positions given","by `x`, `y` and `z`."].join(" ")}}},16691:(e,t,a)=>{"use strict";var r=a(35924),o=a(61970),i=a(57597),n=i.addOpacity,s=i.opacity,l=a(59929),c=l.CONSTRAINT_REDUCTION,p=l.COMPARISON_OPS2;e.exports=function(e,t,a,i,l,d){var h,u,f,y=t.contours,m=a("contours.operation");y._operation=c[m],function(e,t){var a;-1===p.indexOf(t.operation)?(e("contours.value",[0,1]),Array.isArray(t.value)?t.value.length>2?t.value=t.value.slice(2):0===t.length?t.value=[0,1]:t.length<2?(a=parseFloat(t.value[0]),t.value=[a,a+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:r(t.value)&&(a=parseFloat(t.value),t.value=[a,a+1])):(e("contours.value",0),r(t.value)||(Array.isArray(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}(a,y),"="===m?h=y.showlines=!0:(h=a("contours.showlines"),f=a("fillcolor",n((e.line||{}).color||l,.5))),h&&(u=a("line.color",f&&s(f)?n(t.fillcolor,1):l),a("line.width",2),a("line.dash")),a("line.smoothing"),o(a,i,u,d)}},57062:(e,t,a)=>{"use strict";var r=a(34141),o=a(89945),i=a(16691),n=a(48484),s=a(15694),l=a(95221);e.exports=function(e,t,a,c){function p(a,o){return r.coerce(e,t,l,a,o)}if(o(e,t,p,c)){p("text"),p("hovertext"),p("hovertemplate"),p("hoverongaps");var d="constraint"===p("contours.type");p("connectgaps",r.isArray1D(t.z)),d?i(e,t,p,c,a):(n(e,t,p,(function(a){return r.coerce2(e,t,l,a)})),s(e,t,p,c))}else t.visible=!1}},77033:(e,t,a)=>{"use strict";var r=a(57597),o=a(62981);e.exports=function(e,t,a,i,n){var s=o(e,t,a,i,n,!0);return s&&s.forEach((function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&r.opacity(t.fillcolor)?e.color=r.addOpacity(t.fillcolor,1):t.contours.showlines&&r.opacity(t.line.color)&&(e.color=r.addOpacity(t.line.color,1)))})),s}},15828:(e,t,a)=>{"use strict";e.exports={attributes:a(95221),supplyDefaults:a(57062),calc:a(70908),plot:a(89305).plot,style:a(46010),colorbar:a(17743),hoverPoints:a(77033),moduleType:"trace",name:"contour",basePlotModule:a(8095),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{description:["The data from which contour lines are computed is set in `z`.","Data in `z` must be a {2D array} of numbers.","Say that `z` has N rows and M columns, then by default,","these N rows correspond to N y coordinates","(set in `y` or auto-generated) and the M columns","correspond to M x coordinates (set in `x` or auto-generated).","By setting `transpose` to *true*, the above behavior is flipped."].join(" ")}}},94222:(e,t,a)=>{"use strict";var r=a(58952),o=a(95221),i=a(85088),n=a(94867).extendFlat,s=o.contours;e.exports=n({carpet:{valType:"string",role:"info",editType:"calc",description:["The `carpet` of the carpet axes on which this contour trace lies"].join(" ")},z:r.z,a:r.x,a0:r.x0,da:r.dx,b:r.y,b0:r.y0,db:r.dy,text:r.text,hovertext:r.hovertext,transpose:r.transpose,atype:r.xtype,btype:r.ytype,fillcolor:o.fillcolor,autocontour:o.autocontour,ncontours:o.ncontours,contours:{type:s.type,start:s.start,end:s.end,size:s.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",role:"style",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:s.showlines,showlabels:s.showlabels,labelfont:s.labelfont,labelformat:s.labelformat,operation:s.operation,value:s.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o.line.color,width:o.line.width,dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},85028:(e,t,a)=>{"use strict";var r=a(90336),o=a(34141),i=a(32021),n=a(66053),s=a(37353),l=a(68938),c=a(87926),p=a(87794),d=a(13290),h=a(82074);e.exports=function(e,t){var a=t._carpetTrace=d(e,t);if(a&&a.visible&&"legendonly"!==a.visible){if(!t.a||!t.b){var u=e.data[a.index],f=e.data[t.index];f.a||(f.a=u.a),f.b||(f.b=u.b),p(f,t,t._defaultColor,e._fullLayout)}var y=function(e,t){var a,p,d,h,u,f,y,m=t._carpetTrace,x=m.aaxis,v=m.baxis;x._minDtick=0,v._minDtick=0,o.isArray1D(t.z)&&i(t,x,v,"a","b",["z"]),a=t._a=t._a||t.a,h=t._b=t._b||t.b,a=a?x.makeCalcdata(t,"_a"):[],h=h?v.makeCalcdata(t,"_b"):[],p=t.a0||0,d=t.da||1,u=t.b0||0,f=t.db||1,y=t._z=n(t._z||t.z,t.transpose),t._emptypoints=l(y),s(y,t._emptypoints);var g=o.maxRowLength(y),b="scaled"===t.xtype?"":a,w=c(t,b,p,d,g,x),T="scaled"===t.ytype?"":h,k={a:w,b:c(t,T,u,f,y.length,v),z:y};return"levels"===t.contours.type&&"none"!==t.contours.coloring&&r(e,t,{vals:y,containerStr:"",cLetter:"z"}),[k]}(e,t);return h(t,t._z),y}}},87794:(e,t,a)=>{"use strict";var r=a(34141),o=a(89945),i=a(94222),n=a(16691),s=a(48484),l=a(15694);e.exports=function(e,t,a,c){function p(a,o){return r.coerce(e,t,i,a,o)}if(p("carpet"),e.a&&e.b){if(!o(e,t,p,c,"a","b"))return void(t.visible=!1);p("text"),"constraint"===p("contours.type")?n(e,t,p,c,a,{hasHover:!1}):(s(e,t,p,(function(a){return r.coerce2(e,t,i,a)})),l(e,t,p,c,{hasHover:!1}))}else t._defaultColor=a,t._length=null}},93048:(e,t,a)=>{"use strict";e.exports={attributes:a(94222),supplyDefaults:a(87794),colorbar:a(17743),calc:a(85028),plot:a(95136),style:a(46010),moduleType:"trace",name:"contourcarpet",basePlotModule:a(8095),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{hrName:"contour_carpet",description:["Plots contours on either the first carpet axis or the","carpet axis with a matching `carpet` attribute. Data `z`","is interpreted as matching that of the corresponding carpet","axis."].join(" ")}}},95136:(e,t,a)=>{"use strict";var r=a(15078),o=a(80912),i=a(54509),n=a(84474),s=a(34141),l=a(44510),c=a(76646),p=a(89305),d=a(13633),h=a(49820),u=a(69050),f=a(24072),y=a(13290),m=a(43349);function x(e,t,a){var r=e.getPointAtLength(t),o=e.getPointAtLength(a),i=o.x-r.x,n=o.y-r.y,s=Math.sqrt(i*i+n*n);return[i/s,n/s]}function v(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function g(e,t){var a=Math.abs(e[0]*t[0]+e[1]*t[1]);return Math.sqrt(1-a*a)/a}e.exports=function(e,t,a,b){var w=t.xaxis,T=t.yaxis;s.makeTraceGroups(b,a,"contour").each((function(a){var b=r.select(this),k=a[0],_=k.trace,S=_._carpetTrace=y(e,_),L=e.calcdata[S.index][0];if(S.visible&&"legendonly"!==S.visible){var z=k.a,A=k.b,M=_.contours,O=u(M,t,k),D="constraint"===M.type,j=M._operation,I=D?"="===j?"lines":"fill":M.coloring,C=[[z[0],A[A.length-1]],[z[z.length-1],A[A.length-1]],[z[z.length-1],A[0]],[z[0],A[0]]];l(O);var P=1e-8*(z[z.length-1]-z[0]),F=1e-8*(A[A.length-1]-A[0]);c(O,P,F);var N,B,V,E,R=O;"constraint"===M.type&&(R=h(O,j)),function(e,t){var a,r,o,i,n,s,l,c,p;for(a=0;a<e.length;a++){for(n=(i=e[a]).pedgepaths=[],s=i.ppaths=[],r=0;r<i.edgepaths.length;r++){for(p=i.edgepaths[r],l=[],o=0;o<p.length;o++)l[o]=t(p[o]);n.push(l)}for(r=0;r<i.paths.length;r++){for(p=i.paths[r],c=[],o=0;o<p.length;o++)c[o]=t(p[o]);s.push(c)}}}(O,H);var G=[];for(E=L.clipsegments.length-1;E>=0;E--)N=L.clipsegments[E],B=o([],N.x,w.c2p),V=o([],N.y,T.c2p),B.reverse(),V.reverse(),G.push(i(B,V,N.bicubic));var U="M"+G.join("L")+"Z";!function(e,t,a,r,n,l){var c,p,d,h,u=s.ensureSingle(e,"g","contourbg").selectAll("path").data("fill"!==l||n?[]:[0]);u.enter().append("path"),u.exit().remove();var f=[];for(h=0;h<t.length;h++)c=t[h],p=o([],c.x,a.c2p),d=o([],c.y,r.c2p),f.push(i(p,d,c.bicubic));u.attr("d","M"+f.join("L")+"Z").style("stroke","none")}(b,L.clipsegments,w,T,D,I),function(e,t,a,o,i,l,c,p,d,h,u){var y="fill"===h;y&&f(i,e.contours);var x=s.ensureSingle(t,"g","contourfill").selectAll("path").data(y?i:[]);x.enter().append("path"),x.exit().remove(),x.each((function(e){var t=(e.prefixBoundary?u:"")+function(e,t,a,r,o,i,l,c){var p,d,h,u,f,y,x,v="",g=t.edgepaths.map((function(e,t){return t})),b=!0,w=1e-4*Math.abs(a[0][0]-a[2][0]),T=1e-4*Math.abs(a[0][1]-a[2][1]);function k(e){return Math.abs(e[1]-a[0][1])<T}function _(e){return Math.abs(e[1]-a[2][1])<T}function S(e){return Math.abs(e[0]-a[0][0])<w}function L(e){return Math.abs(e[0]-a[2][0])<w}function z(e,t){var a,r,n,s,p="";for(k(e)&&!L(e)||_(e)&&!S(e)?(s=o.aaxis,n=m(o,i,[e[0],t[0]],.5*(e[1]+t[1]))):(s=o.baxis,n=m(o,i,.5*(e[0]+t[0]),[e[1],t[1]])),a=1;a<n.length;a++)for(p+=s.smoothing?"C":"L",r=0;r<n[a].length;r++){var d=n[a][r];p+=[l.c2p(d[0]),c.c2p(d[1])]+" "}return p}for(p=0,d=null;g.length;){var A=t.edgepaths[p][0];for(d&&(v+=z(d,A)),x=n.smoothopen(t.edgepaths[p].map(r),t.smoothing),v+=b?x:x.replace(/^M/,"L"),g.splice(g.indexOf(p),1),d=t.edgepaths[p][t.edgepaths[p].length-1],f=-1,u=0;u<4;u++){if(!d){s.log("Missing end?",p,t);break}for(k(d)&&!L(d)?h=a[1]:S(d)?h=a[0]:_(d)?h=a[3]:L(d)&&(h=a[2]),y=0;y<t.edgepaths.length;y++){var M=t.edgepaths[y][0];Math.abs(d[0]-h[0])<w?Math.abs(d[0]-M[0])<w&&(M[1]-d[1])*(h[1]-M[1])>=0&&(h=M,f=y):Math.abs(d[1]-h[1])<T?Math.abs(d[1]-M[1])<T&&(M[0]-d[0])*(h[0]-M[0])>=0&&(h=M,f=y):s.log("endpt to newendpt is not vert. or horz.",d,h,M)}if(f>=0)break;v+=z(d,h),d=h}if(f===t.edgepaths.length){s.log("unclosed perimeter path");break}p=f,(b=-1===g.indexOf(p))&&(p=g[0],v+=z(d,h)+"Z",d=null)}for(p=0;p<t.paths.length;p++)v+=n.smoothclosed(t.paths[p].map(r),t.smoothing);return v}(0,e,l,c,p,d,a,o);t?r.select(this).attr("d",t).style("stroke","none"):r.select(this).remove()}))}(_,b,w,T,R,C,H,S,L,I,U),function(e,t,a,o,i,l,c){var h=s.ensureSingle(e,"g","contourlines"),u=!1!==i.showlines,f=i.showlabels,y=u&&f,m=p.createLines(h,u||f,t),b=p.createLineClip(h,y,a,o.trace.uid),w=e.selectAll("g.contourlabels").data(f?[0]:[]);if(w.exit().remove(),w.enter().append("g").classed("contourlabels",!0),f){var T=l.xaxis,k=l.yaxis,_=T._length,S=k._length,L=[[[0,0],[_,0],[_,S],[0,S]]],z=[];s.clearLocationCache();var A=p.labelFormatter(a,o),M=n.tester.append("text").attr("data-notex",1).call(n.font,i.labelfont),O={left:0,right:_,center:_/2,top:0,bottom:S,middle:S/2},D=Math.sqrt(_*_+S*S),j=d.LABELDISTANCE*D/Math.max(1,t.length/d.LABELINCREASE);m.each((function(e){var t=p.calcTextOpts(e.level,A,M,a);r.select(this).selectAll("path").each((function(a){var r=this,o=s.getVisibleSegment(r,O,t.height/2);if(o&&(function(e,t,a,r,o,i){for(var n,s=0;s<a.pedgepaths.length;s++)t===a.pedgepaths[s]&&(n=a.edgepaths[s]);if(n){var l=o.a[0],c=o.a[o.a.length-1],p=o.b[0],d=o.b[o.b.length-1],h=x(e,0,1),u=x(e,r.total,r.total-1),f=m(n[0],h),y=r.total-m(n[n.length-1],u);r.min<f&&(r.min=f),r.max>y&&(r.max=y),r.len=r.max-r.min}function m(e,t){var a,r=0,n=.1;return(Math.abs(e[0]-l)<n||Math.abs(e[0]-c)<n)&&(a=v(o.dxydb_rough(e[0],e[1],n)),r=Math.max(r,i*g(t,a)/2)),(Math.abs(e[1]-p)<n||Math.abs(e[1]-d)<n)&&(a=v(o.dxyda_rough(e[0],e[1],n)),r=Math.max(r,i*g(t,a)/2)),r}}(r,a,e,o,c,t.height),!(o.len<(t.width+t.height)*d.LABELMIN)))for(var i=Math.min(Math.ceil(o.len/j),d.LABELMAX),n=0;n<i;n++){var l=p.findBestTextLocation(r,o,t,z,O);if(!l)break;p.addLabelData(l,t,z,L)}}))})),M.remove(),p.drawLabels(w,z,a,b,y?L:null)}f&&!u&&m.remove()}(b,O,e,k,M,t,S),n.setClipUrl(b,S._clipPathId,e)}function H(e){var t=S.ab2xy(e[0],e[1],!0);return[w.c2p(t[0]),T.c2p(t[1])]}}))}},37718:(e,t,a)=>{"use strict";var r=a(85088),o=a(88176).f,i=a(85485),n=a(69249),s=a(94867).extendFlat;e.exports=s({lon:n.lon,lat:n.lat,z:{valType:"data_array",editType:"calc",description:["Sets the points' weight.","For example, a value of 10 would be equivalent to having 10 points of weight 1","in the same spot"].join(" ")},radius:{valType:"number",role:"info",editType:"plot",arrayOk:!0,min:1,dflt:30,description:["Sets the radius of influence of one `lon` / `lat` point in pixels.","Increasing the value makes the densitymapbox trace smoother, but less detailed."].join(" ")},below:{valType:"string",role:"info",editType:"plot",description:["Determines if the densitymapbox trace will be inserted","before the layer with the specified ID.","By default, densitymapbox traces are placed below the first","layer of type symbol","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:n.text,hovertext:n.hovertext,hoverinfo:s({},i.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:o(),showlegend:s({},i.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},6632:(e,t,a)=>{"use strict";var r=a(35924),o=a(34141).isArrayOrTypedArray,i=a(45020).BADNUM,n=a(90336),s=a(34141)._;e.exports=function(e,t){for(var a=t._length,l=new Array(a),c=t.z,p=o(c)&&c.length,d=0;d<a;d++){var h=l[d]={},u=t.lon[d],f=t.lat[d];if(h.lonlat=r(u)&&r(f)?[+u,+f]:[i,i],p){var y=c[d];h.z=r(y)?y:i}}return n(e,t,{vals:p?c:[0,1],containerStr:"",cLetter:"z"}),a&&(l[0].t={labels:{lat:s(e,"lat:")+" ",lon:s(e,"lon:")+" "}}),l}},608:(e,t,a)=>{"use strict";var r=a(35924),o=a(34141),i=a(57597),n=a(59430),s=a(45020).BADNUM,l=a(94511).makeBlank;e.exports=function(e){var t=e[0].trace,a=!0===t.visible&&0!==t._length,c=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:l()};if(!a)return c;var p,d=[],h=t.z,u=t.radius,f=o.isArrayOrTypedArray(h)&&h.length,y=o.isArrayOrTypedArray(u);for(p=0;p<e.length;p++){var m=e[p],x=m.lonlat;if(x[0]!==s){var v={};if(f){var g=m.z;v.z=g!==s?g:0}y&&(v.r=r(u[p])&&u[p]>0?+u[p]:0),d.push({type:"Feature",geometry:{type:"Point",coordinates:x},properties:v})}}var b=n.extractOpts(t),w=b.reversescale?n.flipScale(b.colorscale):b.colorscale,T=w[0][1],k=["interpolate",["linear"],["heatmap-density"],0,i.opacity(T)<1?T:i.addOpacity(T,0)];for(p=1;p<w.length;p++)k.push(w[p][0],w[p][1]);var _=["interpolate",["linear"],["get","z"],b.min,0,b.max,1];return o.extendFlat(c.heatmap.paint,{"heatmap-weight":f?_:1/(b.max-b.min),"heatmap-color":k,"heatmap-radius":y?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),c.geojson={type:"FeatureCollection",features:d},c.heatmap.layout.visibility="visible",c}},50189:(e,t,a)=>{"use strict";var r=a(34141),o=a(62252),i=a(37718);e.exports=function(e,t,a,n){function s(a,o){return r.coerce(e,t,i,a,o)}var l=s("lon")||[],c=s("lat")||[],p=Math.min(l.length,c.length);p?(t._length=p,s("z"),s("radius"),s("below"),s("text"),s("hovertext"),s("hovertemplate"),o(e,t,n,s,{prefix:"",cLetter:"z"})):t.visible=!1}},39603:e=>{"use strict";e.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e.z=t.z,e}},20688:(e,t,a)=>{"use strict";var r=a(34141),o=a(34682),i=a(18191);e.exports=function(e,t,a){var n=i(e,t,a);if(n){var s=n[0],l=s.cd,c=l[0].trace,p=l[s.index];if(delete s.color,"z"in p){var d=s.subplot.mockAxis;s.z=p.z,s.zLabel=o.tickText(d,d.c2l(p.z),"hover").text}return s.extraText=function(e,t,a){if(!e.hovertemplate){var o=(t.hi||e.hoverinfo).split("+"),i=-1!==o.indexOf("all"),n=-1!==o.indexOf("lon"),s=-1!==o.indexOf("lat"),l=t.lonlat,c=[];return i||n&&s?c.push("("+p(l[0])+", "+p(l[1])+")"):n?c.push(a.lon+p(l[0])):s&&c.push(a.lat+p(l[1])),(i||-1!==o.indexOf("text"))&&r.fillText(t,e,c),c.join("<br>")}function p(e){return e+""}}(c,p,l[0].t.labels),[s]}}},99839:(e,t,a)=>{"use strict";e.exports={attributes:a(37718),supplyDefaults:a(50189),colorbar:a(95005),formatLabels:a(28591),calc:a(6632),plot:a(10812),hoverPoints:a(20688),eventData:a(39603),getBelow:function(e,t){for(var a=t.getMapLayers(),r=0;r<a.length;r++){var o=a[r],i=o.id;if("symbol"===o.type&&"string"==typeof i&&-1===i.indexOf("plotly-"))return i}},moduleType:"trace",name:"densitymapbox",basePlotModule:a(90796),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox",description:["Draws a bivariate kernel density estimation with a Gaussian kernel","from `lon` and `lat` coordinates and optional `z` values using a colorscale."].join(" ")}}},10812:(e,t,a)=>{"use strict";var r=a(608),o=a(54210).traceLayerPrefix;function i(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",o+t+"-heatmap"]],this.below=null}var n=i.prototype;n.update=function(e){var t=this.subplot,a=this.layerList,o=r(e),i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(o.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(o,i),this.below=i);for(var n=0;n<a.length;n++){var s=a[n],l=s[0],c=s[1],p=o[l];t.setOptions(c,"setLayoutProperty",p.layout),"visible"===p.layout.visibility&&t.setOptions(c,"setPaintProperty",p.paint)}},n._addLayers=function(e,t){for(var a=this.subplot,r=this.layerList,o=this.sourceId,i=0;i<r.length;i++){var n=r[i],s=n[0],l=e[s];a.addLayer({type:s,id:n[1],source:o,layout:l.layout,paint:l.paint},t)}},n._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,a=t.length-1;a>=0;a--)e.removeLayer(t[a][1])},n.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},e.exports=function(e,t){var a=t[0].trace,o=new i(e,a.uid),n=o.sourceId,s=r(t),l=o.below=e.belowLookup["trace-"+a.uid];return e.map.addSource(n,{type:"geojson",data:s.geojson}),o._addLayers(s,l),o}},6074:(e,t,a)=>{"use strict";var r=a(34141);e.exports=function(e,t){for(var a=0;a<e.length;a++)e[a].i=a;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var o=t.marker;if(o){r.mergeArray(o.opacity,e,"mo"),r.mergeArray(o.color,e,"mc");var i=o.line;i&&(r.mergeArray(i.color,e,"mlc"),r.mergeArrayCastPositive(i.width,e,"mlw"))}}},2964:(e,t,a)=>{"use strict";var r=a(67855),o=a(15451).line,i=a(85485),n=a(88176).f,s=a(88176).s,l=a(83389),c=a(94867).extendFlat,p=a(57597);e.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,hovertext:r.hovertext,hovertemplate:n({},{keys:l.eventDataKeys}),hoverinfo:c({},i.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],role:"info",editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple funnels, percentages & totals","are computed separately (per trace)."].join(" ")},texttemplate:s({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:r.text,textposition:c({},r.textposition,{dflt:"auto"}),insidetextanchor:c({},r.insidetextanchor,{dflt:"middle"}),textangle:c({},r.textangle,{dflt:0}),textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:c({},r.orientation,{description:["Sets the orientation of the funnels.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal).","By default funnels are tend to be oriented horizontally;","unless only *y* array is presented or orientation is set to *v*.","Also regarding graphs including only 'horizontal' funnels,","*autorange* on the *y-axis* are set to *reversed*."].join(" ")}),offset:c({},r.offset,{arrayOk:!1}),width:c({},r.width,{arrayOk:!1}),marker:r.marker,connector:{fillcolor:{valType:"color",role:"style",editType:"style",description:["Sets the fill color."].join(" ")},line:{color:c({},o.color,{dflt:p.defaultLine}),width:c({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if connector regions and lines are drawn."].join(" ")},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},94561:(e,t,a)=>{"use strict";var r=a(34682),o=a(6074),i=a(12356),n=a(45020).BADNUM;function s(e){return e===n?0:e}e.exports=function(e,t){var a,l,c,p,d=r.getFromId(e,t.xaxis||"x"),h=r.getFromId(e,t.yaxis||"y");"h"===t.orientation?(a=d.makeCalcdata(t,"x"),l=h.makeCalcdata(t,"y")):(a=h.makeCalcdata(t,"y"),l=d.makeCalcdata(t,"x"));var u,f=Math.min(l.length,a.length),y=new Array(f);for(t._base=[],c=0;c<f;c++){a[c]<0&&(a[c]=n);var m=!1;a[c]!==n&&c+1<f&&a[c+1]!==n&&(m=!0),p=y[c]={p:l[c],s:a[c],cNext:m},t._base[c]=-.5*p.s,t.ids&&(p.id=String(t.ids[c])),0===c&&(y[0].vTotal=0),y[0].vTotal+=s(p.s),p.begR=s(p.s)/s(y[0].s)}for(c=0;c<f;c++)(p=y[c]).s!==n&&(p.sumR=p.s/y[0].vTotal,p.difR=void 0!==u?p.s/u:1,u=p.s);return o(y,t),i(y,t),y}},83389:e=>{"use strict";e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},57394:(e,t,a)=>{"use strict";var r=a(55023).setGroupPositions;e.exports=function(e,t){var a,o,i=e._fullLayout,n=e._fullData,s=e.calcdata,l=t.xaxis,c=t.yaxis,p=[],d=[],h=[];for(o=0;o<n.length;o++){var u=n[o],f="h"===u.orientation;!0===u.visible&&u.xaxis===l._id&&u.yaxis===c._id&&"funnel"===u.type&&(a=s[o],f?h.push(a):d.push(a),p.push(a))}var y={mode:i.funnelmode,norm:i.funnelnorm,gap:i.funnelgap,groupgap:i.funnelgroupgap};for(r(e,l,c,d,y),r(e,c,l,h,y),o=0;o<p.length;o++){a=p[o];for(var m=0;m<a.length;m++)m+1<a.length&&(a[m].nextP0=a[m+1].p0,a[m].nextS0=a[m+1].s0,a[m].nextP1=a[m+1].p1,a[m].nextS1=a[m+1].s1)}}},72920:(e,t,a)=>{"use strict";var r=a(34141),o=a(58061).handleGroupingDefaults,i=a(58061).handleText,n=a(73978),s=a(2964),l=a(57597);e.exports={supplyDefaults:function(e,t,a,o){function c(a,o){return r.coerce(e,t,s,a,o)}if(n(e,t,o,c)){c("orientation",t.y&&!t.x?"v":"h"),c("offset"),c("width");var p=c("text");c("hovertext"),c("hovertemplate");var d=c("textposition");i(e,t,o,c,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===t.textposition||t.texttemplate||c("textinfo",Array.isArray(p)?"text+value":"value");var h=c("marker.color",a);c("marker.line.color",l.defaultLine),c("marker.line.width"),c("connector.visible")&&(c("connector.fillcolor",function(e){var t=r.isArrayOrTypedArray(e)?"#000":e;return l.addOpacity(t,.5*l.opacity(t))}(h)),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else t.visible=!1},crossTraceDefaults:function(e,t){var a,i;function n(e){return r.coerce(i._input,i,s,e)}if("group"===t.funnelmode)for(var l=0;l<e.length;l++)a=(i=e[l])._input,o(a,i,t,n)}}},8906:e=>{"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(e.percentInitial=t.percentInitial),"percentPrevious"in t&&(e.percentPrevious=t.percentPrevious),"percentTotal"in t&&(e.percentTotal=t.percentTotal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},3347:(e,t,a)=>{"use strict";var r=a(57597).opacity,o=a(99921).hoverOnBars,i=a(34141).formatPercent;e.exports=function(e,t,a,n){var s=o(e,t,a,n);if(s){var l=s.cd,c=l[0].trace,p="h"===c.orientation,d=l[s.index];s[(p?"x":"y")+"LabelVal"]=d.s,s.percentInitial=d.begR,s.percentInitialLabel=i(d.begR,1),s.percentPrevious=d.difR,s.percentPreviousLabel=i(d.difR,1),s.percentTotal=d.sumR,s.percentTotalLabel=i(d.sumR,1);var h=d.hi||c.hoverinfo,u=[];if(h&&"none"!==h&&"skip"!==h){var f="all"===h,y=h.split("+"),m=function(e){return f||-1!==y.indexOf(e)};m("percent initial")&&u.push(s.percentInitialLabel+" of initial"),m("percent previous")&&u.push(s.percentPreviousLabel+" of previous"),m("percent total")&&u.push(s.percentTotalLabel+" of total")}return s.extraText=u.join("<br>"),s.color=function(e,t){var a=e.marker,o=t.mc||a.color,i=t.mlc||a.line.color,n=t.mlw||a.line.width;return r(o)?o:r(i)&&n?i:void 0}(c,d),[s]}}},33428:(e,t,a)=>{"use strict";e.exports={attributes:a(2964),layoutAttributes:a(88195),supplyDefaults:a(72920).supplyDefaults,crossTraceDefaults:a(72920).crossTraceDefaults,supplyLayoutDefaults:a(98438),calc:a(94561),crossTraceCalc:a(57394),plot:a(80972),style:a(96129).style,hoverPoints:a(3347),eventData:a(8906),selectPoints:a(17155),moduleType:"trace",name:"funnel",basePlotModule:a(8095),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Visualize stages in a process using length-encoded bars. This trace can be used","to show data in either a part-to-whole representation wherein each item appears",'in a single stage, or in a "drop-off" representation wherein each item appears in','each stage it traversed. See also the "funnelarea" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},88195:e=>{"use strict";e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},funnelgap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},98438:(e,t,a)=>{"use strict";var r=a(34141),o=a(88195);e.exports=function(e,t,a){var i=!1;function n(a,i){return r.coerce(e,t,o,a,i)}for(var s=0;s<a.length;s++){var l=a[s];if(l.visible&&"funnel"===l.type){i=!0;break}}i&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},80972:(e,t,a)=>{"use strict";var r=a(15078),o=a(34141),i=a(84474),n=a(45020).BADNUM,s=a(38327),l=a(50001).clearMinTextSize;function c(e,t,a,r){var o=[],i=[],n=r?t:a,s=r?a:t;return o[0]=n.c2p(e.s0,!0),i[0]=s.c2p(e.p0,!0),o[1]=n.c2p(e.s1,!0),i[1]=s.c2p(e.p1,!0),o[2]=n.c2p(e.nextS0,!0),i[2]=s.c2p(e.nextP0,!0),o[3]=n.c2p(e.nextS1,!0),i[3]=s.c2p(e.nextP1,!0),r?[o,i]:[i,o]}e.exports=function(e,t,a,p){var d=e._fullLayout;l("funnel",d),function(e,t,a,s){var l=t.xaxis,p=t.yaxis;o.makeTraceGroups(s,a,"trace bars").each((function(a){var s=r.select(this),d=a[0].trace,h=o.ensureSingle(s,"g","regions");if(d.connector&&d.connector.visible){var u="h"===d.orientation,f=h.selectAll("g.region").data(o.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var y=f.size();f.each((function(a,s){if(s===y-1||a.cNext){var d=c(a,l,p,u),h=d[0],f=d[1],m="";h[0]!==n&&f[0]!==n&&h[1]!==n&&f[1]!==n&&h[2]!==n&&f[2]!==n&&h[3]!==n&&f[3]!==n&&(m+=u?"M"+h[0]+","+f[1]+"L"+h[2]+","+f[2]+"H"+h[3]+"L"+h[1]+","+f[1]+"Z":"M"+h[1]+","+f[1]+"L"+h[2]+","+f[3]+"V"+f[2]+"L"+h[1]+","+f[0]+"Z"),""===m&&(m="M0,0Z"),o.ensureSingle(r.select(this),"path").attr("d",m).call(i.setClipUrl,t.layerClipId,e)}}))}else h.remove()}))}(e,t,a,p),function(e,t,a,n){var s=t.xaxis,l=t.yaxis;o.makeTraceGroups(n,a,"trace bars").each((function(a){var n=r.select(this),p=a[0].trace,d=o.ensureSingle(n,"g","lines");if(p.connector&&p.connector.visible&&p.connector.line.width){var h="h"===p.orientation,u=d.selectAll("g.line").data(o.identity);u.enter().append("g").classed("line",!0),u.exit().remove();var f=u.size();u.each((function(a,n){if(n===f-1||a.cNext){var p=c(a,s,l,h),d=p[0],u=p[1],y="";void 0!==d[3]&&void 0!==u[3]&&(h?(y+="M"+d[0]+","+u[1]+"L"+d[2]+","+u[2],y+="M"+d[1]+","+u[1]+"L"+d[3]+","+u[2]):(y+="M"+d[1]+","+u[1]+"L"+d[2]+","+u[3],y+="M"+d[1]+","+u[0]+"L"+d[2]+","+u[2])),""===y&&(y="M0,0Z"),o.ensureSingle(r.select(this),"path").attr("d",y).call(i.setClipUrl,t.layerClipId,e)}}))}else d.remove()}))}(e,t,a,p),s.plot(e,t,a,p,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})}},96129:(e,t,a)=>{"use strict";var r=a(15078),o=a(84474),i=a(57597),n=a(44822).DESELECTDIM,s=a(49888),l=a(50001).resizeText,c=s.styleTextPoints;e.exports={style:function(e,t,a){var s=a||r.select(e).selectAll("g.funnellayer").selectAll("g.trace");l(e,s,"funnel"),s.style("opacity",(function(e){return e[0].trace.opacity})),s.each((function(t){var a=r.select(this),s=t[0].trace;a.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=s.marker;r.select(this).call(i.fill,e.mc||t.color).call(i.stroke,e.mlc||t.line.color).call(o.dashLine,t.line.dash,e.mlw||t.line.width).style("opacity",s.selectedpoints&&!e.selected?n:1)}})),c(a,s,e),a.selectAll(".regions").each((function(){r.select(this).selectAll("path").style("stroke-width",0).call(i.fill,s.connector.fillcolor)})),a.selectAll(".lines").each((function(){var e=s.connector.line;o.lineGroupStyle(r.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}},74906:(e,t,a)=>{"use strict";var r=a(60851),o=a(85485),i=a(72910).Y,n=a(88176).f,s=a(88176).s,l=a(94867).extendFlat;e.exports={labels:r.labels,label0:r.label0,dlabel:r.dlabel,values:r.values,marker:{colors:r.marker.colors,line:{color:l({},r.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:l({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:r.text,hovertext:r.hovertext,scalegroup:l({},r.scalegroup,{description:["If there are multiple funnelareas that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")}),textinfo:l({},r.textinfo,{flags:["label","text","value","percent"]}),texttemplate:s({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:l({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:n({},{keys:["label","color","value","text","percent"]}),textposition:l({},r.textposition,{values:["inside","none"],dflt:"inside"}),textfont:r.textfont,insidetextfont:r.insidetextfont,title:{text:r.title.text,font:r.title.font,position:l({},r.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:i({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",role:"info",min:0,dflt:1,editType:"plot",description:["Sets the ratio between height and width"].join(" ")},baseratio:{valType:"number",role:"info",min:0,max:1,dflt:.333,editType:"plot",description:["Sets the ratio between bottom length and maximum top length."].join(" ")}}},10141:(e,t,a)=>{"use strict";var r=a(79648);t.name="funnelarea",t.plot=function(e,a,o,i){r.plotBasePlot(t.name,e,a,o,i)},t.clean=function(e,a,o,i){r.cleanBasePlot(t.name,e,a,o,i)}},94129:(e,t,a)=>{"use strict";var r=a(75507);e.exports={calc:function(e,t){return r.calc(e,t)},crossTraceCalc:function(e){r.crossTraceCalc(e,{type:"funnelarea"})}}},88056:(e,t,a)=>{"use strict";var r=a(34141),o=a(74906),i=a(72910).c,n=a(58061).handleText,s=a(54583).handleLabelsAndValues;e.exports=function(e,t,a,l){function c(a,i){return r.coerce(e,t,o,a,i)}var p=c("labels"),d=c("values"),h=s(p,d),u=h.len;if(t._hasLabels=h.hasLabels,t._hasValues=h.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),u){t._length=u,c("marker.line.width")&&c("marker.line.color",l.paper_bgcolor),c("marker.colors"),c("scalegroup");var f,y=c("text"),m=c("texttemplate");if(m||(f=c("textinfo",Array.isArray(y)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),m||f&&"none"!==f){var x=c("textposition");n(e,t,l,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}i(t,l,c),c("title.text")&&(c("title.position"),r.coerceFont(c,"title.font",l.font)),c("aspectratio"),c("baseratio")}else t.visible=!1}},97571:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"funnelarea",basePlotModule:a(10141),categories:["pie-like","funnelarea","showLegend"],attributes:a(74906),layoutAttributes:a(21559),supplyDefaults:a(88056),supplyLayoutDefaults:a(69909),calc:a(94129).calc,crossTraceCalc:a(94129).crossTraceCalc,plot:a(88022),style:a(91091),styleOne:a(61613),meta:{description:["Visualize stages in a process using area-encoded trapezoids. This trace can be used",'to show data in a part-to-whole representation similar to a "pie" trace, wherein','each item appears in a single stage. See also the "funnel" trace type for a different',"approach to visualizing funnel data."].join(" ")}}},21559:(e,t,a)=>{"use strict";var r=a(33861).hiddenlabels;e.exports={hiddenlabels:r,funnelareacolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default funnelarea slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendfunnelareacolors`."].join(" ")},extendfunnelareacolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the funnelarea slice colors (whether given by `funnelareacolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},69909:(e,t,a)=>{"use strict";var r=a(34141),o=a(21559);e.exports=function(e,t){function a(a,i){return r.coerce(e,t,o,a,i)}a("hiddenlabels"),a("funnelareacolorway",t.colorway),a("extendfunnelareacolors")}},88022:(e,t,a)=>{"use strict";var r=a(15078),o=a(84474),i=a(34141),n=a(8666),s=a(38327).toMoveInsideBar,l=a(50001),c=l.recordMinTextSize,p=l.clearMinTextSize,d=a(55687),h=a(19128),u=h.attachFxHandlers,f=h.determineInsideTextFont,y=h.layoutAreas,m=h.prerenderTitles,x=h.positionTitleOutside,v=h.formatSliceLabel;function g(e,t){return"l"+(t[0]-e[0])+","+(t[1]-e[1])}e.exports=function(e,t){var a=e._fullLayout;p("funnelarea",a),m(t,e),y(t,a._size),i.makeTraceGroups(a._funnelarealayer,t,"trace").each((function(t){var l=r.select(this),p=t[0],h=p.trace;!function(e){if(e.length){var t=e[0],a=t.trace,r=a.aspectratio,o=a.baseratio;o>.999&&(o=.999);var i,n,s,l=Math.pow(o,2),c=t.vTotal,p=c,d=c*l/(1-l)/c,h=[];for(h.push(A()),n=e.length-1;n>-1;n--)if(!(s=e[n]).hidden){var u=s.v/p;d+=u,h.push(A())}var f=1/0,y=-1/0;for(n=0;n<h.length;n++)i=h[n],f=Math.min(f,i[1]),y=Math.max(y,i[1]);for(n=0;n<h.length;n++)h[n][1]-=(y+f)/2;var m=h[h.length-1][0],x=t.r,v=(y-f)/2,g=x/m,b=x/v*r;for(t.r=b*v,n=0;n<h.length;n++)h[n][0]*=g,h[n][1]*=b;var w,T,k=[-(i=h[0])[0],i[1]],_=[i[0],i[1]],S=0;for(n=e.length-1;n>-1;n--)if(!(s=e[n]).hidden){var L=h[S+=1][0],z=h[S][1];s.TL=[-L,z],s.TR=[L,z],s.BL=k,s.BR=_,s.pxmid=(w=s.TR,T=s.BR,[.5*(w[0]+T[0]),.5*(w[1]+T[1])]),k=s.TL,_=s.TR}}function A(){var e,t={x:e=Math.sqrt(d),y:-e};return[t.x,t.y]}}(t),l.each((function(){var l=r.select(this).selectAll("g.slice").data(t);l.enter().append("g").classed("slice",!0),l.exit().remove(),l.each((function(l,y){if(l.hidden)r.select(this).selectAll("path,g").remove();else{l.pointNumber=l.i,l.curveNumber=h.index;var m=p.cx,x=p.cy,b=r.select(this),w=b.selectAll("path.surface").data([l]);w.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),b.call(u,e,t);var T="M"+(m+l.TR[0])+","+(x+l.TR[1])+g(l.TR,l.BR)+g(l.BR,l.BL)+g(l.BL,l.TL)+"Z";w.attr("d",T),v(e,l,p);var k=d.castOption(h.textposition,l.pts),_=b.selectAll("g.slicetext").data(l.text&&"none"!==k?[0]:[]);_.enter().append("g").classed("slicetext",!0),_.exit().remove(),_.each((function(){var p=i.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),d=i.ensureUniformFontSize(e,f(h,l,a.font));p.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,d).call(n.convertToTspans,e);var u,v,g,b=o.bBox(p.node()),w=Math.min(l.BL[1],l.BR[1])+x,T=Math.max(l.TL[1],l.TR[1])+x;v=Math.max(l.TL[0],l.BL[0])+m,g=Math.min(l.TR[0],l.BR[0])+m,(u=s(v,g,w,T,b,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=d.size,c(h.type,u,a),t[y].transform=u,p.attr("transform",i.getTextTransform(u))}))}}));var y=r.select(this).selectAll("g.titletext").data(h.title.text?[0]:[]);y.enter().append("g").classed("titletext",!0),y.exit().remove(),y.each((function(){var t=i.ensureSingle(r.select(this),"text","",(function(e){e.attr("data-notex",1)})),s=h.title.text;h._meta&&(s=i.templateString(s,h._meta)),t.text(s).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,h.title.font).call(n.convertToTspans,e);var l=x(p,a._size);t.attr("transform","translate("+l.x+","+l.y+")"+(l.scale<1?"scale("+l.scale+")":"")+"translate("+l.tx+","+l.ty+")")}))}))}))}},91091:(e,t,a)=>{"use strict";var r=a(15078),o=a(61613),i=a(50001).resizeText;e.exports=function(e){var t=e._fullLayout._funnelarealayer.selectAll(".trace");i(e,t,"funnelarea"),t.each((function(e){var t=e[0].trace,a=r.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each((function(e){r.select(this).call(o,e,t)}))}))}},95005:e=>{"use strict";e.exports={min:"zmin",max:"zmax"}},38093:(e,t,a)=>{"use strict";var r=a(34141),o=a(89945),i=a(3189),n=a(62252),s=a(58952);e.exports=function(e,t,a,l){function c(a,o){return r.coerce(e,t,s,a,o)}o(e,t,c,l)?(c("text"),c("hovertext"),c("hovertemplate"),i(e,t,c,l),c("hoverongaps"),c("connectgaps",r.isArray1D(t.z)&&!1!==t.zsmooth),n(e,t,l,c,{prefix:"",cLetter:"z"})):t.visible=!1}},62981:(e,t,a)=>{"use strict";var r=a(87529),o=a(34141),i=a(34682),n=a(59430).extractOpts;e.exports=function(e,t,a,s,l,c){var p,d,h,u,f=e.cd[0],y=f.trace,m=e.xa,x=e.ya,v=f.x,g=f.y,b=f.z,w=f.xCenter,T=f.yCenter,k=f.zmask,_=y.zhoverformat,S=v,L=g;if(!1!==e.index){try{h=Math.round(e.index[1]),u=Math.round(e.index[0])}catch(t){return void o.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(h<0||h>=b[0].length||u<0||u>b.length)return}else{if(r.inbox(t-v[0],t-v[v.length-1],0)>0||r.inbox(a-g[0],a-g[g.length-1],0)>0)return;if(c){var z;for(S=[2*v[0]-v[1]],z=1;z<v.length;z++)S.push((v[z]+v[z-1])/2);for(S.push([2*v[v.length-1]-v[v.length-2]]),L=[2*g[0]-g[1]],z=1;z<g.length;z++)L.push((g[z]+g[z-1])/2);L.push([2*g[g.length-1]-g[g.length-2]])}h=Math.max(0,Math.min(S.length-2,o.findBin(t,S))),u=Math.max(0,Math.min(L.length-2,o.findBin(a,L)))}var A=m.c2p(v[h]),M=m.c2p(v[h+1]),O=x.c2p(g[u]),D=x.c2p(g[u+1]);c?(M=A,p=v[h],D=O,d=g[u]):(p=w?w[h]:(v[h]+v[h+1])/2,d=T?T[u]:(g[u]+g[u+1])/2,m&&"category"===m.type&&(p=v[h]),x&&"category"===x.type&&(d=g[u]),y.zsmooth&&(A=M=m.c2p(p),O=D=x.c2p(d)));var j=b[u][h];if(k&&!k[u][h]&&(j=void 0),void 0!==j||y.hoverongaps){var I;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[u])?I=f.hovertext[u][h]:Array.isArray(f.text)&&Array.isArray(f.text[u])&&(I=f.text[u][h]);var C=n(y),P={type:"linear",range:[C.min,C.max],hoverformat:_,_separators:m._separators,_numFormat:m._numFormat},F=i.tickText(P,j,"hover").text;return[o.extendFlat(e,{index:y._after2before?y._after2before[u][h]:[u,h],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:A,x1:M,y0:O,y1:D,xLabelVal:p,yLabelVal:d,zLabelVal:j,zLabel:F,text:I})]}}},81174:(e,t,a)=>{"use strict";e.exports={attributes:a(58952),supplyDefaults:a(38093),calc:a(60319),plot:a(40729),colorbar:a(95005),style:a(44369),hoverPoints:a(62981),moduleType:"trace",name:"heatmap",basePlotModule:a(8095),categories:["cartesian","svg","2dMap","showLegend"],meta:{description:["The data that describes the heatmap value-to-color mapping","is set in `z`.","Data in `z` can either be a {2D array} of values (ragged or not)","or a 1D array of values.","In the case where `z` is a {2D array},","say that `z` has N rows and M columns.","Then, by default, the resulting heatmap will have N partitions along","the y axis and M partitions along the x axis.","In other words, the i-th row/ j-th column cell in `z`","is mapped to the i-th partition of the y axis","(starting from the bottom of the plot) and the j-th partition","of the x-axis (starting from the left of the plot).","This behavior can be flipped by using `transpose`.","Moreover, `x` (`y`) can be provided with M or M+1 (N or N+1) elements.","If M (N), then the coordinates correspond to the center of the","heatmap cells and the cells have equal width.","If M+1 (N+1), then the coordinates correspond to the edges of the","heatmap cells.","In the case where `z` is a 1D {array}, the x and y coordinates must be","provided in `x` and `y` respectively to form data triplets."].join(" ")}}},3189:e=>{"use strict";e.exports=function(e,t,a){!1===a("zsmooth")&&(a("xgap"),a("ygap")),a("zhoverformat")}},89945:(e,t,a)=>{"use strict";var r=a(35924),o=a(34141),i=a(97997);function n(e,t){var a=t(e);return"scaled"===(a?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),a}e.exports=function(e,t,a,s,l,c){var p,d,h=a("z");if(l=l||"x",c=c||"y",void 0===h||!h.length)return 0;if(o.isArray1D(e.z)){p=a(l),d=a(c);var u=o.minRowLength(p),f=o.minRowLength(d);if(0===u||0===f)return 0;t._length=Math.min(u,f,h.length)}else{if(p=n(l,a),d=n(c,a),!function(e){for(var t,a=!0,i=!1,n=!1,s=0;s<e.length;s++){if(t=e[s],!o.isArrayOrTypedArray(t)){a=!1;break}t.length>0&&(i=!0);for(var l=0;l<t.length;l++)if(r(t[l])){n=!0;break}}return a&&i&&n}(h))return 0;a("transpose"),t._length=null}return i.getComponentMethod("calendars","handleTraceDefaults")(e,t,[l,c],s),!0}},47748:(e,t,a)=>{"use strict";for(var r=a(58952),o=a(85088),i=a(94867).extendFlat,n=a(15716).overrideAll,s=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],l={},c=0;c<s.length;c++){var p=s[c];l[p]=r[p]}i(l,o("",{cLetter:"z",autoColorDflt:!1})),e.exports=n(l,"calc","nested")},77949:(e,t,a)=>{"use strict";var r=a(62319),o=a(34682),i=a(59993);function n(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=r(e.glplot,this.options),this.heatmap._trace=this}var s=n.prototype;s.handlePick=function(e){var t=this.options,a=t.shape,r=e.pointId,o=r%a[0],i=Math.floor(r/a[0]),n=r;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[o],t.y[i],t.z[n]],textLabel:this.textLabels[r],name:this.name,pointIndex:[i,o],hoverinfo:this.hoverinfo}},s.update=function(e,t){var a=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var r=a.z;this.options.z=[].concat.apply([],r);var n=r[0].length,s=r.length;this.options.shape=[n,s],this.options.x=a.x,this.options.y=a.y;var l=function(e){for(var t=e.colorscale,a=e.zmin,r=e.zmax,o=t.length,n=new Array(o),s=new Array(4*o),l=0;l<o;l++){var c=t[l],p=i(c[1]);n[l]=a+c[0]*(r-a);for(var d=0;d<4;d++)s[4*l+d]=p[d]}return{colorLevels:n,colorValues:s}}(e);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var c=this.scene.xaxis,p=this.scene.yaxis;e._extremes[c._id]=o.findExtremes(c,a.x),e._extremes[p._id]=o.findExtremes(p,a.y)},s.dispose=function(){this.heatmap.dispose()},e.exports=function(e,t,a){var r=new n(e,t.uid);return r.update(t,a),r}},26543:(e,t,a)=>{"use strict";e.exports={attributes:a(47748),supplyDefaults:a(38093),colorbar:a(95005),calc:a(60319),plot:a(77949),moduleType:"trace",name:"heatmapgl",basePlotModule:a(22515),categories:["gl","gl2d","2dMap"],meta:{description:["WebGL version of the heatmap trace type."].join(" ")}}},60809:(e,t,a)=>{"use strict";var r=a(97997),o=a(34141),i=a(57597),n=a(30572),s=a(13871);e.exports=function(e,t,a,l){function c(a,r){return o.coerce(e,t,s,a,r)}var p=c("x"),d=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin")),c("text"),c("hovertext"),c("hovertemplate");var h=c("orientation",d&&!p?"h":"v"),u="v"===h?"x":"y",f="v"===h?"y":"x",y=p&&d?Math.min(o.minRowLength(p)&&o.minRowLength(d)):o.minRowLength(t[u]||[]);if(y){t._length=y,r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],l),t[f]&&c("histfunc"),c("histnorm"),c("autobin"+u),n(e,t,c,a,l),o.coerceSelectionMarkerOpacity(t,c);var m=(t.marker.line||{}).color,x=r.getComponentMethod("errorbars","supplyDefaults");x(e,t,m||i.defaultLine,{axis:"y"}),x(e,t,m||i.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},66917:e=>{"use strict";e.exports=function(e,t,a,r,o){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(a.cumulative||{}).enabled){var i,n=Array.isArray(o)?r[0].pts[o[0]][o[1]]:r[o].pts;if(e.pointNumbers=n,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,a._indexToPoints){i=[];for(var s=0;s<n.length;s++)i=i.concat(a._indexToPoints[n[s]])}else i=n;e.pointIndices=i}return e}},43386:(e,t,a)=>{"use strict";var r=a(99921).hoverPoints,o=a(34682).hoverLabelText;e.exports=function(e,t,a,i){var n=r(e,t,a,i);if(n){var s=(e=n[0]).cd[e.index],l=e.cd[0].trace;if(!l.cumulative.enabled){var c="h"===l.orientation?"y":"x";e[c+"Label"]=o(e[c+"a"],s.ph0,s.ph1)}return n}}},28371:(e,t,a)=>{"use strict";e.exports={attributes:a(13871),layoutAttributes:a(36383),supplyDefaults:a(60809),crossTraceDefaults:a(63579),supplyLayoutDefaults:a(75986),calc:a(92877).calc,crossTraceCalc:a(55023).crossTraceCalc,plot:a(38327).plot,layerName:"barlayer",style:a(49888).style,styleOnSelect:a(49888).styleOnSelect,colorbar:a(62280),hoverPoints:a(43386),selectPoints:a(17155),eventData:a(66917),moduleType:"trace",name:"histogram",basePlotModule:a(8095),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}}},36836:(e,t,a)=>{"use strict";var r=a(13871),o=a(74199),i=a(58952),n=a(85485),s=a(88176).f,l=a(85088),c=a(94867).extendFlat;e.exports=c({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},marker:{color:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:o("x"),nbinsy:r.nbinsy,ybins:o("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:c({},r.bingroup,{description:["Set the `xbingroup` and `ybingroup` default prefix","For example, setting a `bingroup` of *1* on two histogram2d traces","will make them their x-bins and y-bins match separately."].join(" ")}),xbingroup:c({},r.bingroup,{description:["Set a group of histogram traces which will have compatible x-bin settings.","Using `xbingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible x-bin settings.","Note that the same `xbingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),ybingroup:c({},r.bingroup,{description:["Set a group of histogram traces which will have compatible y-bin settings.","Using `ybingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible y-bin settings.","Note that the same `ybingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,zhoverformat:i.zhoverformat,hovertemplate:s({},{keys:"z"}),showlegend:c({},n.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},66348:(e,t,a)=>{"use strict";var r=a(34141),o=a(19667),i=a(3189),n=a(62252),s=a(36836);e.exports=function(e,t,a,l){function c(a,o){return r.coerce(e,t,s,a,o)}o(e,t,c,l),!1!==t.visible&&(i(e,t,c,l),n(e,t,l,c,{prefix:"",cLetter:"z"}),c("hovertemplate"))}},34944:(e,t,a)=>{"use strict";var r=a(62981),o=a(34682).hoverLabelText;e.exports=function(e,t,a,i,n,s){var l=r(e,t,a,i,n,s);if(l){var c=(e=l[0]).index,p=c[0],d=c[1],h=e.cd[0],u=h.xRanges[d],f=h.yRanges[p];return e.xLabel=o(e.xa,u[0],u[1]),e.yLabel=o(e.ya,f[0],f[1]),l}}},60458:(e,t,a)=>{"use strict";e.exports={attributes:a(36836),supplyDefaults:a(66348),crossTraceDefaults:a(63579),calc:a(60319),plot:a(40729),layerName:"heatmaplayer",colorbar:a(95005),style:a(44369),hoverPoints:a(34944),eventData:a(66917),moduleType:"trace",name:"histogram2d",basePlotModule:a(8095),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{hrName:"histogram_2d",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a heatmap."].join(" ")}}},19667:(e,t,a)=>{"use strict";var r=a(97997),o=a(34141);e.exports=function(e,t,a,i){var n=a("x"),s=a("y"),l=o.minRowLength(n),c=o.minRowLength(s);l&&c?(t._length=Math.min(l,c),r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],i),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):t.visible=!1}},44949:(e,t,a)=>{"use strict";var r=a(36836),o=a(95221),i=a(85088),n=a(94867).extendFlat;e.exports=n({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:o.autocontour,ncontours:o.ncontours,contours:o.contours,line:{color:o.line.color,width:n({},o.line.width,{dflt:.5,description:"Sets the contour line width in (in px)"}),dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate},i("",{cLetter:"z",editTypeOverride:"calc"}))},31759:(e,t,a)=>{"use strict";var r=a(34141),o=a(19667),i=a(48484),n=a(15694),s=a(44949);e.exports=function(e,t,a,l){function c(a,o){return r.coerce(e,t,s,a,o)}o(e,t,c,l),!1!==t.visible&&(i(e,t,c,(function(a){return r.coerce2(e,t,s,a)})),n(e,t,c,l),c("hovertemplate"))}},19340:(e,t,a)=>{"use strict";e.exports={attributes:a(44949),supplyDefaults:a(31759),crossTraceDefaults:a(63579),calc:a(70908),plot:a(89305).plot,layerName:"contourlayer",style:a(46010),colorbar:a(17743),hoverPoints:a(77033),moduleType:"trace",name:"histogram2dcontour",basePlotModule:a(8095),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{hrName:"histogram_2d_contour",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a contour plot."].join(" ")}}},63497:(e,t,a)=>{"use strict";for(var r=a(85485),o=a(88176).f,i=a(94867).extendFlat,n=a(55197).colormodel,s=["rgb","rgba","hsl","hsla"],l=[],c=[],p=0;p<s.length;p++)l.push("For the `"+s[p]+"` colormodel, it is ["+n[s[p]].min.join(", ")+"]."),c.push("For the `"+s[p]+"` colormodel, it is ["+n[s[p]].max.join(", ")+"].");e.exports=i({z:{valType:"data_array",role:"info",editType:"calc",description:["A 2-dimensional array in which each element is an array of 3 or 4 numbers representing a color."].join(" ")},colormodel:{valType:"enumerated",values:s,dflt:"rgb",role:"info",editType:"calc",description:"Color model used to map the numerical color components described in `z` into colors."},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],role:"info",editType:"calc",description:["Array defining the lower bound for each color component.","Note that the default value will depend on the colormodel.",l.join(" ")].join(" ")},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],role:"info",editType:"calc",description:["Array defining the higher bound for each color component.","Note that the default value will depend on the colormodel.",c.join(" ")].join(" ")},x0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:"Set the image's x position."},y0:{valType:"any",dflt:0,role:"info",editType:"calc+clearAxisTypes",description:"Set the image's y position."},dx:{valType:"number",dflt:1,role:"info",editType:"calc",description:"Set the pixel's horizontal size."},dy:{valType:"number",dflt:1,role:"info",editType:"calc",description:"Set the pixel's vertical size"},text:{valType:"data_array",editType:"plot",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"plot",description:"Same as `text`."},hoverinfo:i({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),transforms:void 0})},56921:(e,t,a)=>{"use strict";var r=a(34141),o=a(55197),i=a(35924),n=a(34682),s=a(34141).maxRowLength;function l(e,t,a,o){return function(i){return r.constrain((i-e)*t,a,o)}}function c(e,t){return function(a){return r.constrain(a,e,t)}}e.exports=function(e,t){var a,r=n.getFromId(e,t.xaxis||"x"),p=n.getFromId(e,t.yaxis||"y"),d=r.d2c(t.x0)-t.dx/2,h=p.d2c(t.y0)-t.dy/2,u=t.z.length,f=s(t.z),y=[d,d+f*t.dx],m=[h,h+u*t.dy];if(r&&"log"===r.type)for(a=0;a<f;a++)y.push(d+a*t.dx);if(p&&"log"===p.type)for(a=0;a<u;a++)m.push(h+a*t.dy);return t._extremes[r._id]=n.findExtremes(r,y),t._extremes[p._id]=n.findExtremes(p,m),t._scaler=function(e){var t=e.colormodel,a=t.length,r=o.colormodel[t];e._sArray=[];for(var n=0;n<a;n++)r.min[n]!==e.zmin[n]||r.max[n]!==e.zmax[n]?e._sArray.push(l(e.zmin[n],(r.max[n]-r.min[n])/(e.zmax[n]-e.zmin[n]),r.min[n],r.max[n])):e._sArray.push(c(r.min[n],r.max[n]));return function(t){for(var r=t.slice(0,a),o=0;o<a;o++){var n=r[o];if(!i(n))return!1;r[o]=e._sArray[o](n)}return r}}(t),[{x0:d,y0:h,z:t.z,w:f,h:u}]}},55197:e=>{"use strict";e.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["","%","%",""]}}}},4548:(e,t,a)=>{"use strict";var r=a(34141),o=a(63497),i=a(55197);e.exports=function(e,t){function a(a,i){return r.coerce(e,t,o,a,i)}var n=a("z");if(void 0!==n&&n.length&&n[0]&&n[0].length){a("x0"),a("y0"),a("dx"),a("dy");var s=a("colormodel");a("zmin",i.colormodel[s].min),a("zmax",i.colormodel[s].max),a("text"),a("hovertext"),a("hovertemplate"),t._length=null}else t.visible=!1}},28553:e=>{"use strict";e.exports=function(e,t){return"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e.color=t.color,e.colormodel=t.trace.colormodel,e}},86938:(e,t,a)=>{"use strict";var r=a(87529),o=a(34141),i=a(55197);e.exports=function(e,t,a){var n=e.cd[0],s=n.trace,l=e.xa,c=e.ya;if(!(r.inbox(t-n.x0,t-(n.x0+n.w*s.dx),0)>0||r.inbox(a-n.y0,a-(n.y0+n.h*s.dy),0)>0)){var p=Math.floor((t-n.x0)/s.dx),d=Math.floor(Math.abs(a-n.y0)/s.dy);if(n.z[d][p]){var h,u=n.hi||s.hoverinfo;if(u){var f=u.split("+");-1!==f.indexOf("all")&&(f=["color"]),-1!==f.indexOf("color")&&(h=!0)}var y,m=s.colormodel,x=m.length,v=s._scaler(n.z[d][p]),g=i.colormodel[m].suffix,b=[];(s.hovertemplate||h)&&(b.push("["+[v[0]+g[0],v[1]+g[1],v[2]+g[2]].join(", ")),4===x&&b.push(", "+v[3]+g[3]),b.push("]"),b=b.join(""),e.extraText=m.toUpperCase()+": "+b),Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[d])?y=s.hovertext[d][p]:Array.isArray(s.text)&&Array.isArray(s.text[d])&&(y=s.text[d][p]);var w=c.c2p(n.y0+(d+.5)*s.dy),T=n.x0+(p+.5)*s.dx,k=n.y0+(d+.5)*s.dy,_="["+n.z[d][p].slice(0,s.colormodel.length).join(", ")+"]";return[o.extendFlat(e,{index:[d,p],x0:l.c2p(n.x0+p*s.dx),x1:l.c2p(n.x0+(p+1)*s.dx),y0:w,y1:w,color:v,xVal:T,xLabelVal:T,yVal:k,yLabelVal:k,zLabelVal:_,text:y,hovertemplateLabels:{zLabel:_,colorLabel:b,"color[0]Label":v[0]+g[0],"color[1]Label":v[1]+g[1],"color[2]Label":v[2]+g[2],"color[3]Label":v[3]+g[3]}})]}}}},36332:(e,t,a)=>{"use strict";e.exports={attributes:a(63497),supplyDefaults:a(4548),calc:a(56921),plot:a(69126),style:a(25477),hoverPoints:a(86938),eventData:a(28553),moduleType:"trace",name:"image",basePlotModule:a(8095),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{description:["Display an image, i.e. data on a 2D regular raster.","By default, when an image is displayed in a subplot,","its y axis will be reversed (ie. `autorange: 'reversed'`),","constrained to the domain (ie. `constrain: 'domain'`)","and it will have the same scale as its x axis (ie. `scaleanchor: 'x,`)","in order for pixels to be rendered as squares."].join(" ")}}},69126:(e,t,a)=>{"use strict";var r=a(15078),o=a(34141),i=a(96783),n=a(55197);e.exports=function(e,t,a,s){var l=t.xaxis,c=t.yaxis;o.makeTraceGroups(s,a,"im").each((function(e){var t,a,s,p,d,h,u=r.select(this),f=e[0],y=f.trace,m=f.z,x=f.x0,v=f.y0,g=f.w,b=f.h,w=y.dx,T=y.dy;for(h=0;void 0===t&&h<g;)t=l.c2p(x+h*w),h++;for(h=g;void 0===a&&h>0;)a=l.c2p(x+h*w),h--;for(h=0;void 0===p&&h<b;)p=c.c2p(v+h*T),h++;for(h=b;void 0===d&&h>0;)d=c.c2p(v+h*T),h--;a<t&&(s=a,a=t,t=s),d<p&&(s=p,p=d,d=s),t=Math.max(-.5*l._length,t),a=Math.min(1.5*l._length,a),p=Math.max(-.5*c._length,p),d=Math.min(1.5*c._length,d);var k=Math.round(a-t),_=Math.round(d-p);if(k<=0||_<=0)u.selectAll("image").data([]).exit().remove();else{var S=document.createElement("canvas");S.width=k,S.height=_;var L,z=S.getContext("2d"),A=function(e){return o.constrain(Math.round(l.c2p(x+e*w)-t),0,k)},M=function(e){return o.constrain(Math.round(c.c2p(v+e*T)-p),0,_)},O=n.colormodel[y.colormodel].fmt;for(h=0;h<f.w;h++){var D=A(h),j=A(h+1);if(j!==D&&!isNaN(j)&&!isNaN(D))for(var I=0;I<f.h;I++){var C=M(I),P=M(I+1);P===C||isNaN(P)||isNaN(C)||!m[I][h]||(L=y._scaler(m[I][h]),z.fillStyle=L?y.colormodel+"("+O(L).join(",")+")":"rgba(0,0,0,0)",z.fillRect(D,C,j-D,P-C))}}var F=u.selectAll("image").data(e);F.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),F.attr({height:_,width:k,x:t,y:p,"xlink:href":S.toDataURL("image/png")})}}))}},25477:(e,t,a)=>{"use strict";var r=a(15078);e.exports=function(e){r.select(e).selectAll(".im image").style("opacity",(function(e){return e.trace.opacity}))}},29176:(e,t,a)=>{"use strict";e.exports={attributes:a(49637),supplyDefaults:a(43337).supplyDefaults,calc:a(22971),colorbar:{min:"cmin",max:"cmax"},plot:a(35631).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:a(20883),categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}},77590:(e,t,a)=>{"use strict";var r=a(90336);e.exports=function(e,t){t.intensity&&r(e,t,{vals:t.intensity,containerStr:"",cLetter:"c"})}},63733:(e,t,a)=>{"use strict";var r=a(587),o=a(91930),i=a(3269),n=a(9894),s=a(72106).parseColorScale,l=a(59993),c=a(59430).extractOpts,p=a(98619);function d(e,t,a){this.scene=e,this.uid=a,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var h=d.prototype;function u(e){for(var t=[],a=e.length,r=0;r<a;r++)t[r]=l(e[r]);return t}function f(e,t,a,r){for(var o=[],i=t.length,n=0;n<i;n++)o[n]=e.d2l(t[n],0,r)*a;return o}function y(e){for(var t=[],a=e.length,r=0;r<a;r++)t[r]=Math.round(e[r]);return t}function m(e,t){for(var a=e.length,r=0;r<a;r++)if(e[r]<=-.5||e[r]>=t-.5)return!1;return!0}h.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;e.data._cellCenter?e.traceCoordinate=e.data.dataCoordinate:e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];var a=this.data.hovertext||this.data.text;return Array.isArray(a)&&void 0!==a[t]?e.textLabel=a[t]:a&&(e.textLabel=a),!0}},h.update=function(e){var t=this.scene,a=t.fullSceneLayout;this.data=e;var r,d=e.x.length,h=p(f(a.xaxis,e.x,t.dataScale[0],e.xcalendar),f(a.yaxis,e.y,t.dataScale[1],e.ycalendar),f(a.zaxis,e.z,t.dataScale[2],e.zcalendar));if(e.i&&e.j&&e.k){if(e.i.length!==e.j.length||e.j.length!==e.k.length||!m(e.i,d)||!m(e.j,d)||!m(e.k,d))return;r=p(y(e.i),y(e.j),y(e.k))}else r=0===e.alphahull?n(h):e.alphahull>0?i(e.alphahull,h):function(e,t){for(var a=["x","y","z"].indexOf(e),r=[],i=t.length,n=0;n<i;n++)r[n]=[t[n][(a+1)%3],t[n][(a+2)%3]];return o(r)}(e.delaunayaxis,h);var x={positions:h,cells:r,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:l(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};if(e.intensity){var v=c(e);this.color="#fff";var g=e.intensitymode;x[g+"Intensity"]=e.intensity,x[g+"IntensityBounds"]=[v.min,v.max],x.colormap=s(e)}else e.vertexcolor?(this.color=e.vertexcolor[0],x.vertexColors=u(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],x.cellColors=u(e.facecolor)):(this.color=e.color,x.meshColor=l(e.color));this.mesh.update(x)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},e.exports=function(e,t){var a=e.glplot.gl,o=r({gl:a}),i=new d(e,o,t.uid);return o._trace=i,i.update(t),e.glplot.add(o),i}},96574:(e,t,a)=>{"use strict";var r=a(97997),o=a(34141),i=a(62252),n=a(83952);e.exports=function(e,t,a,s){function l(a,r){return o.coerce(e,t,n,a,r)}function c(e){var t=e.map((function(e){var t=l(e);return t&&o.isArrayOrTypedArray(t)?t:null}));return t.every((function(e){return e&&e.length===t[0].length}))&&t}c(["x","y","z"])?(c(["i","j","k"]),(!t.i||t.j&&t.k)&&(!t.j||t.k&&t.i)&&(!t.k||t.i&&t.j)?(r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],s),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach((function(e){l(e)})),l("contour.show")&&(l("contour.color"),l("contour.width")),"intensity"in e?(l("intensity"),l("intensitymode"),i(e,t,s,l,{prefix:"",cLetter:"c"})):(t.showscale=!1,"facecolor"in e?l("facecolor"):"vertexcolor"in e?l("vertexcolor"):l("color",a)),l("text"),l("hovertext"),l("hovertemplate"),t._length=null):t.visible=!1):t.visible=!1}},99059:(e,t,a)=>{"use strict";e.exports={attributes:a(83952),supplyDefaults:a(96574),calc:a(77590),colorbar:{min:"cmin",max:"cmax"},plot:a(63733),moduleType:"trace",name:"mesh3d",basePlotModule:a(20883),categories:["gl3d","showLegend"],meta:{description:["Draws sets of triangles with coordinates given by","three 1-dimensional arrays in `x`, `y`, `z` and","(1) a sets of `i`, `j`, `k` indices","(2) Delaunay triangulation or","(3) the Alpha-shape algorithm or","(4) the Convex-hull algorithm"].join(" ")}}},32010:(e,t,a)=>{"use strict";var r=a(34141).extendFlat,o=a(15451),i=a(52740).P,n=a(34702),s=a(16639),l=s.INCREASING.COLOR,c=s.DECREASING.COLOR,p=o.line;function d(e){return{line:{color:r({},p.color,{dflt:e}),width:p.width,dash:i,editType:"style"},editType:"style"}}e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x coordinates.","If absent, linear coordinate will be generated."].join(" ")},open:{valType:"data_array",editType:"calc",description:"Sets the open values."},high:{valType:"data_array",editType:"calc",description:"Sets the high values."},low:{valType:"data_array",editType:"calc",description:"Sets the low values."},close:{valType:"data_array",editType:"calc",description:"Sets the close values."},line:{width:r({},p.width,{description:[p.width,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),dash:r({},i,{description:[i.description,"Note that this style setting can also be set per","direction via `increasing.line.dash` and","`decreasing.line.dash`."].join(" ")}),editType:"style"},increasing:d(l),decreasing:d(c),text:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:["Sets hover text elements associated with each sample point.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to","this trace's sample points."].join(" ")},hovertext:{valType:"string",role:"info",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,role:"style",editType:"calc",description:["Sets the width of the open/close tick marks","relative to the *x* minimal interval."].join(" ")},hoverlabel:r({},n.hoverlabel,{split:{valType:"boolean",role:"info",dflt:!1,editType:"style",description:["Show hover information (open, close, high, low) in","separate labels."].join(" ")}})}},65675:(e,t,a)=>{"use strict";var r=a(34141),o=r._,i=a(34682),n=a(45020).BADNUM;function s(e,t,a,r){return{o:e,h:t,l:a,c:r}}function l(e,t,a,s,l){for(var c=s.makeCalcdata(t,"open"),p=s.makeCalcdata(t,"high"),d=s.makeCalcdata(t,"low"),h=s.makeCalcdata(t,"close"),u=Array.isArray(t.text),f=Array.isArray(t.hovertext),y=!0,m=null,x=[],v=0;v<a.length;v++){var g=a[v],b=c[v],w=p[v],T=d[v],k=h[v];if(g!==n&&b!==n&&w!==n&&T!==n&&k!==n){k===b?null!==m&&k!==m&&(y=k>m):y=k>b,m=k;var _=l(b,w,T,k);_.pos=g,_.yc=(b+k)/2,_.i=v,_.dir=y?"increasing":"decreasing",_.x=_.pos,_.y=[T,w],u&&(_.tx=t.text[v]),f&&(_.htx=t.hovertext[v]),x.push(_)}else x.push({pos:g,empty:!0})}return t._extremes[s._id]=i.findExtremes(s,r.concat(d,p),{padded:!0}),x.length&&(x[0].t={labels:{open:o(e,"open:")+" ",high:o(e,"high:")+" ",low:o(e,"low:")+" ",close:o(e,"close:")+" "}}),x}e.exports={calc:function(e,t){var a=i.getFromId(e,t.xaxis),o=i.getFromId(e,t.yaxis),n=function(e,t,a){var o=a._minDiff;if(!o){var i,n=e._fullData,s=[];for(o=1/0,i=0;i<n.length;i++){var l=n[i];if("ohlc"===l.type&&!0===l.visible&&l.xaxis===t._id){s.push(l);var c=t.makeCalcdata(l,"x");l._xcalc=c;var p=r.distinctVals(c).minDiff;p&&isFinite(p)&&(o=Math.min(o,p))}}for(o===1/0&&(o=1),i=0;i<s.length;i++)s[i]._minDiff=o}return o*a.tickwidth}(e,a,t),c=t._minDiff;t._minDiff=null;var p=t._xcalc;t._xcalc=null;var d=l(e,t,p,o,s);return t._extremes[a._id]=i.findExtremes(a,p,{vpad:c/2}),d.length?(r.extendFlat(d[0].t,{wHover:c/2,tickLen:n}),d):[{t:{empty:!0}}]},calcCommon:l}},11796:(e,t,a)=>{"use strict";var r=a(34141),o=a(90748),i=a(32010);function n(e,t,a,r){a(r+".line.color"),a(r+".line.width",t.line.width),a(r+".line.dash",t.line.dash)}e.exports=function(e,t,a,s){function l(a,o){return r.coerce(e,t,i,a,o)}o(e,t,l,s)?(l("line.width"),l("line.dash"),n(0,t,l,"increasing"),n(0,t,l,"decreasing"),l("text"),l("hovertext"),l("tickwidth"),s._requestRangeslider[t.xaxis]=!0):t.visible=!1}},70791:(e,t,a)=>{"use strict";var r=a(34682),o=a(34141),i=a(87529),n=a(57597),s=a(34141).fillText,l=a(16639),c={increasing:l.INCREASING.SYMBOL,decreasing:l.DECREASING.SYMBOL};function p(e,t,a,r){var o,s,l=e.cd,c=e.xa,p=l[0].trace,d=l[0].t,h=p.type,u="ohlc"===h?"l":"min",f="ohlc"===h?"h":"max",y=d.bPos||0,m=d.bdPos||d.tickLen,x=d.wHover,v=Math.min(1,m/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function g(e){var a=function(e){return e.pos+y-t}(e);return i.inbox(a-x,a+x,o)}function b(e){var t=e[u],r=e[f];return t===r||i.inbox(t-a,r-a,o)}function w(e){return(g(e)+b(e))/2}o=e.maxHoverDistance-v,s=e.maxSpikeDistance-v;var T=i.getDistanceFunction(r,g,b,w);if(i.getClosest(l,T,e),!1===e.index)return null;var k=l[e.index];if(k.empty)return null;var _=p[k.dir],S=_.line.color;return n.opacity(S)&&_.line.width?e.color=S:e.color=_.fillcolor,e.x0=c.c2p(k.pos+y-m,!0),e.x1=c.c2p(k.pos+y+m,!0),e.xLabelVal=k.pos,e.spikeDistance=w(k)*s/o,e.xSpike=c.c2p(k.pos,!0),e}function d(e,t,a,i){var n=e.cd,s=e.ya,l=n[0].trace,c=n[0].t,d=[],h=p(e,t,a,i);if(!h)return[];var u=n[h.index].hi||l.hoverinfo,f=u.split("+");if("all"!==u&&-1===f.indexOf("y"))return[];for(var y=["high","open","close","low"],m={},x=0;x<y.length;x++){var v,g=y[x],b=l[g][h.index],w=s.c2p(b,!0);b in m?(v=m[b]).yLabel+="<br>"+c.labels[g]+r.hoverLabelText(s,b):((v=o.extendFlat({},h)).y0=v.y1=w,v.yLabelVal=b,v.yLabel=c.labels[g]+r.hoverLabelText(s,b),v.name="",d.push(v),m[b]=v)}return d}function h(e,t,a,o){var i=e.cd,n=e.ya,l=i[0].trace,d=i[0].t,h=p(e,t,a,o);if(!h)return[];var u=i[h.index],f=h.index=u.i,y=u.dir;function m(e){return d.labels[e]+r.hoverLabelText(n,l[e][f])}var x=u.hi||l.hoverinfo,v=x.split("+"),g="all"===x,b=g||-1!==v.indexOf("y"),w=g||-1!==v.indexOf("text"),T=b?[m("open"),m("high"),m("low"),m("close")+"  "+c[y]]:[];return w&&s(u,l,T),h.extraText=T.join("<br>"),h.y0=h.y1=n.c2p(u.yc,!0),[h]}e.exports={hoverPoints:function(e,t,a,r){return e.cd[0].trace.hoverlabel.split?d(e,t,a,r):h(e,t,a,r)},hoverSplit:d,hoverOnPoints:h}},6053:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"ohlc",basePlotModule:a(8095),categories:["cartesian","svg","showLegend"],meta:{description:["The ohlc (short for Open-High-Low-Close) is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The tip of the lines represent the `low` and `high` values and","the horizontal segments represent the `open` and `close` values.","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing items are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:a(32010),supplyDefaults:a(11796),calc:a(65675).calc,plot:a(36730),style:a(9031),hoverPoints:a(70791).hoverPoints,selectPoints:a(91951)}},90748:(e,t,a)=>{"use strict";var r=a(97997),o=a(34141);e.exports=function(e,t,a,i){var n=a("x"),s=a("open"),l=a("high"),c=a("low"),p=a("close");if(a("hoverlabel.split"),r.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x"],i),s&&l&&c&&p){var d=Math.min(s.length,l.length,c.length,p.length);return n&&(d=Math.min(d,o.minRowLength(n))),t._length=d,d}}},36730:(e,t,a)=>{"use strict";var r=a(15078),o=a(34141);e.exports=function(e,t,a,i){var n=t.yaxis,s=t.xaxis,l=!!s.rangebreaks;o.makeTraceGroups(i,a,"trace ohlc").each((function(e){var t=r.select(this),a=e[0],i=a.t;if(!0!==a.trace.visible||i.empty)t.remove();else{var c=i.tickLen,p=t.selectAll("path").data(o.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",(function(e){if(e.empty)return"M0,0Z";var t=s.c2p(e.pos-c,!0),a=s.c2p(e.pos+c,!0),r=l?(t+a)/2:s.c2p(e.pos,!0);return"M"+t+","+n.c2p(e.o,!0)+"H"+r+"M"+r+","+n.c2p(e.h,!0)+"V"+n.c2p(e.l,!0)+"M"+a+","+n.c2p(e.c,!0)+"H"+r}))}}))}},91951:e=>{"use strict";e.exports=function(e,t){var a,r=e.cd,o=e.xaxis,i=e.yaxis,n=[],s=r[0].t.bPos||0;if(!1===t)for(a=0;a<r.length;a++)r[a].selected=0;else for(a=0;a<r.length;a++){var l=r[a];t.contains([o.c2p(l.pos+s),i.c2p(l.yc)],null,l.i,e)?(n.push({pointNumber:l.i,x:o.c2d(l.pos),y:i.c2d(l.yc)}),l.selected=1):l.selected=0}return n}},9031:(e,t,a)=>{"use strict";var r=a(15078),o=a(84474),i=a(57597);e.exports=function(e,t,a){var n=a||r.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",(function(e){return e[0].trace.opacity})),n.each((function(e){var t=e[0].trace;r.select(this).selectAll("path").each((function(e){if(!e.empty){var a=t[e.dir].line;r.select(this).style("fill","none").call(i.stroke,a.color).call(o.dashLine,a.dash,a.width).style("opacity",t.selectedpoints&&!e.selected?.3:1)}}))}))}},51976:(e,t,a)=>{"use strict";var r=a(79648);t.name="pie",t.plot=function(e,a,o,i){r.plotBasePlot(t.name,e,a,o,i)},t.clean=function(e,a,o,i){r.cleanBasePlot(t.name,e,a,o,i)}},54583:(e,t,a)=>{"use strict";var r=a(35924),o=a(34141),i=a(60851),n=a(72910).c,s=a(58061).handleText;function l(e,t){var a=Array.isArray(e),i=o.isArrayOrTypedArray(t),n=Math.min(a?e.length:1/0,i?t.length:1/0);if(isFinite(n)||(n=0),n&&i){for(var s,l=0;l<n;l++){var c=t[l];if(r(c)&&c>0){s=!0;break}}s||(n=0)}return{hasLabels:a,hasValues:i,len:n}}e.exports={handleLabelsAndValues:l,supplyDefaults:function(e,t,a,r){function c(a,r){return o.coerce(e,t,i,a,r)}var p=l(c("labels"),c("values")),d=p.len;if(t._hasLabels=p.hasLabels,t._hasValues=p.hasValues,!t._hasLabels&&t._hasValues&&(c("label0"),c("dlabel")),d){t._length=d,c("marker.line.width")&&c("marker.line.color"),c("marker.colors"),c("scalegroup");var h,u=c("text"),f=c("texttemplate");if(f||(h=c("textinfo",Array.isArray(u)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),f||h&&"none"!==h){var y=c("textposition");s(e,t,r,c,y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(y)||"auto"===y||"outside"===y)&&c("automargin"),("inside"===y||"auto"===y||Array.isArray(y))&&c("insidetextorientation")}n(t,r,c);var m=c("hole");if(c("title.text")){var x=c("title.position",m?"middle center":"top center");m||"middle center"!==x||(t.title.position="top center"),o.coerceFont(c,"title.font",r.font)}c("sort"),c("direction"),c("rotation"),c("pull")}else t.visible=!1}}},11327:(e,t,a)=>{"use strict";e.exports={attributes:a(60851),supplyDefaults:a(54583).supplyDefaults,supplyLayoutDefaults:a(74837),layoutAttributes:a(33861),calc:a(75507).calc,crossTraceCalc:a(75507).crossTraceCalc,plot:a(19128).plot,style:a(65048),styleOne:a(61613),moduleType:"trace",name:"pie",basePlotModule:a(51976),categories:["pie-like","pie","showLegend"],meta:{description:["A data visualized by the sectors of the pie is set in `values`.","The sector labels are set in `labels`.","The sector colors are set in `marker.colors`"].join(" ")}}},33861:e=>{"use strict";e.exports={hiddenlabels:{valType:"data_array",role:"info",editType:"calc",description:["hiddenlabels is the funnelarea & pie chart analog of","visible:'legendonly'","but it can contain many labels, and can simultaneously","hide slices from several pies/funnelarea charts"].join(" ")},piecolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default pie slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendpiecolors`."].join(" ")},extendpiecolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the pie slice colors (whether given by `piecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},74837:(e,t,a)=>{"use strict";var r=a(34141),o=a(33861);e.exports=function(e,t){function a(a,i){return r.coerce(e,t,o,a,i)}a("hiddenlabels"),a("piecolorway",t.colorway),a("extendpiecolors")}},65048:(e,t,a)=>{"use strict";var r=a(15078),o=a(61613),i=a(50001).resizeText;e.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");i(e,t,"pie"),t.each((function(e){var t=e[0].trace,a=r.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each((function(e){r.select(this).call(o,e,t)}))}))}},67476:(e,t,a)=>{"use strict";var r=a(15451);e.exports={x:r.x,y:r.y,xy:{valType:"data_array",editType:"calc",description:["Faster alternative to specifying `x` and `y` separately.","If supplied, it must be a typed `Float32Array` array that","represents points such that `xy[i * 2] = x[i]` and `xy[i * 2 + 1] = y[i]`"].join(" ")},indices:{valType:"data_array",editType:"calc",description:["A sequential value, 0..n, supply it to avoid creating this array inside plotting.","If specified, it must be a typed `Int32Array` array.","Its length must be equal to or greater than the number of points.","For the best performance and memory use, create one large `indices` typed array","that is guaranteed to be at least as long as the largest number of points during","use, and reuse it on each `Plotly.restyle()` call."].join(" ")},xbounds:{valType:"data_array",editType:"calc",description:["Specify `xbounds` in the shape of `[xMin, xMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `ybounds` for the performance benefits."].join(" ")},ybounds:{valType:"data_array",editType:"calc",description:["Specify `ybounds` in the shape of `[yMin, yMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `xbounds` for the performance benefits."].join(" ")},text:r.text,marker:{color:{valType:"color",arrayOk:!1,role:"style",editType:"calc",description:["Sets the marker fill color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join("")},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,role:"style",editType:"calc",description:["Sets the marker opacity. The default value is `1` (fully opaque).","If the markers are not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning.","Opacity fades the color even if `blend` is left on `false` even if there","is no translucency effect in that case."].join(" ")},blend:{valType:"boolean",dflt:null,role:"style",editType:"calc",description:["Determines if colors are blended together for a translucency effect","in case `opacity` is specified as a value less then `1`.","Setting `blend` to `true` reduces zoom/pan","speed if used with large numbers of points."].join(" ")},sizemin:{valType:"number",min:.1,max:2,dflt:.5,role:"style",editType:"calc",description:["Sets the minimum size (in px) of the rendered marker points, effective when","the `pointcloud` shows a million or more points."].join(" ")},sizemax:{valType:"number",min:.1,dflt:20,role:"style",editType:"calc",description:["Sets the maximum size (in px) of the rendered marker points.","Effective when the `pointcloud` shows only few points."].join(" ")},border:{color:{valType:"color",arrayOk:!1,role:"style",editType:"calc",description:["Sets the stroke color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join(" ")},arearatio:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Specifies what fraction of the marker area is covered with the","border."].join(" ")},editType:"calc"},editType:"calc"},transforms:void 0}},88872:(e,t,a)=>{"use strict";var r=a(22717),o=a(59993),i=a(5816).findExtremes,n=a(11883);function s(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=r(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var l=s.prototype;l.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},l.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=n(e,{})},l.updateFast=function(e){var t,a,r,n,s,l,c=this.xData=this.pickXData=e.x,p=this.yData=this.pickYData=e.y,d=this.pickXYData=e.xy,h=e.xbounds&&e.ybounds,u=e.indices,f=this.bounds;if(d){if(r=d,t=d.length>>>1,h)f[0]=e.xbounds[0],f[2]=e.xbounds[1],f[1]=e.ybounds[0],f[3]=e.ybounds[1];else for(l=0;l<t;l++)n=r[2*l],s=r[2*l+1],n<f[0]&&(f[0]=n),n>f[2]&&(f[2]=n),s<f[1]&&(f[1]=s),s>f[3]&&(f[3]=s);if(u)a=u;else for(a=new Int32Array(t),l=0;l<t;l++)a[l]=l}else for(t=c.length,r=new Float32Array(2*t),a=new Int32Array(t),l=0;l<t;l++)n=c[l],s=p[l],a[l]=l,r[2*l]=n,r[2*l+1]=s,n<f[0]&&(f[0]=n),n>f[2]&&(f[2]=n),s<f[1]&&(f[1]=s),s>f[3]&&(f[3]=s);this.idToIndex=a,this.pointcloudOptions.idToIndex=a,this.pointcloudOptions.positions=r;var y=o(e.marker.color),m=o(e.marker.border.color),x=e.opacity*e.marker.opacity;y[3]*=x,this.pointcloudOptions.color=y;var v=e.marker.blend;null===v&&(v=c.length<100||p.length<100),this.pointcloudOptions.blend=v,m[3]*=x,this.pointcloudOptions.borderColor=m;var g=e.marker.sizemin,b=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=g,this.pointcloudOptions.sizeMax=b,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var w=this.scene.xaxis,T=this.scene.yaxis,k=b/2||.5;e._extremes[w._id]=i(w,[f[0],f[2]],{ppad:k}),e._extremes[T._id]=i(T,[f[1],f[3]],{ppad:k})},l.dispose=function(){this.pointcloud.dispose()},e.exports=function(e,t){var a=new s(e,t.uid);return a.update(t),a}},47171:(e,t,a)=>{"use strict";var r=a(34141),o=a(67476);e.exports=function(e,t,a){function i(a,i){return r.coerce(e,t,o,a,i)}i("x"),i("y"),i("xbounds"),i("ybounds"),e.xy&&e.xy instanceof Float32Array&&(t.xy=e.xy),e.indices&&e.indices instanceof Int32Array&&(t.indices=e.indices),i("text"),i("marker.color",a),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",a),i("marker.border.arearatio"),t._length=null}},83980:(e,t,a)=>{"use strict";e.exports={attributes:a(67476),supplyDefaults:a(47171),calc:a(78247),plot:a(88872),moduleType:"trace",name:"pointcloud",basePlotModule:a(22515),categories:["gl","gl2d","showLegend"],meta:{description:["The data visualized as a point cloud set in `x` and `y`","using the WebGl plotting engine."].join(" ")}}},20038:(e,t,a)=>{"use strict";var r=a(15451),o=a(85485),i=a(88176).f,n=a(88176).s,s=a(85088),l=a(94867).extendFlat,c=r.marker,p=r.line,d=c.line;e.exports={carpet:{valType:"string",role:"info",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},a:{valType:"data_array",editType:"calc",description:"Sets the a-axis coordinates."},b:{valType:"data_array",editType:"calc",description:"Sets the b-axis coordinates."},mode:l({},r.mode,{dflt:"markers"}),text:l({},r.text,{description:["Sets text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:n({editType:"plot"},{keys:["a","b","text"]}),hovertext:l({},r.hovertext,{description:["Sets hover text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:p.color,width:p.width,dash:p.dash,shape:l({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:r.connectgaps,fill:l({},r.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:r.fillcolor,marker:l({symbol:c.symbol,opacity:c.opacity,maxdisplayed:c.maxdisplayed,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,line:l({width:d.width,editType:"calc"},s("marker.line")),gradient:c.gradient,editType:"calc"},s("marker")),textfont:r.textfont,textposition:r.textposition,selected:r.selected,unselected:r.unselected,hoverinfo:l({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:r.hoveron,hovertemplate:i()}},28775:(e,t,a)=>{"use strict";var r=a(35924),o=a(39764),i=a(77503),n=a(12356),s=a(52006).calcMarkerSize,l=a(13290);e.exports=function(e,t){var a=t._carpetTrace=l(e,t);if(a&&a.visible&&"legendonly"!==a.visible){var c;t.xaxis=a.xaxis,t.yaxis=a.yaxis;var p,d,h=t._length,u=new Array(h),f=!1;for(c=0;c<h;c++)if(p=t.a[c],d=t.b[c],r(p)&&r(d)){var y=a.ab2xy(+p,+d,!0),m=a.isVisible(+p,+d);m||(f=!0),u[c]={x:y[0],y:y[1],a:p,b:d,vis:m}}else u[c]={x:!1,y:!1};return t._needsCull=f,u[0].carpet=a,u[0].trace=t,s(t,h),o(e,t),i(u,t),n(u,t),u}}},18962:(e,t,a)=>{"use strict";var r=a(34141),o=a(27814),i=a(32758),n=a(93327),s=a(43342),l=a(5225),c=a(28509),p=a(74652),d=a(20038);e.exports=function(e,t,a,h){function u(a,o){return r.coerce(e,t,d,a,o)}u("carpet"),t.xaxis="x",t.yaxis="y";var f=u("a"),y=u("b"),m=Math.min(f.length,y.length);if(m){t._length=m,u("text"),u("texttemplate"),u("hovertext"),u("mode",m<o.PTS_LINESONLY?"lines+markers":"lines"),i.hasLines(t)&&(s(e,t,a,h,u),l(e,t,u),u("connectgaps")),i.hasMarkers(t)&&n(e,t,a,h,u,{gradient:!0}),i.hasText(t)&&c(e,t,h,u);var x=[];(i.hasMarkers(t)||i.hasText(t))&&(u("marker.maxdisplayed"),x.push("points")),u("fill"),"none"!==t.fill&&(p(e,t,a,u),i.hasLines(t)||l(e,t,u)),"tonext"!==t.fill&&"toself"!==t.fill||x.push("fills"),"fills"!==u("hoveron",x.join("+")||"points")&&u("hovertemplate"),r.coerceSelectionMarkerOpacity(t,u)}else t.visible=!1}},43730:e=>{"use strict";e.exports=function(e,t,a,r,o){var i=r[o];return e.a=i.a,e.b=i.b,e.y=i.y,e}},80161:e=>{"use strict";e.exports=function(e,t){var a={},r=t._carpet,o=r.ab2ij([e.a,e.b]),i=Math.floor(o[0]),n=o[0]-i,s=Math.floor(o[1]),l=o[1]-s,c=r.evalxy([],i,s,n,l);return a.yLabel=c[1].toFixed(3),a}},54134:(e,t,a)=>{"use strict";var r=a(45362),o=a(34141).fillText;e.exports=function(e,t,a,i){var n=r(e,t,a,i);if(n&&!1!==n[0].index){var s=n[0];if(void 0===s.index){var l=1-s.y0/e.ya._length,c=e.xa._length,p=c*l/2,d=c-p;return s.x0=Math.max(Math.min(s.x0,d),p),s.x1=Math.max(Math.min(s.x1,d),p),n}var h=s.cd[s.index];s.a=h.a,s.b=h.b,s.xLabelVal=void 0,s.yLabelVal=void 0;var u=s.trace,f=u._carpet,y=u._module.formatLabels(h,u);s.yLabel=y.yLabel,delete s.text;var m=[];if(!u.hovertemplate){var x=(h.hi||u.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","text"]),-1!==x.indexOf("a")&&v(f.aaxis,h.a),-1!==x.indexOf("b")&&v(f.baxis,h.b),m.push("y: "+s.yLabel),-1!==x.indexOf("text")&&o(h,u,m),s.extraText=m.join("<br>")}return n}function v(e,t){var a;a=e.labelprefix&&e.labelprefix.length>0?e.labelprefix.replace(/ = $/,""):e._hovertitle,m.push(a+": "+t.toFixed(3)+e.labelsuffix)}}},65005:(e,t,a)=>{"use strict";e.exports={attributes:a(20038),supplyDefaults:a(18962),colorbar:a(62280),formatLabels:a(80161),calc:a(28775),plot:a(32643),style:a(5049).style,styleOnSelect:a(5049).styleOnSelect,hoverPoints:a(54134),selectPoints:a(79347),eventData:a(43730),moduleType:"trace",name:"scattercarpet",basePlotModule:a(8095),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{hrName:"scatter_carpet",description:["Plots a scatter trace on either the first carpet axis or the","carpet axis with a matching `carpet` attribute."].join(" ")}}},32643:(e,t,a)=>{"use strict";var r=a(46278),o=a(34682),i=a(84474);e.exports=function(e,t,a,n){var s,l,c,p=a[0][0].carpet,d={xaxis:o.getFromId(e,p.xaxis||"x"),yaxis:o.getFromId(e,p.yaxis||"y"),plot:t.plot};for(r(e,d,a,n),s=0;s<a.length;s++)l=a[s][0].trace,c=n.selectAll("g.trace"+l.uid+" .js-line"),i.setClipUrl(c,a[s][0].carpet._clipPathId,e)}},89068:(e,t,a)=>{"use strict";var r=a(35924),o=a(45020).BADNUM,i=a(39764),n=a(77503),s=a(12356),l=a(34141)._;function c(e){return e&&"string"==typeof e}e.exports=function(e,t){var a,p=Array.isArray(t.locations),d=p?t.locations.length:t._length,h=new Array(d);a=t.geojson?function(e){return c(e)||r(e)}:c;for(var u=0;u<d;u++){var f=h[u]={};if(p){var y=t.locations[u];f.loc=a(y)?y:null}else{var m=t.lon[u],x=t.lat[u];r(m)&&r(x)?f.lonlat=[+m,+x]:f.lonlat=[o,o]}}return n(h,t),i(e,t),s(h,t),d&&(h[0].t={labels:{lat:l(e,"lat:")+" ",lon:l(e,"lon:")+" "}}),h}},81429:(e,t,a)=>{"use strict";var r=a(34141),o=a(32758),i=a(93327),n=a(43342),s=a(28509),l=a(74652),c=a(15845);e.exports=function(e,t,a,p){function d(a,o){return r.coerce(e,t,c,a,o)}var h,u=d("locations");if(u&&u.length){var f,y=d("geojson");("string"==typeof y&&""!==y||r.isPlainObject(y))&&(f="geojson-id"),"geojson-id"===d("locationmode",f)&&d("featureidkey"),h=u.length}else{var m=d("lon")||[],x=d("lat")||[];h=Math.min(m.length,x.length)}h?(t._length=h,d("text"),d("hovertext"),d("hovertemplate"),d("mode"),o.hasLines(t)&&(n(e,t,a,p,d),d("connectgaps")),o.hasMarkers(t)&&i(e,t,a,p,d,{gradient:!0}),o.hasText(t)&&(d("texttemplate"),s(e,t,p,d)),d("fill"),"none"!==t.fill&&l(e,t,a,d),r.coerceSelectionMarkerOpacity(t,d)):t.visible=!1}},8836:e=>{"use strict";e.exports=function(e,t,a,r,o){e.lon=t.lon,e.lat=t.lat,e.location=t.loc?t.loc:null;var i=r[o];return i.fIn&&i.fIn.properties&&(e.properties=i.fIn.properties),e}},42907:(e,t,a)=>{"use strict";var r=a(34682);e.exports=function(e,t,a){var o={},i=a[t.geo]._subplot.mockAxis,n=e.lonlat;return o.lonLabel=r.tickText(i,i.c2l(n[0]),!0).text,o.latLabel=r.tickText(i,i.c2l(n[1]),!0).text,o}},58718:(e,t,a)=>{"use strict";var r=a(87529),o=a(45020).BADNUM,i=a(11883),n=a(34141).fillText,s=a(15845);e.exports=function(e,t,a){var l=e.cd,c=l[0].trace,p=e.xa,d=e.ya,h=e.subplot,u=h.projection.isLonLatOverEdges,f=h.project;if(r.getClosest(l,(function(e){var r=e.lonlat;if(r[0]===o)return 1/0;if(u(r))return 1/0;var i=f(r),n=f([t,a]),s=Math.abs(i[0]-n[0]),l=Math.abs(i[1]-n[1]),c=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(s*s+l*l)-c,1-3/c)}),e),!1!==e.index){var y=l[e.index],m=y.lonlat,x=[p.c2p(m),d.c2p(m)],v=y.mrc||1;e.x0=x[0]-v,e.x1=x[0]+v,e.y0=x[1]-v,e.y1=x[1]+v,e.loc=y.loc,e.lon=m[0],e.lat=m[1];var g={};g[c.geo]={_subplot:h};var b=c._module.formatLabels(y,c,g);return e.lonLabel=b.lonLabel,e.latLabel=b.latLabel,e.color=i(c,y),e.extraText=function(e,t,a,r){if(!e.hovertemplate){var o=t.hi||e.hoverinfo,i="all"===o?s.hoverinfo.flags:o.split("+"),l=-1!==i.indexOf("location")&&Array.isArray(e.locations),c=-1!==i.indexOf("lon"),p=-1!==i.indexOf("lat"),d=-1!==i.indexOf("text"),h=[];return l?h.push(t.loc):c&&p?h.push("("+u(a.lonLabel)+", "+u(a.latLabel)+")"):c?h.push(r.lon+u(a.lonLabel)):p&&h.push(r.lat+u(a.latLabel)),d&&n(t,e,h),h.join("<br>")}function u(e){return e+""}}(c,y,e,l[0].t.labels),e.hovertemplate=c.hovertemplate,[e]}}},47097:(e,t,a)=>{"use strict";e.exports={attributes:a(15845),supplyDefaults:a(81429),colorbar:a(62280),formatLabels:a(42907),calc:a(89068),calcGeoJSON:a(5624).calcGeoJSON,plot:a(5624).plot,style:a(39396),styleOnSelect:a(5049).styleOnSelect,hoverPoints:a(58718),eventData:a(8836),selectPoints:a(55444),moduleType:"trace",name:"scattergeo",basePlotModule:a(42483),categories:["geo","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_geo",description:["The data visualized as scatter point or lines on a geographic map","is provided either by longitude/latitude pairs in `lon` and `lat`","respectively or by geographic location IDs or names in `locations`."].join(" ")}}},5624:(e,t,a)=>{"use strict";var r=a(15078),o=a(34141),i=a(27653).getTopojsonFeatures,n=a(94511),s=a(94187),l=a(5816).findExtremes,c=a(45020).BADNUM,p=a(52006).calcMarkerSize,d=a(32758),h=a(39396);e.exports={calcGeoJSON:function(e,t){var a,r,o=e[0].trace,n=t[o.geo],d=n._subplot,h=o._length;if(Array.isArray(o.locations)){var u=o.locationmode,f="geojson-id"===u?s.extractTraceFeature(e):i(o,d.topojson);for(a=0;a<h;a++){r=e[a];var y="geojson-id"===u?r.fOut:s.locationToFeature(u,r.loc,f);r.lonlat=y?y.properties.ct:[c,c]}}var m,x,v={padded:!0};if("geojson"===n.fitbounds&&"geojson-id"===o.locationmode){var g=s.computeBbox(s.getTraceGeojson(o));m=[g[0],g[2]],x=[g[1],g[3]]}else{for(m=new Array(h),x=new Array(h),a=0;a<h;a++)r=e[a],m[a]=r.lonlat[0],x[a]=r.lonlat[1];v.ppad=p(o,h)}o._extremes.lon=l(n.lonaxis._ax,m,v),o._extremes.lat=l(n.lataxis._ax,x,v)},plot:function(e,t,a){var i=t.layers.frontplot.select(".scatterlayer"),s=o.makeTraceGroups(i,a,"trace scattergeo");function l(e,t){e.lonlat[0]===c&&r.select(t).remove()}s.selectAll("*").remove(),s.each((function(t){var a=r.select(this),i=t[0].trace;if(d.hasLines(i)||"none"!==i.fill){var s=n.calcTraceToLineCoords(t),c="none"!==i.fill?n.makePolygon(s):n.makeLine(s);a.selectAll("path.js-line").data([{geojson:c,trace:i}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}d.hasMarkers(i)&&a.selectAll("path.point").data(o.identity).enter().append("path").classed("point",!0).each((function(e){l(e,this)})),d.hasText(i)&&a.selectAll("g").data(o.identity).enter().append("g").append("text").each((function(e){l(e,this)})),h(e,t)}))}}},55444:(e,t,a)=>{"use strict";var r=a(32758),o=a(45020).BADNUM;e.exports=function(e,t){var a,i,n,s,l,c=e.cd,p=e.xaxis,d=e.yaxis,h=[],u=c[0].trace;if(!r.hasMarkers(u)&&!r.hasText(u))return[];if(!1===t)for(l=0;l<c.length;l++)c[l].selected=0;else for(l=0;l<c.length;l++)(i=(a=c[l]).lonlat)[0]!==o&&(n=p.c2p(i),s=d.c2p(i),t.contains([n,s],null,l,e)?(h.push({pointNumber:l,lon:i[0],lat:i[1]}),a.selected=1):a.selected=0);return h}},39396:(e,t,a)=>{"use strict";var r=a(15078),o=a(84474),i=a(57597),n=a(5049),s=n.stylePoints,l=n.styleText;e.exports=function(e,t){t&&function(e,t){var a=t[0].trace,n=t[0].node3;n.style("opacity",t[0].trace.opacity),s(n,a,e),l(n,a,e),n.selectAll("path.js-line").style("fill","none").each((function(e){var t=r.select(this),a=e.trace,n=a.line||{};t.call(i.stroke,n.color).call(o.dashLine,n.dash||"",n.width||0),"none"!==a.fill&&t.call(i.fill,a.fillcolor)}))}(e,t)}},20154:(e,t,a)=>{"use strict";var r=a(20425),o=a(34141),i=a(44790),n=a(5816).findExtremes,s=a(52006),l=s.calcMarkerSize,c=s.calcAxisExpansion,p=s.setFirstScatter,d=a(39764),h=a(25709),u=a(66569),f=a(45020).BADNUM,y=a(90519).TOO_MANY_POINTS;function m(e,t,a){var r=e._extremes[t._id],o=n(t,a._bnds,{padded:!0});r.min=r.min.concat(o.min),r.max=r.max.concat(o.max)}e.exports=function(e,t){var a,n,s,x=e._fullLayout,v=i.getFromId(e,t.xaxis),g=i.getFromId(e,t.yaxis),b=x._plots[t.xaxis+t.yaxis],w=t._length,T=w>=y,k=2*w,_={},S=t._x=v.makeCalcdata(t,"x"),L=t._y=g.makeCalcdata(t,"y"),z=new Array(k);for(a=0;a<w;a++)n=S[a],s=L[a],z[2*a]=n===f?NaN:n,z[2*a+1]=s===f?NaN:s;if("log"===v.type)for(a=0;a<k;a+=2)z[a]=v.c2l(z[a]);if("log"===g.type)for(a=1;a<k;a+=2)z[a]=g.c2l(z[a]);if(T&&"log"!==v.type&&"log"!==g.type)_.tree=r(z);else{var A=_.ids=new Array(w);for(a=0;a<w;a++)A[a]=a}d(e,t);var M,O=function(e,t,a,r,i,n){var s=h.style(e,a);if(s.marker&&(s.marker.positions=r),s.line&&r.length>1&&o.extendFlat(s.line,h.linePositions(e,a,r)),s.errorX||s.errorY){var l=h.errorBarPositions(e,a,r,i,n);s.errorX&&o.extendFlat(s.errorX,l.x),s.errorY&&o.extendFlat(s.errorY,l.y)}return s.text&&(o.extendFlat(s.text,{positions:r},h.textPosition(e,a,s.text,s.marker)),o.extendFlat(s.textSel,{positions:r},h.textPosition(e,a,s.text,s.markerSel)),o.extendFlat(s.textUnsel,{positions:r},h.textPosition(e,a,s.text,s.markerUnsel))),s}(e,0,t,z,S,L),D=u(e,b);return p(x,t),T?O.marker&&(M=2*(O.marker.sizeAvg||Math.max(O.marker.size,3))):M=l(t,w),c(e,t,v,g,S,L,M),O.errorX&&m(t,v,O.errorX),O.errorY&&m(t,g,O.errorY),O.fill&&!D.fill2d&&(D.fill2d=!0),O.marker&&!D.scatter2d&&(D.scatter2d=!0),O.line&&!D.line2d&&(D.line2d=!0),!O.errorX&&!O.errorY||D.error2d||(D.error2d=!0),O.text&&!D.glText&&(D.glText=!0),O.marker&&(O.marker.snap=w),D.lineOptions.push(O.line),D.errorXOptions.push(O.errorX),D.errorYOptions.push(O.errorY),D.fillOptions.push(O.fill),D.markerOptions.push(O.marker),D.markerSelectedOptions.push(O.markerSel),D.markerUnselectedOptions.push(O.markerUnsel),D.textOptions.push(O.text),D.textSelectedOptions.push(O.textSel),D.textUnselectedOptions.push(O.textUnsel),D.selectBatch.push([]),D.unselectBatch.push([]),_._scene=D,_.index=D.count,_.x=S,_.y=L,_.positions=z,D.count++,[{x:!1,y:!1,t:_,trace:t}]}},94049:(e,t,a)=>{"use strict";var r=a(34141),o=a(97997),i=a(78873),n=a(45924),s=a(27814),l=a(32758),c=a(73978),p=a(93327),d=a(43342),h=a(74652),u=a(28509);e.exports=function(e,t,a,f){function y(a,o){return r.coerce(e,t,n,a,o)}var m=!!e.marker&&i.isOpenSymbol(e.marker.symbol),x=l.isBubble(e),v=c(e,t,f,y);if(v){var g=v<s.PTS_LINESONLY?"lines+markers":"lines";y("text"),y("hovertext"),y("hovertemplate"),y("mode",g),l.hasLines(t)&&(y("connectgaps"),d(e,t,a,f,y),y("line.shape")),l.hasMarkers(t)&&(p(e,t,a,f,y),y("marker.line.width",m||x?1:0)),l.hasText(t)&&(y("texttemplate"),u(e,t,f,y));var b=(t.line||{}).color,w=(t.marker||{}).color;y("fill"),"none"!==t.fill&&h(e,t,a,y);var T=o.getComponentMethod("errorbars","supplyDefaults");T(e,t,b||w||a,{axis:"y"}),T(e,t,b||w||a,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,y)}else t.visible=!1}},40280:(e,t,a)=>{"use strict";var r=a(7071);e.exports=function(e,t,a){var o=e.i;return"x"in e||(e.x=t._x[o]),"y"in e||(e.y=t._y[o]),r(e,t,a)}},68547:(e,t,a)=>{"use strict";var r=a(51281);e.exports={moduleType:"trace",name:"scattergl",basePlotModule:a(8095),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:a(45924),supplyDefaults:a(94049),crossTraceDefaults:a(27199),colorbar:a(62280),formatLabels:a(40280),calc:a(20154),plot:a(69843),hoverPoints:r.hoverPoints,selectPoints:a(84634),meta:{hrName:"scatter_gl",description:["The data visualized as scatter point or lines is set in `x` and `y`","using the WebGL plotting engine.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to a numerical arrays."].join(" ")}}},69249:(e,t,a)=>{"use strict";var r=a(88176).f,o=a(88176).s,i=a(15845),n=a(15451),s=a(73680),l=a(85485),c=a(85088),p=a(94867).extendFlat,d=a(15716).overrideAll,h=i.line,u=i.marker;e.exports=d({lon:i.lon,lat:i.lat,mode:p({},n.mode,{dflt:"markers",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover."].join(" ")}),text:p({},n.text,{description:["Sets text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:o({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:p({},n.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:h.color,width:h.width},connectgaps:n.connectgaps,marker:p({symbol:{valType:"string",dflt:"circle",role:"style",arrayOk:!0,description:["Sets the marker symbol.","Full list: https://www.mapbox.com/maki-icons/","Note that the array `marker.color` and `marker.size`","are only available for *circle* symbols."].join(" ")},angle:{valType:"number",dflt:"auto",role:"style",arrayOk:!0,description:["Sets the marker orientation from true North, in degrees clockwise.","When using the *auto* default, no rotation would be applied","in perspective views which is different from using a zero angle."].join(" ")},allowoverlap:{valType:"boolean",dflt:!1,role:"style",description:["Flag to draw all symbols, even if they overlap."].join(" ")},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},c("marker")),fill:i.fill,fillcolor:n.fillcolor,textfont:s.layers.symbol.textfont,textposition:s.layers.symbol.textposition,below:{valType:"string",role:"info",description:["Determines if this scattermapbox trace's layers are to be inserted","before the layer with the specified ID.","By default, scattermapbox layers are inserted","above all the base layers.","To place the scattermapbox layers above every other layer, set `below` to *''*."].join(" ")},selected:{marker:n.selected.marker},unselected:{marker:n.unselected.marker},hoverinfo:p({},l.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:r()},"calc","nested")},27191:(e,t,a)=>{"use strict";var r=a(35924),o=a(34141),i=a(45020).BADNUM,n=a(94511),s=a(59430),l=a(84474),c=a(3301),p=a(32758),d=a(13832),h=a(70611).appendArrayPointValue,u=a(8666).NEWLINES,f=a(8666).BR_TAG_ALL;function y(){return{geojson:n.makeBlank(),layout:{visibility:"none"},paint:{}}}function m(e,t){return o.isArrayOrTypedArray(e)?t?function(t){return r(e[t])?+e[t]:0}:function(t){return e[t]}:e?function(){return e}:x}function x(){return""}function v(e){return e[0]===i}e.exports=function(e,t){var a,i=t[0].trace,g=!0===i.visible&&0!==i._length,b="none"!==i.fill,w=p.hasLines(i),T=p.hasMarkers(i),k=p.hasText(i),_=T&&"circle"===i.marker.symbol,S=T&&"circle"!==i.marker.symbol,L=y(),z=y(),A=y(),M=y(),O={fill:L,line:z,circle:A,symbol:M};if(!g)return O;if((b||w)&&(a=n.calcTraceToLineCoords(t)),b&&(L.geojson=n.makePolygon(a),L.layout.visibility="visible",o.extendFlat(L.paint,{"fill-color":i.fillcolor})),w&&(z.geojson=n.makeLine(a),z.layout.visibility="visible",o.extendFlat(z.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),_){var D=function(e){var t,a,i,n,p=e[0].trace,d=p.marker,h=p.selectedpoints,u=o.isArrayOrTypedArray(d.color),f=o.isArrayOrTypedArray(d.size),y=o.isArrayOrTypedArray(d.opacity);function m(e){return p.opacity*e}u&&(a=s.hasColorscale(p,"marker")?s.makeColorScaleFuncFromTrace(d):o.identity),f&&(i=c(p)),y&&(n=function(e){return m(r(e)?+o.constrain(e,0,1):0)});var x,g,b=[];for(t=0;t<e.length;t++){var w=e[t],T=w.lonlat;if(!v(T)){var k={};a&&(k.mcc=w.mcc=a(w.mc)),i&&(k.mrc=w.mrc=i(w.ms)),n&&(k.mo=n(w.mo)),h&&(k.selected=w.selected||0),b.push({type:"Feature",geometry:{type:"Point",coordinates:T},properties:k})}}if(h)for(x=l.makeSelectedPointStyleFns(p),t=0;t<b.length;t++){var _=b[t].properties;x.selectedOpacityFn&&(_.mo=m(x.selectedOpacityFn(_))),x.selectedColorFn&&(_.mcc=x.selectedColorFn(_)),x.selectedSizeFn&&(_.mrc=x.selectedSizeFn(_))}return{geojson:{type:"FeatureCollection",features:b},mcc:u||x&&x.selectedColorFn?{type:"identity",property:"mcc"}:d.color,mrc:f||x&&x.selectedSizeFn?{type:"identity",property:"mrc"}:(g=d.size,g/2),mo:y||x&&x.selectedOpacityFn?{type:"identity",property:"mo"}:m(d.opacity)}}(t);A.geojson=D.geojson,A.layout.visibility="visible",o.extendFlat(A.paint,{"circle-color":D.mcc,"circle-radius":D.mrc,"circle-opacity":D.mo})}if((S||k)&&(M.geojson=function(e,t){for(var a=t._fullLayout,r=e[0].trace,i=r.marker||{},n=i.symbol,s=i.angle,l="circle"!==n?m(n):x,c="auto"!==s?m(s,!0):x,d=p.hasText(r)?m(r.text):x,y=[],g=0;g<e.length;g++){var b=e[g];if(!v(b.lonlat)){var w,T=r.texttemplate;if(T){var k=Array.isArray(T)?T[g]||"":T,_=r._module.formatLabels(b,r,a),S={};h(S,r,b.i);var L=r._meta||{};w=o.texttemplateString(k,_,a._d3locale,S,b,L)}else w=d(g);w&&(w=w.replace(u,"").replace(f,"\n")),y.push({type:"Feature",geometry:{type:"Point",coordinates:b.lonlat},properties:{symbol:l(g),angle:c(g),text:w}})}}return{type:"FeatureCollection",features:y}}(t,e),o.extendFlat(M.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),S&&(o.extendFlat(M.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&"auto"!==i.marker.angle&&o.extendFlat(M.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),M.layout["icon-allow-overlap"]=i.marker.allowoverlap,o.extendFlat(M.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),k)){var j=(i.marker||{}).size,I=d(i.textposition,j);o.extendFlat(M.layout,{"text-size":i.textfont.size,"text-anchor":I.anchor,"text-offset":I.offset}),o.extendFlat(M.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return O}},77897:(e,t,a)=>{"use strict";var r=a(34141),o=a(32758),i=a(93327),n=a(43342),s=a(28509),l=a(74652),c=a(69249);e.exports=function(e,t,a,p){function d(a,o){return r.coerce(e,t,c,a,o)}var h=function(e,t,a){var r=a("lon")||[],o=a("lat")||[],i=Math.min(r.length,o.length);return t._length=i,i}(0,t,d);if(h){if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),o.hasLines(t)&&(n(e,t,a,p,d,{noDash:!0}),d("connectgaps")),o.hasMarkers(t)){i(e,t,a,p,d,{noLine:!0}),d("marker.allowoverlap"),d("marker.angle");var u=t.marker;"circle"!==u.symbol&&(r.isArrayOrTypedArray(u.size)&&(u.size=u.size[0]),r.isArrayOrTypedArray(u.color)&&(u.color=u.color[0]))}o.hasText(t)&&s(e,t,p,d,{noSelect:!0}),d("fill"),"none"!==t.fill&&l(e,t,a,d),r.coerceSelectionMarkerOpacity(t,d)}else t.visible=!1}},39934:e=>{"use strict";e.exports=function(e,t){return e.lon=t.lon,e.lat=t.lat,e}},28591:(e,t,a)=>{"use strict";var r=a(34682);e.exports=function(e,t,a){var o={},i=a[t.subplot]._subplot.mockAxis,n=e.lonlat;return o.lonLabel=r.tickText(i,i.c2l(n[0]),!0).text,o.latLabel=r.tickText(i,i.c2l(n[1]),!0).text,o}},18191:(e,t,a)=>{"use strict";var r=a(87529),o=a(34141),i=a(11883),n=o.fillText,s=a(45020).BADNUM;e.exports=function(e,t,a){var l=e.cd,c=l[0].trace,p=e.xa,d=e.ya,h=e.subplot,u=360*(t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360)),f=t-u;if(r.getClosest(l,(function(e){var t=e.lonlat;if(t[0]===s)return 1/0;var r=o.modHalf(t[0],360),i=t[1],n=h.project([r,i]),l=n.x-p.c2p([f,i]),c=n.y-d.c2p([r,a]),u=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(l*l+c*c)-u,1-3/u)}),e),!1!==e.index){var y=l[e.index],m=y.lonlat,x=[o.modHalf(m[0],360)+u,m[1]],v=p.c2p(x),g=d.c2p(x),b=y.mrc||1;e.x0=v-b,e.x1=v+b,e.y0=g-b,e.y1=g+b;var w={};w[c.subplot]={_subplot:h};var T=c._module.formatLabels(y,c,w);return e.lonLabel=T.lonLabel,e.latLabel=T.latLabel,e.color=i(c,y),e.extraText=function(e,t,a){if(!e.hovertemplate){var r=(t.hi||e.hoverinfo).split("+"),o=-1!==r.indexOf("all"),i=-1!==r.indexOf("lon"),s=-1!==r.indexOf("lat"),l=t.lonlat,c=[];return o||i&&s?c.push("("+p(l[0])+", "+p(l[1])+")"):i?c.push(a.lon+p(l[0])):s&&c.push(a.lat+p(l[1])),(o||-1!==r.indexOf("text"))&&n(t,e,c),c.join("<br>")}function p(e){return e+""}}(c,y,l[0].t.labels),e.hovertemplate=c.hovertemplate,[e]}}},3871:(e,t,a)=>{"use strict";e.exports={attributes:a(69249),supplyDefaults:a(77897),colorbar:a(62280),formatLabels:a(28591),calc:a(89068),plot:a(7484),hoverPoints:a(18191),eventData:a(39934),selectPoints:a(73512),styleOnSelect:function(e,t){t&&t[0].trace._glTrace.update(t)},moduleType:"trace",name:"scattermapbox",basePlotModule:a(90796),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_mapbox",description:["The data visualized as scatter point, lines or marker symbols","on a Mapbox GL geographic map","is provided by longitude/latitude pairs in `lon` and `lat`."].join(" ")}}},7484:(e,t,a)=>{"use strict";var r=a(27191),o=a(54210).traceLayerPrefix,i=["fill","line","circle","symbol"];function n(e,t){this.type="scattermapbox",this.subplot=e,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol"},this.below=null}var s=n.prototype;s.addSource=function(e,t){this.subplot.map.addSource(this.sourceIds[e],{type:"geojson",data:t.geojson})},s.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)},s.addLayer=function(e,t,a){this.subplot.addLayer({type:e,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint},a)},s.update=function(e){var t,a,o,n=this.subplot,s=n.map,l=r(n.gd,e),c=n.belowLookup["trace-"+this.uid];if(c!==this.below){for(t=i.length-1;t>=0;t--)a=i[t],s.removeLayer(this.layerIds[a]);for(t=0;t<i.length;t++)o=l[a=i[t]],this.addLayer(a,o,c);this.below=c}for(t=0;t<i.length;t++)o=l[a=i[t]],n.setOptions(this.layerIds[a],"setLayoutProperty",o.layout),"visible"===o.layout.visibility&&(this.setSourceData(a,o),n.setOptions(this.layerIds[a],"setPaintProperty",o.paint));e[0].trace._glTrace=this},s.dispose=function(){for(var e=this.subplot.map,t=i.length-1;t>=0;t--){var a=i[t];e.removeLayer(this.layerIds[a]),e.removeSource(this.sourceIds[a])}},e.exports=function(e,t){for(var a=t[0].trace,o=new n(e,a.uid),s=r(e.gd,t),l=o.below=e.belowLookup["trace-"+a.uid],c=0;c<i.length;c++){var p=i[c],d=s[p];o.addSource(p,d),o.addLayer(p,d,l)}return t[0].trace._glTrace=o,o}},73512:(e,t,a)=>{"use strict";var r=a(34141),o=a(32758),i=a(45020).BADNUM;e.exports=function(e,t){var a,n=e.cd,s=e.xaxis,l=e.yaxis,c=[],p=n[0].trace;if(!o.hasMarkers(p))return[];if(!1===t)for(a=0;a<n.length;a++)n[a].selected=0;else for(a=0;a<n.length;a++){var d=n[a],h=d.lonlat;if(h[0]!==i){var u=[r.modHalf(h[0],360),h[1]],f=[s.c2p(u),l.c2p(u)];t.contains(f,null,a,e)?(c.push({pointNumber:a,lon:h[0],lat:h[1]}),d.selected=1):d.selected=0}}return c}},48984:(e,t,a)=>{"use strict";var r=a(35924),o=a(45020).BADNUM,i=a(34682),n=a(39764),s=a(77503),l=a(12356),c=a(52006).calcMarkerSize;e.exports=function(e,t){for(var a=e._fullLayout,p=t.subplot,d=a[p].radialaxis,h=a[p].angularaxis,u=d.makeCalcdata(t,"r"),f=h.makeCalcdata(t,"theta"),y=t._length,m=new Array(y),x=0;x<y;x++){var v=u[x],g=f[x],b=m[x]={};r(v)&&r(g)?(b.r=v,b.theta=g):b.r=o}var w=c(t,y);return t._extremes.x=i.findExtremes(d,u,{ppad:w}),n(e,t),s(m,t),l(m,t),m}},24888:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:a(59759),categories:["polar","symbols","showLegend","scatter-like"],attributes:a(31627),supplyDefaults:a(39820).supplyDefaults,colorbar:a(62280),formatLabels:a(7388),calc:a(48984),plot:a(32389),style:a(5049).style,styleOnSelect:a(5049).styleOnSelect,hoverPoints:a(16882).hoverPoints,selectPoints:a(79347),meta:{hrName:"scatter_polar",description:["The scatterpolar trace type encompasses line charts, scatter charts, text charts, and bubble charts","in polar coordinates.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},32389:(e,t,a)=>{"use strict";var r=a(46278),o=a(45020).BADNUM;e.exports=function(e,t,a){for(var i=t.layers.frontplot.select("g.scatterlayer"),n={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},s=t.radialAxis,l=t.angularAxis,c=0;c<a.length;c++)for(var p=a[c],d=0;d<p.length;d++){var h=p[d],u=h.r;if(u===o)h.x=h.y=o;else{var f=s.c2g(u),y=l.c2g(h.theta);h.x=f*Math.cos(y),h.y=f*Math.sin(y)}}r(e,n,a,i)}},11732:(e,t,a)=>{"use strict";var r=a(31627),o=a(45924),i=a(88176).s;e.exports={mode:r.mode,r:r.r,theta:r.theta,r0:r.r0,dr:r.dr,theta0:r.theta0,dtheta:r.dtheta,thetaunit:r.thetaunit,text:r.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:r.hovertext,hovertemplate:r.hovertemplate,line:o.line,connectgaps:o.connectgaps,marker:o.marker,fill:o.fill,fillcolor:o.fillcolor,textposition:o.textposition,textfont:o.textfont,hoverinfo:r.hoverinfo,selected:r.selected,unselected:r.unselected}},61315:(e,t,a)=>{"use strict";var r=a(39764),o=a(52006).calcMarkerSize,i=a(25709),n=a(34682),s=a(90519).TOO_MANY_POINTS;e.exports=function(e,t){var a=e._fullLayout,l=t.subplot,c=a[l].radialaxis,p=a[l].angularaxis,d=t._r=c.makeCalcdata(t,"r"),h=t._theta=p.makeCalcdata(t,"theta"),u=t._length,f={};u<d.length&&(d=d.slice(0,u)),u<h.length&&(h=h.slice(0,u)),f.r=d,f.theta=h,r(e,t);var y,m=f.opts=i.style(e,t);return u<s?y=o(t,u):m.marker&&(y=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),t._extremes.x=n.findExtremes(c,d,{ppad:y}),[{x:!1,y:!1,t:f,trace:t}]}},84862:(e,t,a)=>{"use strict";var r=a(34141),o=a(32758),i=a(39820).handleRThetaDefaults,n=a(93327),s=a(43342),l=a(28509),c=a(74652),p=a(27814).PTS_LINESONLY,d=a(11732);e.exports=function(e,t,a,h){function u(a,o){return r.coerce(e,t,d,a,o)}var f=i(e,t,h,u);f?(u("thetaunit"),u("mode",f<p?"lines+markers":"lines"),u("text"),u("hovertext"),"fills"!==t.hoveron&&u("hovertemplate"),o.hasLines(t)&&(s(e,t,a,h,u),u("connectgaps")),o.hasMarkers(t)&&n(e,t,a,h,u),o.hasText(t)&&(u("texttemplate"),l(e,t,h,u)),u("fill"),"none"!==t.fill&&c(e,t,a,u),r.coerceSelectionMarkerOpacity(t,u)):t.visible=!1}},9395:(e,t,a)=>{"use strict";var r=a(7388);e.exports=function(e,t,a){var o=e.i;return"r"in e||(e.r=t._r[o]),"theta"in e||(e.theta=t._theta[o]),r(e,t,a)}},59399:(e,t,a)=>{"use strict";var r=a(51281),o=a(16882).makeHoverPointText;e.exports={hoverPoints:function(e,t,a,i){var n=e.cd[0].t,s=n.r,l=n.theta,c=r.hoverPoints(e,t,a,i);if(c&&!1!==c[0].index){var p=c[0];if(void 0===p.index)return c;var d=e.subplot,h=p.cd[p.index],u=p.trace;if(h.r=s[p.index],h.theta=l[p.index],d.isPtInside(h))return p.xLabelVal=void 0,p.yLabelVal=void 0,o(h,u,d,p),c}}}},81703:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:a(59759),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:a(11732),supplyDefaults:a(84862),colorbar:a(62280),formatLabels:a(9395),calc:a(61315),plot:a(43658),hoverPoints:a(59399).hoverPoints,selectPoints:a(84634),meta:{hrName:"scatter_polar_gl",description:["The scatterpolargl trace type encompasses line charts, scatter charts, and bubble charts","in polar coordinates using the WebGL plotting engine.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},43658:(e,t,a)=>{"use strict";var r=a(20425),o=a(35924),i=a(69843),n=a(66569),s=a(25709),l=a(34141),c=a(90519).TOO_MANY_POINTS;e.exports=function(e,t,a){if(a.length){var p=t.radialAxis,d=t.angularAxis,h=n(e,t);return a.forEach((function(a){if(a&&a[0]&&a[0].trace){var i,n=a[0],u=n.trace,f=n.t,y=u._length,m=f.r,x=f.theta,v=f.opts,g=m.slice(),b=x.slice();for(i=0;i<m.length;i++)t.isPtInside({r:m[i],theta:x[i]})||(g[i]=NaN,b[i]=NaN);var w=new Array(2*y),T=Array(y),k=Array(y);for(i=0;i<y;i++){var _,S,L=g[i];if(o(L)){var z=p.c2g(L),A=d.c2g(b[i],u.thetaunit);_=z*Math.cos(A),S=z*Math.sin(A)}else _=S=NaN;T[i]=w[2*i]=_,k[i]=w[2*i+1]=S}f.tree=r(w),v.marker&&y>=c&&(v.marker.cluster=f.tree),v.marker&&(v.markerSel.positions=v.markerUnsel.positions=v.marker.positions=w),v.line&&w.length>1&&l.extendFlat(v.line,s.linePositions(e,u,w)),v.text&&(l.extendFlat(v.text,{positions:w},s.textPosition(e,u,v.text,v.marker)),l.extendFlat(v.textSel,{positions:w},s.textPosition(e,u,v.text,v.markerSel)),l.extendFlat(v.textUnsel,{positions:w},s.textPosition(e,u,v.text,v.markerUnsel))),v.fill&&!h.fill2d&&(h.fill2d=!0),v.marker&&!h.scatter2d&&(h.scatter2d=!0),v.line&&!h.line2d&&(h.line2d=!0),v.text&&!h.glText&&(h.glText=!0),h.lineOptions.push(v.line),h.fillOptions.push(v.fill),h.markerOptions.push(v.marker),h.markerSelectedOptions.push(v.markerSel),h.markerUnselectedOptions.push(v.markerUnsel),h.textOptions.push(v.text),h.textSelectedOptions.push(v.textSel),h.textUnselectedOptions.push(v.textUnsel),h.selectBatch.push([]),h.unselectBatch.push([]),f.x=T,f.y=k,f.rawx=T,f.rawy=k,f.r=m,f.theta=x,f.positions=w,f._scene=h,f.index=h.count,h.count++}})),i(e,t,a)}}},96518:(e,t,a)=>{"use strict";var r=a(15451),o=a(85088),i=a(88176).f,n=a(45924),s=a(77212).idRegex,l=a(18882).templatedArray,c=a(94867).extendFlat,p=r.marker,d=p.line,h=c(o("marker.line",{editTypeOverride:"calc"}),{width:c({},d.width,{editType:"calc"}),editType:"calc"}),u=c(o("marker"),{symbol:p.symbol,size:c({},p.size,{editType:"markerSize"}),sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:p.opacity,colorbar:p.colorbar,line:h,editType:"calc"});function f(e){return{valType:"info_array",freeLength:!0,role:"info",editType:"calc",items:{valType:"subplotid",regex:s[e],editType:"plot"},description:["Sets the list of "+e+" axes","corresponding to dimensions of this splom trace.","By default, a splom will match the first N "+e+"axes","where N is the number of input dimensions.","Note that, in case where `diagonal.visible` is false and `showupperhalf`","or `showlowerhalf` is false, this splom trace will generate","one less x-axis and one less y-axis."].join(" ")}}u.color.editType=u.cmin.editType=u.cmax.editType="style",e.exports={dimensions:l("dimension",{visible:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not this dimension is shown on the graph.","Note that even visible false dimension contribute to the","default grid generate by this splom trace."].join(" ")},label:{valType:"string",role:"info",editType:"calc",description:"Sets the label corresponding to this splom dimension."},values:{valType:"data_array",role:"info",editType:"calc+clearAxisTypes",description:"Sets the dimension values to be plotted."},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],role:"info",editType:"calc+clearAxisTypes",description:["Sets the axis type for this dimension's generated","x and y axes.","Note that the axis `type` values set in layout take","precedence over this attribute."].join(" ")},matches:{valType:"boolean",dflt:!1,role:"info",editType:"calc",description:["Determines whether or not the x & y axes generated by this","dimension match.","Equivalent to setting the `matches` axis attribute in the layout","with the correct axis id."].join(" ")},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:c({},n.text,{description:["Sets text elements associated with each (x,y) pair to appear on hover.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates."].join(" ")}),hovertext:c({},n.hovertext,{description:"Same as `text`."}),hovertemplate:i(),marker:u,xaxes:f("x"),yaxes:f("y"),diagonal:{visible:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the diagonal are displayed."].join(" ")},editType:"calc"},showupperhalf:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the upper half","from the diagonal are displayed."].join(" ")},showlowerhalf:{valType:"boolean",role:"info",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the lower half","from the diagonal are displayed."].join(" ")},selected:{marker:n.selected.marker,editType:"calc"},unselected:{marker:n.unselected.marker,editType:"calc"},opacity:n.opacity}},48507:(e,t,a)=>{"use strict";var r=a(47758),o=a(97997),i=a(22706),n=a(67763).a0,s=a(8095),l=a(44790).getFromId,c=a(34682).shouldShowZeroLine,p="splom";function d(e,t,a){for(var r=a.matrixOptions.data.length,o=t._visibleDims,i=a.viewOpts.ranges=new Array(r),n=0;n<o.length;n++){var s=o[n],c=i[n]=new Array(4),p=l(e,t._diag[s][0]);p&&(c[0]=p.r2l(p.range[0]),c[2]=p.r2l(p.range[1]));var d=l(e,t._diag[s][1]);d&&(c[1]=d.r2l(d.range[0]),c[3]=d.r2l(d.range[1]))}a.selectBatch.length||a.unselectBatch.length?a.matrix.update({ranges:i},{ranges:i}):a.matrix.update({ranges:i})}function h(e){var t=e._fullLayout,a=t._glcanvas.data()[0].regl,o=t._splomGrid;o||(o=t._splomGrid=r(a)),o.update(function(e){var t,a=e._fullLayout,r=a._size,o=[0,0,a.width,a.height],i={};function n(e,t,a,r,n,s){var l=t[e+"color"],c=t[e+"width"],p=String(l+c);p in i?i[p].data.push(NaN,NaN,a,r,n,s):i[p]={data:[a,r,n,s],join:"rect",thickness:c,color:l,viewport:o,range:o,overlay:!1}}for(t in a._splomSubplots){var s,l,p=a._plots[t],d=p.xaxis,h=p.yaxis,u=d._gridVals,f=h._gridVals,y=r.b+h.domain[0]*r.h,m=-h._m,x=-m*h.r2l(h.range[0],h.calendar);if(d.showgrid)for(t=0;t<u.length;t++)s=d._offset+d.l2p(u[t].x),n("grid",d,s,y,s,y+h._length);if(h.showgrid)for(t=0;t<f.length;t++)l=y+x+m*f[t].x,n("grid",h,d._offset,l,d._offset+d._length,l);c(e,d,h)&&(s=d._offset+d.l2p(0),n("zeroline",d,s,y,s,y+h._length)),c(e,h,d)&&(l=y+x+0,n("zeroline",h,d._offset,l,d._offset+d._length,l))}var v=[];for(t in i)v.push(i[t]);return v}(e))}e.exports={name:p,attr:s.attr,attrRegex:s.attrRegex,layoutAttributes:s.layoutAttributes,supplyLayoutDefaults:s.supplyLayoutDefaults,drawFramework:s.drawFramework,plot:function(e){var t=e._fullLayout,a=o.getModule(p),r=n(e.calcdata,a)[0];i(e,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(t._hasOnlyLargeSploms&&h(e),a.plot(e,{},r))},drag:function(e){var t=e.calcdata,a=e._fullLayout;a._hasOnlyLargeSploms&&h(e);for(var r=0;r<t.length;r++){var o=t[r][0].trace,i=a._splomScenes[o.uid];"splom"===o.type&&i&&i.matrix&&d(e,o,i)}},updateGrid:h,clean:function(e,t,a,r){var o,i={};if(r._splomScenes){for(o=0;o<e.length;o++){var n=e[o];"splom"===n.type&&(i[n.uid]=1)}for(o=0;o<a.length;o++){var l=a[o];if(!i[l.uid]){var c=r._splomScenes[l.uid];c&&c.destroy&&c.destroy(),r._splomScenes[l.uid]=null,delete r._splomScenes[l.uid]}}}0===Object.keys(r._splomScenes||{}).length&&delete r._splomScenes,r._splomGrid&&!t._hasOnlyLargeSploms&&r._hasOnlyLargeSploms&&(r._splomGrid.destroy(),r._splomGrid=null,delete r._splomGrid),s.clean(e,t,a,r)},updateFx:s.updateFx,toSVG:s.toSVG}},13606:(e,t,a)=>{"use strict";var r=a(34141),o=a(44790),i=a(52006).calcMarkerSize,n=a(52006).calcAxisExpansion,s=a(39764),l=a(25709).markerSelection,c=a(25709).markerStyle,p=a(99517),d=a(45020).BADNUM,h=a(90519).TOO_MANY_POINTS;e.exports=function(e,t){var a,u,f,y,m,x,v=t.dimensions,g=t._length,b={},w=b.cdata=[],T=b.data=[],k=t._visibleDims=[];function _(e,a){for(var o=e.makeCalcdata({v:a.values,vcalendar:t.calendar},"v"),i=0;i<o.length;i++)o[i]=o[i]===d?NaN:o[i];w.push(o),T.push("log"===e.type?r.simpleMap(o,e.c2l):o)}for(a=0;a<v.length;a++)if((f=v[a]).visible){if(y=o.getFromId(e,t._diag[a][0]),m=o.getFromId(e,t._diag[a][1]),y&&m&&y.type!==m.type){r.log("Skipping splom dimension "+a+" with conflicting axis types");continue}y?(_(y,f),m&&"category"===m.type&&(m._categories=y._categories.slice())):_(m,f),k.push(a)}for(s(e,t),r.extendFlat(b,c(t)),x=w.length*g>h?2*(b.sizeAvg||Math.max(b.size,3)):i(t,g),u=0;u<k.length;u++)f=v[a=k[u]],y=o.getFromId(e,t._diag[a][0])||{},m=o.getFromId(e,t._diag[a][1])||{},n(e,t,y,m,w[u],w[u],x);var S=p(e,t);return S.matrix||(S.matrix=!0),S.matrixOptions=b,S.selectedOptions=l(t,t.selected),S.unselectedOptions=l(t,t.unselected),[{x:!1,y:!1,t:{},trace:t}]}},8216:(e,t,a)=>{"use strict";var r=a(34141),o=a(69337),i=a(96518),n=a(32758),s=a(93327),l=a(78312),c=a(78873).isOpenSymbol;function p(e,t){function a(a,o){return r.coerce(e,t,i.dimensions,a,o)}a("label");var o=a("values");o&&o.length?a("visible"):t.visible=!1,a("axis.type"),a("axis.matches")}e.exports=function(e,t,a,d){function h(a,o){return r.coerce(e,t,i,a,o)}var u=o(e,t,{name:"dimensions",handleItemDefaults:p}),f=h("diagonal.visible"),y=h("showupperhalf"),m=h("showlowerhalf");if(l(t,u,"values")&&(f||y||m)){h("text"),h("hovertext"),h("hovertemplate"),s(e,t,a,d,h);var x=c(t.marker.symbol),v=n.isBubble(t);h("marker.line.width",x||v?1:0),function(e,t,a,r){var o,i,n=t.dimensions,s=n.length,l=t.showupperhalf,c=t.showlowerhalf,p=t.diagonal.visible,d=new Array(s),h=new Array(s);for(o=0;o<s;o++){var u=o?o+1:"";d[o]="x"+u,h[o]="y"+u}var f=r("xaxes",d),y=r("yaxes",h),m=t._diag=new Array(s);t._xaxes={},t._yaxes={};var x=[],v=[];function g(e,r,o,i){if(e){var n=e.charAt(0),s=a._splomAxes[n];if(t["_"+n+"axes"][e]=1,i.push(e),!(e in s)){var l=s[e]={};o&&(l.label=o.label||"",o.visible&&o.axis&&(o.axis.type&&(l.type=o.axis.type),o.axis.matches&&(l.matches=r)))}}}var b=!p&&!c,w=!p&&!l;for(t._axesDim={},o=0;o<s;o++){var T=n[o],k=0===o,_=o===s-1,S=k&&b||_&&w?void 0:f[o],L=k&&w||_&&b?void 0:y[o];g(S,L,T,x),g(L,S,T,v),m[o]=[S,L],t._axesDim[S]=o,t._axesDim[L]=o}for(o=0;o<x.length;o++)for(i=0;i<v.length;i++){var z=x[o]+v[i];o>i&&l||o<i&&c?a._splomSubplots[z]=1:o!==i||!p&&c&&l||(a._splomSubplots[z]=1)}(!c||!p&&l&&c)&&(a._splomGridDflt.xside="bottom",a._splomGridDflt.yside="left")}(0,t,d,h),r.coerceSelectionMarkerOpacity(t,h)}else t.visible=!1}},46802:(e,t,a)=>{"use strict";var r=a(34141),o=a(39764),i=a(25709).markerStyle;e.exports=function(e,t){var a=t.trace,n=e._fullLayout._splomScenes[a.uid];if(n){o(e,a),r.extendFlat(n.matrixOptions,i(a));var s=r.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(s,null)}}},53403:(e,t)=>{"use strict";t.getDimIndex=function(e,t){for(var a=t._id,r={x:0,y:1}[a.charAt(0)],o=e._visibleDims,i=0;i<o.length;i++){var n=o[i];if(e._diag[n][r]===a)return i}return!1}},98551:(e,t,a)=>{"use strict";var r=a(53403),o=a(51281).calcHover;e.exports={hoverPoints:function(e,t,a){var i=e.cd[0].trace,n=e.scene.matrixOptions.cdata,s=e.xa,l=e.ya,c=s.c2p(t),p=l.c2p(a),d=e.distance,h=r.getDimIndex(i,s),u=r.getDimIndex(i,l);if(!1===h||!1===u)return[e];for(var f,y,m=n[h],x=n[u],v=d,g=0;g<m.length;g++){var b=m[g],w=x[g],T=s.c2p(b)-c,k=l.c2p(w)-p,_=Math.sqrt(T*T+k*k);_<v&&(v=y=_,f=g)}return e.index=f,e.distance=v,e.dxy=y,void 0===f?[e]:[o(e,m,x,i)]}}},45064:(e,t,a)=>{"use strict";var r=a(97997),o=a(21920);e.exports={moduleType:"trace",name:"splom",basePlotModule:a(48507),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:a(96518),supplyDefaults:a(8216),colorbar:a(62280),calc:a(13606),plot:a(37677),hoverPoints:a(98551).hoverPoints,selectPoints:a(13469),editStyle:a(46802),meta:{description:["Splom traces generate scatter plot matrix visualizations.","Each splom `dimensions` items correspond to a generated axis.","Values for each of those dimensions are set in `dimensions[i].values`.","Splom traces support all `scattergl` marker style attributes.","Specify `layout.grid` attributes and/or layout x-axis and y-axis attributes","for more control over the axis positioning and style. "].join(" ")}},r.register(o)},37677:(e,t,a)=>{"use strict";var r=a(65925),o=a(34141),i=a(44790),n=a(6363).selectMode;function s(e,t){var a,s,l,c,p,d=e._fullLayout,h=d._size,u=t.trace,f=t.t,y=d._splomScenes[u.uid],m=y.matrixOptions,x=m.cdata,v=d._glcanvas.data()[0].regl,g=d.dragmode;if(0!==x.length){m.lower=u.showupperhalf,m.upper=u.showlowerhalf,m.diagonal=u.diagonal.visible;var b=u._visibleDims,w=x.length,T=y.viewOpts={};for(T.ranges=new Array(w),T.domains=new Array(w),p=0;p<b.length;p++){l=b[p];var k=T.ranges[p]=new Array(4),_=T.domains[p]=new Array(4);(a=i.getFromId(e,u._diag[l][0]))&&(k[0]=a._rl[0],k[2]=a._rl[1],_[0]=a.domain[0],_[2]=a.domain[1]),(s=i.getFromId(e,u._diag[l][1]))&&(k[1]=s._rl[0],k[3]=s._rl[1],_[1]=s.domain[0],_[3]=s.domain[1])}T.viewport=[h.l,h.b,h.w+h.l,h.h+h.b],!0===y.matrix&&(y.matrix=r(v));var S=d.clickmode.indexOf("select")>-1,L=!0;if(n(g)||u.selectedpoints||S){var z=u._length;if(u.selectedpoints){y.selectBatch=u.selectedpoints;var A=u.selectedpoints,M={};for(l=0;l<A.length;l++)M[A[l]]=!0;var O=[];for(l=0;l<z;l++)M[l]||O.push(l);y.unselectBatch=O}var D=f.xpx=new Array(w),j=f.ypx=new Array(w);for(p=0;p<b.length;p++){if(l=b[p],a=i.getFromId(e,u._diag[l][0]))for(D[p]=new Array(z),c=0;c<z;c++)D[p][c]=a.c2p(x[p][c]);if(s=i.getFromId(e,u._diag[l][1]))for(j[p]=new Array(z),c=0;c<z;c++)j[p][c]=s.c2p(x[p][c])}if(y.selectBatch.length||y.unselectBatch.length){var I=o.extendFlat({},m,y.unselectedOptions,T),C=o.extendFlat({},m,y.selectedOptions,T);y.matrix.update(I,C),L=!1}}else f.xpx=f.ypx=null;if(L){var P=o.extendFlat({},m,T);y.matrix.update(P,null)}}}e.exports=function(e,t,a){if(a.length)for(var r=0;r<a.length;r++)s(e,a[r][0])}},99517:(e,t,a)=>{"use strict";var r=a(34141);e.exports=function(e,t){var a=e._fullLayout,o=t.uid,i=a._splomScenes;i||(i=a._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},s=i[t.uid];return s||((s=i[o]=r.extendFlat({},n,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){s.matrix&&s.matrix.draw&&(s.selectBatch.length||s.unselectBatch.length?s.matrix.draw(s.unselectBatch,s.selectBatch):s.matrix.draw()),s.dirty=!1},s.destroy=function(){s.matrix&&s.matrix.destroy&&s.matrix.destroy(),s.matrixOptions=null,s.selectBatch=null,s.unselectBatch=null,s=null}),s.dirty||r.extendFlat(s,n),s}},13469:(e,t,a)=>{"use strict";var r=a(34141),o=a(32758),i=a(53403);e.exports=function(e,t){var a=e.cd,n=a[0].trace,s=a[0].t,l=e.scene,c=l.matrixOptions.cdata,p=e.xaxis,d=e.yaxis,h=[];if(!l)return h;var u=!o.hasMarkers(n)&&!o.hasText(n);if(!0!==n.visible||u)return h;var f=i.getDimIndex(n,p),y=i.getDimIndex(n,d);if(!1===f||!1===y)return h;var m=s.xpx[f],x=s.ypx[y],v=c[f],g=c[y],b=[],w=[];if(!1!==t&&!t.degenerate)for(var T=0;T<v.length;T++)t.contains([m[T],x[T]],null,T,e)?(b.push(T),h.push({pointNumber:T,x:v[T],y:g[T]})):w.push(T);var k=l.matrixOptions;return b.length||w.length?l.selectBatch.length||l.unselectBatch.length||l.matrix.update(l.unselectedOptions,r.extendFlat({},k,l.selectedOptions,l.viewOpts)):l.matrix.update(k,null),l.selectBatch=b,l.unselectBatch=w,h}},18257:(e,t,a)=>{"use strict";var r=a(79648);t.name="sunburst",t.plot=function(e,a,o,i){r.plotBasePlot(t.name,e,a,o,i)},t.clean=function(e,a,o,i){r.cleanBasePlot(t.name,e,a,o,i)}},5182:(e,t,a)=>{"use strict";var r=a(34141),o=a(41219),i=a(72910).c,n=a(58061).handleText,s=a(59430),l=s.hasColorscale,c=s.handleDefaults;e.exports=function(e,t,a,s){function p(a,i){return r.coerce(e,t,o,a,i)}var d=p("labels"),h=p("parents");if(d&&d.length&&h&&h.length){var u=p("values");u&&u.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("marker.line.width")&&p("marker.line.color",s.paper_bgcolor),p("marker.colors");var f=t._hasColorscale=l(e,"marker","colors")||(e.marker||{}).coloraxis;f&&c(e,t,s,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",f?1:.7);var y=p("text");p("texttemplate"),t.texttemplate||p("textinfo",Array.isArray(y)?"text+label":"label"),p("hovertext"),p("hovertemplate"),n(e,t,s,p,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("insidetextorientation"),i(t,s,p),t._length=null}else t.visible=!1}},30653:(e,t,a)=>{"use strict";e.exports={moduleType:"trace",name:"sunburst",basePlotModule:a(18257),categories:[],animatable:!0,attributes:a(41219),layoutAttributes:a(68867),supplyDefaults:a(5182),supplyLayoutDefaults:a(86282),calc:a(80683).calc,crossTraceCalc:a(80683).crossTraceCalc,plot:a(50972).plot,style:a(92413).style,colorbar:a(62280),meta:{description:["Visualize hierarchal data spanning outward radially from root to leaves.","The sunburst sectors are determined by the entries in *labels* or *ids*","and in *parents*."].join(" ")}}},68867:e=>{"use strict";e.exports={sunburstcolorway:{valType:"colorlist",role:"style",editType:"calc",description:["Sets the default sunburst slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendsunburstcolors`."].join(" ")},extendsunburstcolors:{valType:"boolean",dflt:!0,role:"style",editType:"calc",description:["If `true`, the sunburst slice colors (whether given by `sunburstcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},86282:(e,t,a)=>{"use strict";var r=a(34141),o=a(68867);e.exports=function(e,t){function a(a,i){return r.coerce(e,t,o,a,i)}a("sunburstcolorway",t.colorway),a("extendsunburstcolors")}},51029:(e,t,a)=>{"use strict";var r=a(85088),o=a(49637),i=a(71698),n=a(85485),s=a(94867).extendFlat,l=a(15716).overrideAll,c=e.exports=l(s({x:o.x,y:o.y,z:o.z,value:o.value,isomin:o.isomin,isomax:o.isomax,surface:o.surface,spaceframe:{show:{valType:"boolean",role:"info",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",role:"style",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 1 meaning that they are entirely shaded. Applying a `fill` ratio less","than one would allow the creation of openings parallel to the edges."].join(" ")}},slices:o.slices,caps:o.caps,text:o.text,hovertext:o.hovertext,hovertemplate:o.hovertemplate},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:o.colorbar,opacity:o.opacity,opacityscale:i.opacityscale,lightposition:o.lightposition,lighting:o.lighting,flatshading:o.flatshading,contour:o.contour,hoverinfo:s({},n.hoverinfo),showlegend:s({},n.showlegend,{dflt:!1})}),"calc","nested");c.x.editType=c.y.editType=c.z.editType=c.value.editType="calc+clearAxisTypes",c.transforms=void 0},70777:(e,t,a)=>{"use strict";var r=a(587),o=a(72106).parseColorScale,i=a(59993),n=a(59430).extractOpts,s=a(98619),l=a(35631).findNearestOnAxis,c=a(35631).generateIsoMeshes;function p(e,t,a){this.scene=e,this.uid=a,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var d=p.prototype;d.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,a=this.data._meshX[t],r=this.data._meshY[t],o=this.data._meshZ[t],i=this.data._Ys.length,n=this.data._Zs.length,s=l(a,this.data._Xs).id,c=l(r,this.data._Ys).id,p=l(o,this.data._Zs).id,d=e.index=p+n*c+n*i*s;e.traceCoordinate=[this.data._meshX[d],this.data._meshY[d],this.data._meshZ[d],this.data._value[d]];var h=this.data.hovertext||this.data.text;return Array.isArray(h)&&void 0!==h[d]?e.textLabel=h[d]:h&&(e.textLabel=h),!0}},d.update=function(e){var t=this.scene,a=t.fullSceneLayout;function r(e,t,a,r){return t.map((function(t){return e.d2l(t,0,r)*a}))}this.data=c(e);var l={positions:s(r(a.xaxis,e._meshX,t.dataScale[0],e.xcalendar),r(a.yaxis,e._meshY,t.dataScale[1],e.ycalendar),r(a.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),cells:s(e._meshI,e._meshJ,e._meshK),lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,opacityscale:e.opacityscale,contourEnable:e.contour.show,contourColor:i(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},p=n(e);l.vertexIntensity=e._meshIntensity,l.vertexIntensityBounds=[p.min,p.max],l.colormap=o(e),this.mesh.update(l)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},e.exports=function(e,t){var a=e.glplot.gl,o=r({gl:a}),i=new p(e,o,t.uid);return o._trace=i,i.update(t),e.glplot.add(o),i}},21100:(e,t,a)=>{"use strict";var r=a(34141),o=a(51029),i=a(43337).supplyIsoDefaults,n=a(9050).opacityscaleDefaults;e.exports=function(e,t,a,s){function l(a,i){return r.coerce(e,t,o,a,i)}i(e,t,a,s,l),n(e,t,s,l)}},70182:(e,t,a)=>{"use strict";e.exports={attributes:a(51029),supplyDefaults:a(21100),calc:a(22971),colorbar:{min:"cmin",max:"cmax"},plot:a(70777),moduleType:"trace",name:"volume",basePlotModule:a(20883),categories:["gl3d","showLegend"],meta:{description:["Draws volume trace between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}},78875:(e,t,a)=>{"use strict";var r=a(67855),o=a(15451).line,i=a(85485),n=a(88176).f,s=a(88176).s,l=a(72397),c=a(94867).extendFlat,p=a(57597);function d(e){return{marker:{color:c({},r.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+e+" values."}),line:{color:c({},r.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+e+" values."}),width:c({},r.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+e+" values."}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],role:"info",editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,role:"info",editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,hovertext:r.hovertext,hovertemplate:n({},{keys:l.eventDataKeys}),hoverinfo:c({},i.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],role:"info",editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:s({editType:"plot"},{keys:l.eventDataKeys.concat(["label"])}),text:r.text,textposition:r.textposition,insidetextanchor:r.insidetextanchor,textangle:r.textangle,textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:r.orientation,offset:r.offset,width:r.width,increasing:d("increasing"),decreasing:d("decreasing"),totals:d("intermediate sums and total"),connector:{line:{color:c({},o.color,{dflt:p.defaultLine}),width:c({},o.width,{editType:"plot"}),dash:o.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",role:"info",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,role:"info",editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},10967:(e,t,a)=>{"use strict";var r=a(34682),o=a(34141).mergeArray,i=a(12356),n=a(45020).BADNUM;function s(e){return"a"===e||"absolute"===e}function l(e){return"t"===e||"total"===e}e.exports=function(e,t){var a,c,p=r.getFromId(e,t.xaxis||"x"),d=r.getFromId(e,t.yaxis||"y");"h"===t.orientation?(a=p.makeCalcdata(t,"x"),c=d.makeCalcdata(t,"y")):(a=d.makeCalcdata(t,"y"),c=p.makeCalcdata(t,"x"));for(var h,u=Math.min(c.length,a.length),f=new Array(u),y=0,m=!1,x=0;x<u;x++){var v=a[x]||0,g=!1;(a[x]!==n||l(t.measure[x])||s(t.measure[x]))&&x+1<u&&(a[x+1]!==n||l(t.measure[x+1])||s(t.measure[x+1]))&&(g=!0);var b=f[x]={i:x,p:c[x],s:v,rawS:v,cNext:g};s(t.measure[x])?(y=b.s,b.isSum=!0,b.dir="totals",b.s=y):l(t.measure[x])?(b.isSum=!0,b.dir="totals",b.s=y):(b.isSum=!1,b.dir=b.rawS<0?"decreasing":"increasing",h=b.s,b.s=y+h,y+=h),"totals"===b.dir&&(m=!0),t.ids&&(b.id=String(t.ids[x])),b.v=(t.base||0)+y}return f.length&&(f[0].hasTotals=m),o(t.text,f,"tx"),o(t.hovertext,f,"htx"),i(f,t),f}},72397:e=>{"use strict";e.exports={eventDataKeys:["initial","delta","final"]}},11900:(e,t,a)=>{"use strict";var r=a(55023).setGroupPositions;e.exports=function(e,t){var a,o,i=e._fullLayout,n=e._fullData,s=e.calcdata,l=t.xaxis,c=t.yaxis,p=[],d=[],h=[];for(o=0;o<n.length;o++){var u=n[o];!0===u.visible&&u.xaxis===l._id&&u.yaxis===c._id&&"waterfall"===u.type&&(a=s[o],"h"===u.orientation?h.push(a):d.push(a),p.push(a))}var f={mode:i.waterfallmode,norm:i.waterfallnorm,gap:i.waterfallgap,groupgap:i.waterfallgroupgap};for(r(e,l,c,d,f),r(e,c,l,h,f),o=0;o<p.length;o++){a=p[o];for(var y=0;y<a.length;y++){var m=a[y];!1===m.isSum&&(m.s0+=0===y?0:a[y-1].s),y+1<a.length&&(a[y].nextP0=a[y+1].p0,a[y].nextS0=a[y+1].s0)}}}},59449:(e,t,a)=>{"use strict";var r=a(34141),o=a(58061).handleGroupingDefaults,i=a(58061).handleText,n=a(73978),s=a(78875),l=a(57597),c=a(16639),p=c.INCREASING.COLOR,d=c.DECREASING.COLOR;function h(e,t,a){e(t+".marker.color",a),e(t+".marker.line.color",l.defaultLine),e(t+".marker.line.width")}e.exports={supplyDefaults:function(e,t,a,o){function l(a,o){return r.coerce(e,t,s,a,o)}if(n(e,t,o,l)){l("measure"),l("orientation",t.x&&!t.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var c=l("textposition");i(e,t,o,l,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==t.textposition&&(l("texttemplate"),t.texttemplate||l("textinfo")),h(l,"increasing",p),h(l,"decreasing",d),h(l,"totals","#4499FF"),l("connector.visible")&&(l("connector.mode"),l("connector.line.width")&&(l("connector.line.color"),l("connector.line.dash")))}else t.visible=!1},crossTraceDefaults:function(e,t){var a,i;function n(e){return r.coerce(i._input,i,s,e)}if("group"===t.waterfallmode)for(var l=0;l<e.length;l++)a=(i=e[l])._input,o(a,i,t,n)}}},5979:e=>{"use strict";e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"initial"in t&&(e.initial=t.initial),"delta"in t&&(e.delta=t.delta),"final"in t&&(e.final=t.final),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},32190:(e,t,a)=>{"use strict";var r=a(34682).hoverLabelText,o=a(57597).opacity,i=a(99921).hoverOnBars,n=a(16639),s=n.INCREASING.SYMBOL,l=n.DECREASING.SYMBOL;e.exports=function(e,t,a,n){var c=i(e,t,a,n);if(c){var p=c.cd,d=p[0].trace,h="h"===d.orientation,u=h?e.xa:e.ya,f=p[c.index],y=f.isSum?f.b+f.s:f.rawS;if(!f.isSum){c.initial=f.b+f.s-y,c.delta=y,c.final=c.initial+c.delta;var m=T(Math.abs(c.delta));c.deltaLabel=y<0?"("+m+")":m,c.finalLabel=T(c.final),c.initialLabel=T(c.initial)}var x=f.hi||d.hoverinfo,v=[];if(x&&"none"!==x&&"skip"!==x){var g="all"===x,b=x.split("+"),w=function(e){return g||-1!==b.indexOf(e)};f.isSum||(!w("final")||w(h?"x":"y")||v.push(c.finalLabel),w("delta")&&(y<0?v.push(c.deltaLabel+" "+l):v.push(c.deltaLabel+" "+s)),w("initial")&&v.push("Initial: "+c.initialLabel))}return v.length&&(c.extraText=v.join("<br>")),c.color=function(e,t){var a=e[t.dir].marker,r=a.color,i=a.line.color,n=a.line.width;return o(r)?r:o(i)&&n?i:void 0}(d,f),[c]}function T(e){return r(u,e)}}},98822:(e,t,a)=>{"use strict";e.exports={attributes:a(78875),layoutAttributes:a(80559),supplyDefaults:a(59449).supplyDefaults,crossTraceDefaults:a(59449).crossTraceDefaults,supplyLayoutDefaults:a(28337),calc:a(10967),crossTraceCalc:a(11900),plot:a(53106),style:a(22077).style,hoverPoints:a(32190),eventData:a(5979),selectPoints:a(17155),moduleType:"trace",name:"waterfall",basePlotModule:a(8095),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set th *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},80559:e=>{"use strict";e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",role:"info",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to an *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,role:"style",editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},28337:(e,t,a)=>{"use strict";var r=a(34141),o=a(80559);e.exports=function(e,t,a){var i=!1;function n(a,i){return r.coerce(e,t,o,a,i)}for(var s=0;s<a.length;s++){var l=a[s];if(l.visible&&"waterfall"===l.type){i=!0;break}}i&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},53106:(e,t,a)=>{"use strict";var r=a(15078),o=a(34141),i=a(84474),n=a(45020).BADNUM,s=a(38327),l=a(50001).clearMinTextSize;e.exports=function(e,t,a,c){var p=e._fullLayout;l("waterfall",p),s.plot(e,t,a,c,{mode:p.waterfallmode,norm:p.waterfallmode,gap:p.waterfallgap,groupgap:p.waterfallgroupgap}),function(e,t,a,s){var l=t.xaxis,c=t.yaxis;o.makeTraceGroups(s,a,"trace bars").each((function(a){var s=r.select(this),p=a[0].trace,d=o.ensureSingle(s,"g","lines");if(p.connector&&p.connector.visible){var h="h"===p.orientation,u=p.connector.mode,f=d.selectAll("g.line").data(o.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var y=f.size();f.each((function(a,s){if(s===y-1||a.cNext){var p=function(e,t,a,r){var o=[],i=[],n=r?t:a,s=r?a:t;return o[0]=n.c2p(e.s0,!0),i[0]=s.c2p(e.p0,!0),o[1]=n.c2p(e.s1,!0),i[1]=s.c2p(e.p1,!0),o[2]=n.c2p(e.nextS0,!0),i[2]=s.c2p(e.nextP0,!0),r?[o,i]:[i,o]}(a,l,c,h),d=p[0],f=p[1],m="";d[0]!==n&&f[0]!==n&&d[1]!==n&&f[1]!==n&&("spanning"===u&&!a.isSum&&s>0&&(m+=h?"M"+d[0]+","+f[1]+"V"+f[0]:"M"+d[1]+","+f[0]+"H"+d[0]),"between"!==u&&(a.isSum||s<y-1)&&(m+=h?"M"+d[1]+","+f[0]+"V"+f[1]:"M"+d[0]+","+f[1]+"H"+d[1]),d[2]!==n&&f[2]!==n&&(m+=h?"M"+d[1]+","+f[1]+"V"+f[2]:"M"+d[1]+","+f[1]+"H"+d[2])),""===m&&(m="M0,0Z"),o.ensureSingle(r.select(this),"path").attr("d",m).call(i.setClipUrl,t.layerClipId,e)}}))}else d.remove()}))}(e,t,a,c)}},22077:(e,t,a)=>{"use strict";var r=a(15078),o=a(84474),i=a(57597),n=a(44822).DESELECTDIM,s=a(49888),l=a(50001).resizeText,c=s.styleTextPoints;e.exports={style:function(e,t,a){var s=a||r.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");l(e,s,"waterfall"),s.style("opacity",(function(e){return e[0].trace.opacity})),s.each((function(t){var a=r.select(this),s=t[0].trace;a.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=s[e.dir].marker;r.select(this).call(i.fill,t.color).call(i.stroke,t.line.color).call(o.dashLine,t.line.dash,t.line.width).style("opacity",s.selectedpoints&&!e.selected?n:1)}})),c(a,s,e),a.selectAll(".lines").each((function(){var e=s.connector.line;o.lineGroupStyle(r.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}},54087:(e,t,a)=>{for(var r=a(75),o="undefined"==typeof window?a.g:window,i=["moz","webkit"],n="AnimationFrame",s=o["request"+n],l=o["cancel"+n]||o["cancelRequest"+n],c=0;!s&&c<i.length;c++)s=o[i[c]+"Request"+n],l=o[i[c]+"Cancel"+n]||o[i[c]+"CancelRequest"+n];if(!s||!l){var p=0,d=0,h=[];s=function(e){if(0===h.length){var t=r(),a=Math.max(0,16.666666666666668-(t-p));p=a+t,setTimeout((function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(p)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(a))}return h.push({handle:++d,callback:e,cancelled:!1}),d},l=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){l.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}},24700:(e,t,a)=>{"use strict";var r=a(68032),o=a(669),i=a(42989);e.exports=function(e){e.sort(o);for(var t=e.length,a=0,n=0;n<t;++n){var s=e[n],l=i(s);if(0!==l){if(a>0){var c=e[a-1];if(0===r(s,c)&&i(c)!==l){a-=1;continue}}e[a++]=s}}return e.length=a,e}},65925:(e,t,a)=>{"use strict";const r=a(89882),o=a(89715),i=a(5369),n=a(54087),s=a(73758),l=a(46882),c=a(38582);function p(e,t){if(!(this instanceof p))return new p(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=r(e),this.canvas=this.scatter.canvas}function d(e,t,a){return(null!=e.id?e.id:e)<<16|(255&t)<<8|255&a}function h(e,t,a){let r,o,i,n,s,l,c,p,d=e[t],h=e[a];return d.length>2?(r=d[0],i=d[2],o=d[1],n=d[3]):d.length?(r=o=d[0],i=n=d[1]):(r=d.x,o=d.y,i=d.x+d.width,n=d.y+d.height),h.length>2?(s=h[0],c=h[2],l=h[1],p=h[3]):h.length?(s=l=h[0],c=p=h[1]):(s=h.x,l=h.y,c=h.x+h.width,p=h.y+h.height),[s,o,c,n]}function u(e){if("number"==typeof e)return[e,e,e,e];if(2===e.length)return[e[0],e[1],e[0],e[1]];{let t=l(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}e.exports=p,p.prototype.render=function(...e){return e.length&&this.update(...e),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=n((()=>{this.draw(),this.dirty=!0,this.planned=null}))):(this.draw(),this.dirty=!0,n((()=>{this.dirty=!1}))),this)},p.prototype.update=function(...e){if(!e.length)return;for(let t=0;t<e.length;t++)this.updateItem(t,e[t]);this.traces=this.traces.filter(Boolean);let t=[],a=0;for(let e=0;e<this.traces.length;e++){let r=this.traces[e],o=this.traces[e].passes;for(let e=0;e<o.length;e++)t.push(this.passes[o[e]]);r.passOffset=a,a+=r.passes.length}return this.scatter.update(...t),this},p.prototype.updateItem=function(e,t){let{regl:a}=this;if(null===t)return this.traces[e]=null,this;if(!t)return this;let r,n=o(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),s=this.traces[e]||(this.traces[e]={id:e,buffer:a.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([a._gl.drawingBufferWidth,a._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=n.color&&(s.color=n.color),null!=n.size&&(s.size=n.size),null!=n.marker&&(s.marker=n.marker),null!=n.borderColor&&(s.borderColor=n.borderColor),null!=n.borderSize&&(s.borderSize=n.borderSize),null!=n.opacity&&(s.opacity=n.opacity),n.viewport&&(s.viewport=l(n.viewport)),null!=n.diagonal&&(s.diagonal=n.diagonal),null!=n.upper&&(s.upper=n.upper),null!=n.lower&&(s.lower=n.lower),n.data){s.buffer(c(n.data)),s.columns=n.data.length,s.count=n.data[0].length,s.bounds=[];for(let e=0;e<s.columns;e++)s.bounds[e]=i(n.data[e],1)}n.range&&(s.range=n.range,r=s.range&&"number"!=typeof s.range[0]),n.domain&&(s.domain=n.domain);let p=!1;null!=n.padding&&(Array.isArray(n.padding)&&n.padding.length===s.columns&&"number"==typeof n.padding[n.padding.length-1]?(s.padding=n.padding.map(u),p=!0):s.padding=u(n.padding));let f=s.columns,y=s.count,m=s.viewport.width,x=s.viewport.height,v=s.viewport.x,g=s.viewport.y,b=m/f,w=x/f;s.passes=[];for(let e=0;e<f;e++)for(let t=0;t<f;t++){if(!s.diagonal&&t===e)continue;if(!s.upper&&e>t)continue;if(!s.lower&&e<t)continue;let a=d(s.id,e,t),o=this.passes[a]||(this.passes[a]={});if(n.data&&(n.transpose?o.positions={x:{buffer:s.buffer,offset:t,count:y,stride:f},y:{buffer:s.buffer,offset:e,count:y,stride:f}}:o.positions={x:{buffer:s.buffer,offset:t*y,count:y},y:{buffer:s.buffer,offset:e*y,count:y}},o.bounds=h(s.bounds,e,t)),n.domain||n.viewport||n.data){let a=p?h(s.padding,e,t):s.padding;if(s.domain){let[r,i,n,l]=h(s.domain,e,t);o.viewport=[v+r*m+a[0],g+i*x+a[1],v+n*m-a[2],g+l*x-a[3]]}else o.viewport=[v+t*b+b*a[0],g+e*w+w*a[1],v+(t+1)*b-b*a[2],g+(e+1)*w-w*a[3]]}n.color&&(o.color=s.color),n.size&&(o.size=s.size),n.marker&&(o.marker=s.marker),n.borderSize&&(o.borderSize=s.borderSize),n.borderColor&&(o.borderColor=s.borderColor),n.opacity&&(o.opacity=s.opacity),n.range&&(o.range=r?h(s.range,e,t):s.range||o.bounds),s.passes.push(a)}return this},p.prototype.draw=function(...e){if(e.length){let t=[];for(let a=0;a<e.length;a++)if("number"==typeof e[a]){let{passes:r,passOffset:o}=this.traces[e[a]];t.push(...s(o,o+r.length))}else if(e[a].length){let r=e[a],{passes:o,passOffset:i}=this.traces[a];o=o.map(((e,a)=>{t[i+a]=r}))}this.scatter.draw(...t)}else this.scatter.draw();return this},p.prototype.destroy=function(){return this.traces.forEach((e=>{e.buffer&&e.buffer.destroy&&e.buffer.destroy()})),this.traces=null,this.passes=null,this.scatter.destroy(),this}},83972:(e,t,a)=>{"use strict";e.exports=function(e){return o(r(e))};var r=a(49995),o=a(24700)}}]);